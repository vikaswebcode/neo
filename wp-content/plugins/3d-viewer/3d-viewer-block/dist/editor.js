!function(){"use strict";var e=wp.blocks,t=JSON.parse('{"apiVersion":"1","name":"tdvb/td-viewer","title":"3D Viewer","description":"Display interactive 3D models on the web.","category":"widgets","keywords":["3d","3d model","3d viewer"],"textdomain":"model-viewer","attributes":{"align":{"type":"string","default":""},"cId":{"type":"string","default":""},"alignment":{"type":"string","default":"center"},"sourceType":{"type":"string","default":"upload"},"model":{"type":"object","default":{"id":null,"url":"","title":""}},"modelLink":{"type":"string","default":""},"width":{"type":"string","default":"100%"},"height":{"type":"string","default":"350px"},"isTouchMove":{"type":"boolean","default":true},"isZoom":{"type":"boolean","default":true},"loadingType":{"type":"string","default":"auto"}},"supports":{"align":["wide","full"],"html":false},"example":{"attributes":{"preview":true,"sourceType":"link"}},"editorScript":"file:../dist/editor.js"}'),l=React,n=wp.i18n,r=function(e,t){if(!e)return[];var l=[],n=e.media_details.sizes,r=function(e){var r=t.find((function(t){return t.slug===e}));r&&l.push({label:r.name,value:n[e].source_url})};for(var a in n)r(a);return l},a=wp.blockEditor,o=wp.components,c=function(e){var t=e.className,l=void 0===t?"mt20 mb5":t,n=e.htmlFor,r=e.children;return React.createElement("label",{className:"bPlLabel ".concat(l),htmlFor:n},r)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{value:"px",label:"px",default:e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{value:"%",label:"%",default:e}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{value:"em",label:"em",default:e}};o.__experimentalGradientPicker||o.GradientPicker;var d=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,viewBox:"0 0 448 512"},React.createElement("path",{d:"M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V384c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"})),m=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,viewBox:"0 0 512 512"},React.createElement("path",{d:"M256 48C141.1 48 48 141.1 48 256v40c0 13.3-10.7 24-24 24s-24-10.7-24-24V256C0 114.6 114.6 0 256 0S512 114.6 512 256V400.1c0 48.6-39.4 88-88.1 88L313.6 488c-8.3 14.3-23.8 24-41.6 24H240c-26.5 0-48-21.5-48-48s21.5-48 48-48h32c17.8 0 33.3 9.7 41.6 24l110.4 .1c22.1 0 40-17.9 40-40V256c0-114.9-93.1-208-208-208zM144 208h16c17.7 0 32 14.3 32 32V352c0 17.7-14.3 32-32 32H144c-35.3 0-64-28.7-64-64V272c0-35.3 28.7-64 64-64zm224 0c35.3 0 64 28.7 64 64v48c0 35.3-28.7 64-64 64H352c-17.7 0-32-14.3-32-32V240c0-17.7 14.3-32 32-32h16z"})),p=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,viewBox:"0 0 576 512"},React.createElement("path",{d:"M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"})),v=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,viewBox:"0 0 448 512"},React.createElement("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"}));o.__experimentalGradientPicker||o.GradientPicker;var g=function(e){var t=e.slug,l=e.docsLink;return React.createElement(o.PanelBody,{className:"bPlPanelBody bPlHelpPanel",title:(0,n.__)("Help","bplugins"),initialOpen:!1},React.createElement("div",{className:"helpItems"},l&&React.createElement("a",{href:l,target:"_blank",rel:"noreferrer"},d,React.createElement("p",null,(0,n.__)("Read Documentation","bplugins"))),React.createElement("a",{href:"https://bplugins.com/support",target:"_blank",rel:"noreferrer"},m,React.createElement("p",null,(0,n.__)("Contact Support","bplugins"))),t&&React.createElement("a",{href:"https://wordpress.org/support/plugin/".concat(t,"/reviews/#new-post"),target:"_blank",rel:"noreferrer"},p,React.createElement("p",null,(0,n.__)("Rate Plugin","bplugins"))),React.createElement("a",{href:"https://bplugins.com/products",target:"_blank",rel:"noreferrer"},v,React.createElement("p",null,(0,n.__)("Other Plugins","bplugins")))))};o.__experimentalGradientPicker||o.GradientPicker;var b=wp.data,f=wp.blob;function h(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function w(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?h(Object(l),!0).forEach((function(t){E(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):h(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function E(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}(0,b.withSelect)((function(e,t){var l=t.value;return{image:null!=l&&l.id?e("core").getMedia(null==l?void 0:l.id):null,imageSizes:e("core/block-editor").getSettings().imageSizes}}))((function(e){var t,l=e.className,a=e.value,i=void 0===a?{}:a,u=e.onChange,s=e.image,d=e.imageSizes,m=function(e,t){return u(w(w({},i),{},E({},e,t)))};return React.createElement("div",{className:l},(null==i?void 0:i.url)&&!(0,f.isBlobURL)(null==i?void 0:i.url)&&React.createElement(React.Fragment,null,React.createElement(c,{className:"mb5"},(0,n.__)("Alt Text (Alternative Text):","bplugins")),React.createElement(o.TextControl,{value:null==i?void 0:i.alt,onChange:function(e){return m("alt",e)}})),(null==i?void 0:i.id)&&0!==(null===(t=r(s,d))||void 0===t?void 0:t.length)&&React.createElement(o.PanelRow,null,React.createElement(c,{className:""},(0,n.__)("Select Size:","bplugins")),React.createElement(o.SelectControl,{value:null==i?void 0:i.url,onChange:function(e){return m("url",e)},options:r(s,d)})))})),(0,o.withNotices)((function(e){var t=e.label,l=void 0===t?(0,n.__)(" Image:","bplugins"):t,r=e.icon,o=void 0===r?"format-image":r,c=e.value,i=void 0===c?{}:c,u=e.onChange,s=e.noticeOperations,d=e.noticeUI;return React.createElement(a.MediaPlaceholder,{labels:{title:l},icon:o,allowedTypes:["image"],accept:"image/*",onSelect:function(e){var t=e.id,l=e.url,n=e.alt,r=e.title;return u(w(w({},i),{},{id:t,url:l,alt:n,title:r}))},onSelectURL:function(e){return u(w(w({},i),{},{id:null,url:e,alt:"",title:""}))},onError:function(e){return s.createErrorNotice(e)},notices:d})}));var R=function(e){var t=e.className,l=e.label,r=void 0===l?"":l,i=e.value,u=void 0===i?{}:i,s=e.types,d=void 0===s?["image"]:s,m=e.onChange,p=e.placeholder,v=void 0===p?(0,n.__)("Enter URL","bplugins"):p;return React.createElement("div",{className:t},r&&React.createElement(c,{className:"mb5"},r),React.createElement(o.PanelRow,{className:"bplInlineMediaUpload"},React.createElement(o.TextControl,{value:null==u?void 0:u.url,onChange:function(e){return m({id:null,url:e,alt:"",title:""})},placeholder:v}),React.createElement(a.MediaUploadCheck,null,React.createElement(a.MediaUpload,{allowedTypes:d,onSelect:function(e){var t=e.id,l=e.url,n=e.alt,r=e.title;return m({id:t,url:l,alt:n,title:r})},render:function(e){var t=e.open;return React.createElement(o.Button,{className:"button button-primary",onClick:t,icon:"upload"})}}))))};(0,n.__)("Upload","model-viewer"),(0,n.__)("Link","model-viewer");var _=[{label:(0,n.__)("Auto","model-viewer"),value:"auto"},{label:(0,n.__)("Lazy","model-viewer"),value:"lazy"},{label:(0,n.__)("Eager","model-viewer"),value:"eager"}];function y(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function k(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?y(Object(l),!0).forEach((function(t){P(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):y(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function P(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var O=function(e){var t=e.attributes,l=e.setAttributes,r=t.alignment,d=t.model,m=t.width,p=t.height,v=t.isTouchMove,b=t.isZoom,f=t.loadingType;return React.createElement(React.Fragment,null,React.createElement(a.InspectorControls,null,React.createElement("div",{className:"tdvbInspectorInfo"},"Need more block like this? Checkout the bundle âž¡ ",React.createElement("a",{href:"https://wordpress.org/plugins/b-blocks",target:"_blank",rel:"noopener noreferrer"},"B Blocks")),React.createElement(g,{slug:"3d-viewer-block",docsLink:"https://bblockswp.com/docs/3d-viewer-block"}),React.createElement(o.PanelBody,{className:"bPlPanelBody",title:(0,n.__)("3D Model Settings","model-viewer")},React.createElement(c,{className:""},(0,n.__)("Model Source (.glb or .gltf)","b-blocks")),React.createElement(R,{types:["model/gltf-binary"],value:d,onChange:function(e){return l({model:e})},placeholder:(0,n.__)("Enter Model URL","b-blocks")}),React.createElement(o.Notice,{className:"mt10",status:"warning",isDismissible:!1},(0,n.__)("File upload issue? Please refresh this page once, if you just install the plugin from Gutenberg editor.")),React.createElement(o.__experimentalUnitControl,{className:"mt20",label:(0,n.__)("Width:","model-viewer"),labelPosition:"left",value:m,onChange:function(e){return l({width:e})},units:[i(),u(),s()]}),React.createElement("small",null,(0,n.__)("Keep width 0, to auto width.","model-viewer")),React.createElement(o.__experimentalUnitControl,{className:"mt20",label:(0,n.__)("Height:","model-viewer"),labelPosition:"left",value:p,onChange:function(e){return l({height:e})},units:[i(),u(),s()]}),React.createElement("small",null,(0,n.__)("Keep height 0, to 350px height.","model-viewer")),React.createElement(o.ToggleControl,{className:"mt20",label:(0,n.__)("Controls via mouse/touch","model-viewer"),checked:v,onChange:function(e){return l({isTouchMove:e})}}),v&&React.createElement(React.Fragment,null,React.createElement(o.ToggleControl,{className:"mt20",label:(0,n.__)("Zoom","model-viewer"),checked:b,onChange:function(e){return l({isZoom:e})}}),React.createElement("small",null,(0,n.__)("Enable 'Controls via mouse/touch' to work Zoom!","model-viewer"))),React.createElement(o.PanelRow,{className:"mt20"},React.createElement(c,{className:""},(0,n.__)("Loading Type:","model-viewer")),React.createElement(o.SelectControl,{value:f,onChange:function(e){return l({loadingType:e})},options:_})))),React.createElement(a.BlockControls,null,(null==d?void 0:d.url)&&React.createElement(o.ToolbarGroup,{className:"bPlToolbar"},React.createElement(a.MediaUploadCheck,null,React.createElement(a.MediaUpload,{allowedTypes:["model/gltf-binary"],value:null==d?void 0:d.id,onSelect:function(e){var t=e.id,n=e.url,r=e.title;return l({model:k(k({},d),{},{id:t,url:n,title:r})})},render:function(e){var t=e.open;return React.createElement(o.ToolbarButton,{label:(0,n.__)("Edit 3D Model:","model-viewer"),icon:"edit",onClick:t})}}))),React.createElement(a.AlignmentToolbar,{value:r,onChange:function(e){return l({alignment:e})},describedBy:(0,n.__)("3D Model Alignment"),alignmentControls:[{title:(0,n.__)("3D Model in left","model-viewer"),align:"left",icon:"align-left"},{title:(0,n.__)("3D Model in center","model-viewer"),align:"center",icon:"align-center"},{title:(0,n.__)("3D Model in right","model-viewer"),align:"right",icon:"align-right"}]})))},C=function(e){var t=e.attributes,l=e.clientId,n=t.alignment,r=t.width,a=t.height;return React.createElement("style",{dangerouslySetInnerHTML:{__html:"\n\t\t#tdvb3DViewerBlock-".concat(l," .tdvb3DViewerBlock{\n\t\t\ttext-align: ").concat(n,";\n\t\t}\n\t\t#tdvb3DViewerBlock-").concat(l," .tdvb3DViewerBlock model-viewer{\n\t\t\twidth: ").concat(["0px","0%","0em"].includes(r)?"auto":r,";\n\t\t\theight: ").concat("0px"===a||"0%"===a||"0em"===a?"350px":a,";\n\t\t}\n\t\t").replace(/\s+/g," ")}})},M=function(e,t){var l=e.attributes,n=l.sourceType,r=l.model,a=l.modelLink,o=l.loadingType;return React.createElement("div",{className:"tdvb3DViewerBlock",ref:t},React.createElement("model-viewer",{src:"upload"===n?null==r?void 0:r.url:a,alt:"upload"===n?null==r?void 0:r.title:"","camera-controls":!0,loading:o,"auto-rotate":!0}))},N=(0,l.forwardRef)(M),T=function(e){var t=e.className,r=e.attributes,a=e.setAttributes,o=e.clientId,c=e.isSelected,i=r.sourceType,u=r.model,s=r.modelLink,d=r.isTouchMove,m=r.isZoom,p=r.loadingType;(0,l.useEffect)((function(){o&&a({cId:o.substring(0,10)})}),[o]),(0,l.useEffect)((function(){setTimeout((function(){var e=document.querySelectorAll(".components-panel__body-title button");function t(){var l=this;this.removeEventListener("click",t),e.forEach((function(e){"true"!==e.getAttribute("aria-expanded")||e.isEqualNode(l)||e.click()})),setTimeout((function(){l.addEventListener("click",t)}),500)}e.forEach((function(e){e.addEventListener("click",t)}))}),500)}),[c]);var v=(0,l.useRef)(null),g=function(e,t,l,n){t&&(null==e||e.setAttribute(l,n)),!t&&(null==e||e.removeAttribute(l,n))};return(0,l.useEffect)((function(){v.current.innerHTML="";var e=document.createElement("model-viewer");g(e,!0,"class","tdvbModel"),g(e,!0,"src","upload"===i?null==u?void 0:u.url:s),g(e,!0,"alt","upload"===i?null==u?void 0:u.title:""),g(e,d,"camera-controls",""),g(e,!m,"disable-zoom",""),g(e,!0,"loading",p),g(e,!0,"auto-rotate",""),v.current.appendChild(e)}),[i,u,s,d,m,p]),React.createElement(React.Fragment,null,React.createElement(O,{attributes:r,setAttributes:a,clientId:o}),React.createElement("div",{className:t,id:"tdvb3DViewerBlock-".concat(o)},React.createElement(C,{attributes:r,clientId:o}),"upload"!==i||u.url?"":React.createElement("p",{className:"noModel"},(0,n.__)("Please, upload Model or enter Model Link first!","model-viewer")),React.createElement(N,{attributes:r,ref:v})))},L=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 512 512"},React.createElement("path",{fill:"#4527a4",d:"M68.983,382.642l171.35,98.928a32.082,32.082,0,0,0,32,0l171.352-98.929a32.093,32.093,0,0,0,16-27.713V157.071a32.092,32.092,0,0,0-16-27.713L272.334,30.429a32.086,32.086,0,0,0-32,0L68.983,129.358a32.09,32.09,0,0,0-16,27.713V354.929A32.09,32.09,0,0,0,68.983,382.642ZM272.333,67.38l155.351,89.691V334.449L272.333,246.642ZM256.282,274.327l157.155,88.828-157.1,90.7L99.179,363.125ZM84.983,157.071,240.333,67.38v179.2L84.983,334.39Z"}));(0,e.registerBlockType)(t,{icon:L,edit:T,save:function(){return null}})}();
//# sourceMappingURL=editor.js.map