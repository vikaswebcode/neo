(()=>{"use strict";var e={185:(e,t,a)=>{a.d(t,{Z:()=>E});var l=a(174),n=a.n(l);const r=e=>{let{attributes:t}=e;const{styles:a,uniqueId:n,woo:r,progressBar:o,additional:c}=t,{progressBarColor:i}=a,[s,d]=(0,l.useState)(null);return(0,l.useEffect)((()=>{const e=`\n        #${n} {\n            width: ${a?.width?.desktop||a.width};\n            height: ${a?.height?.desktop||a.height};\n        }\n        #${n} .select {display: none}\n        #${n} model-viewer {\n            background: ${a?.bgColor} ${a?.bgImage?`url(${a?.bgImage})`:" "} no-repeat center center; \n            background-size: cover;\n        }\n        #${n} model-viewer::part(default-progress-bar) {\n             display: ${o?"block":"none"}\n        }\n        @media screen and (max-width: 768px){\n            #${n} {\n                width: ${r?"":`${a?.width.tablet||a.width}`};\n                height: ${a?.height.tablet||a.height};\n            }\n        }\n        @media screen and (max-width: 480px){\n            #${n} {\n                width: ${r?"":`${a?.width.mobile||a.width}`};\n                height: ${a?.height.mobile||a.height};\n            }\n        }\n        #${n} model-viewer::part(default-progress-bar){\n            background: ${i};\n        }\n        ${c?.CSS}\n    `.replaceAll(/\n?\s\s/g,"");d(e)}),[n,a,c,o]),React.createElement("style",null,s)},o=e=>{let{element:t}=e;return React.createElement("svg",{onClick:()=>{t&&t.requestFullscreen()},id:"openBtn",width:"24px",height:"24px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#f2f2f2",className:"bi bi-arrows-fullscreen"},React.createElement("path",{fillRule:"evenodd",d:"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z"}))},c=()=>React.createElement("svg",{id:"closeBtn",onClick:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},className:"sidebar-open",width:"34px",height:"34px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fill:"none",stroke:"#f2f2f2",strokeWidth:"2",d:"M7,7 L17,17 M7,17 L17,7"}));var i=a(19);const s=e=>{let{currentItem:t,setCurrentItem:a,models:l}=e;return n().createElement(n().Fragment,null,n().createElement("div",{className:"slideController"},n().createElement("svg",{fill:"#000000",onClick:()=>a(t>0?t-1:t),className:"arrow-left "+(t>0?"":"disabled"),width:"24px",height:"24px",viewBox:"-78.5 0 512 512",xmlns:"http://www.w3.org/2000/svg"},n().createElement("title",null,"left"),n().createElement("path",{d:"M257 64L291 98 128 262 291 426 257 460 61 262 257 64Z"})),n().createElement("svg",{onClick:()=>a(t<l.length-1?t+1:t),fill:"#000000",className:"arrow-right "+(t<l.length-1?"":"disabled"),width:"24px",height:"24px",viewBox:"-77 0 512 512",xmlns:"http://www.w3.org/2000/svg"},n().createElement("title",null,"right"),n().createElement("path",{d:"M98 460L64 426 227 262 64 98 98 64 294 262 98 460Z"}))))},d=a.p+"public/images/envmaps/fishermans_bastion/posx.jpg",m=a.p+"public/images/envmaps/fishermans_bastion/posy.jpg",u=a.p+"public/images/envmaps/fishermans_bastion/posz.jpg",p=a.p+"public/images/envmaps/fishermans_bastion/negx.jpg",g=a.p+"public/images/envmaps/fishermans_bastion/negy.jpg",w=a.p+"public/images/envmaps/fishermans_bastion/negz.jpg";const v=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e.replace("#",""));return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:parseInt(t[4],16)||255}:null},b=e=>{let{attributes:t,currentItem:a,setCurrentItem:l,isPagination:r}=e;const{multiple:o,woo:c,models:i}=t;return n().createElement("div",null,o&&!c&&r&&n().createElement("div",{className:"slider"},n().createElement("div",{className:"slides"},i.map(((e,t)=>n().createElement("button",{key:t,className:`slide ${t===a?"selected":""} ${e.poster?"":"slide-number"}`,"data-source":e?.modelUrl,"data-poster":e?.poster,onClick:()=>l(t)},e.poster?n().createElement("img",{src:e?.poster}):n().createElement("span",null,t+1)))))))};const h=e=>React.createElement("button",e),f=e=>{const{attributes:t,currentItem:a,setCurrentItem:n,modelSrc:r,setAttributes:o,__:c}=e,{styles:i,models:f,multiple:E,O3DVSettings:R}=t,{isNavigation:y,isPagination:C,camera:_,mouseControl:S}=R,[k,x]=(0,l.useState)(!1),V=(0,l.useRef)(null),P=(0,l.useRef)(null);return(0,l.useEffect)((()=>{if(r)if(P.current?.Destroy(),P.current?.canvas?.remove(),P.current=null,null===P.current){OV.SetExternalLibLocation("../libs");const e=_&&!E?{camera:new OV.Camera(new OV.Coord3D(...Object.values(_.eye)),new OV.Coord3D(...Object.values(_.center)),new OV.Coord3D(...Object.values(_.up)),45)}:{};let t=new OV.EmbeddedViewer(V.current,{...e,backgroundColor:new OV.RGBAColor(255,255,255,255),edgeSettings:new OV.EdgeSettings(!1,new OV.RGBColor(0,0,0),1),environmentSettings:new OV.EnvironmentSettings([d,m,u,p,g,w],!1)});const a=[r];t.LoadModelFromUrlList(a),P.current=t,window.VR=t}else{P.current.LoadModelFromUrlList([r]);const e=new OV.Coord3D(0,0,0);P.current.viewer.SetCamera(new OV.Camera(new OV.Coord3D(0,0,1),e,new OV.Coord3D(0,1,0),45))}return()=>{if(null!==P.current&&null!==V.current&&k){delete P.current.model,P.current.viewer.renderer.resetState(),P.current.viewer.Clear(),P.current.viewer&&delete P.current.viewer;P.current.canvas.getContext("webgl2").getExtension("WEBGL_lose_context").loseContext();const e=P.current.canvas.cloneNode(!0);P.current.canvas.parentNode.replaceChild(e,P.current.canvas),V.current?.removeChild(V.current.children[0]),P.current.canvas?.parentNode?.removeChild(P.current.canvas),P.current.canvas.remove(),P.current=null,x(!1)}}}),[r]),(0,l.useEffect)((()=>{i.bgColor&&"transparent"!==i.bgColor&&P.current?.viewer?.SetBackgroundColor(v(i.bgColor)),setTimeout((()=>{P.current?.viewer?.Resize(V.current.offsetWidth,V.current.offsetHeight)}),10),P.current.viewer.Render()}),[i,r]),(0,l.useEffect)((()=>{window.addEventListener("resize",(()=>{P.current?.viewer?.Resize(V.current?.offsetWidth,V.current?.offsetHeight)}))}),[]),React.createElement(React.Fragment,null,React.createElement("div",{ref:V,role:"img","aria-label":"Canvas showing the model in the 3D Viewer",className:`${S?"":"DMC"} ${P.current?.modelLoader?.inProgress} relative flex  flex-col items-center justify-center p-2 h-72 w-72 border-2 border-black rounded-sm online_3d_viewer`,style:{width:i.width.desktop||i.width,height:i.height.desktop||i.height}},React.createElement(b,{attributes:t,setCurrentItem:n,currentItem:a,isPagination:C}),E&&y&&f.length>1&&React.createElement(s,{currentItem:a,setCurrentItem:n,models:f}),o&&!E&&React.createElement("div",{className:"setDefaultViewContainer"},React.createElement(h,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>{if(P.current){const t=(e=P.current?.viewer?.GetCamera(),JSON.parse(JSON.stringify(e)));o({O3DVSettings:{...R,camera:t}})}var e}},c(_?"Reset Default View":"Set Default View","model-viewer")),_&&React.createElement(React.Fragment,null,React.createElement(h,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>{P.current?.viewer.SetCamera(new OV.Camera(new OV.Coord3D(...Object.values(_.eye)),new OV.Coord3D(...Object.values(_.center)),new OV.Coord3D(...Object.values(_.up)),45))}},c("See Default View","model-viewer")),React.createElement(h,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>o({O3DVSettings:{...R,camera:null}})},c("Remove Default View","model-viewer"))))))},E=e=>{let{attributes:t,__:a,setAttributes:n}=e;const[d,m]=(0,l.useState)(!1),{loadingPercentage:u=!1,uniqueId:p,model:g,models:w,fullscreen:v,variant:b,multiple:h,additional:E,exposure:R,selectedAnimation:y,animation:C,autoRotate:_,autoplay:S,rotateAlongX:k,align:x,woo:V,rotationPerSecond:P,preload:N,isPagination:A,isNavigation:B,zoom:L,currentViewer:O="modelViewer",O3DVSettings:D={}}=t,{isFullscreen:F}=D,[T,I]=(0,l.useState)(0),[M,$]=(0,l.useState)(h?w[T]?.modelUrl:g?.modelUrl),q=(0,l.useRef)(),j=(0,l.useRef)(),U=(0,l.useRef)();(0,l.useEffect)((()=>{$(h?w[T]?.modelUrl:g?.modelUrl)}),[T,h,w,g]),(0,l.useEffect)((()=>{try{new URL(M),m(!0)}catch(e){m(!1)}setTimeout((()=>{(0,i.Z)({animation:C,variant:b,wrapper:q.current?.parentElement})}),10)}),[p,g,w,h,M]),(0,l.useEffect)((()=>{S||q.current?.pause()}),[S]),(0,l.useEffect)((()=>{setTimeout((()=>{if(q.current&&U.current){q.current.animationName=y;U.current.querySelector("select").value=y}}),10)}),[y]),(0,l.useEffect)((()=>{j.current&&(j.current.style.display=b?"inline-block":"none")}),[b]),(0,l.useEffect)((()=>{U.current&&(C&&q.current.loaded?U.current.style.display="inline-block":U.current.style.display="none")}),[C,U]),(0,l.useEffect)((()=>{q.current?.turntableRotation&&q.current.resetTurntableRotation()}),[k]),(0,l.useEffect)((()=>{setTimeout((()=>{if(q.current){const{mouseControl:e,autoplay:a,shadow:l,rotate:n,rotateAlongX:r,rotateAlongY:o}=t;e?q.current.setAttribute("camera-controls",""):q.current.removeAttribute("camera-controls"),a?q.current.setAttribute("autoplay",""):q.current.removeAttribute("autoplay"),l?q.current.setAttribute("shadow-intensity","1"):q.current.removeAttribute("shadow-intensity"),l?q.current.setAttribute("shadow-softness","1"):q.current.removeAttribute("shadow-softness"),_?(q.current.setAttribute("auto-rotate",""),q.current.setAttribute("rotation-per-second",P+"deg")):q.current.removeAttribute("auto-rotate"),n?q.current.setAttribute("camera-orbit",`${r}deg ${o}deg 105%`):q.current.removeAttribute("camera-orbit"),q.current.setAttribute("reveal",N),q.current.dataset.animation=y,q.current.setAttribute("exposure",R),L?q.current.removeAttribute("disable-zoom"):q.current.setAttribute("disable-zoom","")}}),0)}),[p,t]),(0,l.useEffect)((()=>{if(V){const e=document.querySelector(".variations_form .variations select");e?.addEventListener("change",(function(e){const t=w.find((t=>t.product_variant===e.target.value))||w.find((e=>"all"===e.product_variant))||w?.[0];$(t.modelUrl)}))}}),[V]);const z=h?w[0]?.poster:g?.poster;return React.createElement("div",{id:`${p}`,className:`modelViewerBlock b3dviewer align${x} ${V?"woocommerce":""} ${A&&h?"pagination":""}`},React.createElement("div",{id:E?.ID,className:`${E?.Class} b3dviewer-wrapper bp_model_parent `},React.createElement(r,{attributes:t}),M&&d&&React.createElement(React.Fragment,null,"modelViewer"===O?React.createElement("model-viewer",{"camera-controls":!0,ref:q,"data-js-focus-visible":!0,"data-decoder":h?w[0]?.decoder:g?.decoder,poster:z?.replace(/https?:/,window.location.protocol),src:M?.replace(/https?:/,window.location.protocol),alt:"A 3D model"},React.createElement("button",{type:"button",slot:"poster",id:"default-poster","aria-label":"A 3D model",style:{backgroundImage:` url("${z?.replace(/https?:/,window.location.protocol)}")`}}),u&&q.current&&!q.current?.loaded&&React.createElement("div",{className:"percentageWrapper"},React.createElement("div",{className:"overlay"}),React.createElement("span",{className:"percentage"},"0%")),React.createElement("div",{className:"variantWrapper select",ref:j},a("Variant","model-viewer")," ",React.createElement("select",{id:"variant"})),React.createElement("div",{className:"animationWrapper select",ref:U},a("Animations","model-viewer")," ",React.createElement("select",{id:"animations"})),h&&!V&&A&&React.createElement("div",{className:"slider"},React.createElement("div",{className:"slides"},w.map(((e,t)=>React.createElement("button",{key:t,className:`slide ${0===t?"selected":""} ${e.poster?"":"slide-number"}`,"data-source":e?.modelUrl,"data-poster":e?.poster,onClick:()=>I(t)},e.poster?React.createElement("img",{src:e?.poster}):React.createElement("span",null,t+1)))))),h&&B&&w.length>1&&React.createElement(s,{currentItem:T,setCurrentItem:I,models:w})):React.createElement(React.Fragment,null,React.createElement(f,{__:a,setAttributes:n,modelSrc:M,currentItem:T,setCurrentItem:I,model:M,attributes:t}))),""===M&&w[T].poster&&React.createElement(React.Fragment,null,V&&w.length>1&&React.createElement(s,{currentItem:T,setCurrentItem:I,models:w}),React.createElement("img",{src:w[T].poster})),(v&&"modelViewer"===O||"O3DViewer"===O&&F)&&React.createElement(React.Fragment,null,React.createElement(o,{element:document.querySelector(`#${p} .bp_model_parent`)}),React.createElement(c,null))),V&&A&&React.createElement("div",{className:"modelThumbs"},w.map(((e,t)=>React.createElement(React.Fragment,null,e.poster&&React.createElement("img",{className:"thumbsItem "+(t===T?"selected":""),onClick:()=>I(t),src:e.poster}))))))}},19:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(467),n=a(769),r=a(185);window.addEventListener("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/3dModelViewer.default",(function(e,t){const a=e[0].querySelector(".b3dviewer-wrapper.elementor");modelRenderer({animation:!0,variant:!0,wrapper:a})}))})),addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".product-modal-wrap .bp_model_parent");Object.values(e).map((e=>{const t=e.querySelector("#openBtn"),a=e.querySelector("#closeBtn"),l=e.querySelectorAll("model-viewer")||e.querySelectorAll(".online_3d_viewer"),n=e.querySelector(".progress");l.forEach((l=>{const r=new URL(l?.src||l?.getAttribute("src")||l?.getAttribute("model"));if("DIV"===l.tagName)setTimeout((()=>{t.addEventListener("click",(()=>{l.parentNode.classList.add("fullscreen"),window.dispatchEvent(new Event("resize"))})),a.onclick=()=>{l.parentNode.classList.remove("fullscreen"),window.dispatchEvent(new Event("resize"))}}),2e3);else{t?.addEventListener("click",(()=>{const t=e.cloneNode(!0);t.classList.add("fullscreen");const a=t.querySelector("#closeBtn");document.querySelector("body").appendChild(t),a?.addEventListener("click",(()=>{document.querySelector("body").removeChild(t)}))})),r?.protocol!==location?.protocol&&l?.setAttribute("src",r.href.replace(r?.protocol,location?.protocol)),n&&(l?.addEventListener("progress",(e=>{n.innerHTML=parseInt(100*e.detail.totalProgress)+"%"})),l?.addEventListener("load",(()=>{setTimeout((()=>{n.style.display="none"}),500)})));const a=function(e){try{return JSON.parse(e)}catch(e){console.warn(e.message)}return e}(l.dataset.items),o=document.querySelector(".variations_form .variations select");l.dataset.items="",o?.addEventListener("change",(function(e){const t=a.find((t=>t.product_variant===e.target.value))||a.find((e=>"all"===e.product_variant))||a?.[0];l.setAttribute("src",t.model_src.replace(/https?:/,location?.protocol))})),document.querySelectorAll(".variable-items-wrapper li")?.forEach((e=>e.addEventListener("click",(function(){const t=a.find((t=>t.product_variant===e.dataset?.value))||a.find((e=>"all"===e.product_variant))||a?.[0];l.setAttribute("src",t.model_src.replace(t.model_src?.protocol,location?.protocol))}))));const c=document.querySelector(".product-modal-wrap");if(c&&!c?.nextElementSibling?.classList?.contains("entry-summary")){c.style.width="100%";const e=document.querySelector(".showcase-inner .product-information");if(e){const t=c.querySelector("model-viewer");t&&(t.style.height=e.offsetHeight+"px")}}}}))}));let t=document.querySelectorAll(".bp3dmodel-carousel");Object.values(t).map((e=>{1==e.dataset.fullscreen&&function(){const e=document.querySelectorAll(".bp_model_gallery"),t=document.createElement("div");Object.values(e).map((e=>{const a=e.querySelector("model-viewer"),l=document.createElement("div");l.classList.add("bp3d-model-buttons"),l.innerHTML='<svg id="openBtn" width="24px" height="24px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#f2f2f2" class="bi bi-arrows-fullscreen"> <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z"/> </svg> <svg id="closeBtn" width="34px" height="34px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path fill="none" stroke="#f2f2f2" stroke-width="2" d="M7,7 L17,17 M7,17 L17,7"/> </svg>',a.parentNode.appendChild(l);const n=a.parentNode.cloneNode(!0);n.style.display="none",n.onclick=function(e){e.preventDefault()};const r=n.querySelector("model-viewer");r.style.width="100%",r.style.height="100%",r.style.maxHeight="100%",t.appendChild(n);const o=l.querySelector("#openBtn"),c=n.querySelector("#closeBtn");o.onclick=()=>{n.classList.add("fullscreen"),n.style.display="block"},c.onclick=e=>{e.preventDefault(),n.classList.remove("fullscreen"),n.style.display="none"}}));document.querySelector("body").appendChild(t)}()}))})),jQuery(document).ready((function(e){e(".bp3dmodel-carousel")?.[0]?.slick({slidesToShow:1,slidesToScroll:1,arrows:!0})}));document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".b3dviewer-wrapper:not(.elementor)");Object.values(e).map((e=>{i({animation:!0,variant:!0,wrapper:e})}))}));const o=e=>{let{attributes:t}=e;if(t)return React.createElement(r.Z,{attributes:t,__:function(e){return e}})};window.addEventListener("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/3dModelViewer.default",(function(e,t){const a=e[0]?.querySelectorAll(".modelViewerBlock");a?.forEach((e=>{const t={...e.dataset}||{};setTimeout((()=>{Object.keys(e.dataset).map((t=>delete e.dataset[t]))}),10);const a=(0,n.Z)(t.attributes);if(a){const n=t.selector;if(n&&document.querySelector(n)&&(e=document.querySelector(n)).setAttribute("style",`width:${e.offsetWidth}px !important;height:350px`),!a?.currentViewer||"modelViewer"===a.currentViewer){e.setAttribute("data-rendered","true"),(0,l.render)(React.createElement(o,{attributes:a}),e);if(!document.getElementById("bp3d-model-viewer-js")){const e=document.createElement("script");e.type="module",e.id="bp3d-model-viewer-js",e.src=window.bp3dBlock?.modelViewerSrc,document.head.appendChild(e)}}if("O3DViewer"===a.currentViewer)if("undefined"==typeof OV){const t=document.getElementById("bp3d-o3dviewer-js");if(t)t.addEventListener("load",(()=>{(0,l.render)(React.createElement(o,{attributes:a}),e)}));else{const t=document.createElement("script");t.id="bp3d-o3dviewer-js",t.src=window.bp3dBlock?.o3dviewerSrc,document.head.appendChild(t),t.addEventListener("load",(()=>{(0,l.render)(React.createElement(o,{attributes:a}),e)}))}}else(0,l.render)(React.createElement(o,{attributes:a}),e)}}))}))}));const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e?.parentElement){l&&(e.parentElement.style.display="inline-block"),e.innerHTML="",!t.length&&e.parentElement&&(window.location.href.includes("wp-admin")?t[0]="not available":e.parentElement.style.display="none");for(const l of t){const t=document.createElement("option");t.value=l,t.textContent=l,e.appendChild(t),l===a&&(t.selected=!0)}}};function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{animation:t=!1,variant:a=!1,wrapper:l}=e;if(!l)return;const n=l.querySelector("#openBtn"),r=l.querySelector("#closeBtn");n&&n.addEventListener("click",(()=>{l.classList.add("fullscreen")})),r&&r.addEventListener("click",(()=>{l.classList.remove("fullscreen")}));const o=l.querySelector("model-viewer");if(!o)return!1;if(o.src)try{const e=new URL(o.src);e?.protocol!==window.location.protocol&&(o.src=e.href.replace(e.protocol,window.location.protocol))}catch(e){console.warn(e.message,o.src)}const i=o.dataset.animation,s=l.querySelector("#variant"),d=l.querySelector("#animations"),m=l.querySelector(".percentageWrapper"),u=m?.querySelector(".percentage");"interaction"===o.reveal&&m&&(m.style.display="none"),o.addEventListener("load",(()=>{c(s,o.availableVariants,"",a),c(d,o.availableAnimations,i,t),o.animationName=i,setTimeout((()=>{m&&(m.style.display="none")}),100)})),u&&o.addEventListener("progress",(e=>{m.style.display="block",u.innerHTML=parseInt(100*e.detail.totalProgress)+"%"})),s&&s.addEventListener("input",(e=>{o.variantName=e.target.value})),d&&d.addEventListener("input",(e=>{o.animationName=e.target.value}));const p=l.querySelectorAll(".slide");for(const e of p)e.addEventListener("click",(t=>{t.preventDefault(),o.src=e?.dataset?.source,o.poster=e?.dataset?.poster,p.forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected"),s&&(s.innerHTML="")}));document.querySelector(".slider")?.addEventListener("beforexrselect",(e=>{e.preventDefault()}))}window.modelRenderer=i;const s=i},769:(e,t,a)=>{a.d(t,{Z:()=>l});const l=e=>{let t=null;try{t=JSON.parse(e)}catch(e){console.warn(e.message)}return t}},174:e=>{e.exports=React},467:e=>{e.exports=ReactDOM}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var l=t.getElementsByTagName("script");if(l.length)for(var n=l.length-1;n>-1&&!e;)e=l[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{const e=JSON.parse('{"apiVersion":"1","name":"b3dviewer/modelviewer","title":"Model Viewer","description":"","category":"design","icon":"visibility","keywords":["3D Viewer","3D Embedder","3D Model Viewer"],"textdomain":"model-viewer","attributes":{"uniqueId":{"type":"string","default":"uniqueId"},"multiple":{"type":"boolean","default":false},"model":{"type":"object","default":{}},"models":{"type":"array","default":[{"`modelUrl`":"","poster":"","useDecoder":"none"}]},"currentViewer":{"type":"string","default":"modelViewer"},"O3DVSettings":{"type":"object","default":{"isFullscreen":true,"isPagination":false,"isNavigation":false,"camera":null,"mouseControl":true}},"lazyLoad":{"type":"boolean","default":true},"preload":{"type":"string","default":"auto"},"autoplay":{"type":"boolean","default":true},"shadow":{"type":"boolean","default":true},"rotate":{"type":"boolean","default":false},"autoRotate":{"type":"boolean","default":false},"zoom":{"type":"boolean","default":true},"isPagination":{"type":"boolean","default":false},"isNavigation":{"type":"boolean","default":true},"rotationPerSecond":{"type":"number","default":20},"mouseControl":{"type":"boolean","default":true},"fullscreen":{"type":"boolean","default":true},"variant":{"type":"boolean","default":false},"loadingPercentage":{"type":"boolean","default":false},"progressBar":{"type":"boolean","default":true},"rotateAlongX":{"type":"number","default":"0"},"rotateAlongY":{"type":"number","default":75},"exposure":{"type":"number","default":1},"styles":{"type":"object","default":{"width":"100%","height":"300px","bgColor":"#ffffff","progressBarColor":"#666"}},"stylesheet":{"type":"string"},"additional":{"type":"object","default":{"ID":"","Class":"","CSS":""}},"animation":{"type":"boolean","default":false},"woo":{"type":"boolean","default":false},"selectedAnimation":{"type":"string","default":""}},"supports":{"html":false,"lock":false,"align":["left","right","center"]},"example":{"attributes":{"preview":true}},"style":["file:./../../dist/3d-viewer-frontend.css"],"viewScript":["file:./../../dist/3d-viewer-frontend.js"]}'),t=wp.i18n,l=wp.element,n=wp.data,r=wp.components;var o=a(174),c=a.n(o);const{__:i}=wp.i18n,{Fragment:s}=wp.element,{MediaUpload:d,MediaUploadCheck:m}=wp.blockEditor,{Button:u,PanelRow:p,TextControl:g}=wp.components;const w=function(e){let{value:t,type:a=[],onSelect:l,placeholder:n,label:r}=e;return React.createElement("div",{className:"bMediaUpload"},React.createElement(s,null,r&&React.createElement("label",null,r),React.createElement(p,{className:"width-100"},React.createElement(m,{fallback:React.createElement(u,{icon:"upload",className:"button button-primary",onClick:()=>{const e=wp.media({button:{text:"Select"},multiple:!1});e.open(),e.on("select",(()=>{var t=e.state().get("selection").first().toJSON();l(t.url)}))}})},React.createElement(d,{allowedTypes:a,onSelect:e=>l(e.url),render:e=>{let{open:t}=e;return React.createElement(u,{className:"button button-primary",onClick:t,icon:"upload"})}})),React.createElement(g,{value:t,onChange:e=>l(e),placeholder:n}))))},{useState:v,Fragment:b}=wp.element,{Dropdown:h,ColorPicker:f,Button:E}=wp.components,{__:R}=wp.i18n,{Fragment:y}=wp.element,{MediaUpload:C,MediaUploadCheck:_}=wp.blockEditor,{Button:S,PanelRow:k,TextControl:x}=wp.components;function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},V.apply(this,arguments)}const P=e=>{let{label:t,className:a,onChange:l,onSelect:n,media:r=!1,isPremium:o=!1,Component:c,setOpen:i=(()=>{}),...s}=e;return React.createElement(c,V({className:`${a} ${o?"":"bplProIdentifier"}`,label:(e=>o?e:React.createElement(React.Fragment,null,React.createElement("span",{className:"bplOpacity75"},e)," ",React.createElement("span",{className:"labelPro"},"Pro")))(t),onChange:e=>o?r?n(e):l(e):i(!0),isPremium:o},s))},N=e=>{let{attributes:a,setAttributes:l}=e;const{model:n,models:o,multiple:c,isPremium:i,currentViewer:s,O3DVSettings:d}=a,m=(e,t,a)=>{const n=[...o];n[a][e]=t,l({models:n})};["gltf","glb"].includes(n.ext||"glb");return React.createElement(r.PanelBody,{title:(0,t.__)("Model","model-viewer")},React.createElement(r.PanelRow,null,React.createElement("strong",null,(0,t.__)("3D Viewer","model-viewer")),React.createElement(r.ButtonGroup,null,React.createElement(r.Button,{variant:"modelViewer"===s?"primary":"",onClick:()=>l({currentViewer:"modelViewer"})},(0,t.__)("Viewer 1","model-viewer")),React.createElement(r.Button,{variant:"O3DViewer"===s?"primary":"",onClick:()=>l({currentViewer:"O3DViewer"})},(0,t.__)("Viewer 2","model-viewer")))),React.createElement("p",{className:"bp3d_help components-base-control__help"},(0,t.__)("Viewer 1 only support glb and gltf model","model-viewer")),React.createElement(r.PanelRow,null,React.createElement(P,{label:(0,t.__)("Use Multiple Model?","model-viewer"),isPremium:i,Component:r.ToggleControl,checked:c,onChange:()=>l({multiple:!c})})),c&&i?React.createElement(React.Fragment,null,o?.map(((e,a)=>React.createElement(r.PanelBody,{key:a,title:(0,t.__)("Model ","model-viewer")+parseInt(a+1),initialOpen:!1,className:"modelPanel"},React.createElement(w,{value:e?.modelUrl,placeholder:(0,t.__)("Model URL","model-viewer"),onSelect:e=>m("modelUrl",e,a),type:["model/gltf-binary"],label:(0,t.__)("Model URL","model-viewer")}),React.createElement(w,{value:e?.poster,placeholder:(0,t.__)("Model Poster","model-viewer"),onSelect:e=>m("poster",e,a),type:["image"],label:(0,t.__)("Model Poster","model-viewer")}),"modelViewer"===s&&React.createElement(React.Fragment,null,React.createElement(r.PanelRow,null,React.createElement("label",null,(0,t.__)("Use Decoder","model-viewer")),React.createElement(r.SelectControl,{options:[{label:"None",value:"none"},{label:"Draco",value:"draco"}],value:e?.decoder,onChange:e=>m("decoder",e,a)})),"draco"===e?.decoder&&React.createElement(React.Fragment,null,React.createElement(w,{value:e?.binFile,placeholder:(0,t.__)("Bin File","model-viewer"),onSelect:e=>m("binFile",e,a),type:["application/octet-stream"],label:(0,t.__)("Bin File","model-viewer")}))),1!==o.length&&React.createElement(r.PanelRow,{className:"modelRemover"},React.createElement(r.Button,{variant:"primary",onClick:()=>{const e=[...o];e.splice(a,1),l({models:e})}},(0,t.__)("Remove","model-viewer")))))),React.createElement(r.PanelRow,null,React.createElement(r.Button,{variant:"primary",onClick:()=>{const e=[...o];e.push({}),l({models:e})}},(0,t.__)("Add New","model-viewer")))):React.createElement(React.Fragment,null,React.createElement(w,{value:n?.modelUrl,placeholder:(0,t.__)("Model URL","model-viewer"),onSelect:e=>{l({model:{...n,modelUrl:e,ext:e.split(".")?.[e.split(".").length-1]},O3DVSettings:{...d,camera:null}})},type:["model/gltf-binary","model/obj","application/octet-stream","application/x-3ds","application/vnd.ms-pki.stl","text/vnd.in3d.3dml","application/collada+xml","model/vrml","application/vnd.ms-3mfdocument"],label:(0,t.__)("Model URL","model-viewer")}),"modelViewer"===s&&React.createElement(React.Fragment,null,React.createElement(w,{value:n?.poster,placeholder:(0,t.__)("Model Poster","model-viewer"),onSelect:e=>l({model:{...n,poster:e}}),type:["image"],label:(0,t.__)("Model Poster","model-viewer")}),React.createElement(r.PanelRow,null,React.createElement("label",null,(0,t.__)("Use Decoder","model-viewer")),React.createElement(r.SelectControl,{options:[{label:"None",value:"none"},{label:"Draco",value:"Draco"}],value:n?.decoder,onChange:e=>l({model:{...n,decoder:e}})})),"Draco"===n?.decoder&&React.createElement(React.Fragment,null,React.createElement(w,{value:n?.binFile,placeholder:(0,t.__)("Bin File","model-viewer"),onSelect:e=>l({model:{...n,binFile:e}}),type:["application/octet-stream"],label:(0,t.__)("Bin File","model-viewer")})))))},{useState:A,Fragment:B}=wp.element,{Dropdown:L,ColorPicker:O,Button:D}=wp.components,{__:F}=wp.i18n,T=e=>{const{value:t,title:a="",toolbar:l=!1,defaultColor:n,onChange:r,className:o,disableAlpha:c,boxPosition:i="top left",globalColors:s=[]}=e,[d,m]=A(t);return React.createElement("div",{className:"BColor"},React.createElement(L,{position:i,renderToggle:e=>{let{isOpen:o,onToggle:c}=e;return React.createElement("div",{style:{display:"flex"}},n&&n!=d&&React.createElement(D,{icon:"image-rotate",className:"bColorReset",onClick:()=>{r(n),m(n)}}),!l&&React.createElement("div",{className:"BColorButtonContainer"},React.createElement(D,{className:"BColorButton",title:a,onClick:c,"aria-expanded":o,style:t?{backgroundColor:t}:{backgroundColor:"transparent"}})),l&&React.createElement("div",{className:"BColorToolbar",onClick:c},React.createElement("p",null,"A"),React.createElement("p",{className:"color",style:{background:t}})))},renderContent:e=>{let{isOpen:a,onToggle:l,onClose:n}=e;return React.createElement(B,null,React.createElement(O,{color:t||"",onChangeComplete:e=>{r(e.hex),m(e.hex)}}),s.length>0&&React.createElement("div",{style:{display:"flex"},className:"globalColors"},s.map((e=>React.createElement("div",{className:"BColorButtonContainer"},React.createElement("button",{className:"BColorButton",onClick:()=>{r(e.color),m(e)},"aria-expanded":a,style:t?{backgroundColor:e.color}:{backgroundColor:"transparent"}}))))))}}))};function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},I.apply(this,arguments)}const{__experimentalUnitControl:M}=wp.components,$=e=>{const{units:t=[{value:"px",label:"px",default:16},{value:"em",label:"em",default:1}],value:a,onChange:l,isResetValueOnUnitChange:n=!0,...r}=e;return React.createElement("div",{id:"BUnitControl"},React.createElement(M,I({onChange:l,isResetValueOnUnitChange:n,value:a,units:t},r)))},q="#4527a4",j=React.createElement("svg",{xmlns:"https://www.w3.org/2000/svg",width:15,height:15,viewBox:"0 0 548.172 548.172"},React.createElement("path",{fill:q,d:"M534.75 49.965c-8.945-8.945-19.694-13.422-32.261-13.422H45.681c-12.562 0-23.313 4.477-32.264 13.422C4.471 58.913 0 69.663 0 82.226v310.633c0 12.566 4.471 23.315 13.417 32.265 8.951 8.945 19.702 13.414 32.264 13.414h155.318c0 7.231-1.524 14.661-4.57 22.269-3.044 7.614-6.09 14.273-9.136 19.981-3.042 5.715-4.565 9.897-4.565 12.56 0 4.948 1.807 9.24 5.424 12.847 3.615 3.621 7.898 5.435 12.847 5.435h146.179c4.949 0 9.233-1.813 12.848-5.435 3.62-3.606 5.427-7.898 5.427-12.847 0-2.468-1.526-6.611-4.571-12.415-3.046-5.801-6.092-12.566-9.134-20.267-3.046-7.71-4.569-15.085-4.569-22.128h155.318c12.56 0 23.309-4.469 32.254-13.414 8.949-8.949 13.422-19.698 13.422-32.265V82.226c.003-12.563-4.474-23.313-13.423-32.261zm-23.123 269.803c0 2.475-.903 4.613-2.711 6.424-1.81 1.804-3.952 2.707-6.427 2.707H45.681c-2.473 0-4.615-.903-6.423-2.707-1.807-1.817-2.712-3.949-2.712-6.424V82.226c0-2.475.902-4.615 2.712-6.423 1.809-1.805 3.951-2.712 6.423-2.712h456.815c2.471 0 4.617.904 6.42 2.712 1.808 1.809 2.711 3.949 2.711 6.423v237.542z"})),U=React.createElement("svg",{xmlns:"https://www.w3.org/2000/svg",width:15,height:15,viewBox:"0 0 512 512"},React.createElement("path",{fill:q,d:"M394.667 0H117.333C87.936 0 64 23.936 64 53.333v405.333C64 488.064 87.936 512 117.333 512h277.333C424.064 512 448 488.064 448 458.667V53.333C448 23.936 424.064 0 394.667 0zM256 480c-11.755 0-21.333-9.579-21.333-21.333s9.579-21.333 21.333-21.333 21.333 9.579 21.333 21.333S267.755 480 256 480zm149.333-64c0 5.888-4.779 10.667-10.667 10.667H117.333c-5.888 0-10.667-4.779-10.667-10.667V53.333c0-5.888 4.779-10.667 10.667-10.667h277.333c5.888 0 10.667 4.779 10.667 10.667V416z"})),z=React.createElement("svg",{xmlns:"https://www.w3.org/2000/svg",width:15,height:15,viewBox:"0 0 503.604 503.604"},React.createElement("path",{fill:q,d:"M337.324 0H167.192c-28.924 0-53.5 23.584-53.5 52.5v398.664c0 28.916 24.056 52.44 52.98 52.44l170.412-.184c28.92 0 52.58-23.528 52.58-52.448l.248-398.5C389.908 23.452 366.364 0 337.324 0zM227.68 31.476h49.36c4.336 0 7.868 3.52 7.868 7.868 0 4.348-3.532 7.868-7.868 7.868h-49.36a7.865 7.865 0 01-7.868-7.868 7.865 7.865 0 017.868-7.868zm-29.66 2.504c2.916-2.912 8.224-2.952 11.136 0a7.973 7.973 0 012.324 5.588c0 2.048-.864 4.088-2.324 5.548-1.452 1.46-3.504 2.32-5.548 2.32-2.084 0-4.088-.86-5.588-2.32-1.452-1.456-2.28-3.5-2.28-5.548-.004-2.088.828-4.132 2.28-5.588zm52.752 454.028c-12.984 0-23.544-10.568-23.544-23.548 0-12.984 10.56-23.548 23.544-23.548s23.544 10.564 23.544 23.548c0 12.98-10.564 23.548-23.544 23.548zm114.716-63.1H141.232V74.756h224.256v350.152z"})),H=e=>{let{device:t="desktop",onChange:a,className:n="iconButton",style:r}=e;const[o,c]=(0,l.useState)(!1);return window.addEventListener("click",(()=>c(!1))),React.createElement("div",{className:"bDevice",style:r},!o&&React.createElement("button",{className:n,title:t[0].toUpperCase()+t.slice(1),onClick:e=>{c(!0),e.stopPropagation()}},"desktop"==t?j:"tablet"==t?U:z),o&&React.createElement("div",{className:"bDevicePopup"},[{value:"desktop",icon:j},{value:"tablet",icon:U},{value:"mobile",icon:z}].map((e=>{let{icon:t,value:l}=e;return React.createElement("button",{key:l,className:n,title:l[0].toUpperCase()+l.slice(1),onClick:()=>{a(l),c(!1)}},t)}))))},W=e=>{let{attributes:a,setAttributes:n}=e;const{styles:o,woo:c,currentViewer:i}=a,{width:s,height:d,bgColor:m,bgImage:u,progressBar:p,progressBarColor:g}=o,[v,b]=(0,l.useState)("desktop");return(0,l.useEffect)((()=>{"string"==typeof d&&n({styles:{...o,height:{desktop:d,tablet:d,mobile:d}}}),"string"==typeof s&&n({styles:{...o,width:{desktop:s,tablet:s,mobile:s}}})}),[]),React.createElement(r.PanelBody,{title:(0,t.__)("Style","model-viewer")},!c&&React.createElement(r.PanelRow,{className:"deviceForUnit"},React.createElement("label",null,(0,t.__)("Width","model-viewer")),React.createElement($,{value:s[v],onChange:e=>n({styles:{...o,width:{...o.width,[v]:e}}}),units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100}]}),React.createElement(H,{device:v,onChange:e=>b(e)})),React.createElement(r.PanelRow,{className:"deviceForUnit"},React.createElement("label",null,(0,t.__)("Height","model-viewer")),React.createElement($,{value:d[v],onChange:e=>n({styles:{...o,height:{...o.height,[v]:e}}}),units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vh",label:"vh",default:100}]}),React.createElement(H,{device:v,onChange:e=>b(e)})),React.createElement(r.PanelRow,null,React.createElement("label",null,(0,t.__)("Background Color","model-viewer")),React.createElement(T,{value:m||"#ffffff",defaultColor:"#ffffff",onChange:e=>n({styles:{...o,bgColor:e}})})),"modelViewer"===i&&React.createElement(React.Fragment,null,React.createElement(r.PanelRow,null,React.createElement("label",null,React.createElement("strong",null,(0,t.__)("Note: Color will be ignore if background image used","model-viewer")))),React.createElement("br",null),React.createElement(r.PanelRow,null,React.createElement(P,{Component:w,media:!0,label:(0,t.__)("Background Image","model-viewer"),placeholder:(0,t.__)("Background Image","model-viewer"),value:u,onSelect:e=>n({styles:{...o,bgImage:e}})})),p&&React.createElement(r.PanelRow,null,React.createElement("label",null,(0,t.__)("ProgressBar Color","model-viewer")),React.createElement(T,{value:g||"#666",defaultColor:"#666",onChange:e=>n({styles:{...o,progressBarColor:e}})}))))},Z=e=>{let{attributes:a,setAttributes:l}=e;const{additional:n,isPremium:o}=a;return React.createElement(React.Fragment,null,React.createElement(r.PanelBody,{title:(0,t.__)("Additional","model-viewer")},React.createElement(P,{isPremium:o,Component:r.TextControl,label:(0,t.__)("ID","model-viewer"),value:n.ID,onChange:e=>l({additional:{...n,ID:e}})}),React.createElement(r.TextControl,{label:(0,t.__)("Class","model-viewer"),value:n.Class,onChange:e=>l({additional:{...n,Class:e}})}),React.createElement(P,{isPremium:o,Component:r.TextareaControl,label:(0,t.__)("CSS","model-viewer"),value:n.CSS,onChange:e=>l({additional:{...n,CSS:e}})})))},J=e=>{let{attributes:a,setAttributes:n}=e;const{animation:o,autoRotate:c,autoplay:i,exposure:s,fullscreen:d,lazyLoad:m,loadingPercentage:u,model:p,multiple:g,models:w,mouseControl:v,progressBar:b,rotate:h,rotateAlongX:f,rotateAlongY:E,rotationPerSecond:R,selectedAnimation:y,shadow:C,uniqueId:_,variant:S,isPagination:k,isNavigation:x,isPremium:V}=a,[N,A]=(0,l.useState)([]);return(0,l.useEffect)((()=>{setTimeout((()=>{document.querySelector(`#${_} model-viewer`)?.addEventListener("load",(function(){const e=this.availableAnimations.map((e=>({label:e,value:e})));A([...e,{label:"None",value:""}])}))}),0)}),[_,p,w,g]),React.createElement(React.Fragment,null,React.createElement(r.PanelBody,{title:(0,t.__)("Options","model-viewer")},React.createElement(r.ToggleControl,{label:(0,t.__)("Fullscreen","model-viewer"),checked:d,onChange:()=>n({fullscreen:!d})}),["gltf","glb"].includes(p.ext||"glb")&&React.createElement(React.Fragment,null,React.createElement(r.ToggleControl,{label:(0,t.__)("Mouse Control","model-viewer"),checked:v,onChange:()=>n({mouseControl:!v})}),React.createElement(r.ToggleControl,{label:(0,t.__)("Lazy Load","model-viewer"),checked:m,onChange:()=>n({lazyLoad:!m})}),React.createElement(r.ToggleControl,{label:(0,t.__)("Show Loading Percentage","model-viewer"),checked:u,onChange:()=>n({loadingPercentage:!u})}),React.createElement(r.ToggleControl,{label:(0,t.__)("Show Progressbar","model-viewer"),checked:b,onChange:()=>n({progressBar:!b})}),React.createElement(P,{Component:r.ToggleControl,isPremium:V,label:(0,t.__)("Enable Shadow","model-viewer"),checked:C,onChange:()=>n({shadow:!C})}),React.createElement(P,{isPremium:V,label:(0,t.__)("Autoplay ( if animated )","model-viewer"),Component:r.ToggleControl,checked:i,onChange:()=>n({autoplay:!i})}),React.createElement(P,{isPremium:V,label:(0,t.__)("Enable Variant Selector","model-viewer"),Component:r.ToggleControl,checked:S,onChange:()=>n({variant:!S})}),React.createElement(P,{isPremium:V,label:(0,t.__)("Enable Animation Selector","model-viewer"),Component:r.ToggleControl,checked:o,onChange:()=>n({animation:!o})}),o&&0!==N.length&&!g&&React.createElement(r.PanelRow,null,React.createElement("label",null,(0,t.__)("Set Animation","model-viewer")),React.createElement(r.SelectControl,{options:N,value:y,onChange:e=>n({selectedAnimation:e})})),React.createElement(P,{isPremium:V,Component:r.ToggleControl,label:(0,t.__)("Auto Rotate","model-viewer"),checked:c,onChange:()=>n({autoRotate:!c})}),c&&React.createElement(React.Fragment,null,React.createElement(r.PanelRow,null,React.createElement("label",null,(0,t.__)("Rotate Per Second (deg)","model-viewer")),React.createElement(r.__experimentalNumberControl,{value:R,onChange:e=>n({rotationPerSecond:e})}))),!g&&React.createElement(React.Fragment,null,React.createElement(P,{isPremium:V,Component:r.ToggleControl,label:(0,t.__)("Rotate Direction","model-viewer"),checked:h,onChange:()=>n({rotate:!h})}),h&&React.createElement(React.Fragment,null,React.createElement(r.PanelRow,null,React.createElement("label",null,(0,t.__)("Rotate Along X","model-viewer")),React.createElement(r.__experimentalNumberControl,{onChange:e=>n({rotateAlongX:parseInt(e)}),value:f,max:360,min:0})),React.createElement(r.PanelRow,null,React.createElement("label",null,(0,t.__)("Rotate Along Y","model-viewer")),React.createElement(r.__experimentalNumberControl,{onChange:e=>n({rotateAlongY:parseInt(e)}),value:E,max:360,min:0})))),React.createElement(P,{isPremium:V,Component:r.RangeControl,label:(0,t.__)("Exposure","model-viewer"),value:s,onChange:e=>n({exposure:e}),min:.1,step:.1,max:10}),(g||!V)&&React.createElement(React.Fragment,null,React.createElement(P,{isPremium:V,Component:r.ToggleControl,label:(0,t.__)("show thumbnails list","model-viewer"),checked:k,onChange:()=>n({isPagination:!k})}),React.createElement(P,{isPremium:V,Component:r.ToggleControl,label:(0,t.__)("show arrow","model-viewer"),checked:x,onChange:()=>n({isNavigation:!x})})))))},X=e=>{let{attributes:a,setAttributes:l}=e;const{O3DVSettings:n,multiple:o,isPremium:i}=a,{isFullscreen:s,isNavigation:d=!1,isPagination:m=!1,mouseControl:u}=n,p=e=>{l({O3DVSettings:{...n,...e}})};return c().createElement(r.PanelBody,{title:(0,t.__)("Options","model-viewer")},c().createElement(r.ToggleControl,{label:(0,t.__)("Fullscreen","model-viewer"),checked:s,onChange:()=>p({isFullscreen:!s})}),c().createElement(r.ToggleControl,{label:(0,t.__)("Mouse Control","model-viewer"),checked:u,onChange:()=>p({mouseControl:!u})}),(o||!i)&&c().createElement(c().Fragment,null,c().createElement(P,{isPremium:i,Component:r.ToggleControl,label:(0,t.__)("show thumbnails list","model-viewer"),checked:m,onChange:()=>p({isPagination:!m})}),c().createElement(P,{isPremium:i,Component:r.ToggleControl,label:(0,t.__)("show arrow","model-viewer"),checked:d,onChange:()=>p({isNavigation:!d})})))},{InspectorControls:G}=wp.blockEditor,Y=(0,n.withSelect)((e=>{const t=e("core/editor")?.getCurrentPostType()||"product",a=e("core/editor")?.getCurrentPostId();return{postId:a,postType:t}}))((e=>{let{attributes:a,setAttributes:n,postId:o,postType:c}=e;const[i,s]=(0,l.useState)(!1),{currentViewer:d}=a;return React.createElement(G,null,"bp3d-model-viewer"===c&&React.createElement(r.PanelBody,null,React.createElement(r.PanelRow,null,React.createElement("div",{className:"b3dviewer_front_shortcode justify-center"},React.createElement(r.ClipboardButton,{title:i?(0,t.__)("Copied","model-viewer"):"",variant:"primary",text:`[3d_viewer id=${o}]`,onCopy:()=>s(!0),onFinishCopy:()=>s(!1)},(0,t.__)("Copy Shortcode","model-viewer")),i&&React.createElement(r.Snackbar,null,(0,t.__)("Copied Succesfully","model-viewer"))))),React.createElement(r.TabPanel,{className:"b3dviewer-tab-panel",activeClass:"active",tabs:[{name:"settings",title:(0,t.__)("Settings","model-viewer"),className:"settings"},{name:"style",title:(0,t.__)("Style","model-viewer"),className:"style"}]},(e=>React.createElement("span",null,"settings"===e.name&&React.createElement(r.Panel,null,React.createElement(N,{attributes:a,setAttributes:n}),"modelViewer"===d&&React.createElement(J,{attributes:a,setAttributes:n}),"O3DViewer"===d&&React.createElement(X,{attributes:a,setAttributes:n})),"style"===e.name&&React.createElement(r.Panel,null,React.createElement(W,{attributes:a,setAttributes:n}),React.createElement(Z,{attributes:a,setAttributes:n}))))))}));var Q=a(185);const{useState:K,useEffect:ee}=React,te=(e,t)=>{const[a,l]=K(!0),[n,r]=K(!1),[o,c]=K(!1),[i,s]=K(null),[d,m]=K(null);ee((()=>{u()}),[]);const u=async()=>{const a=Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&");try{const t=await fetch(`${e}?${a}`),n=await t.json();try{m(JSON.parse(n?.data))}catch(e){m(n?.data)}r(!0),l(!1)}catch(e){c(!0),s(e.message),l(!1)}};return{data:d,isLoading:a,isLoaded:n,isError:o,error:i}},{withSelect:ae}=wp.data,le=ae((e=>{const{isEditorSidebarOpened:t}=e("core/edit-post"),a=e("core/editor")?.getCurrentPostType()||"product";return{isSidebarOpened:t(),postType:a}}))((e=>{const{clientId:a,attributes:n,setAttributes:r,isSelected:o,postType:c}=e,[i,s]=(0,l.useState)(!0),{uniqueId:d,model:m,models:u,multiple:p,additional:g,align:w,woo:v,isPremium:b=!0}=n,{data:h,isLoading:f}=te(bp3dBlock?.ajaxURL,{action:"bp3d_pipe_checker",_wpnonce:bp3dBlock?.nonce});(0,l.useEffect)((()=>{const e=!!["product",null].includes(c);r({uniqueId:"b3dviewer"+a.substr(0,8),woo:e})}),[]),(0,l.useEffect)((()=>{r({isPremium:h?.isPipe}),h?.isPipe||f||r({multiple:!1})}),[h,f]),(0,l.useEffect)((()=>{try{new URL(E),s(!0)}catch(e){s(!1)}}),[d,m,u,p]);const E=p?u[0]?.modelUrl:m?.modelUrl;return f?React.createElement("h2",null,"Loading..."):React.createElement(React.Fragment,null,!o&&React.createElement("div",{className:"modelViewerIsSelected"}),React.createElement(React.Fragment,null,React.createElement(Y,{attributes:n,setAttributes:r}),E&&i&&React.createElement(Q.Z,{setAttributes:r,attributes:n,__:t.__}),E&&!i&&React.createElement("h2",null,(0,t.__)("3D file not valid","model-viewer")),!E&&React.createElement("h2",null,(0,t.__)("Click here to upload 3D Models","model-viewer"))))})),{registerBlockType:ne}=wp.blocks;ne(e,{edit:le,save:()=>null})})()})();
//# sourceMappingURL=block.js.map