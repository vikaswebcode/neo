var R4=Object.defineProperty;var P4=(t,e,n)=>e in t?R4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>(P4(t,typeof e!="symbol"?e+"":e,n),n);function I4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function nl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vB={exports:{}},q0={},yB={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=Symbol.for("react.element"),B4=Symbol.for("react.portal"),D4=Symbol.for("react.fragment"),L4=Symbol.for("react.strict_mode"),F4=Symbol.for("react.profiler"),O4=Symbol.for("react.provider"),N4=Symbol.for("react.context"),U4=Symbol.for("react.forward_ref"),k4=Symbol.for("react.suspense"),z4=Symbol.for("react.memo"),H4=Symbol.for("react.lazy"),jC=Symbol.iterator;function G4(t){return t===null||typeof t!="object"?null:(t=jC&&t[jC]||t["@@iterator"],typeof t=="function"?t:null)}var xB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_B=Object.assign,SB={};function Od(t,e,n){this.props=t,this.context=e,this.refs=SB,this.updater=n||xB}Od.prototype.isReactComponent={};Od.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Od.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wB(){}wB.prototype=Od.prototype;function PE(t,e,n){this.props=t,this.context=e,this.refs=SB,this.updater=n||xB}var IE=PE.prototype=new wB;IE.constructor=PE;_B(IE,Od.prototype);IE.isPureReactComponent=!0;var XC=Array.isArray,EB=Object.prototype.hasOwnProperty,BE={current:null},AB={key:!0,ref:!0,__self:!0,__source:!0};function bB(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)EB.call(e,r)&&!AB.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yp,type:t,key:s,ref:o,props:i,_owner:BE.current}}function $4(t,e){return{$$typeof:yp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function DE(t){return typeof t=="object"&&t!==null&&t.$$typeof===yp}function V4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var JC=/\/+/g;function l1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?V4(""+t.key):e.toString(36)}function Fv(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yp:case B4:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+l1(o,0):r,XC(i)?(n="",t!=null&&(n=t.replace(JC,"$&/")+"/"),Fv(i,e,n,"",function(c){return c})):i!=null&&(DE(i)&&(i=$4(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(JC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",XC(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+l1(s,a);o+=Fv(s,e,n,l,i)}else if(l=G4(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+l1(s,a++),o+=Fv(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function eg(t,e,n){if(t==null)return t;var r=[],i=0;return Fv(t,r,"","",function(s){return e.call(n,s,i++)}),r}function W4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qr={current:null},Ov={transition:null},j4={ReactCurrentDispatcher:Qr,ReactCurrentBatchConfig:Ov,ReactCurrentOwner:BE};Ft.Children={map:eg,forEach:function(t,e,n){eg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return eg(t,function(){e++}),e},toArray:function(t){return eg(t,function(e){return e})||[]},only:function(t){if(!DE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ft.Component=Od;Ft.Fragment=D4;Ft.Profiler=F4;Ft.PureComponent=PE;Ft.StrictMode=L4;Ft.Suspense=k4;Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j4;Ft.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_B({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=BE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)EB.call(e,l)&&!AB.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:yp,type:t.type,key:i,ref:s,props:r,_owner:o}};Ft.createContext=function(t){return t={$$typeof:N4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O4,_context:t},t.Consumer=t};Ft.createElement=bB;Ft.createFactory=function(t){var e=bB.bind(null,t);return e.type=t,e};Ft.createRef=function(){return{current:null}};Ft.forwardRef=function(t){return{$$typeof:U4,render:t}};Ft.isValidElement=DE;Ft.lazy=function(t){return{$$typeof:H4,_payload:{_status:-1,_result:t},_init:W4}};Ft.memo=function(t,e){return{$$typeof:z4,type:t,compare:e===void 0?null:e}};Ft.startTransition=function(t){var e=Ov.transition;Ov.transition={};try{t()}finally{Ov.transition=e}};Ft.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ft.useCallback=function(t,e){return Qr.current.useCallback(t,e)};Ft.useContext=function(t){return Qr.current.useContext(t)};Ft.useDebugValue=function(){};Ft.useDeferredValue=function(t){return Qr.current.useDeferredValue(t)};Ft.useEffect=function(t,e){return Qr.current.useEffect(t,e)};Ft.useId=function(){return Qr.current.useId()};Ft.useImperativeHandle=function(t,e,n){return Qr.current.useImperativeHandle(t,e,n)};Ft.useInsertionEffect=function(t,e){return Qr.current.useInsertionEffect(t,e)};Ft.useLayoutEffect=function(t,e){return Qr.current.useLayoutEffect(t,e)};Ft.useMemo=function(t,e){return Qr.current.useMemo(t,e)};Ft.useReducer=function(t,e,n){return Qr.current.useReducer(t,e,n)};Ft.useRef=function(t){return Qr.current.useRef(t)};Ft.useState=function(t){return Qr.current.useState(t)};Ft.useSyncExternalStore=function(t,e,n){return Qr.current.useSyncExternalStore(t,e,n)};Ft.useTransition=function(){return Qr.current.useTransition()};Ft.version="18.2.0";yB.exports=Ft;var E=yB.exports;const Rt=nl(E),X4=I4({__proto__:null,default:Rt},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J4=E,K4=Symbol.for("react.element"),Y4=Symbol.for("react.fragment"),Q4=Object.prototype.hasOwnProperty,q4=J4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z4={key:!0,ref:!0,__self:!0,__source:!0};function MB(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Q4.call(e,r)&&!Z4.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:K4,type:t,key:s,ref:o,props:i,_owner:q4.current}}q0.Fragment=Y4;q0.jsx=MB;q0.jsxs=MB;vB.exports=q0;var L=vB.exports,iS={},CB={exports:{}},Di={},TB={exports:{}},RB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,O){var z=U.length;U.push(O);e:for(;0<z;){var ne=z-1>>>1,J=U[ne];if(0<i(J,O))U[ne]=O,U[z]=J,z=ne;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var O=U[0],z=U.pop();if(z!==O){U[0]=z;e:for(var ne=0,J=U.length,q=J>>>1;ne<q;){var ee=2*(ne+1)-1,_e=U[ee],be=ee+1,K=U[be];if(0>i(_e,z))be<J&&0>i(K,_e)?(U[ne]=K,U[be]=z,ne=be):(U[ne]=_e,U[ee]=z,ne=ee);else if(be<J&&0>i(K,z))U[ne]=K,U[be]=z,ne=be;else break e}}return O}function i(U,O){var z=U.sortIndex-O.sortIndex;return z!==0?z:U.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=U)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function b(U){if(y=!1,w(U),!v)if(n(l)!==null)v=!0,ie(C);else{var O=n(c);O!==null&&Z(b,O.startTime-U)}}function C(U,O){v=!1,y&&(y=!1,g(B),B=-1),m=!0;var z=p;try{for(w(O),f=n(l);f!==null&&(!(f.expirationTime>O)||U&&!k());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var J=ne(f.expirationTime<=O);O=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(l)&&r(l),w(O)}else r(l);f=n(l)}if(f!==null)var q=!0;else{var ee=n(c);ee!==null&&Z(b,ee.startTime-O),q=!1}return q}finally{f=null,p=z,m=!1}}var T=!1,P=null,B=-1,R=5,D=-1;function k(){return!(t.unstable_now()-D<R)}function X(){if(P!==null){var U=t.unstable_now();D=U;var O=!0;try{O=P(!0,U)}finally{O?$():(T=!1,P=null)}}else T=!1}var $;if(typeof _=="function")$=function(){_(X)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=X,$=function(){H.postMessage(null)}}else $=function(){x(X,0)};function ie(U){P=U,T||(T=!0,$())}function Z(U,O){B=x(function(){U(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,ie(C))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var z=p;p=O;try{return U()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,O){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=p;p=U;try{return O()}finally{p=z}},t.unstable_scheduleCallback=function(U,O,z){var ne=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ne+z:ne):z=ne,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,U={id:d++,callback:O,priorityLevel:U,startTime:z,expirationTime:J,sortIndex:-1},z>ne?(U.sortIndex=z,e(c,U),n(l)===null&&U===n(c)&&(y?(g(B),B=-1):y=!0,Z(b,z-ne))):(U.sortIndex=J,e(l,U),v||m||(v=!0,ie(C))),U},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(U){var O=p;return function(){var z=p;p=O;try{return U.apply(this,arguments)}finally{p=z}}}})(RB);TB.exports=RB;var ez=TB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PB=E,Bi=ez;function Ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IB=new Set,Th={};function bc(t,e){pd(t,e),pd(t+"Capture",e)}function pd(t,e){for(Th[t]=e,t=0;t<e.length;t++)IB.add(e[t])}var zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sS=Object.prototype.hasOwnProperty,tz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KC={},YC={};function nz(t){return sS.call(YC,t)?!0:sS.call(KC,t)?!1:tz.test(t)?YC[t]=!0:(KC[t]=!0,!1)}function rz(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iz(t,e,n,r){if(e===null||typeof e>"u"||rz(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ar[t]=new qr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ar[e]=new qr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ar[t]=new qr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ar[t]=new qr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ar[t]=new qr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ar[t]=new qr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ar[t]=new qr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ar[t]=new qr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ar[t]=new qr(t,5,!1,t.toLowerCase(),null,!1,!1)});var LE=/[\-:]([a-z])/g;function FE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(LE,FE);Ar[e]=new qr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(LE,FE);Ar[e]=new qr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(LE,FE);Ar[e]=new qr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ar[t]=new qr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ar.xlinkHref=new qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ar[t]=new qr(t,1,!1,t.toLowerCase(),null,!0,!0)});function OE(t,e,n,r){var i=Ar.hasOwnProperty(e)?Ar[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iz(e,n,i,r)&&(n=null),r||i===null?nz(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wo=PB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tg=Symbol.for("react.element"),Nu=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),NE=Symbol.for("react.strict_mode"),oS=Symbol.for("react.profiler"),BB=Symbol.for("react.provider"),DB=Symbol.for("react.context"),UE=Symbol.for("react.forward_ref"),aS=Symbol.for("react.suspense"),lS=Symbol.for("react.suspense_list"),kE=Symbol.for("react.memo"),_a=Symbol.for("react.lazy"),LB=Symbol.for("react.offscreen"),QC=Symbol.iterator;function Sf(t){return t===null||typeof t!="object"?null:(t=QC&&t[QC]||t["@@iterator"],typeof t=="function"?t:null)}var Rn=Object.assign,c1;function Zf(t){if(c1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);c1=e&&e[1]||""}return`
`+c1+t}var u1=!1;function d1(t,e){if(!t||u1)return"";u1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{u1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zf(t):""}function sz(t){switch(t.tag){case 5:return Zf(t.type);case 16:return Zf("Lazy");case 13:return Zf("Suspense");case 19:return Zf("SuspenseList");case 0:case 2:case 15:return t=d1(t.type,!1),t;case 11:return t=d1(t.type.render,!1),t;case 1:return t=d1(t.type,!0),t;default:return""}}function cS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uu:return"Fragment";case Nu:return"Portal";case oS:return"Profiler";case NE:return"StrictMode";case aS:return"Suspense";case lS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case DB:return(t.displayName||"Context")+".Consumer";case BB:return(t._context.displayName||"Context")+".Provider";case UE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kE:return e=t.displayName||null,e!==null?e:cS(t.type)||"Memo";case _a:e=t._payload,t=t._init;try{return cS(t(e))}catch{}}return null}function oz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cS(e);case 8:return e===NE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FB(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function az(t){var e=FB(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ng(t){t._valueTracker||(t._valueTracker=az(t))}function OB(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FB(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function s0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uS(t,e){var n=e.checked;return Rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NB(t,e){e=e.checked,e!=null&&OE(t,"checked",e,!1)}function dS(t,e){NB(t,e);var n=Wa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fS(t,e.type,n):e.hasOwnProperty("defaultValue")&&fS(t,e.type,Wa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ZC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fS(t,e,n){(e!=="number"||s0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eh=Array.isArray;function td(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function hS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Rn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ie(92));if(eh(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wa(n)}}function UB(t,e){var n=Wa(e.value),r=Wa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kB(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kB(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rg,zB=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rg=rg||document.createElement("div"),rg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lz=["Webkit","ms","Moz","O"];Object.keys(oh).forEach(function(t){lz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oh[e]=oh[t]})});function HB(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oh.hasOwnProperty(t)&&oh[t]?(""+e).trim():e+"px"}function GB(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=HB(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var cz=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mS(t,e){if(e){if(cz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function gS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vS=null;function zE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yS=null,nd=null,rd=null;function nT(t){if(t=Sp(t)){if(typeof yS!="function")throw Error(Ie(280));var e=t.stateNode;e&&(e=ry(e),yS(t.stateNode,t.type,e))}}function $B(t){nd?rd?rd.push(t):rd=[t]:nd=t}function VB(){if(nd){var t=nd,e=rd;if(rd=nd=null,nT(t),e)for(t=0;t<e.length;t++)nT(e[t])}}function WB(t,e){return t(e)}function jB(){}var f1=!1;function XB(t,e,n){if(f1)return t(e,n);f1=!0;try{return WB(t,e,n)}finally{f1=!1,(nd!==null||rd!==null)&&(jB(),VB())}}function Ph(t,e){var n=t.stateNode;if(n===null)return null;var r=ry(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ie(231,e,typeof n));return n}var xS=!1;if(zo)try{var wf={};Object.defineProperty(wf,"passive",{get:function(){xS=!0}}),window.addEventListener("test",wf,wf),window.removeEventListener("test",wf,wf)}catch{xS=!1}function uz(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ah=!1,o0=null,a0=!1,_S=null,dz={onError:function(t){ah=!0,o0=t}};function fz(t,e,n,r,i,s,o,a,l){ah=!1,o0=null,uz.apply(dz,arguments)}function hz(t,e,n,r,i,s,o,a,l){if(fz.apply(this,arguments),ah){if(ah){var c=o0;ah=!1,o0=null}else throw Error(Ie(198));a0||(a0=!0,_S=c)}}function Mc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function JB(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rT(t){if(Mc(t)!==t)throw Error(Ie(188))}function pz(t){var e=t.alternate;if(!e){if(e=Mc(t),e===null)throw Error(Ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rT(i),t;if(s===r)return rT(i),e;s=s.sibling}throw Error(Ie(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ie(189))}}if(n.alternate!==r)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?t:e}function KB(t){return t=pz(t),t!==null?YB(t):null}function YB(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=YB(t);if(e!==null)return e;t=t.sibling}return null}var QB=Bi.unstable_scheduleCallback,iT=Bi.unstable_cancelCallback,mz=Bi.unstable_shouldYield,gz=Bi.unstable_requestPaint,zn=Bi.unstable_now,vz=Bi.unstable_getCurrentPriorityLevel,HE=Bi.unstable_ImmediatePriority,qB=Bi.unstable_UserBlockingPriority,l0=Bi.unstable_NormalPriority,yz=Bi.unstable_LowPriority,ZB=Bi.unstable_IdlePriority,Z0=null,no=null;function xz(t){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(Z0,t,void 0,(t.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:wz,_z=Math.log,Sz=Math.LN2;function wz(t){return t>>>=0,t===0?32:31-(_z(t)/Sz|0)|0}var ig=64,sg=4194304;function th(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function c0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=th(a):(s&=o,s!==0&&(r=th(s)))}else o=n&~i,o!==0?r=th(o):s!==0&&(r=th(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cs(e),i=1<<n,r|=t[n],e&=~i;return r}function Ez(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Az(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Cs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Ez(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function SS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eD(){var t=ig;return ig<<=1,!(ig&4194240)&&(ig=64),t}function h1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cs(e),t[e]=n}function bz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Cs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function GE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var en=0;function tD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nD,$E,rD,iD,sD,wS=!1,og=[],Ia=null,Ba=null,Da=null,Ih=new Map,Bh=new Map,Ea=[],Mz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sT(t,e){switch(t){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":Ih.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bh.delete(e.pointerId)}}function Ef(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Sp(e),e!==null&&$E(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Cz(t,e,n,r,i){switch(e){case"focusin":return Ia=Ef(Ia,t,e,n,r,i),!0;case"dragenter":return Ba=Ef(Ba,t,e,n,r,i),!0;case"mouseover":return Da=Ef(Da,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ih.set(s,Ef(Ih.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Bh.set(s,Ef(Bh.get(s)||null,t,e,n,r,i)),!0}return!1}function oD(t){var e=Yl(t.target);if(e!==null){var n=Mc(e);if(n!==null){if(e=n.tag,e===13){if(e=JB(n),e!==null){t.blockedOn=e,sD(t.priority,function(){rD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ES(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vS=r,n.target.dispatchEvent(r),vS=null}else return e=Sp(n),e!==null&&$E(e),t.blockedOn=n,!1;e.shift()}return!0}function oT(t,e,n){Nv(t)&&n.delete(e)}function Tz(){wS=!1,Ia!==null&&Nv(Ia)&&(Ia=null),Ba!==null&&Nv(Ba)&&(Ba=null),Da!==null&&Nv(Da)&&(Da=null),Ih.forEach(oT),Bh.forEach(oT)}function Af(t,e){t.blockedOn===e&&(t.blockedOn=null,wS||(wS=!0,Bi.unstable_scheduleCallback(Bi.unstable_NormalPriority,Tz)))}function Dh(t){function e(i){return Af(i,t)}if(0<og.length){Af(og[0],t);for(var n=1;n<og.length;n++){var r=og[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ia!==null&&Af(Ia,t),Ba!==null&&Af(Ba,t),Da!==null&&Af(Da,t),Ih.forEach(e),Bh.forEach(e),n=0;n<Ea.length;n++)r=Ea[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ea.length&&(n=Ea[0],n.blockedOn===null);)oD(n),n.blockedOn===null&&Ea.shift()}var id=Wo.ReactCurrentBatchConfig,u0=!0;function Rz(t,e,n,r){var i=en,s=id.transition;id.transition=null;try{en=1,VE(t,e,n,r)}finally{en=i,id.transition=s}}function Pz(t,e,n,r){var i=en,s=id.transition;id.transition=null;try{en=4,VE(t,e,n,r)}finally{en=i,id.transition=s}}function VE(t,e,n,r){if(u0){var i=ES(t,e,n,r);if(i===null)E1(t,e,r,d0,n),sT(t,r);else if(Cz(i,t,e,n,r))r.stopPropagation();else if(sT(t,r),e&4&&-1<Mz.indexOf(t)){for(;i!==null;){var s=Sp(i);if(s!==null&&nD(s),s=ES(t,e,n,r),s===null&&E1(t,e,r,d0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else E1(t,e,r,null,n)}}var d0=null;function ES(t,e,n,r){if(d0=null,t=zE(r),t=Yl(t),t!==null)if(e=Mc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=JB(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return d0=t,null}function aD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vz()){case HE:return 1;case qB:return 4;case l0:case yz:return 16;case ZB:return 536870912;default:return 16}default:return 16}}var Ca=null,WE=null,Uv=null;function lD(){if(Uv)return Uv;var t,e=WE,n=e.length,r,i="value"in Ca?Ca.value:Ca.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Uv=i.slice(t,1<r?1-r:void 0)}function kv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ag(){return!0}function aT(){return!1}function Li(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ag:aT,this.isPropagationStopped=aT,this}return Rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ag)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ag)},persist:function(){},isPersistent:ag}),e}var Nd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jE=Li(Nd),_p=Rn({},Nd,{view:0,detail:0}),Iz=Li(_p),p1,m1,bf,ey=Rn({},_p,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:XE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bf&&(bf&&t.type==="mousemove"?(p1=t.screenX-bf.screenX,m1=t.screenY-bf.screenY):m1=p1=0,bf=t),p1)},movementY:function(t){return"movementY"in t?t.movementY:m1}}),lT=Li(ey),Bz=Rn({},ey,{dataTransfer:0}),Dz=Li(Bz),Lz=Rn({},_p,{relatedTarget:0}),g1=Li(Lz),Fz=Rn({},Nd,{animationName:0,elapsedTime:0,pseudoElement:0}),Oz=Li(Fz),Nz=Rn({},Nd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uz=Li(Nz),kz=Rn({},Nd,{data:0}),cT=Li(kz),zz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $z(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gz[t])?!!e[t]:!1}function XE(){return $z}var Vz=Rn({},_p,{key:function(t){if(t.key){var e=zz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:XE,charCode:function(t){return t.type==="keypress"?kv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wz=Li(Vz),jz=Rn({},ey,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uT=Li(jz),Xz=Rn({},_p,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:XE}),Jz=Li(Xz),Kz=Rn({},Nd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yz=Li(Kz),Qz=Rn({},ey,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qz=Li(Qz),Zz=[9,13,27,32],JE=zo&&"CompositionEvent"in window,lh=null;zo&&"documentMode"in document&&(lh=document.documentMode);var e5=zo&&"TextEvent"in window&&!lh,cD=zo&&(!JE||lh&&8<lh&&11>=lh),dT=String.fromCharCode(32),fT=!1;function uD(t,e){switch(t){case"keyup":return Zz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ku=!1;function t5(t,e){switch(t){case"compositionend":return dD(e);case"keypress":return e.which!==32?null:(fT=!0,dT);case"textInput":return t=e.data,t===dT&&fT?null:t;default:return null}}function n5(t,e){if(ku)return t==="compositionend"||!JE&&uD(t,e)?(t=lD(),Uv=WE=Ca=null,ku=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cD&&e.locale!=="ko"?null:e.data;default:return null}}var r5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!r5[t.type]:e==="textarea"}function fD(t,e,n,r){$B(r),e=f0(e,"onChange"),0<e.length&&(n=new jE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ch=null,Lh=null;function i5(t){ED(t,0)}function ty(t){var e=Gu(t);if(OB(e))return t}function s5(t,e){if(t==="change")return e}var hD=!1;if(zo){var v1;if(zo){var y1="oninput"in document;if(!y1){var pT=document.createElement("div");pT.setAttribute("oninput","return;"),y1=typeof pT.oninput=="function"}v1=y1}else v1=!1;hD=v1&&(!document.documentMode||9<document.documentMode)}function mT(){ch&&(ch.detachEvent("onpropertychange",pD),Lh=ch=null)}function pD(t){if(t.propertyName==="value"&&ty(Lh)){var e=[];fD(e,Lh,t,zE(t)),XB(i5,e)}}function o5(t,e,n){t==="focusin"?(mT(),ch=e,Lh=n,ch.attachEvent("onpropertychange",pD)):t==="focusout"&&mT()}function a5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ty(Lh)}function l5(t,e){if(t==="click")return ty(e)}function c5(t,e){if(t==="input"||t==="change")return ty(e)}function u5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Is=typeof Object.is=="function"?Object.is:u5;function Fh(t,e){if(Is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sS.call(e,i)||!Is(t[i],e[i]))return!1}return!0}function gT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vT(t,e){var n=gT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gT(n)}}function mD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gD(){for(var t=window,e=s0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=s0(t.document)}return e}function KE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function d5(t){var e=gD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mD(n.ownerDocument.documentElement,n)){if(r!==null&&KE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vT(n,s);var o=vT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var f5=zo&&"documentMode"in document&&11>=document.documentMode,zu=null,AS=null,uh=null,bS=!1;function yT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bS||zu==null||zu!==s0(r)||(r=zu,"selectionStart"in r&&KE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uh&&Fh(uh,r)||(uh=r,r=f0(AS,"onSelect"),0<r.length&&(e=new jE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zu)))}function lg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hu={animationend:lg("Animation","AnimationEnd"),animationiteration:lg("Animation","AnimationIteration"),animationstart:lg("Animation","AnimationStart"),transitionend:lg("Transition","TransitionEnd")},x1={},vD={};zo&&(vD=document.createElement("div").style,"AnimationEvent"in window||(delete Hu.animationend.animation,delete Hu.animationiteration.animation,delete Hu.animationstart.animation),"TransitionEvent"in window||delete Hu.transitionend.transition);function ny(t){if(x1[t])return x1[t];if(!Hu[t])return t;var e=Hu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vD)return x1[t]=e[n];return t}var yD=ny("animationend"),xD=ny("animationiteration"),_D=ny("animationstart"),SD=ny("transitionend"),wD=new Map,xT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(t,e){wD.set(t,e),bc(e,[t])}for(var _1=0;_1<xT.length;_1++){var S1=xT[_1],h5=S1.toLowerCase(),p5=S1[0].toUpperCase()+S1.slice(1);rl(h5,"on"+p5)}rl(yD,"onAnimationEnd");rl(xD,"onAnimationIteration");rl(_D,"onAnimationStart");rl("dblclick","onDoubleClick");rl("focusin","onFocus");rl("focusout","onBlur");rl(SD,"onTransitionEnd");pd("onMouseEnter",["mouseout","mouseover"]);pd("onMouseLeave",["mouseout","mouseover"]);pd("onPointerEnter",["pointerout","pointerover"]);pd("onPointerLeave",["pointerout","pointerover"]);bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m5=new Set("cancel close invalid load scroll toggle".split(" ").concat(nh));function _T(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hz(r,e,void 0,t),t.currentTarget=null}function ED(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_T(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_T(i,a,c),s=l}}}if(a0)throw t=_S,a0=!1,_S=null,t}function pn(t,e){var n=e[PS];n===void 0&&(n=e[PS]=new Set);var r=t+"__bubble";n.has(r)||(AD(e,t,2,!1),n.add(r))}function w1(t,e,n){var r=0;e&&(r|=4),AD(n,t,r,e)}var cg="_reactListening"+Math.random().toString(36).slice(2);function Oh(t){if(!t[cg]){t[cg]=!0,IB.forEach(function(n){n!=="selectionchange"&&(m5.has(n)||w1(n,!1,t),w1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cg]||(e[cg]=!0,w1("selectionchange",!1,e))}}function AD(t,e,n,r){switch(aD(e)){case 1:var i=Rz;break;case 4:i=Pz;break;default:i=VE}n=i.bind(null,e,n,t),i=void 0,!xS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function E1(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Yl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}XB(function(){var c=s,d=zE(n),f=[];e:{var p=wD.get(t);if(p!==void 0){var m=jE,v=t;switch(t){case"keypress":if(kv(n)===0)break e;case"keydown":case"keyup":m=Wz;break;case"focusin":v="focus",m=g1;break;case"focusout":v="blur",m=g1;break;case"beforeblur":case"afterblur":m=g1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=lT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Dz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Jz;break;case yD:case xD:case _D:m=Oz;break;case SD:m=Yz;break;case"scroll":m=Iz;break;case"wheel":m=qz;break;case"copy":case"cut":case"paste":m=Uz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=uT}var y=(e&4)!==0,x=!y&&t==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var _=c,w;_!==null;){w=_;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,g!==null&&(b=Ph(_,g),b!=null&&y.push(Nh(_,b,w)))),x)break;_=_.return}0<y.length&&(p=new m(p,v,null,n,d),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==vS&&(v=n.relatedTarget||n.fromElement)&&(Yl(v)||v[Ho]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?Yl(v):null,v!==null&&(x=Mc(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=lT,b="onMouseLeave",g="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=uT,b="onPointerLeave",g="onPointerEnter",_="pointer"),x=m==null?p:Gu(m),w=v==null?p:Gu(v),p=new y(b,_+"leave",m,n,d),p.target=x,p.relatedTarget=w,b=null,Yl(d)===c&&(y=new y(g,_+"enter",v,n,d),y.target=w,y.relatedTarget=x,b=y),x=b,m&&v)t:{for(y=m,g=v,_=0,w=y;w;w=eu(w))_++;for(w=0,b=g;b;b=eu(b))w++;for(;0<_-w;)y=eu(y),_--;for(;0<w-_;)g=eu(g),w--;for(;_--;){if(y===g||g!==null&&y===g.alternate)break t;y=eu(y),g=eu(g)}y=null}else y=null;m!==null&&ST(f,p,m,y,!1),v!==null&&x!==null&&ST(f,x,v,y,!0)}}e:{if(p=c?Gu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=s5;else if(hT(p))if(hD)C=c5;else{C=a5;var T=o5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=l5);if(C&&(C=C(t,c))){fD(f,C,n,d);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&fS(p,"number",p.value)}switch(T=c?Gu(c):window,t){case"focusin":(hT(T)||T.contentEditable==="true")&&(zu=T,AS=c,uh=null);break;case"focusout":uh=AS=zu=null;break;case"mousedown":bS=!0;break;case"contextmenu":case"mouseup":case"dragend":bS=!1,yT(f,n,d);break;case"selectionchange":if(f5)break;case"keydown":case"keyup":yT(f,n,d)}var P;if(JE)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else ku?uD(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(cD&&n.locale!=="ko"&&(ku||B!=="onCompositionStart"?B==="onCompositionEnd"&&ku&&(P=lD()):(Ca=d,WE="value"in Ca?Ca.value:Ca.textContent,ku=!0)),T=f0(c,B),0<T.length&&(B=new cT(B,t,null,n,d),f.push({event:B,listeners:T}),P?B.data=P:(P=dD(n),P!==null&&(B.data=P)))),(P=e5?t5(t,n):n5(t,n))&&(c=f0(c,"onBeforeInput"),0<c.length&&(d=new cT("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=P))}ED(f,e)})}function Nh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function f0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ph(t,n),s!=null&&r.unshift(Nh(t,s,i)),s=Ph(t,e),s!=null&&r.push(Nh(t,s,i))),t=t.return}return r}function eu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ST(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ph(n,s),l!=null&&o.unshift(Nh(n,l,a))):i||(l=Ph(n,s),l!=null&&o.push(Nh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var g5=/\r\n?/g,v5=/\u0000|\uFFFD/g;function wT(t){return(typeof t=="string"?t:""+t).replace(g5,`
`).replace(v5,"")}function ug(t,e,n){if(e=wT(e),wT(t)!==e&&n)throw Error(Ie(425))}function h0(){}var MS=null,CS=null;function TS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var RS=typeof setTimeout=="function"?setTimeout:void 0,y5=typeof clearTimeout=="function"?clearTimeout:void 0,ET=typeof Promise=="function"?Promise:void 0,x5=typeof queueMicrotask=="function"?queueMicrotask:typeof ET<"u"?function(t){return ET.resolve(null).then(t).catch(_5)}:RS;function _5(t){setTimeout(function(){throw t})}function A1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Dh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Dh(e)}function La(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function AT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ud=Math.random().toString(36).slice(2),eo="__reactFiber$"+Ud,Uh="__reactProps$"+Ud,Ho="__reactContainer$"+Ud,PS="__reactEvents$"+Ud,S5="__reactListeners$"+Ud,w5="__reactHandles$"+Ud;function Yl(t){var e=t[eo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ho]||n[eo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=AT(t);t!==null;){if(n=t[eo])return n;t=AT(t)}return e}t=n,n=t.parentNode}return null}function Sp(t){return t=t[eo]||t[Ho],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function ry(t){return t[Uh]||null}var IS=[],$u=-1;function il(t){return{current:t}}function gn(t){0>$u||(t.current=IS[$u],IS[$u]=null,$u--)}function un(t,e){$u++,IS[$u]=t.current,t.current=e}var ja={},Ur=il(ja),di=il(!1),hc=ja;function md(t,e){var n=t.type.contextTypes;if(!n)return ja;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function fi(t){return t=t.childContextTypes,t!=null}function p0(){gn(di),gn(Ur)}function bT(t,e,n){if(Ur.current!==ja)throw Error(Ie(168));un(Ur,e),un(di,n)}function bD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ie(108,oz(t)||"Unknown",i));return Rn({},n,r)}function m0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ja,hc=Ur.current,un(Ur,t),un(di,di.current),!0}function MT(t,e,n){var r=t.stateNode;if(!r)throw Error(Ie(169));n?(t=bD(t,e,hc),r.__reactInternalMemoizedMergedChildContext=t,gn(di),gn(Ur),un(Ur,t)):gn(di),un(di,n)}var To=null,iy=!1,b1=!1;function MD(t){To===null?To=[t]:To.push(t)}function E5(t){iy=!0,MD(t)}function sl(){if(!b1&&To!==null){b1=!0;var t=0,e=en;try{var n=To;for(en=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}To=null,iy=!1}catch(i){throw To!==null&&(To=To.slice(t+1)),QB(HE,sl),i}finally{en=e,b1=!1}}return null}var Vu=[],Wu=0,g0=null,v0=0,Qi=[],qi=0,pc=null,Io=1,Bo="";function Ol(t,e){Vu[Wu++]=v0,Vu[Wu++]=g0,g0=t,v0=e}function CD(t,e,n){Qi[qi++]=Io,Qi[qi++]=Bo,Qi[qi++]=pc,pc=t;var r=Io;t=Bo;var i=32-Cs(r)-1;r&=~(1<<i),n+=1;var s=32-Cs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Io=1<<32-Cs(e)+i|n<<i|r,Bo=s+t}else Io=1<<s|n<<i|r,Bo=t}function YE(t){t.return!==null&&(Ol(t,1),CD(t,1,0))}function QE(t){for(;t===g0;)g0=Vu[--Wu],Vu[Wu]=null,v0=Vu[--Wu],Vu[Wu]=null;for(;t===pc;)pc=Qi[--qi],Qi[qi]=null,Bo=Qi[--qi],Qi[qi]=null,Io=Qi[--qi],Qi[qi]=null}var Pi=null,Ci=null,_n=!1,Es=null;function TD(t,e){var n=ns(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function CT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pi=t,Ci=La(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pi=t,Ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pc!==null?{id:Io,overflow:Bo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ns(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pi=t,Ci=null,!0):!1;default:return!1}}function BS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function DS(t){if(_n){var e=Ci;if(e){var n=e;if(!CT(t,e)){if(BS(t))throw Error(Ie(418));e=La(n.nextSibling);var r=Pi;e&&CT(t,e)?TD(r,n):(t.flags=t.flags&-4097|2,_n=!1,Pi=t)}}else{if(BS(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,_n=!1,Pi=t}}}function TT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pi=t}function dg(t){if(t!==Pi)return!1;if(!_n)return TT(t),_n=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!TS(t.type,t.memoizedProps)),e&&(e=Ci)){if(BS(t))throw RD(),Error(Ie(418));for(;e;)TD(t,e),e=La(e.nextSibling)}if(TT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ci=La(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ci=null}}else Ci=Pi?La(t.stateNode.nextSibling):null;return!0}function RD(){for(var t=Ci;t;)t=La(t.nextSibling)}function gd(){Ci=Pi=null,_n=!1}function qE(t){Es===null?Es=[t]:Es.push(t)}var A5=Wo.ReactCurrentBatchConfig;function _s(t,e){if(t&&t.defaultProps){e=Rn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var y0=il(null),x0=null,ju=null,ZE=null;function eA(){ZE=ju=x0=null}function tA(t){var e=y0.current;gn(y0),t._currentValue=e}function LS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sd(t,e){x0=t,ZE=ju=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(li=!0),t.firstContext=null)}function is(t){var e=t._currentValue;if(ZE!==t)if(t={context:t,memoizedValue:e,next:null},ju===null){if(x0===null)throw Error(Ie(308));ju=t,x0.dependencies={lanes:0,firstContext:t}}else ju=ju.next=t;return e}var Ql=null;function nA(t){Ql===null?Ql=[t]:Ql.push(t)}function PD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,nA(e)):(n.next=i.next,i.next=n),e.interleaved=n,Go(t,r)}function Go(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sa=!1;function rA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ID(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Go(t,n)}return i=r.interleaved,i===null?(e.next=e,nA(r)):(e.next=i.next,i.next=e),r.interleaved=e,Go(t,n)}function zv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,GE(t,n)}}function RT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _0(t,e,n,r){var i=t.updateQueue;Sa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(p=e,m=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Rn({},f,p);break e;case 2:Sa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);gc|=o,t.lanes=o,t.memoizedState=f}}function PT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ie(191,i));i.call(r)}}}var BD=new PB.Component().refs;function FS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sy={isMounted:function(t){return(t=t._reactInternals)?Mc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kr(),i=Na(t),s=Oo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Fa(t,s,i),e!==null&&(Ts(e,t,i,r),zv(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kr(),i=Na(t),s=Oo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Fa(t,s,i),e!==null&&(Ts(e,t,i,r),zv(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kr(),r=Na(t),i=Oo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fa(t,i,r),e!==null&&(Ts(e,t,r,n),zv(e,t,r))}};function IT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fh(n,r)||!Fh(i,s):!0}function DD(t,e,n){var r=!1,i=ja,s=e.contextType;return typeof s=="object"&&s!==null?s=is(s):(i=fi(e)?hc:Ur.current,r=e.contextTypes,s=(r=r!=null)?md(t,i):ja),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function BT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sy.enqueueReplaceState(e,e.state,null)}function OS(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=BD,rA(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=is(s):(s=fi(e)?hc:Ur.current,i.context=md(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(FS(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sy.enqueueReplaceState(i,i.state,null),_0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var r=n.stateNode}if(!r)throw Error(Ie(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===BD&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,t))}return t}function fg(t,e){throw t=Object.prototype.toString.call(e),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function DT(t){var e=t._init;return e(t._payload)}function LD(t){function e(g,_){if(t){var w=g.deletions;w===null?(g.deletions=[_],g.flags|=16):w.push(_)}}function n(g,_){if(!t)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function r(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=Ua(g,_),g.index=0,g.sibling=null,g}function s(g,_,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<_?(g.flags|=2,_):w):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,_,w,b){return _===null||_.tag!==6?(_=B1(w,g.mode,b),_.return=g,_):(_=i(_,w),_.return=g,_)}function l(g,_,w,b){var C=w.type;return C===Uu?d(g,_,w.props.children,b,w.key):_!==null&&(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===_a&&DT(C)===_.type)?(b=i(_,w.props),b.ref=Mf(g,_,w),b.return=g,b):(b=jv(w.type,w.key,w.props,null,g.mode,b),b.ref=Mf(g,_,w),b.return=g,b)}function c(g,_,w,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=D1(w,g.mode,b),_.return=g,_):(_=i(_,w.children||[]),_.return=g,_)}function d(g,_,w,b,C){return _===null||_.tag!==7?(_=oc(w,g.mode,b,C),_.return=g,_):(_=i(_,w),_.return=g,_)}function f(g,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=B1(""+_,g.mode,w),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case tg:return w=jv(_.type,_.key,_.props,null,g.mode,w),w.ref=Mf(g,null,_),w.return=g,w;case Nu:return _=D1(_,g.mode,w),_.return=g,_;case _a:var b=_._init;return f(g,b(_._payload),w)}if(eh(_)||Sf(_))return _=oc(_,g.mode,w,null),_.return=g,_;fg(g,_)}return null}function p(g,_,w,b){var C=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(g,_,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tg:return w.key===C?l(g,_,w,b):null;case Nu:return w.key===C?c(g,_,w,b):null;case _a:return C=w._init,p(g,_,C(w._payload),b)}if(eh(w)||Sf(w))return C!==null?null:d(g,_,w,b,null);fg(g,w)}return null}function m(g,_,w,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(w)||null,a(_,g,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tg:return g=g.get(b.key===null?w:b.key)||null,l(_,g,b,C);case Nu:return g=g.get(b.key===null?w:b.key)||null,c(_,g,b,C);case _a:var T=b._init;return m(g,_,w,T(b._payload),C)}if(eh(b)||Sf(b))return g=g.get(w)||null,d(_,g,b,C,null);fg(_,b)}return null}function v(g,_,w,b){for(var C=null,T=null,P=_,B=_=0,R=null;P!==null&&B<w.length;B++){P.index>B?(R=P,P=null):R=P.sibling;var D=p(g,P,w[B],b);if(D===null){P===null&&(P=R);break}t&&P&&D.alternate===null&&e(g,P),_=s(D,_,B),T===null?C=D:T.sibling=D,T=D,P=R}if(B===w.length)return n(g,P),_n&&Ol(g,B),C;if(P===null){for(;B<w.length;B++)P=f(g,w[B],b),P!==null&&(_=s(P,_,B),T===null?C=P:T.sibling=P,T=P);return _n&&Ol(g,B),C}for(P=r(g,P);B<w.length;B++)R=m(P,g,B,w[B],b),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?B:R.key),_=s(R,_,B),T===null?C=R:T.sibling=R,T=R);return t&&P.forEach(function(k){return e(g,k)}),_n&&Ol(g,B),C}function y(g,_,w,b){var C=Sf(w);if(typeof C!="function")throw Error(Ie(150));if(w=C.call(w),w==null)throw Error(Ie(151));for(var T=C=null,P=_,B=_=0,R=null,D=w.next();P!==null&&!D.done;B++,D=w.next()){P.index>B?(R=P,P=null):R=P.sibling;var k=p(g,P,D.value,b);if(k===null){P===null&&(P=R);break}t&&P&&k.alternate===null&&e(g,P),_=s(k,_,B),T===null?C=k:T.sibling=k,T=k,P=R}if(D.done)return n(g,P),_n&&Ol(g,B),C;if(P===null){for(;!D.done;B++,D=w.next())D=f(g,D.value,b),D!==null&&(_=s(D,_,B),T===null?C=D:T.sibling=D,T=D);return _n&&Ol(g,B),C}for(P=r(g,P);!D.done;B++,D=w.next())D=m(P,g,B,D.value,b),D!==null&&(t&&D.alternate!==null&&P.delete(D.key===null?B:D.key),_=s(D,_,B),T===null?C=D:T.sibling=D,T=D);return t&&P.forEach(function(X){return e(g,X)}),_n&&Ol(g,B),C}function x(g,_,w,b){if(typeof w=="object"&&w!==null&&w.type===Uu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case tg:e:{for(var C=w.key,T=_;T!==null;){if(T.key===C){if(C=w.type,C===Uu){if(T.tag===7){n(g,T.sibling),_=i(T,w.props.children),_.return=g,g=_;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===_a&&DT(C)===T.type){n(g,T.sibling),_=i(T,w.props),_.ref=Mf(g,T,w),_.return=g,g=_;break e}n(g,T);break}else e(g,T);T=T.sibling}w.type===Uu?(_=oc(w.props.children,g.mode,b,w.key),_.return=g,g=_):(b=jv(w.type,w.key,w.props,null,g.mode,b),b.ref=Mf(g,_,w),b.return=g,g=b)}return o(g);case Nu:e:{for(T=w.key;_!==null;){if(_.key===T)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(g,_.sibling),_=i(_,w.children||[]),_.return=g,g=_;break e}else{n(g,_);break}else e(g,_);_=_.sibling}_=D1(w,g.mode,b),_.return=g,g=_}return o(g);case _a:return T=w._init,x(g,_,T(w._payload),b)}if(eh(w))return v(g,_,w,b);if(Sf(w))return y(g,_,w,b);fg(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(g,_.sibling),_=i(_,w),_.return=g,g=_):(n(g,_),_=B1(w,g.mode,b),_.return=g,g=_),o(g)):n(g,_)}return x}var vd=LD(!0),FD=LD(!1),wp={},ro=il(wp),kh=il(wp),zh=il(wp);function ql(t){if(t===wp)throw Error(Ie(174));return t}function iA(t,e){switch(un(zh,e),un(kh,t),un(ro,wp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pS(e,t)}gn(ro),un(ro,e)}function yd(){gn(ro),gn(kh),gn(zh)}function OD(t){ql(zh.current);var e=ql(ro.current),n=pS(e,t.type);e!==n&&(un(kh,t),un(ro,n))}function sA(t){kh.current===t&&(gn(ro),gn(kh))}var bn=il(0);function S0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var M1=[];function oA(){for(var t=0;t<M1.length;t++)M1[t]._workInProgressVersionPrimary=null;M1.length=0}var Hv=Wo.ReactCurrentDispatcher,C1=Wo.ReactCurrentBatchConfig,mc=0,Tn=null,tr=null,dr=null,w0=!1,dh=!1,Hh=0,b5=0;function Pr(){throw Error(Ie(321))}function aA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Is(t[n],e[n]))return!1;return!0}function lA(t,e,n,r,i,s){if(mc=s,Tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hv.current=t===null||t.memoizedState===null?R5:P5,t=n(r,i),dh){s=0;do{if(dh=!1,Hh=0,25<=s)throw Error(Ie(301));s+=1,dr=tr=null,e.updateQueue=null,Hv.current=I5,t=n(r,i)}while(dh)}if(Hv.current=E0,e=tr!==null&&tr.next!==null,mc=0,dr=tr=Tn=null,w0=!1,e)throw Error(Ie(300));return t}function cA(){var t=Hh!==0;return Hh=0,t}function Qs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Tn.memoizedState=dr=t:dr=dr.next=t,dr}function ss(){if(tr===null){var t=Tn.alternate;t=t!==null?t.memoizedState:null}else t=tr.next;var e=dr===null?Tn.memoizedState:dr.next;if(e!==null)dr=e,tr=t;else{if(t===null)throw Error(Ie(310));tr=t,t={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},dr===null?Tn.memoizedState=dr=t:dr=dr.next=t}return dr}function Gh(t,e){return typeof e=="function"?e(t):e}function T1(t){var e=ss(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=tr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((mc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Tn.lanes|=d,gc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Is(r,e.memoizedState)||(li=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Tn.lanes|=s,gc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function R1(t){var e=ss(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Is(s,e.memoizedState)||(li=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ND(){}function UD(t,e){var n=Tn,r=ss(),i=e(),s=!Is(r.memoizedState,i);if(s&&(r.memoizedState=i,li=!0),r=r.queue,uA(HD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||dr!==null&&dr.memoizedState.tag&1){if(n.flags|=2048,$h(9,zD.bind(null,n,r,i,e),void 0,null),fr===null)throw Error(Ie(349));mc&30||kD(n,e,i)}return i}function kD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zD(t,e,n,r){e.value=n,e.getSnapshot=r,GD(e)&&$D(t)}function HD(t,e,n){return n(function(){GD(e)&&$D(t)})}function GD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Is(t,n)}catch{return!0}}function $D(t){var e=Go(t,1);e!==null&&Ts(e,t,1,-1)}function LT(t){var e=Qs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gh,lastRenderedState:t},e.queue=t,t=t.dispatch=T5.bind(null,Tn,t),[e.memoizedState,t]}function $h(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function VD(){return ss().memoizedState}function Gv(t,e,n,r){var i=Qs();Tn.flags|=t,i.memoizedState=$h(1|e,n,void 0,r===void 0?null:r)}function oy(t,e,n,r){var i=ss();r=r===void 0?null:r;var s=void 0;if(tr!==null){var o=tr.memoizedState;if(s=o.destroy,r!==null&&aA(r,o.deps)){i.memoizedState=$h(e,n,s,r);return}}Tn.flags|=t,i.memoizedState=$h(1|e,n,s,r)}function FT(t,e){return Gv(8390656,8,t,e)}function uA(t,e){return oy(2048,8,t,e)}function WD(t,e){return oy(4,2,t,e)}function jD(t,e){return oy(4,4,t,e)}function XD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JD(t,e,n){return n=n!=null?n.concat([t]):null,oy(4,4,XD.bind(null,e,t),n)}function dA(){}function KD(t,e){var n=ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&aA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function YD(t,e){var n=ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&aA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function QD(t,e,n){return mc&21?(Is(n,e)||(n=eD(),Tn.lanes|=n,gc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,li=!0),t.memoizedState=n)}function M5(t,e){var n=en;en=n!==0&&4>n?n:4,t(!0);var r=C1.transition;C1.transition={};try{t(!1),e()}finally{en=n,C1.transition=r}}function qD(){return ss().memoizedState}function C5(t,e,n){var r=Na(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ZD(t))eL(e,n);else if(n=PD(t,e,n,r),n!==null){var i=Kr();Ts(n,t,r,i),tL(n,e,r)}}function T5(t,e,n){var r=Na(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZD(t))eL(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Is(a,o)){var l=e.interleaved;l===null?(i.next=i,nA(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=PD(t,e,i,r),n!==null&&(i=Kr(),Ts(n,t,r,i),tL(n,e,r))}}function ZD(t){var e=t.alternate;return t===Tn||e!==null&&e===Tn}function eL(t,e){dh=w0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tL(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,GE(t,n)}}var E0={readContext:is,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},R5={readContext:is,useCallback:function(t,e){return Qs().memoizedState=[t,e===void 0?null:e],t},useContext:is,useEffect:FT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gv(4194308,4,XD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gv(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gv(4,2,t,e)},useMemo:function(t,e){var n=Qs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=C5.bind(null,Tn,t),[r.memoizedState,t]},useRef:function(t){var e=Qs();return t={current:t},e.memoizedState=t},useState:LT,useDebugValue:dA,useDeferredValue:function(t){return Qs().memoizedState=t},useTransition:function(){var t=LT(!1),e=t[0];return t=M5.bind(null,t[1]),Qs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Tn,i=Qs();if(_n){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=e(),fr===null)throw Error(Ie(349));mc&30||kD(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,FT(HD.bind(null,r,s,t),[t]),r.flags|=2048,$h(9,zD.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Qs(),e=fr.identifierPrefix;if(_n){var n=Bo,r=Io;n=(r&~(1<<32-Cs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=b5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},P5={readContext:is,useCallback:KD,useContext:is,useEffect:uA,useImperativeHandle:JD,useInsertionEffect:WD,useLayoutEffect:jD,useMemo:YD,useReducer:T1,useRef:VD,useState:function(){return T1(Gh)},useDebugValue:dA,useDeferredValue:function(t){var e=ss();return QD(e,tr.memoizedState,t)},useTransition:function(){var t=T1(Gh)[0],e=ss().memoizedState;return[t,e]},useMutableSource:ND,useSyncExternalStore:UD,useId:qD,unstable_isNewReconciler:!1},I5={readContext:is,useCallback:KD,useContext:is,useEffect:uA,useImperativeHandle:JD,useInsertionEffect:WD,useLayoutEffect:jD,useMemo:YD,useReducer:R1,useRef:VD,useState:function(){return R1(Gh)},useDebugValue:dA,useDeferredValue:function(t){var e=ss();return tr===null?e.memoizedState=t:QD(e,tr.memoizedState,t)},useTransition:function(){var t=R1(Gh)[0],e=ss().memoizedState;return[t,e]},useMutableSource:ND,useSyncExternalStore:UD,useId:qD,unstable_isNewReconciler:!1};function xd(t,e){try{var n="",r=e;do n+=sz(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function P1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function NS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var B5=typeof WeakMap=="function"?WeakMap:Map;function nL(t,e,n){n=Oo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){b0||(b0=!0,XS=r),NS(t,e)},n}function rL(t,e,n){n=Oo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){NS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){NS(t,e),typeof r!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function OT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new B5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=j5.bind(null,t,e,n),e.then(t,t))}function NT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function UT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Oo(-1,1),e.tag=2,Fa(n,e,1))),n.lanes|=1),t)}var D5=Wo.ReactCurrentOwner,li=!1;function Xr(t,e,n,r){e.child=t===null?FD(e,null,n,r):vd(e,t.child,n,r)}function kT(t,e,n,r,i){n=n.render;var s=e.ref;return sd(e,i),r=lA(t,e,n,r,s,i),n=cA(),t!==null&&!li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$o(t,e,i)):(_n&&n&&YE(e),e.flags|=1,Xr(t,e,r,i),e.child)}function zT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!xA(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,iL(t,e,s,r,i)):(t=jv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Fh,n(o,r)&&t.ref===e.ref)return $o(t,e,i)}return e.flags|=1,t=Ua(s,r),t.ref=e.ref,t.return=e,e.child=t}function iL(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Fh(s,r)&&t.ref===e.ref)if(li=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(li=!0);else return e.lanes=t.lanes,$o(t,e,i)}return US(t,e,n,r,i)}function sL(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Ju,Mi),Mi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,un(Ju,Mi),Mi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,un(Ju,Mi),Mi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,un(Ju,Mi),Mi|=r;return Xr(t,e,i,n),e.child}function oL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function US(t,e,n,r,i){var s=fi(n)?hc:Ur.current;return s=md(e,s),sd(e,i),n=lA(t,e,n,r,s,i),r=cA(),t!==null&&!li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$o(t,e,i)):(_n&&r&&YE(e),e.flags|=1,Xr(t,e,n,i),e.child)}function HT(t,e,n,r,i){if(fi(n)){var s=!0;m0(e)}else s=!1;if(sd(e,i),e.stateNode===null)$v(t,e),DD(e,n,r),OS(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=is(c):(c=fi(n)?hc:Ur.current,c=md(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&BT(e,o,r,c),Sa=!1;var p=e.memoizedState;o.state=p,_0(e,r,o,i),l=e.memoizedState,a!==r||p!==l||di.current||Sa?(typeof d=="function"&&(FS(e,n,d,r),l=e.memoizedState),(a=Sa||IT(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ID(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_s(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=is(l):(l=fi(n)?hc:Ur.current,l=md(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&BT(e,o,r,l),Sa=!1,p=e.memoizedState,o.state=p,_0(e,r,o,i);var v=e.memoizedState;a!==f||p!==v||di.current||Sa?(typeof m=="function"&&(FS(e,n,m,r),v=e.memoizedState),(c=Sa||IT(e,n,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return kS(t,e,n,r,s,i)}function kS(t,e,n,r,i,s){oL(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&MT(e,n,!1),$o(t,e,s);r=e.stateNode,D5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vd(e,t.child,null,s),e.child=vd(e,null,a,s)):Xr(t,e,a,s),e.memoizedState=r.state,i&&MT(e,n,!0),e.child}function aL(t){var e=t.stateNode;e.pendingContext?bT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bT(t,e.context,!1),iA(t,e.containerInfo)}function GT(t,e,n,r,i){return gd(),qE(i),e.flags|=256,Xr(t,e,n,r),e.child}var zS={dehydrated:null,treeContext:null,retryLane:0};function HS(t){return{baseLanes:t,cachePool:null,transitions:null}}function lL(t,e,n){var r=e.pendingProps,i=bn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),un(bn,i&1),t===null)return DS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cy(o,r,0,null),t=oc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=HS(n),e.memoizedState=zS,t):fA(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return L5(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ua(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ua(a,s):(s=oc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?HS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=zS,r}return s=t.child,t=s.sibling,r=Ua(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fA(t,e){return e=cy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hg(t,e,n,r){return r!==null&&qE(r),vd(e,t.child,null,n),t=fA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L5(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=P1(Error(Ie(422))),hg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cy({mode:"visible",children:r.children},i,0,null),s=oc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vd(e,t.child,null,o),e.child.memoizedState=HS(o),e.memoizedState=zS,s);if(!(e.mode&1))return hg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ie(419)),r=P1(s,r,void 0),hg(t,e,o,r)}if(a=(o&t.childLanes)!==0,li||a){if(r=fr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Go(t,i),Ts(r,t,i,-1))}return yA(),r=P1(Error(Ie(421))),hg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=X5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ci=La(i.nextSibling),Pi=e,_n=!0,Es=null,t!==null&&(Qi[qi++]=Io,Qi[qi++]=Bo,Qi[qi++]=pc,Io=t.id,Bo=t.overflow,pc=e),e=fA(e,r.children),e.flags|=4096,e)}function $T(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),LS(t.return,e,n)}function I1(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function cL(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Xr(t,e,r.children,n),r=bn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$T(t,n,e);else if(t.tag===19)$T(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(un(bn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&S0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),I1(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&S0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}I1(e,!0,n,null,s);break;case"together":I1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $v(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $o(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ie(153));if(e.child!==null){for(t=e.child,n=Ua(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ua(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function F5(t,e,n){switch(e.tag){case 3:aL(e),gd();break;case 5:OD(e);break;case 1:fi(e.type)&&m0(e);break;case 4:iA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;un(y0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(un(bn,bn.current&1),e.flags|=128,null):n&e.child.childLanes?lL(t,e,n):(un(bn,bn.current&1),t=$o(t,e,n),t!==null?t.sibling:null);un(bn,bn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cL(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),un(bn,bn.current),r)break;return null;case 22:case 23:return e.lanes=0,sL(t,e,n)}return $o(t,e,n)}var uL,GS,dL,fL;uL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};GS=function(){};dL=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ql(ro.current);var s=null;switch(n){case"input":i=uS(t,i),r=uS(t,r),s=[];break;case"select":i=Rn({},i,{value:void 0}),r=Rn({},r,{value:void 0}),s=[];break;case"textarea":i=hS(t,i),r=hS(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=h0)}mS(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Th.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Th.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&pn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};fL=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cf(t,e){if(!_n)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ir(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function O5(t,e,n){var r=e.pendingProps;switch(QE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(e),null;case 1:return fi(e.type)&&p0(),Ir(e),null;case 3:return r=e.stateNode,yd(),gn(di),gn(Ur),oA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Es!==null&&(YS(Es),Es=null))),GS(t,e),Ir(e),null;case 5:sA(e);var i=ql(zh.current);if(n=e.type,t!==null&&e.stateNode!=null)dL(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return Ir(e),null}if(t=ql(ro.current),dg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[eo]=e,r[Uh]=s,t=(e.mode&1)!==0,n){case"dialog":pn("cancel",r),pn("close",r);break;case"iframe":case"object":case"embed":pn("load",r);break;case"video":case"audio":for(i=0;i<nh.length;i++)pn(nh[i],r);break;case"source":pn("error",r);break;case"img":case"image":case"link":pn("error",r),pn("load",r);break;case"details":pn("toggle",r);break;case"input":qC(r,s),pn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pn("invalid",r);break;case"textarea":eT(r,s),pn("invalid",r)}mS(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ug(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ug(r.textContent,a,t),i=["children",""+a]):Th.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pn("scroll",r)}switch(n){case"input":ng(r),ZC(r,s,!0);break;case"textarea":ng(r),tT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=h0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kB(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[eo]=e,t[Uh]=r,uL(t,e,!1,!1),e.stateNode=t;e:{switch(o=gS(n,r),n){case"dialog":pn("cancel",t),pn("close",t),i=r;break;case"iframe":case"object":case"embed":pn("load",t),i=r;break;case"video":case"audio":for(i=0;i<nh.length;i++)pn(nh[i],t);i=r;break;case"source":pn("error",t),i=r;break;case"img":case"image":case"link":pn("error",t),pn("load",t),i=r;break;case"details":pn("toggle",t),i=r;break;case"input":qC(t,r),i=uS(t,r),pn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Rn({},r,{value:void 0}),pn("invalid",t);break;case"textarea":eT(t,r),i=hS(t,r),pn("invalid",t);break;default:i=r}mS(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?GB(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zB(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rh(t,l):typeof l=="number"&&Rh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Th.hasOwnProperty(s)?l!=null&&s==="onScroll"&&pn("scroll",t):l!=null&&OE(t,s,l,o))}switch(n){case"input":ng(t),ZC(t,r,!1);break;case"textarea":ng(t),tT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wa(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?td(t,!!r.multiple,s,!1):r.defaultValue!=null&&td(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=h0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ir(e),null;case 6:if(t&&e.stateNode!=null)fL(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(n=ql(zh.current),ql(ro.current),dg(e)){if(r=e.stateNode,n=e.memoizedProps,r[eo]=e,(s=r.nodeValue!==n)&&(t=Pi,t!==null))switch(t.tag){case 3:ug(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ug(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[eo]=e,e.stateNode=r}return Ir(e),null;case 13:if(gn(bn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_n&&Ci!==null&&e.mode&1&&!(e.flags&128))RD(),gd(),e.flags|=98560,s=!1;else if(s=dg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ie(317));s[eo]=e}else gd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ir(e),s=!1}else Es!==null&&(YS(Es),Es=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bn.current&1?nr===0&&(nr=3):yA())),e.updateQueue!==null&&(e.flags|=4),Ir(e),null);case 4:return yd(),GS(t,e),t===null&&Oh(e.stateNode.containerInfo),Ir(e),null;case 10:return tA(e.type._context),Ir(e),null;case 17:return fi(e.type)&&p0(),Ir(e),null;case 19:if(gn(bn),s=e.memoizedState,s===null)return Ir(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Cf(s,!1);else{if(nr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=S0(t),o!==null){for(e.flags|=128,Cf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return un(bn,bn.current&1|2),e.child}t=t.sibling}s.tail!==null&&zn()>_d&&(e.flags|=128,r=!0,Cf(s,!1),e.lanes=4194304)}else{if(!r)if(t=S0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_n)return Ir(e),null}else 2*zn()-s.renderingStartTime>_d&&n!==1073741824&&(e.flags|=128,r=!0,Cf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=zn(),e.sibling=null,n=bn.current,un(bn,r?n&1|2:n&1),e):(Ir(e),null);case 22:case 23:return vA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mi&1073741824&&(Ir(e),e.subtreeFlags&6&&(e.flags|=8192)):Ir(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function N5(t,e){switch(QE(e),e.tag){case 1:return fi(e.type)&&p0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yd(),gn(di),gn(Ur),oA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sA(e),null;case 13:if(gn(bn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));gd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gn(bn),null;case 4:return yd(),null;case 10:return tA(e.type._context),null;case 22:case 23:return vA(),null;case 24:return null;default:return null}}var pg=!1,Fr=!1,U5=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Xu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dn(t,e,r)}else n.current=null}function $S(t,e,n){try{n()}catch(r){Dn(t,e,r)}}var VT=!1;function k5(t,e){if(MS=u0,t=gD(),KE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(CS={focusedElem:t,selectionRange:n},u0=!1,Qe=e;Qe!==null;)if(e=Qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Qe=t;else for(;Qe!==null;){e=Qe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:_s(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(b){Dn(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}return v=VT,VT=!1,v}function fh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&$S(e,n,s)}i=i.next}while(i!==r)}}function ay(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function VS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hL(t){var e=t.alternate;e!==null&&(t.alternate=null,hL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[eo],delete e[Uh],delete e[PS],delete e[S5],delete e[w5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pL(t){return t.tag===5||t.tag===3||t.tag===4}function WT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function WS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=h0));else if(r!==4&&(t=t.child,t!==null))for(WS(t,e,n),t=t.sibling;t!==null;)WS(t,e,n),t=t.sibling}function jS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jS(t,e,n),t=t.sibling;t!==null;)jS(t,e,n),t=t.sibling}var xr=null,ws=!1;function oa(t,e,n){for(n=n.child;n!==null;)mL(t,e,n),n=n.sibling}function mL(t,e,n){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(Z0,n)}catch{}switch(n.tag){case 5:Fr||Xu(n,e);case 6:var r=xr,i=ws;xr=null,oa(t,e,n),xr=r,ws=i,xr!==null&&(ws?(t=xr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xr.removeChild(n.stateNode));break;case 18:xr!==null&&(ws?(t=xr,n=n.stateNode,t.nodeType===8?A1(t.parentNode,n):t.nodeType===1&&A1(t,n),Dh(t)):A1(xr,n.stateNode));break;case 4:r=xr,i=ws,xr=n.stateNode.containerInfo,ws=!0,oa(t,e,n),xr=r,ws=i;break;case 0:case 11:case 14:case 15:if(!Fr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&$S(n,e,o),i=i.next}while(i!==r)}oa(t,e,n);break;case 1:if(!Fr&&(Xu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Dn(n,e,a)}oa(t,e,n);break;case 21:oa(t,e,n);break;case 22:n.mode&1?(Fr=(r=Fr)||n.memoizedState!==null,oa(t,e,n),Fr=r):oa(t,e,n);break;default:oa(t,e,n)}}function jT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new U5),e.forEach(function(r){var i=J5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ps(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xr=a.stateNode,ws=!1;break e;case 3:xr=a.stateNode.containerInfo,ws=!0;break e;case 4:xr=a.stateNode.containerInfo,ws=!0;break e}a=a.return}if(xr===null)throw Error(Ie(160));mL(s,o,i),xr=null,ws=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Dn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gL(e,t),e=e.sibling}function gL(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ps(e,t),js(t),r&4){try{fh(3,t,t.return),ay(3,t)}catch(y){Dn(t,t.return,y)}try{fh(5,t,t.return)}catch(y){Dn(t,t.return,y)}}break;case 1:ps(e,t),js(t),r&512&&n!==null&&Xu(n,n.return);break;case 5:if(ps(e,t),js(t),r&512&&n!==null&&Xu(n,n.return),t.flags&32){var i=t.stateNode;try{Rh(i,"")}catch(y){Dn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&NB(i,s),gS(a,o);var c=gS(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?GB(i,f):d==="dangerouslySetInnerHTML"?zB(i,f):d==="children"?Rh(i,f):OE(i,d,f,c)}switch(a){case"input":dS(i,s);break;case"textarea":UB(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?td(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?td(i,!!s.multiple,s.defaultValue,!0):td(i,!!s.multiple,s.multiple?[]:"",!1))}i[Uh]=s}catch(y){Dn(t,t.return,y)}}break;case 6:if(ps(e,t),js(t),r&4){if(t.stateNode===null)throw Error(Ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Dn(t,t.return,y)}}break;case 3:if(ps(e,t),js(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dh(e.containerInfo)}catch(y){Dn(t,t.return,y)}break;case 4:ps(e,t),js(t);break;case 13:ps(e,t),js(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(mA=zn())),r&4&&jT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Fr=(c=Fr)||d,ps(e,t),Fr=c):ps(e,t),js(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Qe=t,d=t.child;d!==null;){for(f=Qe=d;Qe!==null;){switch(p=Qe,m=p.child,p.tag){case 0:case 11:case 14:case 15:fh(4,p,p.return);break;case 1:Xu(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Dn(r,n,y)}}break;case 5:Xu(p,p.return);break;case 22:if(p.memoizedState!==null){JT(f);continue}}m!==null?(m.return=p,Qe=m):JT(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=HB("display",o))}catch(y){Dn(t,t.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Dn(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ps(e,t),js(t),r&4&&jT(t);break;case 21:break;default:ps(e,t),js(t)}}function js(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pL(n)){var r=n;break e}n=n.return}throw Error(Ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Rh(i,""),r.flags&=-33);var s=WT(t);jS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=WT(t);WS(t,a,o);break;default:throw Error(Ie(161))}}catch(l){Dn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function z5(t,e,n){Qe=t,vL(t)}function vL(t,e,n){for(var r=(t.mode&1)!==0;Qe!==null;){var i=Qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||pg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Fr;a=pg;var c=Fr;if(pg=o,(Fr=l)&&!c)for(Qe=i;Qe!==null;)o=Qe,l=o.child,o.tag===22&&o.memoizedState!==null?KT(i):l!==null?(l.return=o,Qe=l):KT(i);for(;s!==null;)Qe=s,vL(s),s=s.sibling;Qe=i,pg=a,Fr=c}XT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Qe=s):XT(t)}}function XT(t){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fr||ay(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_s(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Dh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}Fr||e.flags&512&&VS(e)}catch(p){Dn(e,e.return,p)}}if(e===t){Qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}}function JT(t){for(;Qe!==null;){var e=Qe;if(e===t){Qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Qe=n;break}Qe=e.return}}function KT(t){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ay(4,e)}catch(l){Dn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dn(e,i,l)}}var s=e.return;try{VS(e)}catch(l){Dn(e,s,l)}break;case 5:var o=e.return;try{VS(e)}catch(l){Dn(e,o,l)}}}catch(l){Dn(e,e.return,l)}if(e===t){Qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Qe=a;break}Qe=e.return}}var H5=Math.ceil,A0=Wo.ReactCurrentDispatcher,hA=Wo.ReactCurrentOwner,rs=Wo.ReactCurrentBatchConfig,Ht=0,fr=null,Qn=null,wr=0,Mi=0,Ju=il(0),nr=0,Vh=null,gc=0,ly=0,pA=0,hh=null,oi=null,mA=0,_d=1/0,Mo=null,b0=!1,XS=null,Oa=null,mg=!1,Ta=null,M0=0,ph=0,JS=null,Vv=-1,Wv=0;function Kr(){return Ht&6?zn():Vv!==-1?Vv:Vv=zn()}function Na(t){return t.mode&1?Ht&2&&wr!==0?wr&-wr:A5.transition!==null?(Wv===0&&(Wv=eD()),Wv):(t=en,t!==0||(t=window.event,t=t===void 0?16:aD(t.type)),t):1}function Ts(t,e,n,r){if(50<ph)throw ph=0,JS=null,Error(Ie(185));xp(t,n,r),(!(Ht&2)||t!==fr)&&(t===fr&&(!(Ht&2)&&(ly|=n),nr===4&&Aa(t,wr)),hi(t,r),n===1&&Ht===0&&!(e.mode&1)&&(_d=zn()+500,iy&&sl()))}function hi(t,e){var n=t.callbackNode;Az(t,e);var r=c0(t,t===fr?wr:0);if(r===0)n!==null&&iT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iT(n),e===1)t.tag===0?E5(YT.bind(null,t)):MD(YT.bind(null,t)),x5(function(){!(Ht&6)&&sl()}),n=null;else{switch(tD(r)){case 1:n=HE;break;case 4:n=qB;break;case 16:n=l0;break;case 536870912:n=ZB;break;default:n=l0}n=bL(n,yL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yL(t,e){if(Vv=-1,Wv=0,Ht&6)throw Error(Ie(327));var n=t.callbackNode;if(od()&&t.callbackNode!==n)return null;var r=c0(t,t===fr?wr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=C0(t,r);else{e=r;var i=Ht;Ht|=2;var s=_L();(fr!==t||wr!==e)&&(Mo=null,_d=zn()+500,sc(t,e));do try{V5();break}catch(a){xL(t,a)}while(1);eA(),A0.current=s,Ht=i,Qn!==null?e=0:(fr=null,wr=0,e=nr)}if(e!==0){if(e===2&&(i=SS(t),i!==0&&(r=i,e=KS(t,i))),e===1)throw n=Vh,sc(t,0),Aa(t,r),hi(t,zn()),n;if(e===6)Aa(t,r);else{if(i=t.current.alternate,!(r&30)&&!G5(i)&&(e=C0(t,r),e===2&&(s=SS(t),s!==0&&(r=s,e=KS(t,s))),e===1))throw n=Vh,sc(t,0),Aa(t,r),hi(t,zn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:Nl(t,oi,Mo);break;case 3:if(Aa(t,r),(r&130023424)===r&&(e=mA+500-zn(),10<e)){if(c0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Kr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=RS(Nl.bind(null,t,oi,Mo),e);break}Nl(t,oi,Mo);break;case 4:if(Aa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Cs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*H5(r/1960))-r,10<r){t.timeoutHandle=RS(Nl.bind(null,t,oi,Mo),r);break}Nl(t,oi,Mo);break;case 5:Nl(t,oi,Mo);break;default:throw Error(Ie(329))}}}return hi(t,zn()),t.callbackNode===n?yL.bind(null,t):null}function KS(t,e){var n=hh;return t.current.memoizedState.isDehydrated&&(sc(t,e).flags|=256),t=C0(t,e),t!==2&&(e=oi,oi=n,e!==null&&YS(e)),t}function YS(t){oi===null?oi=t:oi.push.apply(oi,t)}function G5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Is(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Aa(t,e){for(e&=~pA,e&=~ly,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cs(e),r=1<<n;t[n]=-1,e&=~r}}function YT(t){if(Ht&6)throw Error(Ie(327));od();var e=c0(t,0);if(!(e&1))return hi(t,zn()),null;var n=C0(t,e);if(t.tag!==0&&n===2){var r=SS(t);r!==0&&(e=r,n=KS(t,r))}if(n===1)throw n=Vh,sc(t,0),Aa(t,e),hi(t,zn()),n;if(n===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nl(t,oi,Mo),hi(t,zn()),null}function gA(t,e){var n=Ht;Ht|=1;try{return t(e)}finally{Ht=n,Ht===0&&(_d=zn()+500,iy&&sl())}}function vc(t){Ta!==null&&Ta.tag===0&&!(Ht&6)&&od();var e=Ht;Ht|=1;var n=rs.transition,r=en;try{if(rs.transition=null,en=1,t)return t()}finally{en=r,rs.transition=n,Ht=e,!(Ht&6)&&sl()}}function vA(){Mi=Ju.current,gn(Ju)}function sc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,y5(n)),Qn!==null)for(n=Qn.return;n!==null;){var r=n;switch(QE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&p0();break;case 3:yd(),gn(di),gn(Ur),oA();break;case 5:sA(r);break;case 4:yd();break;case 13:gn(bn);break;case 19:gn(bn);break;case 10:tA(r.type._context);break;case 22:case 23:vA()}n=n.return}if(fr=t,Qn=t=Ua(t.current,null),wr=Mi=e,nr=0,Vh=null,pA=ly=gc=0,oi=hh=null,Ql!==null){for(e=0;e<Ql.length;e++)if(n=Ql[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ql=null}return t}function xL(t,e){do{var n=Qn;try{if(eA(),Hv.current=E0,w0){for(var r=Tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}w0=!1}if(mc=0,dr=tr=Tn=null,dh=!1,Hh=0,hA.current=null,n===null||n.return===null){nr=1,Vh=e,Qn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=wr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=NT(o);if(m!==null){m.flags&=-257,UT(m,o,a,s,e),m.mode&1&&OT(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){OT(s,c,e),yA();break e}l=Error(Ie(426))}}else if(_n&&a.mode&1){var x=NT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),UT(x,o,a,s,e),qE(xd(l,a));break e}}s=l=xd(l,a),nr!==4&&(nr=2),hh===null?hh=[s]:hh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=nL(s,l,e);RT(s,g);break e;case 1:a=l;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Oa===null||!Oa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=rL(s,a,e);RT(s,b);break e}}s=s.return}while(s!==null)}wL(n)}catch(C){e=C,Qn===n&&n!==null&&(Qn=n=n.return);continue}break}while(1)}function _L(){var t=A0.current;return A0.current=E0,t===null?E0:t}function yA(){(nr===0||nr===3||nr===2)&&(nr=4),fr===null||!(gc&268435455)&&!(ly&268435455)||Aa(fr,wr)}function C0(t,e){var n=Ht;Ht|=2;var r=_L();(fr!==t||wr!==e)&&(Mo=null,sc(t,e));do try{$5();break}catch(i){xL(t,i)}while(1);if(eA(),Ht=n,A0.current=r,Qn!==null)throw Error(Ie(261));return fr=null,wr=0,nr}function $5(){for(;Qn!==null;)SL(Qn)}function V5(){for(;Qn!==null&&!mz();)SL(Qn)}function SL(t){var e=AL(t.alternate,t,Mi);t.memoizedProps=t.pendingProps,e===null?wL(t):Qn=e,hA.current=null}function wL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N5(n,e),n!==null){n.flags&=32767,Qn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nr=6,Qn=null;return}}else if(n=O5(n,e,Mi),n!==null){Qn=n;return}if(e=e.sibling,e!==null){Qn=e;return}Qn=e=t}while(e!==null);nr===0&&(nr=5)}function Nl(t,e,n){var r=en,i=rs.transition;try{rs.transition=null,en=1,W5(t,e,n,r)}finally{rs.transition=i,en=r}return null}function W5(t,e,n,r){do od();while(Ta!==null);if(Ht&6)throw Error(Ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bz(t,s),t===fr&&(Qn=fr=null,wr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mg||(mg=!0,bL(l0,function(){return od(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=rs.transition,rs.transition=null;var o=en;en=1;var a=Ht;Ht|=4,hA.current=null,k5(t,n),gL(n,t),d5(CS),u0=!!MS,CS=MS=null,t.current=n,z5(n),gz(),Ht=a,en=o,rs.transition=s}else t.current=n;if(mg&&(mg=!1,Ta=t,M0=i),s=t.pendingLanes,s===0&&(Oa=null),xz(n.stateNode),hi(t,zn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(b0)throw b0=!1,t=XS,XS=null,t;return M0&1&&t.tag!==0&&od(),s=t.pendingLanes,s&1?t===JS?ph++:(ph=0,JS=t):ph=0,sl(),null}function od(){if(Ta!==null){var t=tD(M0),e=rs.transition,n=en;try{if(rs.transition=null,en=16>t?16:t,Ta===null)var r=!1;else{if(t=Ta,Ta=null,M0=0,Ht&6)throw Error(Ie(331));var i=Ht;for(Ht|=4,Qe=t.current;Qe!==null;){var s=Qe,o=s.child;if(Qe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Qe=c;Qe!==null;){var d=Qe;switch(d.tag){case 0:case 11:case 15:fh(8,d,s)}var f=d.child;if(f!==null)f.return=d,Qe=f;else for(;Qe!==null;){d=Qe;var p=d.sibling,m=d.return;if(hL(d),d===c){Qe=null;break}if(p!==null){p.return=m,Qe=p;break}Qe=m}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Qe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Qe=o;else e:for(;Qe!==null;){if(s=Qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fh(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Qe=g;break e}Qe=s.return}}var _=t.current;for(Qe=_;Qe!==null;){o=Qe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Qe=w;else e:for(o=_;Qe!==null;){if(a=Qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ay(9,a)}}catch(C){Dn(a,a.return,C)}if(a===o){Qe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Qe=b;break e}Qe=a.return}}if(Ht=i,sl(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(Z0,t)}catch{}r=!0}return r}finally{en=n,rs.transition=e}}return!1}function QT(t,e,n){e=xd(n,e),e=nL(t,e,1),t=Fa(t,e,1),e=Kr(),t!==null&&(xp(t,1,e),hi(t,e))}function Dn(t,e,n){if(t.tag===3)QT(t,t,n);else for(;e!==null;){if(e.tag===3){QT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oa===null||!Oa.has(r))){t=xd(n,t),t=rL(e,t,1),e=Fa(e,t,1),t=Kr(),e!==null&&(xp(e,1,t),hi(e,t));break}}e=e.return}}function j5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kr(),t.pingedLanes|=t.suspendedLanes&n,fr===t&&(wr&n)===n&&(nr===4||nr===3&&(wr&130023424)===wr&&500>zn()-mA?sc(t,0):pA|=n),hi(t,e)}function EL(t,e){e===0&&(t.mode&1?(e=sg,sg<<=1,!(sg&130023424)&&(sg=4194304)):e=1);var n=Kr();t=Go(t,e),t!==null&&(xp(t,e,n),hi(t,n))}function X5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EL(t,n)}function J5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),EL(t,n)}var AL;AL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||di.current)li=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return li=!1,F5(t,e,n);li=!!(t.flags&131072)}else li=!1,_n&&e.flags&1048576&&CD(e,v0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$v(t,e),t=e.pendingProps;var i=md(e,Ur.current);sd(e,n),i=lA(null,e,r,t,i,n);var s=cA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fi(r)?(s=!0,m0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rA(e),i.updater=sy,e.stateNode=i,i._reactInternals=e,OS(e,r,t,n),e=kS(null,e,r,!0,s,n)):(e.tag=0,_n&&s&&YE(e),Xr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch($v(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Y5(r),t=_s(r,t),i){case 0:e=US(null,e,r,t,n);break e;case 1:e=HT(null,e,r,t,n);break e;case 11:e=kT(null,e,r,t,n);break e;case 14:e=zT(null,e,r,_s(r.type,t),n);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),US(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),HT(t,e,r,i,n);case 3:e:{if(aL(e),t===null)throw Error(Ie(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ID(t,e),_0(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xd(Error(Ie(423)),e),e=GT(t,e,r,n,i);break e}else if(r!==i){i=xd(Error(Ie(424)),e),e=GT(t,e,r,n,i);break e}else for(Ci=La(e.stateNode.containerInfo.firstChild),Pi=e,_n=!0,Es=null,n=FD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gd(),r===i){e=$o(t,e,n);break e}Xr(t,e,r,n)}e=e.child}return e;case 5:return OD(e),t===null&&DS(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,TS(r,i)?o=null:s!==null&&TS(r,s)&&(e.flags|=32),oL(t,e),Xr(t,e,o,n),e.child;case 6:return t===null&&DS(e),null;case 13:return lL(t,e,n);case 4:return iA(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vd(e,null,r,n):Xr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),kT(t,e,r,i,n);case 7:return Xr(t,e,e.pendingProps,n),e.child;case 8:return Xr(t,e,e.pendingProps.children,n),e.child;case 12:return Xr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,un(y0,r._currentValue),r._currentValue=o,s!==null)if(Is(s.value,o)){if(s.children===i.children&&!di.current){e=$o(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Oo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),LS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ie(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),LS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,sd(e,n),i=is(i),r=r(i),e.flags|=1,Xr(t,e,r,n),e.child;case 14:return r=e.type,i=_s(r,e.pendingProps),i=_s(r.type,i),zT(t,e,r,i,n);case 15:return iL(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),$v(t,e),e.tag=1,fi(r)?(t=!0,m0(e)):t=!1,sd(e,n),DD(e,r,i),OS(e,r,i,n),kS(null,e,r,!0,t,n);case 19:return cL(t,e,n);case 22:return sL(t,e,n)}throw Error(Ie(156,e.tag))};function bL(t,e){return QB(t,e)}function K5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(t,e,n,r){return new K5(t,e,n,r)}function xA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Y5(t){if(typeof t=="function")return xA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===UE)return 11;if(t===kE)return 14}return 2}function Ua(t,e){var n=t.alternate;return n===null?(n=ns(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jv(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")xA(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uu:return oc(n.children,i,s,e);case NE:o=8,i|=8;break;case oS:return t=ns(12,n,e,i|2),t.elementType=oS,t.lanes=s,t;case aS:return t=ns(13,n,e,i),t.elementType=aS,t.lanes=s,t;case lS:return t=ns(19,n,e,i),t.elementType=lS,t.lanes=s,t;case LB:return cy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BB:o=10;break e;case DB:o=9;break e;case UE:o=11;break e;case kE:o=14;break e;case _a:o=16,r=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return e=ns(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function oc(t,e,n,r){return t=ns(7,t,r,e),t.lanes=n,t}function cy(t,e,n,r){return t=ns(22,t,r,e),t.elementType=LB,t.lanes=n,t.stateNode={isHidden:!1},t}function B1(t,e,n){return t=ns(6,t,null,e),t.lanes=n,t}function D1(t,e,n){return e=ns(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h1(0),this.expirationTimes=h1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _A(t,e,n,r,i,s,o,a,l){return t=new Q5(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ns(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rA(s),t}function q5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ML(t){if(!t)return ja;t=t._reactInternals;e:{if(Mc(t)!==t||t.tag!==1)throw Error(Ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(t.tag===1){var n=t.type;if(fi(n))return bD(t,n,e)}return e}function CL(t,e,n,r,i,s,o,a,l){return t=_A(n,r,!0,t,i,s,o,a,l),t.context=ML(null),n=t.current,r=Kr(),i=Na(n),s=Oo(r,i),s.callback=e??null,Fa(n,s,i),t.current.lanes=i,xp(t,i,r),hi(t,r),t}function uy(t,e,n,r){var i=e.current,s=Kr(),o=Na(i);return n=ML(n),e.context===null?e.context=n:e.pendingContext=n,e=Oo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fa(i,e,o),t!==null&&(Ts(t,i,o,s),zv(t,i,o)),o}function T0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function SA(t,e){qT(t,e),(t=t.alternate)&&qT(t,e)}function Z5(){return null}var TL=typeof reportError=="function"?reportError:function(t){console.error(t)};function wA(t){this._internalRoot=t}dy.prototype.render=wA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ie(409));uy(t,e,null,null)};dy.prototype.unmount=wA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vc(function(){uy(null,t,null,null)}),e[Ho]=null}};function dy(t){this._internalRoot=t}dy.prototype.unstable_scheduleHydration=function(t){if(t){var e=iD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ea.length&&e!==0&&e<Ea[n].priority;n++);Ea.splice(n,0,t),n===0&&oD(t)}};function EA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ZT(){}function eH(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=T0(o);s.call(c)}}var o=CL(e,r,t,0,null,!1,!1,"",ZT);return t._reactRootContainer=o,t[Ho]=o.current,Oh(t.nodeType===8?t.parentNode:t),vc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=T0(l);a.call(c)}}var l=_A(t,0,!1,null,null,!1,!1,"",ZT);return t._reactRootContainer=l,t[Ho]=l.current,Oh(t.nodeType===8?t.parentNode:t),vc(function(){uy(e,l,n,r)}),l}function hy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=T0(o);a.call(l)}}uy(e,o,t,i)}else o=eH(n,e,t,i,r);return T0(o)}nD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=th(e.pendingLanes);n!==0&&(GE(e,n|1),hi(e,zn()),!(Ht&6)&&(_d=zn()+500,sl()))}break;case 13:vc(function(){var r=Go(t,1);if(r!==null){var i=Kr();Ts(r,t,1,i)}}),SA(t,1)}};$E=function(t){if(t.tag===13){var e=Go(t,134217728);if(e!==null){var n=Kr();Ts(e,t,134217728,n)}SA(t,134217728)}};rD=function(t){if(t.tag===13){var e=Na(t),n=Go(t,e);if(n!==null){var r=Kr();Ts(n,t,e,r)}SA(t,e)}};iD=function(){return en};sD=function(t,e){var n=en;try{return en=t,e()}finally{en=n}};yS=function(t,e,n){switch(e){case"input":if(dS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ry(r);if(!i)throw Error(Ie(90));OB(r),dS(r,i)}}}break;case"textarea":UB(t,n);break;case"select":e=n.value,e!=null&&td(t,!!n.multiple,e,!1)}};WB=gA;jB=vc;var tH={usingClientEntryPoint:!1,Events:[Sp,Gu,ry,$B,VB,gA]},Tf={findFiberByHostInstance:Yl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nH={bundleType:Tf.bundleType,version:Tf.version,rendererPackageName:Tf.rendererPackageName,rendererConfig:Tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KB(t),t===null?null:t.stateNode},findFiberByHostInstance:Tf.findFiberByHostInstance||Z5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gg.isDisabled&&gg.supportsFiber)try{Z0=gg.inject(nH),no=gg}catch{}}Di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tH;Di.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!EA(e))throw Error(Ie(200));return q5(t,e,null,n)};Di.createRoot=function(t,e){if(!EA(t))throw Error(Ie(299));var n=!1,r="",i=TL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_A(t,1,!1,null,null,n,!1,r,i),t[Ho]=e.current,Oh(t.nodeType===8?t.parentNode:t),new wA(e)};Di.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=KB(e),t=t===null?null:t.stateNode,t};Di.flushSync=function(t){return vc(t)};Di.hydrate=function(t,e,n){if(!fy(e))throw Error(Ie(200));return hy(null,t,e,!0,n)};Di.hydrateRoot=function(t,e,n){if(!EA(t))throw Error(Ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=TL;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=CL(e,null,t,1,n??null,i,!1,s,o),t[Ho]=e.current,Oh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dy(e)};Di.render=function(t,e,n){if(!fy(e))throw Error(Ie(200));return hy(null,t,e,!1,n)};Di.unmountComponentAtNode=function(t){if(!fy(t))throw Error(Ie(40));return t._reactRootContainer?(vc(function(){hy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ho]=null})}),!0):!1};Di.unstable_batchedUpdates=gA;Di.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fy(n))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return hy(t,e,n,!1,r)};Di.version="18.2.0-next-9e3b772b8-20220608";function RL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RL)}catch(t){console.error(t)}}RL(),CB.exports=Di;var Cc=CB.exports;const PL=nl(Cc);var IL,e2=Cc;IL=iS.createRoot=e2.createRoot,iS.hydrateRoot=e2.hydrateRoot;const t2=t=>{let e;const n=new Set,r=(l,c)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const f=e;e=c??typeof d!="object"?d:Object.assign({},e,d),n.forEach(p=>p(e,f))}},i=()=>e,a={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(r,i,a),a},rH=t=>t?t2(t):t2;var BL={exports:{}},DL={},LL={exports:{}},FL={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=E;function iH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sH=typeof Object.is=="function"?Object.is:iH,oH=Sd.useState,aH=Sd.useEffect,lH=Sd.useLayoutEffect,cH=Sd.useDebugValue;function uH(t,e){var n=e(),r=oH({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return lH(function(){i.value=n,i.getSnapshot=e,L1(i)&&s({inst:i})},[t,n,e]),aH(function(){return L1(i)&&s({inst:i}),t(function(){L1(i)&&s({inst:i})})},[t]),cH(n),n}function L1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sH(t,n)}catch{return!0}}function dH(t,e){return e()}var fH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dH:uH;FL.useSyncExternalStore=Sd.useSyncExternalStore!==void 0?Sd.useSyncExternalStore:fH;LL.exports=FL;var hH=LL.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py=E,pH=hH;function mH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gH=typeof Object.is=="function"?Object.is:mH,vH=pH.useSyncExternalStore,yH=py.useRef,xH=py.useEffect,_H=py.useMemo,SH=py.useDebugValue;DL.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=yH(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=_H(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var v=o.value;if(i(v,m))return f=v}return f=m}if(v=f,gH(d,m))return v;var y=r(m);return i!==void 0&&i(v,y)?v:(d=m,f=y)}var c=!1,d,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=vH(t,s[0],s[1]);return xH(function(){o.hasValue=!0,o.value=a},[a]),SH(a),a};BL.exports=DL;var wH=BL.exports;const EH=nl(wH),{useSyncExternalStoreWithSelector:AH}=EH;function bH(t,e=t.getState,n){const r=AH(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return E.useDebugValue(r),r}const n2=t=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?rH(t):t,n=(r,i)=>bH(e,r,i);return Object.assign(n,e),n},jo=t=>t?n2(t):n2;let vg;const MH=new Uint8Array(16);function CH(){if(!vg&&(vg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vg(MH)}const yr=[];for(let t=0;t<256;++t)yr.push((t+256).toString(16).slice(1));function TH(t,e=0){return(yr[t[e+0]]+yr[t[e+1]]+yr[t[e+2]]+yr[t[e+3]]+"-"+yr[t[e+4]]+yr[t[e+5]]+"-"+yr[t[e+6]]+yr[t[e+7]]+"-"+yr[t[e+8]]+yr[t[e+9]]+"-"+yr[t[e+10]]+yr[t[e+11]]+yr[t[e+12]]+yr[t[e+13]]+yr[t[e+14]]+yr[t[e+15]]).toLowerCase()}const RH=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),r2={randomUUID:RH};function i2(t,e,n){if(r2.randomUUID&&!e&&!t)return r2.randomUUID();t=t||{};const r=t.random||(t.rng||CH)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return TH(r)}const PH=(t,e,n)=>{const r=t.findIndex(i=>i.id===e);if(r!==-1){const i=[...t.map(s=>structuredClone(s))];return i[r]={...i[r],...n},i}return t};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ol="152",Ul={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},OL=0,QS=1,NL=2,IH=3,UL=0,my=1,mh=2,Ss=3,Bs=0,rr=1,_r=2,BH=2,Er=0,ac=1,qS=2,ZS=3,ew=4,kL=5,jl=100,zL=101,HL=102,tw=103,nw=104,GL=200,$L=201,VL=202,WL=203,AA=204,bA=205,jL=206,XL=207,JL=208,KL=209,YL=210,QL=0,qL=1,ZL=2,R0=3,e3=4,t3=5,n3=6,r3=7,Ep=0,i3=1,s3=2,Rs=0,o3=1,a3=2,l3=3,MA=4,c3=5,gy=300,Xa=301,Ja=302,Wh=303,jh=304,kd=306,Ka=1e3,Sr=1001,wd=1002,nn=1003,Xh=1004,DH=1004,ad=1005,LH=1005,Zt=1006,vy=1007,FH=1007,Ds=1008,OH=1008,kr=1009,u3=1010,d3=1011,CA=1012,f3=1013,Do=1014,bs=1015,Ya=1016,h3=1017,p3=1018,ka=1020,m3=1021,ai=1023,g3=1024,v3=1025,za=1026,Qa=1027,y3=1028,x3=1029,_3=1030,S3=1031,w3=1033,Xv=33776,Jv=33777,Kv=33778,Yv=33779,rw=35840,iw=35841,sw=35842,ow=35843,E3=36196,aw=37492,lw=37496,cw=37808,uw=37809,dw=37810,fw=37811,hw=37812,pw=37813,mw=37814,gw=37815,vw=37816,yw=37817,xw=37818,_w=37819,Sw=37820,ww=37821,Qv=36492,A3=36283,Ew=36284,Aw=36285,bw=36286,b3=2200,M3=2201,C3=2202,Ed=2300,yc=2301,qv=2302,Zl=2400,ec=2401,Jh=2402,yy=2500,TA=2501,T3=0,RA=1,P0=2,Ap=3e3,Yr=3001,al=3200,R3=3201,ll=0,P3=1,Ha="",St="srgb",Ls="srgb-linear",PA="display-p3",NH=0,Zv=7680,UH=7681,kH=7682,zH=7683,HH=34055,GH=34056,$H=5386,VH=512,WH=513,jH=514,XH=515,JH=516,KH=517,YH=518,I3=519,Kh=35044,QH=35048,qH=35040,ZH=35045,eG=35049,tG=35041,nG=35046,rG=35050,iG=35042,sG="100",Mw="300 es",I0=1035;class Fi{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Br=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let s2=1234567;const lc=Math.PI/180,Ad=180/Math.PI;function Ii(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Br[t&255]+Br[t>>8&255]+Br[t>>16&255]+Br[t>>24&255]+"-"+Br[e&255]+Br[e>>8&255]+"-"+Br[e>>16&15|64]+Br[e>>24&255]+"-"+Br[n&63|128]+Br[n>>8&255]+"-"+Br[n>>16&255]+Br[n>>24&255]+Br[r&255]+Br[r>>8&255]+Br[r>>16&255]+Br[r>>24&255]).toLowerCase()}function Ln(t,e,n){return Math.max(e,Math.min(n,t))}function IA(t,e){return(t%e+e)%e}function oG(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function aG(t,e,n){return t!==e?(n-t)/(e-t):0}function gh(t,e,n){return(1-n)*t+n*e}function lG(t,e,n,r){return gh(t,e,1-Math.exp(-n*r))}function cG(t,e=1){return e-Math.abs(IA(t,e*2)-e)}function uG(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function dG(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function fG(t,e){return t+Math.floor(Math.random()*(e-t+1))}function hG(t,e){return t+Math.random()*(e-t)}function pG(t){return t*(.5-Math.random())}function mG(t){t!==void 0&&(s2=t);let e=s2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function gG(t){return t*lc}function vG(t){return t*Ad}function Cw(t){return(t&t-1)===0&&t!==0}function B3(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function D3(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function yG(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),d=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":t.set(a*d,l*f,l*p,a*c);break;case"YZY":t.set(l*p,a*d,l*f,a*c);break;case"ZXZ":t.set(l*f,l*p,a*d,a*c);break;case"XZX":t.set(a*d,l*v,l*m,a*c);break;case"YXY":t.set(l*m,a*d,l*v,a*c);break;case"ZYZ":t.set(l*v,l*m,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ti(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function At(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const cc={DEG2RAD:lc,RAD2DEG:Ad,generateUUID:Ii,clamp:Ln,euclideanModulo:IA,mapLinear:oG,inverseLerp:aG,lerp:gh,damp:lG,pingpong:cG,smoothstep:uG,smootherstep:dG,randInt:fG,randFloat:hG,randFloatSpread:pG,seededRandom:mG,degToRad:gG,radToDeg:vG,isPowerOfTwo:Cw,ceilPowerOfTwo:B3,floorPowerOfTwo:D3,setQuaternionFromProperEuler:yG,normalize:At,denormalize:Ti};class de{constructor(e=0,n=0){de.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ln(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Tt{constructor(){Tt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,r,i,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=n,d[4]=s,d[5]=l,d[6]=r,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],d=r[4],f=r[7],p=r[2],m=r[5],v=r[8],y=i[0],x=i[3],g=i[6],_=i[1],w=i[4],b=i[7],C=i[2],T=i[5],P=i[8];return s[0]=o*y+a*_+l*C,s[3]=o*x+a*w+l*T,s[6]=o*g+a*b+l*P,s[1]=c*y+d*_+f*C,s[4]=c*x+d*w+f*T,s[7]=c*g+d*b+f*P,s[2]=p*y+m*_+v*C,s[5]=p*x+m*w+v*T,s[8]=p*g+m*b+v*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return n*o*d-n*a*c-r*s*d+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*o-a*c,p=a*l-d*s,m=c*s-o*l,v=n*f+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=f*y,e[1]=(i*c-d*r)*y,e[2]=(a*r-i*o)*y,e[3]=p*y,e[4]=(d*n-i*l)*y,e[5]=(i*s-a*n)*y,e[6]=m*y,e[7]=(r*l-c*n)*y,e[8]=(o*n-r*s)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(F1.makeScale(e,n)),this}rotate(e){return this.premultiply(F1.makeRotation(-e)),this}translate(e,n){return this.premultiply(F1.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const F1=new Tt;function L3(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const xG={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ku(t,e){return new xG[t](e)}function Yh(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const o2={};function vh(t){t in o2||(o2[t]=!0,console.warn(t))}function ld(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function O1(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const _G=new Tt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),SG=new Tt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function wG(t){return t.convertSRGBToLinear().applyMatrix3(SG)}function EG(t){return t.applyMatrix3(_G).convertLinearToSRGB()}const AG={[Ls]:t=>t,[St]:t=>t.convertSRGBToLinear(),[PA]:wG},bG={[Ls]:t=>t,[St]:t=>t.convertLinearToSRGB(),[PA]:EG},Ji={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Ls},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=AG[e],i=bG[n];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let tu;class BA{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{tu===void 0&&(tu=Yh("canvas")),tu.width=e.width,tu.height=e.height;const r=tu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=tu}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Yh("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=ld(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ld(n[r]/255)*255):n[r]=ld(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class tc{constructor(e=null){this.isSource=!0,this.uuid=Ii(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(N1(i[o].image)):s.push(N1(i[o]))}else s=N1(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function N1(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?BA.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let MG=0;class dn extends Fi{constructor(e=dn.DEFAULT_IMAGE,n=dn.DEFAULT_MAPPING,r=Sr,i=Sr,s=Zt,o=Ds,a=ai,l=kr,c=dn.DEFAULT_ANISOTROPY,d=Ha){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:MG++}),this.uuid=Ii(),this.name="",this.source=new tc(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(vh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===Yr?St:Ha),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==gy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ka:e.x=e.x-Math.floor(e.x);break;case Sr:e.x=e.x<0?0:1;break;case wd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ka:e.y=e.y-Math.floor(e.y);break;case Sr:e.y=e.y<0?0:1;break;case wd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return vh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===St?Yr:Ap}set encoding(e){vh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Yr?St:Ha}}dn.DEFAULT_IMAGE=null;dn.DEFAULT_MAPPING=gy;dn.DEFAULT_ANISOTROPY=1;class Bt{constructor(e=0,n=0,r=0,i=1){Bt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],d=l[4],f=l[8],p=l[1],m=l[5],v=l[9],y=l[2],x=l[6],g=l[10];if(Math.abs(d-p)<.01&&Math.abs(f-y)<.01&&Math.abs(v-x)<.01){if(Math.abs(d+p)<.1&&Math.abs(f+y)<.1&&Math.abs(v+x)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,b=(m+1)/2,C=(g+1)/2,T=(d+p)/4,P=(f+y)/4,B=(v+x)/4;return w>b&&w>C?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=T/r,s=P/r):b>C?b<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=T/i,s=B/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=P/s,i=B/s),this.set(r,i,s,n),this}let _=Math.sqrt((x-v)*(x-v)+(f-y)*(f-y)+(p-d)*(p-d));return Math.abs(_)<.001&&(_=1),this.x=(x-v)/_,this.y=(f-y)/_,this.z=(p-d)/_,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class vn extends Fi{constructor(e=1,n=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Bt(0,0,e,n),this.scissorTest=!1,this.viewport=new Bt(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(vh("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Yr?St:Ha),this.texture=new dn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Zt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new tc(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class xy extends dn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=nn,this.minFilter=nn,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class CG extends vn{constructor(e=1,n=1,r=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new xy(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class DA extends dn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=nn,this.minFilter=nn,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class TG extends vn{constructor(e=1,n=1,r=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new DA(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class RG extends vn{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Vn{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],d=r[i+2],f=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],y=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=d,e[n+3]=f;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=v,e[n+3]=y;return}if(f!==y||l!==p||c!==m||d!==v){let x=1-a;const g=l*p+c*m+d*v+f*y,_=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const C=Math.sqrt(w),T=Math.atan2(C,g*_);x=Math.sin(x*T)/C,a=Math.sin(a*T)/C}const b=a*_;if(l=l*x+p*b,c=c*x+m*b,d=d*x+v*b,f=f*x+y*b,x===1-a){const C=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=C,c*=C,d*=C,f*=C}}e[n]=l,e[n+1]=c,e[n+2]=d,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],d=r[i+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[n]=a*v+d*f+l*m-c*p,e[n+1]=l*v+d*p+c*f-a*m,e[n+2]=c*v+d*m+a*p-l*f,e[n+3]=d*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),d=a(i/2),f=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*d*f+c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f-p*m*v;break;case"YXZ":this._x=p*d*f+c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f+p*m*v;break;case"ZXY":this._x=p*d*f-c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f-p*m*v;break;case"ZYX":this._x=p*d*f-c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f+p*m*v;break;case"YZX":this._x=p*d*f+c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f-p*m*v;break;case"XZY":this._x=p*d*f-c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],d=n[6],f=n[10],p=r+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(d-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ln(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,d=n._w;return this._x=r*d+o*a+i*c-s*l,this._y=i*d+o*l+s*a-r*c,this._z=s*d+o*c+r*l-i*a,this._w=o*d-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-n)*d)/c,p=Math.sin(n*d)/c;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,n=0,r=0){F.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(a2.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(a2.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*i-a*r,d=l*r+a*n-s*i,f=l*i+s*r-o*n,p=-s*n-o*r-a*i;return this.x=c*l+p*-s+d*-a-f*-o,this.y=d*l+p*-o+f*-s-c*-a,this.z=f*l+p*-a+c*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return U1.copy(this).projectOnVector(e),this.sub(U1)}reflect(e){return this.sub(U1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ln(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const U1=new F,a2=new Vn;class Sn{constructor(e=new F(1/0,1/0,1/0),n=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(xo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(xo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=xo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),nu.copy(e.boundingBox),nu.applyMatrix4(e.matrixWorld),this.union(nu);else{const i=e.geometry;if(i!==void 0)if(n&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)xo.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(xo)}else i.boundingBox===null&&i.computeBoundingBox(),nu.copy(i.boundingBox),nu.applyMatrix4(e.matrixWorld),this.union(nu)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,xo),xo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Rf),yg.subVectors(this.max,Rf),ru.subVectors(e.a,Rf),iu.subVectors(e.b,Rf),su.subVectors(e.c,Rf),aa.subVectors(iu,ru),la.subVectors(su,iu),El.subVectors(ru,su);let n=[0,-aa.z,aa.y,0,-la.z,la.y,0,-El.z,El.y,aa.z,0,-aa.x,la.z,0,-la.x,El.z,0,-El.x,-aa.y,aa.x,0,-la.y,la.x,0,-El.y,El.x,0];return!k1(n,ru,iu,su,yg)||(n=[1,0,0,0,1,0,0,0,1],!k1(n,ru,iu,su,yg))?!1:(xg.crossVectors(aa,la),n=[xg.x,xg.y,xg.z],k1(n,ru,iu,su,yg))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(xo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(yo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),yo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),yo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),yo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),yo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),yo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),yo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),yo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(yo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yo=[new F,new F,new F,new F,new F,new F,new F,new F],xo=new F,nu=new Sn,ru=new F,iu=new F,su=new F,aa=new F,la=new F,El=new F,Rf=new F,yg=new F,xg=new F,Al=new F;function k1(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){Al.fromArray(t,s);const a=i.x*Math.abs(Al.x)+i.y*Math.abs(Al.y)+i.z*Math.abs(Al.z),l=e.dot(Al),c=n.dot(Al),d=r.dot(Al);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const PG=new Sn,Pf=new F,z1=new F;class mi{constructor(e=new F,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):PG.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Pf.subVectors(e,this.center);const n=Pf.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Pf,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(z1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Pf.copy(e.center).add(z1)),this.expandByPoint(Pf.copy(e.center).sub(z1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _o=new F,H1=new F,_g=new F,ca=new F,G1=new F,Sg=new F,$1=new F;class cl{constructor(e=new F,n=new F(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_o)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=_o.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(_o.copy(this.origin).addScaledVector(this.direction,n),_o.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){H1.copy(e).add(n).multiplyScalar(.5),_g.copy(n).sub(e).normalize(),ca.copy(this.origin).sub(H1);const s=e.distanceTo(n)*.5,o=-this.direction.dot(_g),a=ca.dot(this.direction),l=-ca.dot(_g),c=ca.lengthSq(),d=Math.abs(1-o*o);let f,p,m,v;if(d>0)if(f=o*l-a,p=o*a-l,v=s*d,f>=0)if(p>=-v)if(p<=v){const y=1/d;f*=y,p*=y,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(H1).addScaledVector(_g,p),m}intersectSphere(e,n){_o.subVectors(e.center,this.origin);const r=_o.dot(this.direction),i=_o.dot(_o)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,_o)!==null}intersectTriangle(e,n,r,i,s){G1.subVectors(n,e),Sg.subVectors(r,e),$1.crossVectors(G1,Sg);let o=this.direction.dot($1),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ca.subVectors(this.origin,e);const l=a*this.direction.dot(Sg.crossVectors(ca,Sg));if(l<0)return null;const c=a*this.direction.dot(G1.cross(ca));if(c<0||l+c>o)return null;const d=-a*ca.dot($1);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ve{constructor(){Ve.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,r,i,s,o,a,l,c,d,f,p,m,v,y,x){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=y,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ve().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/ou.setFromMatrixColumn(e,0).length(),s=1/ou.setFromMatrixColumn(e,1).length(),o=1/ou.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*d,m=o*f,v=a*d,y=a*f;n[0]=l*d,n[4]=-l*f,n[8]=c,n[1]=m+v*c,n[5]=p-y*c,n[9]=-a*l,n[2]=y-p*c,n[6]=v+m*c,n[10]=o*l}else if(e.order==="YXZ"){const p=l*d,m=l*f,v=c*d,y=c*f;n[0]=p+y*a,n[4]=v*a-m,n[8]=o*c,n[1]=o*f,n[5]=o*d,n[9]=-a,n[2]=m*a-v,n[6]=y+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*d,m=l*f,v=c*d,y=c*f;n[0]=p-y*a,n[4]=-o*f,n[8]=v+m*a,n[1]=m+v*a,n[5]=o*d,n[9]=y-p*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*d,m=o*f,v=a*d,y=a*f;n[0]=l*d,n[4]=v*c-m,n[8]=p*c+y,n[1]=l*f,n[5]=y*c+p,n[9]=m*c-v,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,y=a*c;n[0]=l*d,n[4]=y-p*f,n[8]=v*f+m,n[1]=f,n[5]=o*d,n[9]=-a*d,n[2]=-c*d,n[6]=m*f+v,n[10]=p-y*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,y=a*c;n[0]=l*d,n[4]=-f,n[8]=c*d,n[1]=p*f+y,n[5]=o*d,n[9]=m*f-v,n[2]=v*f-m,n[6]=a*d,n[10]=y*f+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IG,e,BG)}lookAt(e,n,r){const i=this.elements;return Ai.subVectors(e,n),Ai.lengthSq()===0&&(Ai.z=1),Ai.normalize(),ua.crossVectors(r,Ai),ua.lengthSq()===0&&(Math.abs(r.z)===1?Ai.x+=1e-4:Ai.z+=1e-4,Ai.normalize(),ua.crossVectors(r,Ai)),ua.normalize(),wg.crossVectors(Ai,ua),i[0]=ua.x,i[4]=wg.x,i[8]=Ai.x,i[1]=ua.y,i[5]=wg.y,i[9]=Ai.y,i[2]=ua.z,i[6]=wg.z,i[10]=Ai.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],d=r[1],f=r[5],p=r[9],m=r[13],v=r[2],y=r[6],x=r[10],g=r[14],_=r[3],w=r[7],b=r[11],C=r[15],T=i[0],P=i[4],B=i[8],R=i[12],D=i[1],k=i[5],X=i[9],$=i[13],j=i[2],H=i[6],ie=i[10],Z=i[14],U=i[3],O=i[7],z=i[11],ne=i[15];return s[0]=o*T+a*D+l*j+c*U,s[4]=o*P+a*k+l*H+c*O,s[8]=o*B+a*X+l*ie+c*z,s[12]=o*R+a*$+l*Z+c*ne,s[1]=d*T+f*D+p*j+m*U,s[5]=d*P+f*k+p*H+m*O,s[9]=d*B+f*X+p*ie+m*z,s[13]=d*R+f*$+p*Z+m*ne,s[2]=v*T+y*D+x*j+g*U,s[6]=v*P+y*k+x*H+g*O,s[10]=v*B+y*X+x*ie+g*z,s[14]=v*R+y*$+x*Z+g*ne,s[3]=_*T+w*D+b*j+C*U,s[7]=_*P+w*k+b*H+C*O,s[11]=_*B+w*X+b*ie+C*z,s[15]=_*R+w*$+b*Z+C*ne,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],p=e[10],m=e[14],v=e[3],y=e[7],x=e[11],g=e[15];return v*(+s*l*f-i*c*f-s*a*p+r*c*p+i*a*m-r*l*m)+y*(+n*l*m-n*c*p+s*o*p-i*o*m+i*c*d-s*l*d)+x*(+n*c*f-n*a*m-s*o*f+r*o*m+s*a*d-r*c*d)+g*(-i*a*d-n*l*f+n*a*p+i*o*f-r*o*p+r*l*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],m=e[11],v=e[12],y=e[13],x=e[14],g=e[15],_=f*x*c-y*p*c+y*l*m-a*x*m-f*l*g+a*p*g,w=v*p*c-d*x*c-v*l*m+o*x*m+d*l*g-o*p*g,b=d*y*c-v*f*c+v*a*m-o*y*m-d*a*g+o*f*g,C=v*f*l-d*y*l-v*a*p+o*y*p+d*a*x-o*f*x,T=n*_+r*w+i*b+s*C;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return e[0]=_*P,e[1]=(y*p*s-f*x*s-y*i*m+r*x*m+f*i*g-r*p*g)*P,e[2]=(a*x*s-y*l*s+y*i*c-r*x*c-a*i*g+r*l*g)*P,e[3]=(f*l*s-a*p*s-f*i*c+r*p*c+a*i*m-r*l*m)*P,e[4]=w*P,e[5]=(d*x*s-v*p*s+v*i*m-n*x*m-d*i*g+n*p*g)*P,e[6]=(v*l*s-o*x*s-v*i*c+n*x*c+o*i*g-n*l*g)*P,e[7]=(o*p*s-d*l*s+d*i*c-n*p*c-o*i*m+n*l*m)*P,e[8]=b*P,e[9]=(v*f*s-d*y*s-v*r*m+n*y*m+d*r*g-n*f*g)*P,e[10]=(o*y*s-v*a*s+v*r*c-n*y*c-o*r*g+n*a*g)*P,e[11]=(d*a*s-o*f*s-d*r*c+n*f*c+o*r*m-n*a*m)*P,e[12]=C*P,e[13]=(d*y*i-v*f*i+v*r*p-n*y*p-d*r*x+n*f*x)*P,e[14]=(v*a*i-o*y*i-v*r*l+n*y*l+o*r*x-n*a*x)*P,e[15]=(o*f*i-d*a*i+d*r*l-n*f*l-o*r*p+n*a*p)*P,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,d*a+r,d*l-i*o,0,c*l-i*a,d*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,d=o+o,f=a+a,p=s*c,m=s*d,v=s*f,y=o*d,x=o*f,g=a*f,_=l*c,w=l*d,b=l*f,C=r.x,T=r.y,P=r.z;return i[0]=(1-(y+g))*C,i[1]=(m+b)*C,i[2]=(v-w)*C,i[3]=0,i[4]=(m-b)*T,i[5]=(1-(p+g))*T,i[6]=(x+_)*T,i[7]=0,i[8]=(v+w)*P,i[9]=(x-_)*P,i[10]=(1-(p+y))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=ou.set(i[0],i[1],i[2]).length();const o=ou.set(i[4],i[5],i[6]).length(),a=ou.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ms.copy(this);const c=1/s,d=1/o,f=1/a;return ms.elements[0]*=c,ms.elements[1]*=c,ms.elements[2]*=c,ms.elements[4]*=d,ms.elements[5]*=d,ms.elements[6]*=d,ms.elements[8]*=f,ms.elements[9]*=f,ms.elements[10]*=f,n.setFromRotationMatrix(ms),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o){const a=this.elements,l=2*s/(n-e),c=2*s/(r-i),d=(n+e)/(n-e),f=(r+i)/(r-i),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,r,i,s,o){const a=this.elements,l=1/(n-e),c=1/(r-i),d=1/(o-s),f=(n+e)*l,p=(r+i)*c,m=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const ou=new F,ms=new Ve,IG=new F(0,0,0),BG=new F(1,1,1),ua=new F,wg=new F,Ai=new F,l2=new Ve,c2=new Vn;class bp{constructor(e=0,n=0,r=0,i=bp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],d=i[9],f=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(Ln(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ln(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ln(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ln(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ln(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Ln(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return l2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(l2,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return c2.setFromEuler(this),this.setFromQuaternion(c2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bp.DEFAULT_ORDER="XYZ";let uc=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},DG=0;const u2=new F,au=new Vn,So=new Ve,Eg=new F,If=new F,LG=new F,FG=new Vn,d2=new F(1,0,0),f2=new F(0,1,0),h2=new F(0,0,1),OG={type:"added"},p2={type:"removed"};class zt extends Fi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:DG++}),this.uuid=Ii(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zt.DEFAULT_UP.clone();const e=new F,n=new bp,r=new Vn,i=new F(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ve},normalMatrix:{value:new Tt}}),this.matrix=new Ve,this.matrixWorld=new Ve,this.matrixAutoUpdate=zt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new uc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return au.setFromAxisAngle(e,n),this.quaternion.multiply(au),this}rotateOnWorldAxis(e,n){return au.setFromAxisAngle(e,n),this.quaternion.premultiply(au),this}rotateX(e){return this.rotateOnAxis(d2,e)}rotateY(e){return this.rotateOnAxis(f2,e)}rotateZ(e){return this.rotateOnAxis(h2,e)}translateOnAxis(e,n){return u2.copy(e).applyQuaternion(this.quaternion),this.position.add(u2.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(d2,e)}translateY(e){return this.translateOnAxis(f2,e)}translateZ(e){return this.translateOnAxis(h2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(So.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Eg.copy(e):Eg.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),If.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?So.lookAt(If,Eg,this.up):So.lookAt(Eg,If,this.up),this.quaternion.setFromRotationMatrix(So),i&&(So.extractRotation(i.matrixWorld),au.setFromRotationMatrix(So),this.quaternion.premultiply(au.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(OG)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(p2)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(p2)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),So.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),So.multiply(e.parent.matrixWorld)),e.applyMatrix4(So),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,n);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(If,e,LG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(If,FG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}zt.DEFAULT_UP=new F(0,1,0);zt.DEFAULT_MATRIX_AUTO_UPDATE=!0;zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gs=new F,wo=new F,V1=new F,Eo=new F,lu=new F,cu=new F,m2=new F,W1=new F,j1=new F,X1=new F;let Ag=!1,nc=class zl{constructor(e=new F,n=new F,r=new F){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),gs.subVectors(e,n),i.cross(gs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){gs.subVectors(i,n),wo.subVectors(r,n),V1.subVectors(e,n);const o=gs.dot(gs),a=gs.dot(wo),l=gs.dot(V1),c=wo.dot(wo),d=wo.dot(V1),f=o*c-a*a;if(f===0)return s.set(-2,-1,-1);const p=1/f,m=(c*l-a*d)*p,v=(o*d-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Eo),Eo.x>=0&&Eo.y>=0&&Eo.x+Eo.y<=1}static getUV(e,n,r,i,s,o,a,l){return Ag===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ag=!0),this.getInterpolation(e,n,r,i,s,o,a,l)}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Eo),l.setScalar(0),l.addScaledVector(s,Eo.x),l.addScaledVector(o,Eo.y),l.addScaledVector(a,Eo.z),l}static isFrontFacing(e,n,r,i){return gs.subVectors(r,n),wo.subVectors(e,n),gs.cross(wo).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gs.subVectors(this.c,this.b),wo.subVectors(this.a,this.b),gs.cross(wo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return zl.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return Ag===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ag=!0),zl.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return zl.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return zl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;lu.subVectors(i,r),cu.subVectors(s,r),W1.subVectors(e,r);const l=lu.dot(W1),c=cu.dot(W1);if(l<=0&&c<=0)return n.copy(r);j1.subVectors(e,i);const d=lu.dot(j1),f=cu.dot(j1);if(d>=0&&f<=d)return n.copy(i);const p=l*f-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),n.copy(r).addScaledVector(lu,o);X1.subVectors(e,s);const m=lu.dot(X1),v=cu.dot(X1);if(v>=0&&m<=v)return n.copy(s);const y=m*c-l*v;if(y<=0&&c>=0&&v<=0)return a=c/(c-v),n.copy(r).addScaledVector(cu,a);const x=d*v-m*f;if(x<=0&&f-d>=0&&m-v>=0)return m2.subVectors(s,i),a=(f-d)/(f-d+(m-v)),n.copy(i).addScaledVector(m2,a);const g=1/(x+y+p);return o=y*g,a=p*g,n.copy(r).addScaledVector(lu,o).addScaledVector(cu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},NG=0;class Fn extends Fi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:NG++}),this.uuid=Ii(),this.name="",this.type="Material",this.blending=ac,this.side=Bs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=AA,this.blendDst=bA,this.blendEquation=jl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=R0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=I3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zv,this.stencilZFail=Zv,this.stencilZPass=Zv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ac&&(r.blending=this.blending),this.side!==Bs&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const F3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vs={h:0,s:0,l:0},bg={h:0,s:0,l:0};function J1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Ne{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=St){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ji.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Ji.workingColorSpace){return this.r=e,this.g=n,this.b=r,Ji.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Ji.workingColorSpace){if(e=IA(e,1),n=Ln(n,0,1),r=Ln(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=J1(o,s,e+1/3),this.g=J1(o,s,e),this.b=J1(o,s,e-1/3)}return Ji.toWorkingColorSpace(this,i),this}setStyle(e,n=St){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=St){const r=F3[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ld(e.r),this.g=ld(e.g),this.b=ld(e.b),this}copyLinearToSRGB(e){return this.r=O1(e.r),this.g=O1(e.g),this.b=O1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=St){return Ji.fromWorkingColorSpace(Dr.copy(this),e),Math.round(Ln(Dr.r*255,0,255))*65536+Math.round(Ln(Dr.g*255,0,255))*256+Math.round(Ln(Dr.b*255,0,255))}getHexString(e=St){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Ji.workingColorSpace){Ji.fromWorkingColorSpace(Dr.copy(this),n);const r=Dr.r,i=Dr.g,s=Dr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=d<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,n=Ji.workingColorSpace){return Ji.fromWorkingColorSpace(Dr.copy(this),n),e.r=Dr.r,e.g=Dr.g,e.b=Dr.b,e}getStyle(e=St){Ji.fromWorkingColorSpace(Dr.copy(this),e);const n=Dr.r,r=Dr.g,i=Dr.b;return e!==St?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(vs),vs.h+=e,vs.s+=n,vs.l+=r,this.setHSL(vs.h,vs.s,vs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(vs),e.getHSL(bg);const r=gh(vs.h,bg.h,n),i=gh(vs.s,bg.s,n),s=gh(vs.l,bg.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Dr=new Ne;Ne.NAMES=F3;class ci extends Fn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ep,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ro=UG();function UG(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function ri(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ln(t,-65504,65504),Ro.floatView[0]=t;const e=Ro.uint32View[0],n=e>>23&511;return Ro.baseTable[n]+((e&8388607)>>Ro.shiftTable[n])}function rh(t){const e=t>>10;return Ro.uint32View[0]=Ro.mantissaTable[Ro.offsetTable[e]+(t&1023)]+Ro.exponentTable[e],Ro.floatView[0]}const kG={toHalfFloat:ri,fromHalfFloat:rh},Yn=new F,Mg=new de;class Dt{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Kh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Mg.fromBufferAttribute(this,n),Mg.applyMatrix3(e),this.setXY(n,Mg.x,Mg.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Yn.fromBufferAttribute(this,n),Yn.applyMatrix3(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Yn.fromBufferAttribute(this,n),Yn.applyMatrix4(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Yn.fromBufferAttribute(this,n),Yn.applyNormalMatrix(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Yn.fromBufferAttribute(this,n),Yn.transformDirection(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ti(n,this.array)),n}setX(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ti(n,this.array)),n}setY(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ti(n,this.array)),n}setZ(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ti(n,this.array)),n}setW(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),r=At(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),r=At(r,this.array),i=At(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),r=At(r,this.array),i=At(i,this.array),s=At(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Kh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class zG extends Dt{constructor(e,n,r){super(new Int8Array(e),n,r)}}class HG extends Dt{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class GG extends Dt{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class $G extends Dt{constructor(e,n,r){super(new Int16Array(e),n,r)}}class LA extends Dt{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class VG extends Dt{constructor(e,n,r){super(new Int32Array(e),n,r)}}class FA extends Dt{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class WG extends Dt{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=rh(this.array[e*this.itemSize]);return this.normalized&&(n=Ti(n,this.array)),n}setX(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize]=ri(n),this}getY(e){let n=rh(this.array[e*this.itemSize+1]);return this.normalized&&(n=Ti(n,this.array)),n}setY(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+1]=ri(n),this}getZ(e){let n=rh(this.array[e*this.itemSize+2]);return this.normalized&&(n=Ti(n,this.array)),n}setZ(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+2]=ri(n),this}getW(e){let n=rh(this.array[e*this.itemSize+3]);return this.normalized&&(n=Ti(n,this.array)),n}setW(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+3]=ri(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),r=At(r,this.array)),this.array[e+0]=ri(n),this.array[e+1]=ri(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),r=At(r,this.array),i=At(i,this.array)),this.array[e+0]=ri(n),this.array[e+1]=ri(r),this.array[e+2]=ri(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),r=At(r,this.array),i=At(i,this.array),s=At(s,this.array)),this.array[e+0]=ri(n),this.array[e+1]=ri(r),this.array[e+2]=ri(i),this.array[e+3]=ri(s),this}}class et extends Dt{constructor(e,n,r){super(new Float32Array(e),n,r)}}class jG extends Dt{constructor(e,n,r){super(new Float64Array(e),n,r)}}let XG=0;const Xi=new Ve,K1=new zt,uu=new F,bi=new Sn,Bf=new Sn,ur=new F;class yt extends Fi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:XG++}),this.uuid=Ii(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(L3(e)?FA:LA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Tt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xi.makeRotationFromQuaternion(e),this.applyMatrix4(Xi),this}rotateX(e){return Xi.makeRotationX(e),this.applyMatrix4(Xi),this}rotateY(e){return Xi.makeRotationY(e),this.applyMatrix4(Xi),this}rotateZ(e){return Xi.makeRotationZ(e),this.applyMatrix4(Xi),this}translate(e,n,r){return Xi.makeTranslation(e,n,r),this.applyMatrix4(Xi),this}scale(e,n,r){return Xi.makeScale(e,n,r),this.applyMatrix4(Xi),this}lookAt(e){return K1.lookAt(e),K1.updateMatrix(),this.applyMatrix4(K1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uu).negate(),this.translate(uu.x,uu.y,uu.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new et(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sn);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];bi.setFromBufferAttribute(s),this.morphTargetsRelative?(ur.addVectors(this.boundingBox.min,bi.min),this.boundingBox.expandByPoint(ur),ur.addVectors(this.boundingBox.max,bi.max),this.boundingBox.expandByPoint(ur)):(this.boundingBox.expandByPoint(bi.min),this.boundingBox.expandByPoint(bi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new mi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){const r=this.boundingSphere.center;if(bi.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Bf.setFromBufferAttribute(a),this.morphTargetsRelative?(ur.addVectors(bi.min,Bf.min),bi.expandByPoint(ur),ur.addVectors(bi.max,Bf.max),bi.expandByPoint(ur)):(bi.expandByPoint(Bf.min),bi.expandByPoint(Bf.max))}bi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ur.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ur));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)ur.fromBufferAttribute(a,c),l&&(uu.fromBufferAttribute(e,c),ur.add(uu)),i=Math.max(i,r.distanceToSquared(ur))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Dt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let D=0;D<a;D++)c[D]=new F,d[D]=new F;const f=new F,p=new F,m=new F,v=new de,y=new de,x=new de,g=new F,_=new F;function w(D,k,X){f.fromArray(i,D*3),p.fromArray(i,k*3),m.fromArray(i,X*3),v.fromArray(o,D*2),y.fromArray(o,k*2),x.fromArray(o,X*2),p.sub(f),m.sub(f),y.sub(v),x.sub(v);const $=1/(y.x*x.y-x.x*y.y);isFinite($)&&(g.copy(p).multiplyScalar(x.y).addScaledVector(m,-y.y).multiplyScalar($),_.copy(m).multiplyScalar(y.x).addScaledVector(p,-x.x).multiplyScalar($),c[D].add(g),c[k].add(g),c[X].add(g),d[D].add(_),d[k].add(_),d[X].add(_))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let D=0,k=b.length;D<k;++D){const X=b[D],$=X.start,j=X.count;for(let H=$,ie=$+j;H<ie;H+=3)w(r[H+0],r[H+1],r[H+2])}const C=new F,T=new F,P=new F,B=new F;function R(D){P.fromArray(s,D*3),B.copy(P);const k=c[D];C.copy(k),C.sub(P.multiplyScalar(P.dot(k))).normalize(),T.crossVectors(B,k);const $=T.dot(d[D])<0?-1:1;l[D*4]=C.x,l[D*4+1]=C.y,l[D*4+2]=C.z,l[D*4+3]=$}for(let D=0,k=b.length;D<k;++D){const X=b[D],$=X.start,j=X.count;for(let H=$,ie=$+j;H<ie;H+=3)R(r[H+0]),R(r[H+1]),R(r[H+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Dt(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new F,s=new F,o=new F,a=new F,l=new F,c=new F,d=new F,f=new F;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),y=e.getX(p+1),x=e.getX(p+2);i.fromBufferAttribute(n,v),s.fromBufferAttribute(n,y),o.fromBufferAttribute(n,x),d.subVectors(o,s),f.subVectors(i,s),d.cross(f),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,x),a.add(d),l.add(d),c.add(d),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(x,c.x,c.y,c.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),d.subVectors(o,s),f.subVectors(i,s),d.cross(f),r.setXYZ(p+0,d.x,d.y,d.z),r.setXYZ(p+1,d.x,d.y,d.z),r.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)ur.fromBufferAttribute(e,n),ur.normalize(),e.setXYZ(n,ur.x,ur.y,ur.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,f=a.normalized,p=new c.constructor(l.length*d);let m=0,v=0;for(let y=0,x=l.length;y<x;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*d;for(let g=0;g<d;g++)p[v++]=c[m++]}return new Dt(p,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new yt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,f=c.length;d<f;d++){const p=c[d],m=e(p,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];d.push(m.toJSON(e.data))}d.length>0&&(i[l]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const d=i[c];this.setAttribute(c,d.clone(n))}const s=e.morphAttributes;for(const c in s){const d=[],f=s[c];for(let p=0,m=f.length;p<m;p++)d.push(f[p].clone(n));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const g2=new Ve,Xs=new cl,Cg=new mi,v2=new F,du=new F,fu=new F,hu=new F,Y1=new F,Tg=new F,Rg=new de,Pg=new de,Ig=new de,y2=new F,x2=new F,_2=new F,Bg=new F,Dg=new F;class qn extends zt{constructor(e=new yt,n=new ci){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Tg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],f=s[l];d!==0&&(Y1.fromBufferAttribute(f,e),o?Tg.addScaledVector(Y1,d):Tg.addScaledVector(Y1.sub(n),d))}n.add(Tg)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Cg.copy(r.boundingSphere),Cg.applyMatrix4(s),Xs.copy(e.ray).recast(e.near),!(Cg.containsPoint(Xs.origin)===!1&&(Xs.intersectSphere(Cg,v2)===null||Xs.origin.distanceToSquared(v2)>(e.far-e.near)**2))&&(g2.copy(s).invert(),Xs.copy(e.ray).applyMatrix4(g2),!(r.boundingBox!==null&&Xs.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n)))}_computeIntersections(e,n){let r;const i=this.geometry,s=this.material,o=i.index,a=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,d=i.attributes.normal,f=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(s))for(let m=0,v=f.length;m<v;m++){const y=f[m],x=s[y.materialIndex],g=Math.max(y.start,p.start),_=Math.min(o.count,Math.min(y.start+y.count,p.start+p.count));for(let w=g,b=_;w<b;w+=3){const C=o.getX(w),T=o.getX(w+1),P=o.getX(w+2);r=Lg(this,x,e,Xs,l,c,d,C,T,P),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=y.materialIndex,n.push(r))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let y=m,x=v;y<x;y+=3){const g=o.getX(y),_=o.getX(y+1),w=o.getX(y+2);r=Lg(this,s,e,Xs,l,c,d,g,_,w),r&&(r.faceIndex=Math.floor(y/3),n.push(r))}}else if(a!==void 0)if(Array.isArray(s))for(let m=0,v=f.length;m<v;m++){const y=f[m],x=s[y.materialIndex],g=Math.max(y.start,p.start),_=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));for(let w=g,b=_;w<b;w+=3){const C=w,T=w+1,P=w+2;r=Lg(this,x,e,Xs,l,c,d,C,T,P),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=y.materialIndex,n.push(r))}}else{const m=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let y=m,x=v;y<x;y+=3){const g=y,_=y+1,w=y+2;r=Lg(this,s,e,Xs,l,c,d,g,_,w),r&&(r.faceIndex=Math.floor(y/3),n.push(r))}}}}function JG(t,e,n,r,i,s,o,a){let l;if(e.side===rr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Bs,a),l===null)return null;Dg.copy(a),Dg.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Dg);return c<n.near||c>n.far?null:{distance:c,point:Dg.clone(),object:t}}function Lg(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,du),t.getVertexPosition(l,fu),t.getVertexPosition(c,hu);const d=JG(t,e,n,r,du,fu,hu,Bg);if(d){i&&(Rg.fromBufferAttribute(i,a),Pg.fromBufferAttribute(i,l),Ig.fromBufferAttribute(i,c),d.uv=nc.getInterpolation(Bg,du,fu,hu,Rg,Pg,Ig,new de)),s&&(Rg.fromBufferAttribute(s,a),Pg.fromBufferAttribute(s,l),Ig.fromBufferAttribute(s,c),d.uv1=nc.getInterpolation(Bg,du,fu,hu,Rg,Pg,Ig,new de),d.uv2=d.uv1),o&&(y2.fromBufferAttribute(o,a),x2.fromBufferAttribute(o,l),_2.fromBufferAttribute(o,c),d.normal=nc.getInterpolation(Bg,du,fu,hu,y2,x2,_2,new F),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new F,materialIndex:0};nc.getNormal(du,fu,hu,f.normal),d.face=f}return d}class so extends yt{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,r,n,e,o,s,0),v("z","y","x",1,-1,r,n,-e,o,s,1),v("x","z","y",1,1,e,r,n,i,o,2),v("x","z","y",1,-1,e,r,-n,i,o,3),v("x","y","z",1,-1,e,n,r,i,s,4),v("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new et(c,3)),this.setAttribute("normal",new et(d,3)),this.setAttribute("uv",new et(f,2));function v(y,x,g,_,w,b,C,T,P,B,R){const D=b/P,k=C/B,X=b/2,$=C/2,j=T/2,H=P+1,ie=B+1;let Z=0,U=0;const O=new F;for(let z=0;z<ie;z++){const ne=z*k-$;for(let J=0;J<H;J++){const q=J*D-X;O[y]=q*_,O[x]=ne*w,O[g]=j,c.push(O.x,O.y,O.z),O[y]=0,O[x]=0,O[g]=T>0?1:-1,d.push(O.x,O.y,O.z),f.push(J/P),f.push(1-z/B),Z+=1}}for(let z=0;z<B;z++)for(let ne=0;ne<P;ne++){const J=p+ne+H*z,q=p+ne+H*(z+1),ee=p+(ne+1)+H*(z+1),_e=p+(ne+1)+H*z;l.push(J,q,_e),l.push(q,ee,_e),U+=6}a.addGroup(m,U,R),m+=U,p+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new so(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function bd(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function jr(t){const e={};for(let n=0;n<t.length;n++){const r=bd(t[n]);for(const i in r)e[i]=r[i]}return e}function KG(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function O3(t){return t.getRenderTarget()===null?t.outputColorSpace:Ls}const Mp={clone:bd,merge:jr};var YG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,QG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Wn extends Fn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=YG,this.fragmentShader=QG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bd(e.uniforms),this.uniformsGroups=KG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class zd extends zt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ve,this.projectionMatrix=new Ve,this.projectionMatrixInverse=new Ve}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let rn=class extends zd{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Ad*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(lc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ad*2*Math.atan(Math.tan(lc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(lc*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const pu=-90,mu=1;class N3 extends zt{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new rn(pu,mu,e,n);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new rn(pu,mu,e,n);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new rn(pu,mu,e,n);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new rn(pu,mu,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new rn(pu,mu,e,n);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new rn(pu,mu,e,n);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,c]=this.children,d=e.getRenderTarget(),f=e.toneMapping,p=e.xr.enabled;e.toneMapping=Rs,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,s),e.setRenderTarget(r,2),e.render(n,o),e.setRenderTarget(r,3),e.render(n,a),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(n,c),e.setRenderTarget(d),e.toneMapping=f,e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class Cp extends dn{constructor(e,n,r,i,s,o,a,l,c,d){e=e!==void 0?e:[],n=n!==void 0?n:Xa,super(e,n,r,i,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class U3 extends vn{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(vh("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Yr?St:Ha),this.texture=new Cp(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Zt}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new so(5,5,5),s=new Wn({name:"CubemapFromEquirect",uniforms:bd(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:rr,blending:Er});s.uniforms.tEquirect.value=n;const o=new qn(i,s),a=n.minFilter;return n.minFilter===Ds&&(n.minFilter=Zt),new N3(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const Q1=new F,qG=new F,ZG=new Tt;class Zs{constructor(e=new F(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=Q1.subVectors(r,n).cross(qG.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(Q1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||ZG.getNormalMatrix(e),i=this.coplanarPoint(Q1).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const bl=new mi,Fg=new F;class _y{constructor(e=new Zs,n=new Zs,r=new Zs,i=new Zs,s=new Zs,o=new Zs){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],d=r[6],f=r[7],p=r[8],m=r[9],v=r[10],y=r[11],x=r[12],g=r[13],_=r[14],w=r[15];return n[0].setComponents(a-i,f-l,y-p,w-x).normalize(),n[1].setComponents(a+i,f+l,y+p,w+x).normalize(),n[2].setComponents(a+s,f+c,y+m,w+g).normalize(),n[3].setComponents(a-s,f-c,y-m,w-g).normalize(),n[4].setComponents(a-o,f-d,y-v,w-_).normalize(),n[5].setComponents(a+o,f+d,y+v,w+_).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),bl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),bl.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(bl)}intersectsSprite(e){return bl.center.set(0,0,0),bl.radius=.7071067811865476,bl.applyMatrix4(e.matrixWorld),this.intersectsSphere(bl)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Fg.x=i.normal.x>0?e.max.x:e.min.x,Fg.y=i.normal.y>0?e.max.y:e.min.y,Fg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Fg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function k3(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function e6(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,d){const f=c.array,p=c.usage,m=t.createBuffer();t.bindBuffer(d,m),t.bufferData(d,f,p),c.onUploadCallback();let v;if(f instanceof Float32Array)v=t.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=t.SHORT;else if(f instanceof Uint32Array)v=t.UNSIGNED_INT;else if(f instanceof Int32Array)v=t.INT;else if(f instanceof Int8Array)v=t.BYTE;else if(f instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function s(c,d,f){const p=d.array,m=d.updateRange;t.bindBuffer(f,c),m.count===-1?t.bufferSubData(f,0,p):(n?t.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):t.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d&&(t.deleteBuffer(d.buffer),r.delete(c))}function l(c,d){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);f===void 0?r.set(c,i(c,d)):f.version<c.version&&(s(f.buffer,c,d),f.version=c.version)}return{get:o,remove:a,update:l}}class Tc extends yt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,d=l+1,f=e/a,p=n/l,m=[],v=[],y=[],x=[];for(let g=0;g<d;g++){const _=g*p-o;for(let w=0;w<c;w++){const b=w*f-s;v.push(b,-_,0),y.push(0,0,1),x.push(w/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const w=_+c*g,b=_+c*(g+1),C=_+1+c*(g+1),T=_+1+c*g;m.push(w,b,T),m.push(b,C,T)}this.setIndex(m),this.setAttribute("position",new et(v,3)),this.setAttribute("normal",new et(y,3)),this.setAttribute("uv",new et(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tc(e.width,e.height,e.widthSegments,e.heightSegments)}}var t6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,n6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,r6=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,i6=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,s6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,o6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,a6="vec3 transformed = vec3( position );",l6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,c6=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,u6=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,d6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,f6=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,h6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,p6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,m6=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,g6=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,v6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,y6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,x6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,_6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,S6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,w6=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,E6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,A6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,b6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,M6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,C6="gl_FragColor = linearToOutputTexel( gl_FragColor );",T6=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,R6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,P6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,I6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,B6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,D6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,L6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,F6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,O6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,N6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,U6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,k6=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,z6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,H6=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,G6=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,$6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,V6=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,W6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,j6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,X6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,J6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,K6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,Y6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Q6=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,q6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Z6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,e8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,t8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,n8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,r8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,i8=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,s8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,o8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,a8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,l8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,c8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,u8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,d8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,f8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,h8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,p8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,m8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,g8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,v8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,y8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,x8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,S8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,w8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,E8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,A8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,b8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,M8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,C8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,T8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,R8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,P8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,I8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,B8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,D8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,L8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,F8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,O8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,N8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,U8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,k8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,z8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,H8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,G8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,$8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,V8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,W8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,j8=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,X8=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,J8=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,K8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Y8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Q8=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,q8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Z8=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,e9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,t9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,n9=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,r9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,i9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,s9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,o9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,a9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,l9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,c9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,u9=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,d9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,h9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,m9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,v9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,y9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,x9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,S9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,E9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,b9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,M9=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,C9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,T9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,R9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Et={alphamap_fragment:t6,alphamap_pars_fragment:n6,alphatest_fragment:r6,alphatest_pars_fragment:i6,aomap_fragment:s6,aomap_pars_fragment:o6,begin_vertex:a6,beginnormal_vertex:l6,bsdfs:c6,iridescence_fragment:u6,bumpmap_pars_fragment:d6,clipping_planes_fragment:f6,clipping_planes_pars_fragment:h6,clipping_planes_pars_vertex:p6,clipping_planes_vertex:m6,color_fragment:g6,color_pars_fragment:v6,color_pars_vertex:y6,color_vertex:x6,common:_6,cube_uv_reflection_fragment:S6,defaultnormal_vertex:w6,displacementmap_pars_vertex:E6,displacementmap_vertex:A6,emissivemap_fragment:b6,emissivemap_pars_fragment:M6,encodings_fragment:C6,encodings_pars_fragment:T6,envmap_fragment:R6,envmap_common_pars_fragment:P6,envmap_pars_fragment:I6,envmap_pars_vertex:B6,envmap_physical_pars_fragment:V6,envmap_vertex:D6,fog_vertex:L6,fog_pars_vertex:F6,fog_fragment:O6,fog_pars_fragment:N6,gradientmap_pars_fragment:U6,lightmap_fragment:k6,lightmap_pars_fragment:z6,lights_lambert_fragment:H6,lights_lambert_pars_fragment:G6,lights_pars_begin:$6,lights_toon_fragment:W6,lights_toon_pars_fragment:j6,lights_phong_fragment:X6,lights_phong_pars_fragment:J6,lights_physical_fragment:K6,lights_physical_pars_fragment:Y6,lights_fragment_begin:Q6,lights_fragment_maps:q6,lights_fragment_end:Z6,logdepthbuf_fragment:e8,logdepthbuf_pars_fragment:t8,logdepthbuf_pars_vertex:n8,logdepthbuf_vertex:r8,map_fragment:i8,map_pars_fragment:s8,map_particle_fragment:o8,map_particle_pars_fragment:a8,metalnessmap_fragment:l8,metalnessmap_pars_fragment:c8,morphcolor_vertex:u8,morphnormal_vertex:d8,morphtarget_pars_vertex:f8,morphtarget_vertex:h8,normal_fragment_begin:p8,normal_fragment_maps:m8,normal_pars_fragment:g8,normal_pars_vertex:v8,normal_vertex:y8,normalmap_pars_fragment:x8,clearcoat_normal_fragment_begin:_8,clearcoat_normal_fragment_maps:S8,clearcoat_pars_fragment:w8,iridescence_pars_fragment:E8,output_fragment:A8,packing:b8,premultiplied_alpha_fragment:M8,project_vertex:C8,dithering_fragment:T8,dithering_pars_fragment:R8,roughnessmap_fragment:P8,roughnessmap_pars_fragment:I8,shadowmap_pars_fragment:B8,shadowmap_pars_vertex:D8,shadowmap_vertex:L8,shadowmask_pars_fragment:F8,skinbase_vertex:O8,skinning_pars_vertex:N8,skinning_vertex:U8,skinnormal_vertex:k8,specularmap_fragment:z8,specularmap_pars_fragment:H8,tonemapping_fragment:G8,tonemapping_pars_fragment:$8,transmission_fragment:V8,transmission_pars_fragment:W8,uv_pars_fragment:j8,uv_pars_vertex:X8,uv_vertex:J8,worldpos_vertex:K8,background_vert:Y8,background_frag:Q8,backgroundCube_vert:q8,backgroundCube_frag:Z8,cube_vert:e9,cube_frag:t9,depth_vert:n9,depth_frag:r9,distanceRGBA_vert:i9,distanceRGBA_frag:s9,equirect_vert:o9,equirect_frag:a9,linedashed_vert:l9,linedashed_frag:c9,meshbasic_vert:u9,meshbasic_frag:d9,meshlambert_vert:f9,meshlambert_frag:h9,meshmatcap_vert:p9,meshmatcap_frag:m9,meshnormal_vert:g9,meshnormal_frag:v9,meshphong_vert:y9,meshphong_frag:x9,meshphysical_vert:_9,meshphysical_frag:S9,meshtoon_vert:w9,meshtoon_frag:E9,points_vert:A9,points_frag:b9,shadow_vert:M9,shadow_frag:C9,sprite_vert:T9,sprite_frag:R9},Oe={common:{diffuse:{value:new Ne(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tt},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tt},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ne(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Tt}},sprite:{diffuse:{value:new Ne(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tt},alphaMap:{value:null},alphaTest:{value:0}}},Jr={basic:{uniforms:jr([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:jr([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:jr([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:jr([Oe.common,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.roughnessmap,Oe.metalnessmap,Oe.fog,Oe.lights,{emissive:{value:new Ne(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:jr([Oe.common,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.gradientmap,Oe.fog,Oe.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:jr([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:jr([Oe.points,Oe.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:jr([Oe.common,Oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:jr([Oe.common,Oe.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:jr([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:jr([Oe.sprite,Oe.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new Tt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Et.backgroundCube_vert,fragmentShader:Et.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:jr([Oe.common,Oe.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:jr([Oe.lights,Oe.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};Jr.physical={uniforms:jr([Jr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tt},clearcoatNormalScale:{value:new de(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tt},sheen:{value:0},sheenColor:{value:new Ne(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tt},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tt},attenuationDistance:{value:0},attenuationColor:{value:new Ne(0)},specularColor:{value:new Ne(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tt}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};const Og={r:0,b:0,g:0};function P9(t,e,n,r,i,s,o){const a=new Ne(0);let l=s===!0?0:1,c,d,f=null,p=0,m=null;function v(x,g){let _=!1,w=g.isScene===!0?g.background:null;switch(w&&w.isTexture&&(w=(g.backgroundBlurriness>0?n:e).get(w)),w===null?y(a,l):w&&w.isColor&&(y(w,1),_=!0),t.xr.getEnvironmentBlendMode()){case"opaque":_=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),_=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),_=!0;break}(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),w&&(w.isCubeTexture||w.mapping===kd)?(d===void 0&&(d=new qn(new so(1,1,1),new Wn({name:"BackgroundCubeMaterial",uniforms:bd(Jr.backgroundCube.uniforms),vertexShader:Jr.backgroundCube.vertexShader,fragmentShader:Jr.backgroundCube.fragmentShader,side:rr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(T,P,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=w.colorSpace!==St,(f!==w||p!==w.version||m!==t.toneMapping)&&(d.material.needsUpdate=!0,f=w,p=w.version,m=t.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new qn(new Tc(2,2),new Wn({name:"BackgroundMaterial",uniforms:bd(Jr.background.uniforms),vertexShader:Jr.background.vertexShader,fragmentShader:Jr.background.fragmentShader,side:Bs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=w.colorSpace!==St,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||p!==w.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,f=w,p=w.version,m=t.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function y(x,g){x.getRGB(Og,O3(t)),r.buffers.color.setClear(Og.r,Og.g,Og.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(x,g=1){a.set(x),l=g,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,y(a,l)},render:v}}function I9(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=x(null);let c=l,d=!1;function f(j,H,ie,Z,U){let O=!1;if(o){const z=y(Z,ie,H);c!==z&&(c=z,m(c.object)),O=g(j,Z,ie,U),O&&_(j,Z,ie,U)}else{const z=H.wireframe===!0;(c.geometry!==Z.id||c.program!==ie.id||c.wireframe!==z)&&(c.geometry=Z.id,c.program=ie.id,c.wireframe=z,O=!0)}U!==null&&n.update(U,t.ELEMENT_ARRAY_BUFFER),(O||d)&&(d=!1,B(j,H,ie,Z),U!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(U).buffer))}function p(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(j){return r.isWebGL2?t.bindVertexArray(j):s.bindVertexArrayOES(j)}function v(j){return r.isWebGL2?t.deleteVertexArray(j):s.deleteVertexArrayOES(j)}function y(j,H,ie){const Z=ie.wireframe===!0;let U=a[j.id];U===void 0&&(U={},a[j.id]=U);let O=U[H.id];O===void 0&&(O={},U[H.id]=O);let z=O[Z];return z===void 0&&(z=x(p()),O[Z]=z),z}function x(j){const H=[],ie=[],Z=[];for(let U=0;U<i;U++)H[U]=0,ie[U]=0,Z[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:ie,attributeDivisors:Z,object:j,attributes:{},index:null}}function g(j,H,ie,Z){const U=c.attributes,O=H.attributes;let z=0;const ne=ie.getAttributes();for(const J in ne)if(ne[J].location>=0){const ee=U[J];let _e=O[J];if(_e===void 0&&(J==="instanceMatrix"&&j.instanceMatrix&&(_e=j.instanceMatrix),J==="instanceColor"&&j.instanceColor&&(_e=j.instanceColor)),ee===void 0||ee.attribute!==_e||_e&&ee.data!==_e.data)return!0;z++}return c.attributesNum!==z||c.index!==Z}function _(j,H,ie,Z){const U={},O=H.attributes;let z=0;const ne=ie.getAttributes();for(const J in ne)if(ne[J].location>=0){let ee=O[J];ee===void 0&&(J==="instanceMatrix"&&j.instanceMatrix&&(ee=j.instanceMatrix),J==="instanceColor"&&j.instanceColor&&(ee=j.instanceColor));const _e={};_e.attribute=ee,ee&&ee.data&&(_e.data=ee.data),U[J]=_e,z++}c.attributes=U,c.attributesNum=z,c.index=Z}function w(){const j=c.newAttributes;for(let H=0,ie=j.length;H<ie;H++)j[H]=0}function b(j){C(j,0)}function C(j,H){const ie=c.newAttributes,Z=c.enabledAttributes,U=c.attributeDivisors;ie[j]=1,Z[j]===0&&(t.enableVertexAttribArray(j),Z[j]=1),U[j]!==H&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](j,H),U[j]=H)}function T(){const j=c.newAttributes,H=c.enabledAttributes;for(let ie=0,Z=H.length;ie<Z;ie++)H[ie]!==j[ie]&&(t.disableVertexAttribArray(ie),H[ie]=0)}function P(j,H,ie,Z,U,O){r.isWebGL2===!0&&(ie===t.INT||ie===t.UNSIGNED_INT)?t.vertexAttribIPointer(j,H,ie,U,O):t.vertexAttribPointer(j,H,ie,Z,U,O)}function B(j,H,ie,Z){if(r.isWebGL2===!1&&(j.isInstancedMesh||Z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const U=Z.attributes,O=ie.getAttributes(),z=H.defaultAttributeValues;for(const ne in O){const J=O[ne];if(J.location>=0){let q=U[ne];if(q===void 0&&(ne==="instanceMatrix"&&j.instanceMatrix&&(q=j.instanceMatrix),ne==="instanceColor"&&j.instanceColor&&(q=j.instanceColor)),q!==void 0){const ee=q.normalized,_e=q.itemSize,be=n.get(q);if(be===void 0)continue;const K=be.buffer,je=be.type,Xe=be.bytesPerElement;if(q.isInterleavedBufferAttribute){const Ee=q.data,Me=Ee.stride,ve=q.offset;if(Ee.isInstancedInterleavedBuffer){for(let re=0;re<J.locationSize;re++)C(J.location+re,Ee.meshPerAttribute);j.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let re=0;re<J.locationSize;re++)b(J.location+re);t.bindBuffer(t.ARRAY_BUFFER,K);for(let re=0;re<J.locationSize;re++)P(J.location+re,_e/J.locationSize,je,ee,Me*Xe,(ve+_e/J.locationSize*re)*Xe)}else{if(q.isInstancedBufferAttribute){for(let Ee=0;Ee<J.locationSize;Ee++)C(J.location+Ee,q.meshPerAttribute);j.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let Ee=0;Ee<J.locationSize;Ee++)b(J.location+Ee);t.bindBuffer(t.ARRAY_BUFFER,K);for(let Ee=0;Ee<J.locationSize;Ee++)P(J.location+Ee,_e/J.locationSize,je,ee,_e*Xe,_e/J.locationSize*Ee*Xe)}}else if(z!==void 0){const ee=z[ne];if(ee!==void 0)switch(ee.length){case 2:t.vertexAttrib2fv(J.location,ee);break;case 3:t.vertexAttrib3fv(J.location,ee);break;case 4:t.vertexAttrib4fv(J.location,ee);break;default:t.vertexAttrib1fv(J.location,ee)}}}}T()}function R(){X();for(const j in a){const H=a[j];for(const ie in H){const Z=H[ie];for(const U in Z)v(Z[U].object),delete Z[U];delete H[ie]}delete a[j]}}function D(j){if(a[j.id]===void 0)return;const H=a[j.id];for(const ie in H){const Z=H[ie];for(const U in Z)v(Z[U].object),delete Z[U];delete H[ie]}delete a[j.id]}function k(j){for(const H in a){const ie=a[H];if(ie[j.id]===void 0)continue;const Z=ie[j.id];for(const U in Z)v(Z[U].object),delete Z[U];delete ie[j.id]}}function X(){$(),d=!0,c!==l&&(c=l,m(c.object))}function $(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:X,resetDefaultState:$,dispose:R,releaseStatesOfGeometry:D,releaseStatesOfProgram:k,initAttributes:w,enableAttribute:b,disableUnusedAttributes:T}}function B9(t,e,n,r){const i=r.isWebGL2;let s;function o(c){s=c}function a(c,d){t.drawArrays(s,c,d),n.update(d,s,1)}function l(c,d,f){if(f===0)return;let p,m;if(i)p=t,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,c,d,f),n.update(d,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function D9(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){if(P==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),_=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),w=p>0,b=o||e.has("OES_texture_float"),C=w&&b,T=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:x,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:w,floatFragmentTextures:b,floatVertexTextures:C,maxSamples:T}}function L9(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new Zs,a=new Tt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){n=d(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,y=f.clipIntersection,x=f.clipShadows,g=t.get(f);if(!i||v===null||v.length===0||s&&!x)s?d(null):c();else{const _=s?0:r,w=_*4;let b=g.clippingState||null;l.value=b,b=d(v,p,w,m);for(let C=0;C!==w;++C)b[C]=n[C];g.clippingState=b,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(f,p,m,v){const y=f!==null?f.length:0;let x=null;if(y!==0){if(x=l.value,v!==!0||x===null){const g=m+y*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<g)&&(x=new Float32Array(g));for(let w=0,b=m;w!==y;++w,b+=4)o.copy(f[w]).applyMatrix4(_,a),o.normal.toArray(x,b),x[b+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function F9(t){let e=new WeakMap;function n(o,a){return a===Wh?o.mapping=Xa:a===jh&&(o.mapping=Ja),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Wh||a===jh)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new U3(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let Ps=class extends zd{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}};const Yu=4,S2=[.125,.215,.35,.446,.526,.582],Xl=20,q1=new Ps,w2=new Ne;let Z1=null;const Hl=(1+Math.sqrt(5))/2,gu=1/Hl,E2=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,Hl,gu),new F(0,Hl,-gu),new F(gu,0,Hl),new F(-gu,0,Hl),new F(Hl,gu,0),new F(-Hl,gu,0)];class Tw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Z1=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=M2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=b2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Z1),e.scissorTest=!1,Ng(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Xa||e.mapping===Ja?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Z1=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Zt,minFilter:Zt,generateMipmaps:!1,type:Ya,format:ai,colorSpace:Ls,depthBuffer:!1},i=A2(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=A2(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=O9(s)),this._blurMaterial=N9(s,e,n)}return i}_compileMaterial(e){const n=new qn(this._lodPlanes[0],e);this._renderer.compile(n,q1)}_sceneToCubeUV(e,n,r,i){const a=new rn(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(w2),d.toneMapping=Rs,d.autoClear=!1;const m=new ci({name:"PMREM.Background",side:rr,depthWrite:!1,depthTest:!1}),v=new qn(new so,m);let y=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,y=!0):(m.color.copy(w2),y=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):_===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const w=this._cubeSize;Ng(i,_*w,g>2?w:0,w,w),d.setRenderTarget(i),y&&d.render(v,a),d.render(e,a)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=x}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Xa||e.mapping===Ja;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=M2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=b2());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new qn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Ng(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,q1)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=E2[(i-1)%E2.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new qn(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Xl-1),y=s/v,x=isFinite(s)?1+Math.floor(d*y):Xl;x>Xl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Xl}`);const g=[];let _=0;for(let P=0;P<Xl;++P){const B=P/y,R=Math.exp(-B*B/2);g.push(R),P===0?_+=R:P<x&&(_+=2*R)}for(let P=0;P<g.length;P++)g[P]=g[P]/_;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=v,p.mipInt.value=w-r;const b=this._sizeLods[i],C=3*b*(i>w-Yu?i-w+Yu:0),T=4*(this._cubeSize-b);Ng(n,C,T,3*b,2*b),l.setRenderTarget(n),l.render(f,q1)}}function O9(t){const e=[],n=[],r=[];let i=t;const s=t-Yu+1+S2.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-Yu?l=S2[o-t+Yu-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),d=-c,f=1+c,p=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,v=6,y=3,x=2,g=1,_=new Float32Array(y*v*m),w=new Float32Array(x*v*m),b=new Float32Array(g*v*m);for(let T=0;T<m;T++){const P=T%3*2/3-1,B=T>2?0:-1,R=[P,B,0,P+2/3,B,0,P+2/3,B+1,0,P,B,0,P+2/3,B+1,0,P,B+1,0];_.set(R,y*v*T),w.set(p,x*v*T);const D=[T,T,T,T,T,T];b.set(D,g*v*T)}const C=new yt;C.setAttribute("position",new Dt(_,y)),C.setAttribute("uv",new Dt(w,x)),C.setAttribute("faceIndex",new Dt(b,g)),e.push(C),i>Yu&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function A2(t,e,n){const r=new vn(t,e,n);return r.texture.mapping=kd,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ng(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function N9(t,e,n){const r=new Float32Array(Xl),i=new F(0,1,0);return new Wn({name:"SphericalGaussianBlur",defines:{n:Xl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:OA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Er,depthTest:!1,depthWrite:!1})}function b2(){return new Wn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:OA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Er,depthTest:!1,depthWrite:!1})}function M2(){return new Wn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:OA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Er,depthTest:!1,depthWrite:!1})}function OA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function U9(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Wh||l===jh,d=l===Xa||l===Ja;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return n===null&&(n=new Tw(t)),f=c?n.fromEquirectangular(a,f):n.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||d&&f&&i(f)){n===null&&(n=new Tw(t));const p=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function k9(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function z9(t,e,n,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,n.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],t.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const y=m[v];for(let x=0,g=y.length;x<g;x++)e.update(y[x],t.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let y=0;if(m!==null){const _=m.array;y=m.version;for(let w=0,b=_.length;w<b;w+=3){const C=_[w+0],T=_[w+1],P=_[w+2];p.push(C,T,T,P,P,C)}}else{const _=v.array;y=v.version;for(let w=0,b=_.length/3-1;w<b;w+=3){const C=w+0,T=w+1,P=w+2;p.push(C,T,T,P,P,C)}}const x=new(L3(p)?FA:LA)(p,1);x.version=y;const g=s.get(f);g&&e.remove(g),s.set(f,x)}function d(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:d}}function H9(t,e,n,r){const i=r.isWebGL2;let s;function o(p){s=p}let a,l;function c(p){a=p.type,l=p.bytesPerElement}function d(p,m){t.drawElements(s,m,a,p*l),n.update(m,s,1)}function f(p,m,v){if(v===0)return;let y,x;if(i)y=t,x="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[x](s,m,a,p*l,v),n.update(m,s,v)}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=f}function G9(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function $9(t,e){return t[0]-e[0]}function V9(t,e){return Math.abs(e[1])-Math.abs(t[1])}function W9(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new Bt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,f){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,y=v!==void 0?v.length:0;let x=s.get(d);if(x===void 0||x.count!==y){let H=function(){$.dispose(),s.delete(d),d.removeEventListener("dispose",H)};var m=H;x!==void 0&&x.texture.dispose();const w=d.morphAttributes.position!==void 0,b=d.morphAttributes.normal!==void 0,C=d.morphAttributes.color!==void 0,T=d.morphAttributes.position||[],P=d.morphAttributes.normal||[],B=d.morphAttributes.color||[];let R=0;w===!0&&(R=1),b===!0&&(R=2),C===!0&&(R=3);let D=d.attributes.position.count*R,k=1;D>e.maxTextureSize&&(k=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const X=new Float32Array(D*k*4*y),$=new xy(X,D,k,y);$.type=bs,$.needsUpdate=!0;const j=R*4;for(let ie=0;ie<y;ie++){const Z=T[ie],U=P[ie],O=B[ie],z=D*k*4*ie;for(let ne=0;ne<Z.count;ne++){const J=ne*j;w===!0&&(o.fromBufferAttribute(Z,ne),X[z+J+0]=o.x,X[z+J+1]=o.y,X[z+J+2]=o.z,X[z+J+3]=0),b===!0&&(o.fromBufferAttribute(U,ne),X[z+J+4]=o.x,X[z+J+5]=o.y,X[z+J+6]=o.z,X[z+J+7]=0),C===!0&&(o.fromBufferAttribute(O,ne),X[z+J+8]=o.x,X[z+J+9]=o.y,X[z+J+10]=o.z,X[z+J+11]=O.itemSize===4?o.w:1)}}x={count:y,texture:$,size:new de(D,k)},s.set(d,x),d.addEventListener("dispose",H)}let g=0;for(let w=0;w<p.length;w++)g+=p[w];const _=d.morphTargetsRelative?1:1-g;f.getUniforms().setValue(t,"morphTargetBaseInfluence",_),f.getUniforms().setValue(t,"morphTargetInfluences",p),f.getUniforms().setValue(t,"morphTargetsTexture",x.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",x.size)}else{const v=p===void 0?0:p.length;let y=r[d.id];if(y===void 0||y.length!==v){y=[];for(let b=0;b<v;b++)y[b]=[b,0];r[d.id]=y}for(let b=0;b<v;b++){const C=y[b];C[0]=b,C[1]=p[b]}y.sort(V9);for(let b=0;b<8;b++)b<v&&y[b][1]?(a[b][0]=y[b][0],a[b][1]=y[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort($9);const x=d.morphAttributes.position,g=d.morphAttributes.normal;let _=0;for(let b=0;b<8;b++){const C=a[b],T=C[0],P=C[1];T!==Number.MAX_SAFE_INTEGER&&P?(x&&d.getAttribute("morphTarget"+b)!==x[T]&&d.setAttribute("morphTarget"+b,x[T]),g&&d.getAttribute("morphNormal"+b)!==g[T]&&d.setAttribute("morphNormal"+b,g[T]),i[b]=P,_+=P):(x&&d.hasAttribute("morphTarget"+b)===!0&&d.deleteAttribute("morphTarget"+b),g&&d.hasAttribute("morphNormal"+b)===!0&&d.deleteAttribute("morphNormal"+b),i[b]=0)}const w=d.morphTargetsRelative?1:1-_;f.getUniforms().setValue(t,"morphTargetBaseInfluence",w),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function j9(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,d=l.geometry,f=e.get(l,d);return i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER)),f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const z3=new dn,H3=new xy,G3=new DA,$3=new Cp,C2=[],T2=[],R2=new Float32Array(16),P2=new Float32Array(9),I2=new Float32Array(4);function Hd(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=C2[i];if(s===void 0&&(s=new Float32Array(i),C2[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function ir(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function sr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Sy(t,e){let n=T2[e];n===void 0&&(n=new Int32Array(e),T2[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function X9(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function J9(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ir(n,e))return;t.uniform2fv(this.addr,e),sr(n,e)}}function K9(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ir(n,e))return;t.uniform3fv(this.addr,e),sr(n,e)}}function Y9(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ir(n,e))return;t.uniform4fv(this.addr,e),sr(n,e)}}function Q9(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ir(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),sr(n,e)}else{if(ir(n,r))return;I2.set(r),t.uniformMatrix2fv(this.addr,!1,I2),sr(n,r)}}function q9(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ir(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),sr(n,e)}else{if(ir(n,r))return;P2.set(r),t.uniformMatrix3fv(this.addr,!1,P2),sr(n,r)}}function Z9(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ir(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),sr(n,e)}else{if(ir(n,r))return;R2.set(r),t.uniformMatrix4fv(this.addr,!1,R2),sr(n,r)}}function e$(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function t$(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ir(n,e))return;t.uniform2iv(this.addr,e),sr(n,e)}}function n$(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ir(n,e))return;t.uniform3iv(this.addr,e),sr(n,e)}}function r$(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ir(n,e))return;t.uniform4iv(this.addr,e),sr(n,e)}}function i$(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function s$(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ir(n,e))return;t.uniform2uiv(this.addr,e),sr(n,e)}}function o$(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ir(n,e))return;t.uniform3uiv(this.addr,e),sr(n,e)}}function a$(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ir(n,e))return;t.uniform4uiv(this.addr,e),sr(n,e)}}function l$(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||z3,i)}function c$(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||G3,i)}function u$(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||$3,i)}function d$(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||H3,i)}function f$(t){switch(t){case 5126:return X9;case 35664:return J9;case 35665:return K9;case 35666:return Y9;case 35674:return Q9;case 35675:return q9;case 35676:return Z9;case 5124:case 35670:return e$;case 35667:case 35671:return t$;case 35668:case 35672:return n$;case 35669:case 35673:return r$;case 5125:return i$;case 36294:return s$;case 36295:return o$;case 36296:return a$;case 35678:case 36198:case 36298:case 36306:case 35682:return l$;case 35679:case 36299:case 36307:return c$;case 35680:case 36300:case 36308:case 36293:return u$;case 36289:case 36303:case 36311:case 36292:return d$}}function h$(t,e){t.uniform1fv(this.addr,e)}function p$(t,e){const n=Hd(e,this.size,2);t.uniform2fv(this.addr,n)}function m$(t,e){const n=Hd(e,this.size,3);t.uniform3fv(this.addr,n)}function g$(t,e){const n=Hd(e,this.size,4);t.uniform4fv(this.addr,n)}function v$(t,e){const n=Hd(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function y$(t,e){const n=Hd(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function x$(t,e){const n=Hd(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function _$(t,e){t.uniform1iv(this.addr,e)}function S$(t,e){t.uniform2iv(this.addr,e)}function w$(t,e){t.uniform3iv(this.addr,e)}function E$(t,e){t.uniform4iv(this.addr,e)}function A$(t,e){t.uniform1uiv(this.addr,e)}function b$(t,e){t.uniform2uiv(this.addr,e)}function M$(t,e){t.uniform3uiv(this.addr,e)}function C$(t,e){t.uniform4uiv(this.addr,e)}function T$(t,e,n){const r=this.cache,i=e.length,s=Sy(n,i);ir(r,s)||(t.uniform1iv(this.addr,s),sr(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||z3,s[o])}function R$(t,e,n){const r=this.cache,i=e.length,s=Sy(n,i);ir(r,s)||(t.uniform1iv(this.addr,s),sr(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||G3,s[o])}function P$(t,e,n){const r=this.cache,i=e.length,s=Sy(n,i);ir(r,s)||(t.uniform1iv(this.addr,s),sr(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||$3,s[o])}function I$(t,e,n){const r=this.cache,i=e.length,s=Sy(n,i);ir(r,s)||(t.uniform1iv(this.addr,s),sr(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||H3,s[o])}function B$(t){switch(t){case 5126:return h$;case 35664:return p$;case 35665:return m$;case 35666:return g$;case 35674:return v$;case 35675:return y$;case 35676:return x$;case 5124:case 35670:return _$;case 35667:case 35671:return S$;case 35668:case 35672:return w$;case 35669:case 35673:return E$;case 5125:return A$;case 36294:return b$;case 36295:return M$;case 36296:return C$;case 35678:case 36198:case 36298:case 36306:case 35682:return T$;case 35679:case 36299:case 36307:return R$;case 35680:case 36300:case 36308:case 36293:return P$;case 36289:case 36303:case 36311:case 36292:return I$}}class D${constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=f$(n.type)}}class L${constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=B$(n.type)}}class F${constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const e_=/(\w+)(\])?(\[|\.)?/g;function B2(t,e){t.seq.push(e),t.map[e.id]=e}function O$(t,e,n){const r=t.name,i=r.length;for(e_.lastIndex=0;;){const s=e_.exec(r),o=e_.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){B2(n,c===void 0?new D$(a,t,e):new L$(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new F$(a),B2(n,f)),n=f}}}class e0{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);O$(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function D2(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let N$=0;function U$(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function k$(t){switch(t){case Ls:return["Linear","( value )"];case St:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function L2(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+U$(t.getShaderSource(e),o)}else return i}function z$(t,e){const n=k$(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function H$(t,e){let n;switch(e){case o3:n="Linear";break;case a3:n="Reinhard";break;case l3:n="OptimizedCineon";break;case MA:n="ACESFilmic";break;case c3:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function G$(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ih).join(`
`)}function $$(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function V$(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function ih(t){return t!==""}function F2(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function O2(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const W$=/^[ \t]*#include +<([\w\d./]+)>/gm;function Rw(t){return t.replace(W$,j$)}function j$(t,e){const n=Et[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return Rw(n)}const X$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function N2(t){return t.replace(X$,J$)}function J$(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function U2(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function K$(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===my?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===mh?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ss&&(e="SHADOWMAP_TYPE_VSM"),e}function Y$(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Xa:case Ja:e="ENVMAP_TYPE_CUBE";break;case kd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Q$(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Ja:e="ENVMAP_MODE_REFRACTION";break}return e}function q$(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Ep:e="ENVMAP_BLENDING_MULTIPLY";break;case i3:e="ENVMAP_BLENDING_MIX";break;case s3:e="ENVMAP_BLENDING_ADD";break}return e}function Z$(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function eV(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=K$(n),c=Y$(n),d=Q$(n),f=q$(n),p=Z$(n),m=n.isWebGL2?"":G$(n),v=$$(s),y=i.createProgram();let x,g,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=[v].filter(ih).join(`
`),x.length>0&&(x+=`
`),g=[m,v].filter(ih).join(`
`),g.length>0&&(g+=`
`)):(x=[U2(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ih).join(`
`),g=[m,U2(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Rs?"#define TONE_MAPPING":"",n.toneMapping!==Rs?Et.tonemapping_pars_fragment:"",n.toneMapping!==Rs?H$("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Et.encodings_pars_fragment,z$("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(ih).join(`
`)),o=Rw(o),o=F2(o,n),o=O2(o,n),a=Rw(a),a=F2(a,n),a=O2(a,n),o=N2(o),a=N2(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",n.glslVersion===Mw?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Mw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=_+x+o,b=_+g+a,C=D2(i,i.VERTEX_SHADER,w),T=D2(i,i.FRAGMENT_SHADER,b);if(i.attachShader(y,C),i.attachShader(y,T),n.index0AttributeName!==void 0?i.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),t.debug.checkShaderErrors){const R=i.getProgramInfoLog(y).trim(),D=i.getShaderInfoLog(C).trim(),k=i.getShaderInfoLog(T).trim();let X=!0,$=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(X=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,y,C,T);else{const j=L2(i,C,"vertex"),H=L2(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+j+`
`+H)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(D===""||k==="")&&($=!1);$&&(this.diagnostics={runnable:X,programLog:R,vertexShader:{log:D,prefix:x},fragmentShader:{log:k,prefix:g}})}i.deleteShader(C),i.deleteShader(T);let P;this.getUniforms=function(){return P===void 0&&(P=new e0(i,y)),P};let B;return this.getAttributes=function(){return B===void 0&&(B=V$(i,y)),B},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=N$++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=C,this.fragmentShader=T,this}let tV=0;class nV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new rV(e),n.set(e,r)),r}}class rV{constructor(e){this.id=tV++,this.code=e,this.usedTimes=0}}function iV(t,e,n,r,i,s,o){const a=new uc,l=new nV,c=[],d=i.isWebGL2,f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(R){return R===1?"uv1":R===2?"uv2":R===3?"uv3":"uv"}function x(R,D,k,X,$){const j=X.fog,H=$.geometry,ie=R.isMeshStandardMaterial?X.environment:null,Z=(R.isMeshStandardMaterial?n:e).get(R.envMap||ie),U=Z&&Z.mapping===kd?Z.image.height:null,O=v[R.type];R.precision!==null&&(m=i.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const z=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,ne=z!==void 0?z.length:0;let J=0;H.morphAttributes.position!==void 0&&(J=1),H.morphAttributes.normal!==void 0&&(J=2),H.morphAttributes.color!==void 0&&(J=3);let q,ee,_e,be;if(O){const Kt=Jr[O];q=Kt.vertexShader,ee=Kt.fragmentShader}else q=R.vertexShader,ee=R.fragmentShader,l.update(R),_e=l.getVertexShaderID(R),be=l.getFragmentShaderID(R);const K=t.getRenderTarget(),je=$.isInstancedMesh===!0,Xe=!!R.map,Ee=!!R.matcap,Me=!!Z,ve=!!R.aoMap,re=!!R.lightMap,he=!!R.bumpMap,Fe=!!R.normalMap,Be=!!R.displacementMap,ke=!!R.emissiveMap,Ze=!!R.metalnessMap,ze=!!R.roughnessMap,tt=R.clearcoat>0,ht=R.iridescence>0,V=R.sheen>0,N=R.transmission>0,Y=tt&&!!R.clearcoatMap,ce=tt&&!!R.clearcoatNormalMap,Se=tt&&!!R.clearcoatRoughnessMap,Te=ht&&!!R.iridescenceMap,Ke=ht&&!!R.iridescenceThicknessMap,Ue=V&&!!R.sheenColorMap,ge=V&&!!R.sheenRoughnessMap,Je=!!R.specularMap,Q=!!R.specularColorMap,me=!!R.specularIntensityMap,Ae=N&&!!R.transmissionMap,Pe=N&&!!R.thicknessMap,nt=!!R.gradientMap,ut=!!R.alphaMap,$t=R.alphaTest>0,te=!!R.extensions,pe=!!H.attributes.uv1,Ce=!!H.attributes.uv2,We=!!H.attributes.uv3;return{isWebGL2:d,shaderID:O,shaderName:R.type,vertexShader:q,fragmentShader:ee,defines:R.defines,customVertexShaderID:_e,customFragmentShaderID:be,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,instancing:je,instancingColor:je&&$.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:K===null?t.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:Ls,map:Xe,matcap:Ee,envMap:Me,envMapMode:Me&&Z.mapping,envMapCubeUVHeight:U,aoMap:ve,lightMap:re,bumpMap:he,normalMap:Fe,displacementMap:p&&Be,emissiveMap:ke,normalMapObjectSpace:Fe&&R.normalMapType===P3,normalMapTangentSpace:Fe&&R.normalMapType===ll,metalnessMap:Ze,roughnessMap:ze,clearcoat:tt,clearcoatMap:Y,clearcoatNormalMap:ce,clearcoatRoughnessMap:Se,iridescence:ht,iridescenceMap:Te,iridescenceThicknessMap:Ke,sheen:V,sheenColorMap:Ue,sheenRoughnessMap:ge,specularMap:Je,specularColorMap:Q,specularIntensityMap:me,transmission:N,transmissionMap:Ae,thicknessMap:Pe,gradientMap:nt,opaque:R.transparent===!1&&R.blending===ac,alphaMap:ut,alphaTest:$t,combine:R.combine,mapUv:Xe&&y(R.map.channel),aoMapUv:ve&&y(R.aoMap.channel),lightMapUv:re&&y(R.lightMap.channel),bumpMapUv:he&&y(R.bumpMap.channel),normalMapUv:Fe&&y(R.normalMap.channel),displacementMapUv:Be&&y(R.displacementMap.channel),emissiveMapUv:ke&&y(R.emissiveMap.channel),metalnessMapUv:Ze&&y(R.metalnessMap.channel),roughnessMapUv:ze&&y(R.roughnessMap.channel),clearcoatMapUv:Y&&y(R.clearcoatMap.channel),clearcoatNormalMapUv:ce&&y(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Se&&y(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Te&&y(R.iridescenceMap.channel),iridescenceThicknessMapUv:Ke&&y(R.iridescenceThicknessMap.channel),sheenColorMapUv:Ue&&y(R.sheenColorMap.channel),sheenRoughnessMapUv:ge&&y(R.sheenRoughnessMap.channel),specularMapUv:Je&&y(R.specularMap.channel),specularColorMapUv:Q&&y(R.specularColorMap.channel),specularIntensityMapUv:me&&y(R.specularIntensityMap.channel),transmissionMapUv:Ae&&y(R.transmissionMap.channel),thicknessMapUv:Pe&&y(R.thicknessMap.channel),alphaMapUv:ut&&y(R.alphaMap.channel),vertexTangents:Fe&&!!H.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,vertexUv1s:pe,vertexUv2s:Ce,vertexUv3s:We,pointsUvs:$.isPoints===!0&&!!H.attributes.uv&&(Xe||ut),fog:!!j,useFog:R.fog===!0,fogExp2:j&&j.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:$.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:J,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:t.shadowMap.enabled&&k.length>0,shadowMapType:t.shadowMap.type,toneMapping:R.toneMapped?t.toneMapping:Rs,useLegacyLights:t.useLegacyLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===_r,flipSided:R.side===rr,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:te&&R.extensions.derivatives===!0,extensionFragDepth:te&&R.extensions.fragDepth===!0,extensionDrawBuffers:te&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:te&&R.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function g(R){const D=[];if(R.shaderID?D.push(R.shaderID):(D.push(R.customVertexShaderID),D.push(R.customFragmentShaderID)),R.defines!==void 0)for(const k in R.defines)D.push(k),D.push(R.defines[k]);return R.isRawShaderMaterial===!1&&(_(D,R),w(D,R),D.push(t.outputColorSpace)),D.push(R.customProgramCacheKey),D.join()}function _(R,D){R.push(D.precision),R.push(D.outputColorSpace),R.push(D.envMapMode),R.push(D.envMapCubeUVHeight),R.push(D.mapUv),R.push(D.alphaMapUv),R.push(D.lightMapUv),R.push(D.aoMapUv),R.push(D.bumpMapUv),R.push(D.normalMapUv),R.push(D.displacementMapUv),R.push(D.emissiveMapUv),R.push(D.metalnessMapUv),R.push(D.roughnessMapUv),R.push(D.clearcoatMapUv),R.push(D.clearcoatNormalMapUv),R.push(D.clearcoatRoughnessMapUv),R.push(D.iridescenceMapUv),R.push(D.iridescenceThicknessMapUv),R.push(D.sheenColorMapUv),R.push(D.sheenRoughnessMapUv),R.push(D.specularMapUv),R.push(D.specularColorMapUv),R.push(D.specularIntensityMapUv),R.push(D.transmissionMapUv),R.push(D.thicknessMapUv),R.push(D.combine),R.push(D.fogExp2),R.push(D.sizeAttenuation),R.push(D.morphTargetsCount),R.push(D.morphAttributeCount),R.push(D.numDirLights),R.push(D.numPointLights),R.push(D.numSpotLights),R.push(D.numSpotLightMaps),R.push(D.numHemiLights),R.push(D.numRectAreaLights),R.push(D.numDirLightShadows),R.push(D.numPointLightShadows),R.push(D.numSpotLightShadows),R.push(D.numSpotLightShadowsWithMaps),R.push(D.shadowMapType),R.push(D.toneMapping),R.push(D.numClippingPlanes),R.push(D.numClipIntersection),R.push(D.depthPacking)}function w(R,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),R.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),R.push(a.mask)}function b(R){const D=v[R.type];let k;if(D){const X=Jr[D];k=Mp.clone(X.uniforms)}else k=R.uniforms;return k}function C(R,D){let k;for(let X=0,$=c.length;X<$;X++){const j=c[X];if(j.cacheKey===D){k=j,++k.usedTimes;break}}return k===void 0&&(k=new eV(t,D,R,s),c.push(k)),k}function T(R){if(--R.usedTimes===0){const D=c.indexOf(R);c[D]=c[c.length-1],c.pop(),R.destroy()}}function P(R){l.remove(R)}function B(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:b,acquireProgram:C,releaseProgram:T,releaseShaderCache:P,programs:c,dispose:B}}function sV(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function oV(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function k2(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function z2(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(f,p,m,v,y,x){let g=t[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:y,group:x},t[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=y,g.group=x),e++,g}function a(f,p,m,v,y,x){const g=o(f,p,m,v,y,x);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):n.push(g)}function l(f,p,m,v,y,x){const g=o(f,p,m,v,y,x);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):n.unshift(g)}function c(f,p){n.length>1&&n.sort(f||oV),r.length>1&&r.sort(p||k2),i.length>1&&i.sort(p||k2)}function d(){for(let f=e,p=t.length;f<p;f++){const m=t[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:d,sort:c}}function aV(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new z2,t.set(r,[o])):i>=s.length?(o=new z2,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function lV(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new F,color:new Ne};break;case"SpotLight":n={position:new F,direction:new F,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new F,color:new Ne,distance:0,decay:0};break;case"HemisphereLight":n={direction:new F,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":n={color:new Ne,position:new F,halfWidth:new F,halfHeight:new F};break}return t[e.id]=n,n}}}function cV(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let uV=0;function dV(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function fV(t,e){const n=new lV,r=cV(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)i.probe.push(new F);const s=new F,o=new Ve,a=new Ve;function l(d,f){let p=0,m=0,v=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let y=0,x=0,g=0,_=0,w=0,b=0,C=0,T=0,P=0,B=0;d.sort(dV);const R=f===!0?Math.PI:1;for(let k=0,X=d.length;k<X;k++){const $=d[k],j=$.color,H=$.intensity,ie=$.distance,Z=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)p+=j.r*H*R,m+=j.g*H*R,v+=j.b*H*R;else if($.isLightProbe)for(let U=0;U<9;U++)i.probe[U].addScaledVector($.sh.coefficients[U],H);else if($.isDirectionalLight){const U=n.get($);if(U.color.copy($.color).multiplyScalar($.intensity*R),$.castShadow){const O=$.shadow,z=r.get($);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,i.directionalShadow[y]=z,i.directionalShadowMap[y]=Z,i.directionalShadowMatrix[y]=$.shadow.matrix,b++}i.directional[y]=U,y++}else if($.isSpotLight){const U=n.get($);U.position.setFromMatrixPosition($.matrixWorld),U.color.copy(j).multiplyScalar(H*R),U.distance=ie,U.coneCos=Math.cos($.angle),U.penumbraCos=Math.cos($.angle*(1-$.penumbra)),U.decay=$.decay,i.spot[g]=U;const O=$.shadow;if($.map&&(i.spotLightMap[P]=$.map,P++,O.updateMatrices($),$.castShadow&&B++),i.spotLightMatrix[g]=O.matrix,$.castShadow){const z=r.get($);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,i.spotShadow[g]=z,i.spotShadowMap[g]=Z,T++}g++}else if($.isRectAreaLight){const U=n.get($);U.color.copy(j).multiplyScalar(H),U.halfWidth.set($.width*.5,0,0),U.halfHeight.set(0,$.height*.5,0),i.rectArea[_]=U,_++}else if($.isPointLight){const U=n.get($);if(U.color.copy($.color).multiplyScalar($.intensity*R),U.distance=$.distance,U.decay=$.decay,$.castShadow){const O=$.shadow,z=r.get($);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,z.shadowCameraNear=O.camera.near,z.shadowCameraFar=O.camera.far,i.pointShadow[x]=z,i.pointShadowMap[x]=Z,i.pointShadowMatrix[x]=$.shadow.matrix,C++}i.point[x]=U,x++}else if($.isHemisphereLight){const U=n.get($);U.skyColor.copy($.color).multiplyScalar(H*R),U.groundColor.copy($.groundColor).multiplyScalar(H*R),i.hemi[w]=U,w++}}_>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_FLOAT_1,i.rectAreaLTC2=Oe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_HALF_1,i.rectAreaLTC2=Oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const D=i.hash;(D.directionalLength!==y||D.pointLength!==x||D.spotLength!==g||D.rectAreaLength!==_||D.hemiLength!==w||D.numDirectionalShadows!==b||D.numPointShadows!==C||D.numSpotShadows!==T||D.numSpotMaps!==P)&&(i.directional.length=y,i.spot.length=g,i.rectArea.length=_,i.point.length=x,i.hemi.length=w,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=T+P-B,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=B,D.directionalLength=y,D.pointLength=x,D.spotLength=g,D.rectAreaLength=_,D.hemiLength=w,D.numDirectionalShadows=b,D.numPointShadows=C,D.numSpotShadows=T,D.numSpotMaps=P,i.version=uV++)}function c(d,f){let p=0,m=0,v=0,y=0,x=0;const g=f.matrixWorldInverse;for(let _=0,w=d.length;_<w;_++){const b=d[_];if(b.isDirectionalLight){const C=i.directional[p];C.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),p++}else if(b.isSpotLight){const C=i.spot[v];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),v++}else if(b.isRectAreaLight){const C=i.rectArea[y];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(b.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(b.width*.5,0,0),C.halfHeight.set(0,b.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),y++}else if(b.isPointLight){const C=i.point[m];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(g),m++}else if(b.isHemisphereLight){const C=i.hemi[x];C.direction.setFromMatrixPosition(b.matrixWorld),C.direction.transformDirection(g),x++}}}return{setup:l,setupView:c,state:i}}function H2(t,e){const n=new fV(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){n.setup(r,f)}function c(f){n.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function hV(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new H2(t,e),n.set(s,[l])):o>=a.length?(l=new H2(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class NA extends Fn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=al,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class UA extends Fn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const pV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,mV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function gV(t,e,n){let r=new _y;const i=new de,s=new de,o=new Bt,a=new NA({depthPacking:R3}),l=new UA,c={},d=n.maxTextureSize,f={[Bs]:rr,[rr]:Bs,[_r]:_r},p=new Wn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:pV,fragmentShader:mV}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new yt;v.setAttribute("position",new Dt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new qn(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=my;let g=this.type;this.render=function(C,T,P){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||C.length===0)return;const B=t.getRenderTarget(),R=t.getActiveCubeFace(),D=t.getActiveMipmapLevel(),k=t.state;k.setBlending(Er),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);const X=g!==Ss&&this.type===Ss,$=g===Ss&&this.type!==Ss;for(let j=0,H=C.length;j<H;j++){const ie=C[j],Z=ie.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;i.copy(Z.mapSize);const U=Z.getFrameExtents();if(i.multiply(U),s.copy(Z.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/U.x),i.x=s.x*U.x,Z.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/U.y),i.y=s.y*U.y,Z.mapSize.y=s.y)),Z.map===null||X===!0||$===!0){const z=this.type!==Ss?{minFilter:nn,magFilter:nn}:{};Z.map!==null&&Z.map.dispose(),Z.map=new vn(i.x,i.y,z),Z.map.texture.name=ie.name+".shadowMap",Z.camera.updateProjectionMatrix()}t.setRenderTarget(Z.map),t.clear();const O=Z.getViewportCount();for(let z=0;z<O;z++){const ne=Z.getViewport(z);o.set(s.x*ne.x,s.y*ne.y,s.x*ne.z,s.y*ne.w),k.viewport(o),Z.updateMatrices(ie,z),r=Z.getFrustum(),b(T,P,Z.camera,ie,this.type)}Z.isPointLightShadow!==!0&&this.type===Ss&&_(Z,P),Z.needsUpdate=!1}g=this.type,x.needsUpdate=!1,t.setRenderTarget(B,R,D)};function _(C,T){const P=e.update(y);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new vn(i.x,i.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(T,null,P,p,y,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(T,null,P,m,y,null)}function w(C,T,P,B){let R=null;const D=P.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(D!==void 0)R=D;else if(R=P.isPointLight===!0?l:a,t.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const k=R.uuid,X=T.uuid;let $=c[k];$===void 0&&($={},c[k]=$);let j=$[X];j===void 0&&(j=R.clone(),$[X]=j),R=j}if(R.visible=T.visible,R.wireframe=T.wireframe,B===Ss?R.side=T.shadowSide!==null?T.shadowSide:T.side:R.side=T.shadowSide!==null?T.shadowSide:f[T.side],R.alphaMap=T.alphaMap,R.alphaTest=T.alphaTest,R.map=T.map,R.clipShadows=T.clipShadows,R.clippingPlanes=T.clippingPlanes,R.clipIntersection=T.clipIntersection,R.displacementMap=T.displacementMap,R.displacementScale=T.displacementScale,R.displacementBias=T.displacementBias,R.wireframeLinewidth=T.wireframeLinewidth,R.linewidth=T.linewidth,P.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const k=t.properties.get(R);k.light=P}return R}function b(C,T,P,B,R){if(C.visible===!1)return;if(C.layers.test(T.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&R===Ss)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,C.matrixWorld);const X=e.update(C),$=C.material;if(Array.isArray($)){const j=X.groups;for(let H=0,ie=j.length;H<ie;H++){const Z=j[H],U=$[Z.materialIndex];if(U&&U.visible){const O=w(C,U,B,R);t.renderBufferDirect(P,null,X,O,C,Z)}}}else if($.visible){const j=w(C,$,B,R);t.renderBufferDirect(P,null,X,j,C,null)}}const k=C.children;for(let X=0,$=k.length;X<$;X++)b(k[X],T,P,B,R)}}function vV(t,e,n){const r=n.isWebGL2;function i(){let te=!1;const pe=new Bt;let Ce=null;const We=new Bt(0,0,0,0);return{setMask:function(rt){Ce!==rt&&!te&&(t.colorMask(rt,rt,rt,rt),Ce=rt)},setLocked:function(rt){te=rt},setClear:function(rt,Kt,Yt,or,as){as===!0&&(rt*=or,Kt*=or,Yt*=or),pe.set(rt,Kt,Yt,or),We.equals(pe)===!1&&(t.clearColor(rt,Kt,Yt,or),We.copy(pe))},reset:function(){te=!1,Ce=null,We.set(-1,0,0,0)}}}function s(){let te=!1,pe=null,Ce=null,We=null;return{setTest:function(rt){rt?K(t.DEPTH_TEST):je(t.DEPTH_TEST)},setMask:function(rt){pe!==rt&&!te&&(t.depthMask(rt),pe=rt)},setFunc:function(rt){if(Ce!==rt){switch(rt){case QL:t.depthFunc(t.NEVER);break;case qL:t.depthFunc(t.ALWAYS);break;case ZL:t.depthFunc(t.LESS);break;case R0:t.depthFunc(t.LEQUAL);break;case e3:t.depthFunc(t.EQUAL);break;case t3:t.depthFunc(t.GEQUAL);break;case n3:t.depthFunc(t.GREATER);break;case r3:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ce=rt}},setLocked:function(rt){te=rt},setClear:function(rt){We!==rt&&(t.clearDepth(rt),We=rt)},reset:function(){te=!1,pe=null,Ce=null,We=null}}}function o(){let te=!1,pe=null,Ce=null,We=null,rt=null,Kt=null,Yt=null,or=null,as=null;return{setTest:function(yn){te||(yn?K(t.STENCIL_TEST):je(t.STENCIL_TEST))},setMask:function(yn){pe!==yn&&!te&&(t.stencilMask(yn),pe=yn)},setFunc:function(yn,Gr,Ui){(Ce!==yn||We!==Gr||rt!==Ui)&&(t.stencilFunc(yn,Gr,Ui),Ce=yn,We=Gr,rt=Ui)},setOp:function(yn,Gr,Ui){(Kt!==yn||Yt!==Gr||or!==Ui)&&(t.stencilOp(yn,Gr,Ui),Kt=yn,Yt=Gr,or=Ui)},setLocked:function(yn){te=yn},setClear:function(yn){as!==yn&&(t.clearStencil(yn),as=yn)},reset:function(){te=!1,pe=null,Ce=null,We=null,rt=null,Kt=null,Yt=null,or=null,as=null}}}const a=new i,l=new s,c=new o,d=new WeakMap,f=new WeakMap;let p={},m={},v=new WeakMap,y=[],x=null,g=!1,_=null,w=null,b=null,C=null,T=null,P=null,B=null,R=!1,D=null,k=null,X=null,$=null,j=null;const H=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ie=!1,Z=0;const U=t.getParameter(t.VERSION);U.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(U)[1]),ie=Z>=1):U.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),ie=Z>=2);let O=null,z={};const ne=t.getParameter(t.SCISSOR_BOX),J=t.getParameter(t.VIEWPORT),q=new Bt().fromArray(ne),ee=new Bt().fromArray(J);function _e(te,pe,Ce,We){const rt=new Uint8Array(4),Kt=t.createTexture();t.bindTexture(te,Kt),t.texParameteri(te,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(te,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Yt=0;Yt<Ce;Yt++)r&&(te===t.TEXTURE_3D||te===t.TEXTURE_2D_ARRAY)?t.texImage3D(pe,0,t.RGBA,1,1,We,0,t.RGBA,t.UNSIGNED_BYTE,rt):t.texImage2D(pe+Yt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,rt);return Kt}const be={};be[t.TEXTURE_2D]=_e(t.TEXTURE_2D,t.TEXTURE_2D,1),be[t.TEXTURE_CUBE_MAP]=_e(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(be[t.TEXTURE_2D_ARRAY]=_e(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),be[t.TEXTURE_3D]=_e(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),K(t.DEPTH_TEST),l.setFunc(R0),Be(!1),ke(QS),K(t.CULL_FACE),he(Er);function K(te){p[te]!==!0&&(t.enable(te),p[te]=!0)}function je(te){p[te]!==!1&&(t.disable(te),p[te]=!1)}function Xe(te,pe){return m[te]!==pe?(t.bindFramebuffer(te,pe),m[te]=pe,r&&(te===t.DRAW_FRAMEBUFFER&&(m[t.FRAMEBUFFER]=pe),te===t.FRAMEBUFFER&&(m[t.DRAW_FRAMEBUFFER]=pe)),!0):!1}function Ee(te,pe){let Ce=y,We=!1;if(te)if(Ce=v.get(pe),Ce===void 0&&(Ce=[],v.set(pe,Ce)),te.isWebGLMultipleRenderTargets){const rt=te.texture;if(Ce.length!==rt.length||Ce[0]!==t.COLOR_ATTACHMENT0){for(let Kt=0,Yt=rt.length;Kt<Yt;Kt++)Ce[Kt]=t.COLOR_ATTACHMENT0+Kt;Ce.length=rt.length,We=!0}}else Ce[0]!==t.COLOR_ATTACHMENT0&&(Ce[0]=t.COLOR_ATTACHMENT0,We=!0);else Ce[0]!==t.BACK&&(Ce[0]=t.BACK,We=!0);We&&(n.isWebGL2?t.drawBuffers(Ce):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ce))}function Me(te){return x!==te?(t.useProgram(te),x=te,!0):!1}const ve={[jl]:t.FUNC_ADD,[zL]:t.FUNC_SUBTRACT,[HL]:t.FUNC_REVERSE_SUBTRACT};if(r)ve[tw]=t.MIN,ve[nw]=t.MAX;else{const te=e.get("EXT_blend_minmax");te!==null&&(ve[tw]=te.MIN_EXT,ve[nw]=te.MAX_EXT)}const re={[GL]:t.ZERO,[$L]:t.ONE,[VL]:t.SRC_COLOR,[AA]:t.SRC_ALPHA,[YL]:t.SRC_ALPHA_SATURATE,[JL]:t.DST_COLOR,[jL]:t.DST_ALPHA,[WL]:t.ONE_MINUS_SRC_COLOR,[bA]:t.ONE_MINUS_SRC_ALPHA,[KL]:t.ONE_MINUS_DST_COLOR,[XL]:t.ONE_MINUS_DST_ALPHA};function he(te,pe,Ce,We,rt,Kt,Yt,or){if(te===Er){g===!0&&(je(t.BLEND),g=!1);return}if(g===!1&&(K(t.BLEND),g=!0),te!==kL){if(te!==_||or!==R){if((w!==jl||T!==jl)&&(t.blendEquation(t.FUNC_ADD),w=jl,T=jl),or)switch(te){case ac:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case qS:t.blendFunc(t.ONE,t.ONE);break;case ZS:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ew:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}else switch(te){case ac:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case qS:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case ZS:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ew:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}b=null,C=null,P=null,B=null,_=te,R=or}return}rt=rt||pe,Kt=Kt||Ce,Yt=Yt||We,(pe!==w||rt!==T)&&(t.blendEquationSeparate(ve[pe],ve[rt]),w=pe,T=rt),(Ce!==b||We!==C||Kt!==P||Yt!==B)&&(t.blendFuncSeparate(re[Ce],re[We],re[Kt],re[Yt]),b=Ce,C=We,P=Kt,B=Yt),_=te,R=!1}function Fe(te,pe){te.side===_r?je(t.CULL_FACE):K(t.CULL_FACE);let Ce=te.side===rr;pe&&(Ce=!Ce),Be(Ce),te.blending===ac&&te.transparent===!1?he(Er):he(te.blending,te.blendEquation,te.blendSrc,te.blendDst,te.blendEquationAlpha,te.blendSrcAlpha,te.blendDstAlpha,te.premultipliedAlpha),l.setFunc(te.depthFunc),l.setTest(te.depthTest),l.setMask(te.depthWrite),a.setMask(te.colorWrite);const We=te.stencilWrite;c.setTest(We),We&&(c.setMask(te.stencilWriteMask),c.setFunc(te.stencilFunc,te.stencilRef,te.stencilFuncMask),c.setOp(te.stencilFail,te.stencilZFail,te.stencilZPass)),ze(te.polygonOffset,te.polygonOffsetFactor,te.polygonOffsetUnits),te.alphaToCoverage===!0?K(t.SAMPLE_ALPHA_TO_COVERAGE):je(t.SAMPLE_ALPHA_TO_COVERAGE)}function Be(te){D!==te&&(te?t.frontFace(t.CW):t.frontFace(t.CCW),D=te)}function ke(te){te!==OL?(K(t.CULL_FACE),te!==k&&(te===QS?t.cullFace(t.BACK):te===NL?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):je(t.CULL_FACE),k=te}function Ze(te){te!==X&&(ie&&t.lineWidth(te),X=te)}function ze(te,pe,Ce){te?(K(t.POLYGON_OFFSET_FILL),($!==pe||j!==Ce)&&(t.polygonOffset(pe,Ce),$=pe,j=Ce)):je(t.POLYGON_OFFSET_FILL)}function tt(te){te?K(t.SCISSOR_TEST):je(t.SCISSOR_TEST)}function ht(te){te===void 0&&(te=t.TEXTURE0+H-1),O!==te&&(t.activeTexture(te),O=te)}function V(te,pe,Ce){Ce===void 0&&(O===null?Ce=t.TEXTURE0+H-1:Ce=O);let We=z[Ce];We===void 0&&(We={type:void 0,texture:void 0},z[Ce]=We),(We.type!==te||We.texture!==pe)&&(O!==Ce&&(t.activeTexture(Ce),O=Ce),t.bindTexture(te,pe||be[te]),We.type=te,We.texture=pe)}function N(){const te=z[O];te!==void 0&&te.type!==void 0&&(t.bindTexture(te.type,null),te.type=void 0,te.texture=void 0)}function Y(){try{t.compressedTexImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function ce(){try{t.compressedTexImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Se(){try{t.texSubImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Te(){try{t.texSubImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ke(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ue(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function ge(){try{t.texStorage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Je(){try{t.texStorage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Q(){try{t.texImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function me(){try{t.texImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ae(te){q.equals(te)===!1&&(t.scissor(te.x,te.y,te.z,te.w),q.copy(te))}function Pe(te){ee.equals(te)===!1&&(t.viewport(te.x,te.y,te.z,te.w),ee.copy(te))}function nt(te,pe){let Ce=f.get(pe);Ce===void 0&&(Ce=new WeakMap,f.set(pe,Ce));let We=Ce.get(te);We===void 0&&(We=t.getUniformBlockIndex(pe,te.name),Ce.set(te,We))}function ut(te,pe){const We=f.get(pe).get(te);d.get(pe)!==We&&(t.uniformBlockBinding(pe,We,te.__bindingPointIndex),d.set(pe,We))}function $t(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},O=null,z={},m={},v=new WeakMap,y=[],x=null,g=!1,_=null,w=null,b=null,C=null,T=null,P=null,B=null,R=!1,D=null,k=null,X=null,$=null,j=null,q.set(0,0,t.canvas.width,t.canvas.height),ee.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:K,disable:je,bindFramebuffer:Xe,drawBuffers:Ee,useProgram:Me,setBlending:he,setMaterial:Fe,setFlipSided:Be,setCullFace:ke,setLineWidth:Ze,setPolygonOffset:ze,setScissorTest:tt,activeTexture:ht,bindTexture:V,unbindTexture:N,compressedTexImage2D:Y,compressedTexImage3D:ce,texImage2D:Q,texImage3D:me,updateUBOMapping:nt,uniformBlockBinding:ut,texStorage2D:ge,texStorage3D:Je,texSubImage2D:Se,texSubImage3D:Te,compressedTexSubImage2D:Ke,compressedTexSubImage3D:Ue,scissor:Ae,viewport:Pe,reset:$t}}function yV(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,d=i.maxTextureSize,f=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const x=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(V,N){return g?new OffscreenCanvas(V,N):Yh("canvas")}function w(V,N,Y,ce){let Se=1;if((V.width>ce||V.height>ce)&&(Se=ce/Math.max(V.width,V.height)),Se<1||N===!0)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap){const Te=N?D3:Math.floor,Ke=Te(Se*V.width),Ue=Te(Se*V.height);y===void 0&&(y=_(Ke,Ue));const ge=Y?_(Ke,Ue):y;return ge.width=Ke,ge.height=Ue,ge.getContext("2d").drawImage(V,0,0,Ke,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+V.width+"x"+V.height+") to ("+Ke+"x"+Ue+")."),ge}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+V.width+"x"+V.height+")."),V;return V}function b(V){return Cw(V.width)&&Cw(V.height)}function C(V){return a?!1:V.wrapS!==Sr||V.wrapT!==Sr||V.minFilter!==nn&&V.minFilter!==Zt}function T(V,N){return V.generateMipmaps&&N&&V.minFilter!==nn&&V.minFilter!==Zt}function P(V){t.generateMipmap(V)}function B(V,N,Y,ce,Se=!1){if(a===!1)return N;if(V!==null){if(t[V]!==void 0)return t[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Te=N;return N===t.RED&&(Y===t.FLOAT&&(Te=t.R32F),Y===t.HALF_FLOAT&&(Te=t.R16F),Y===t.UNSIGNED_BYTE&&(Te=t.R8)),N===t.RG&&(Y===t.FLOAT&&(Te=t.RG32F),Y===t.HALF_FLOAT&&(Te=t.RG16F),Y===t.UNSIGNED_BYTE&&(Te=t.RG8)),N===t.RGBA&&(Y===t.FLOAT&&(Te=t.RGBA32F),Y===t.HALF_FLOAT&&(Te=t.RGBA16F),Y===t.UNSIGNED_BYTE&&(Te=ce===St&&Se===!1?t.SRGB8_ALPHA8:t.RGBA8),Y===t.UNSIGNED_SHORT_4_4_4_4&&(Te=t.RGBA4),Y===t.UNSIGNED_SHORT_5_5_5_1&&(Te=t.RGB5_A1)),(Te===t.R16F||Te===t.R32F||Te===t.RG16F||Te===t.RG32F||Te===t.RGBA16F||Te===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function R(V,N,Y){return T(V,Y)===!0||V.isFramebufferTexture&&V.minFilter!==nn&&V.minFilter!==Zt?Math.log2(Math.max(N.width,N.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?N.mipmaps.length:1}function D(V){return V===nn||V===Xh||V===ad?t.NEAREST:t.LINEAR}function k(V){const N=V.target;N.removeEventListener("dispose",k),$(N),N.isVideoTexture&&v.delete(N)}function X(V){const N=V.target;N.removeEventListener("dispose",X),H(N)}function $(V){const N=r.get(V);if(N.__webglInit===void 0)return;const Y=V.source,ce=x.get(Y);if(ce){const Se=ce[N.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&j(V),Object.keys(ce).length===0&&x.delete(Y)}r.remove(V)}function j(V){const N=r.get(V);t.deleteTexture(N.__webglTexture);const Y=V.source,ce=x.get(Y);delete ce[N.__cacheKey],o.memory.textures--}function H(V){const N=V.texture,Y=r.get(V),ce=r.get(N);if(ce.__webglTexture!==void 0&&(t.deleteTexture(ce.__webglTexture),o.memory.textures--),V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++)t.deleteFramebuffer(Y.__webglFramebuffer[Se]),Y.__webglDepthbuffer&&t.deleteRenderbuffer(Y.__webglDepthbuffer[Se]);else{if(t.deleteFramebuffer(Y.__webglFramebuffer),Y.__webglDepthbuffer&&t.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let Se=0;Se<Y.__webglColorRenderbuffer.length;Se++)Y.__webglColorRenderbuffer[Se]&&t.deleteRenderbuffer(Y.__webglColorRenderbuffer[Se]);Y.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}if(V.isWebGLMultipleRenderTargets)for(let Se=0,Te=N.length;Se<Te;Se++){const Ke=r.get(N[Se]);Ke.__webglTexture&&(t.deleteTexture(Ke.__webglTexture),o.memory.textures--),r.remove(N[Se])}r.remove(N),r.remove(V)}let ie=0;function Z(){ie=0}function U(){const V=ie;return V>=l&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+l),ie+=1,V}function O(V){const N=[];return N.push(V.wrapS),N.push(V.wrapT),N.push(V.wrapR||0),N.push(V.magFilter),N.push(V.minFilter),N.push(V.anisotropy),N.push(V.internalFormat),N.push(V.format),N.push(V.type),N.push(V.generateMipmaps),N.push(V.premultiplyAlpha),N.push(V.flipY),N.push(V.unpackAlignment),N.push(V.colorSpace),N.join()}function z(V,N){const Y=r.get(V);if(V.isVideoTexture&&tt(V),V.isRenderTargetTexture===!1&&V.version>0&&Y.__version!==V.version){const ce=V.image;if(ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{je(Y,V,N);return}}n.bindTexture(t.TEXTURE_2D,Y.__webglTexture,t.TEXTURE0+N)}function ne(V,N){const Y=r.get(V);if(V.version>0&&Y.__version!==V.version){je(Y,V,N);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Y.__webglTexture,t.TEXTURE0+N)}function J(V,N){const Y=r.get(V);if(V.version>0&&Y.__version!==V.version){je(Y,V,N);return}n.bindTexture(t.TEXTURE_3D,Y.__webglTexture,t.TEXTURE0+N)}function q(V,N){const Y=r.get(V);if(V.version>0&&Y.__version!==V.version){Xe(Y,V,N);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Y.__webglTexture,t.TEXTURE0+N)}const ee={[Ka]:t.REPEAT,[Sr]:t.CLAMP_TO_EDGE,[wd]:t.MIRRORED_REPEAT},_e={[nn]:t.NEAREST,[Xh]:t.NEAREST_MIPMAP_NEAREST,[ad]:t.NEAREST_MIPMAP_LINEAR,[Zt]:t.LINEAR,[vy]:t.LINEAR_MIPMAP_NEAREST,[Ds]:t.LINEAR_MIPMAP_LINEAR};function be(V,N,Y){if(Y?(t.texParameteri(V,t.TEXTURE_WRAP_S,ee[N.wrapS]),t.texParameteri(V,t.TEXTURE_WRAP_T,ee[N.wrapT]),(V===t.TEXTURE_3D||V===t.TEXTURE_2D_ARRAY)&&t.texParameteri(V,t.TEXTURE_WRAP_R,ee[N.wrapR]),t.texParameteri(V,t.TEXTURE_MAG_FILTER,_e[N.magFilter]),t.texParameteri(V,t.TEXTURE_MIN_FILTER,_e[N.minFilter])):(t.texParameteri(V,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(V,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(V===t.TEXTURE_3D||V===t.TEXTURE_2D_ARRAY)&&t.texParameteri(V,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(N.wrapS!==Sr||N.wrapT!==Sr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(V,t.TEXTURE_MAG_FILTER,D(N.magFilter)),t.texParameteri(V,t.TEXTURE_MIN_FILTER,D(N.minFilter)),N.minFilter!==nn&&N.minFilter!==Zt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ce=e.get("EXT_texture_filter_anisotropic");if(N.magFilter===nn||N.minFilter!==ad&&N.minFilter!==Ds||N.type===bs&&e.has("OES_texture_float_linear")===!1||a===!1&&N.type===Ya&&e.has("OES_texture_half_float_linear")===!1)return;(N.anisotropy>1||r.get(N).__currentAnisotropy)&&(t.texParameterf(V,ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,i.getMaxAnisotropy())),r.get(N).__currentAnisotropy=N.anisotropy)}}function K(V,N){let Y=!1;V.__webglInit===void 0&&(V.__webglInit=!0,N.addEventListener("dispose",k));const ce=N.source;let Se=x.get(ce);Se===void 0&&(Se={},x.set(ce,Se));const Te=O(N);if(Te!==V.__cacheKey){Se[Te]===void 0&&(Se[Te]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,Y=!0),Se[Te].usedTimes++;const Ke=Se[V.__cacheKey];Ke!==void 0&&(Se[V.__cacheKey].usedTimes--,Ke.usedTimes===0&&j(N)),V.__cacheKey=Te,V.__webglTexture=Se[Te].texture}return Y}function je(V,N,Y){let ce=t.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(ce=t.TEXTURE_2D_ARRAY),N.isData3DTexture&&(ce=t.TEXTURE_3D);const Se=K(V,N),Te=N.source;n.bindTexture(ce,V.__webglTexture,t.TEXTURE0+Y);const Ke=r.get(Te);if(Te.version!==Ke.__version||Se===!0){n.activeTexture(t.TEXTURE0+Y),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,N.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,N.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Ue=C(N)&&b(N.image)===!1;let ge=w(N.image,Ue,!1,d);ge=ht(N,ge);const Je=b(ge)||a,Q=s.convert(N.format,N.colorSpace);let me=s.convert(N.type),Ae=B(N.internalFormat,Q,me,N.colorSpace);be(ce,N,Je);let Pe;const nt=N.mipmaps,ut=a&&N.isVideoTexture!==!0,$t=Ke.__version===void 0||Se===!0,te=R(N,ge,Je);if(N.isDepthTexture)Ae=t.DEPTH_COMPONENT,a?N.type===bs?Ae=t.DEPTH_COMPONENT32F:N.type===Do?Ae=t.DEPTH_COMPONENT24:N.type===ka?Ae=t.DEPTH24_STENCIL8:Ae=t.DEPTH_COMPONENT16:N.type===bs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),N.format===za&&Ae===t.DEPTH_COMPONENT&&N.type!==CA&&N.type!==Do&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),N.type=Do,me=s.convert(N.type)),N.format===Qa&&Ae===t.DEPTH_COMPONENT&&(Ae=t.DEPTH_STENCIL,N.type!==ka&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),N.type=ka,me=s.convert(N.type))),$t&&(ut?n.texStorage2D(t.TEXTURE_2D,1,Ae,ge.width,ge.height):n.texImage2D(t.TEXTURE_2D,0,Ae,ge.width,ge.height,0,Q,me,null));else if(N.isDataTexture)if(nt.length>0&&Je){ut&&$t&&n.texStorage2D(t.TEXTURE_2D,te,Ae,nt[0].width,nt[0].height);for(let pe=0,Ce=nt.length;pe<Ce;pe++)Pe=nt[pe],ut?n.texSubImage2D(t.TEXTURE_2D,pe,0,0,Pe.width,Pe.height,Q,me,Pe.data):n.texImage2D(t.TEXTURE_2D,pe,Ae,Pe.width,Pe.height,0,Q,me,Pe.data);N.generateMipmaps=!1}else ut?($t&&n.texStorage2D(t.TEXTURE_2D,te,Ae,ge.width,ge.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,ge.width,ge.height,Q,me,ge.data)):n.texImage2D(t.TEXTURE_2D,0,Ae,ge.width,ge.height,0,Q,me,ge.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){ut&&$t&&n.texStorage3D(t.TEXTURE_2D_ARRAY,te,Ae,nt[0].width,nt[0].height,ge.depth);for(let pe=0,Ce=nt.length;pe<Ce;pe++)Pe=nt[pe],N.format!==ai?Q!==null?ut?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,pe,0,0,0,Pe.width,Pe.height,ge.depth,Q,Pe.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,pe,Ae,Pe.width,Pe.height,ge.depth,0,Pe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ut?n.texSubImage3D(t.TEXTURE_2D_ARRAY,pe,0,0,0,Pe.width,Pe.height,ge.depth,Q,me,Pe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,pe,Ae,Pe.width,Pe.height,ge.depth,0,Q,me,Pe.data)}else{ut&&$t&&n.texStorage2D(t.TEXTURE_2D,te,Ae,nt[0].width,nt[0].height);for(let pe=0,Ce=nt.length;pe<Ce;pe++)Pe=nt[pe],N.format!==ai?Q!==null?ut?n.compressedTexSubImage2D(t.TEXTURE_2D,pe,0,0,Pe.width,Pe.height,Q,Pe.data):n.compressedTexImage2D(t.TEXTURE_2D,pe,Ae,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ut?n.texSubImage2D(t.TEXTURE_2D,pe,0,0,Pe.width,Pe.height,Q,me,Pe.data):n.texImage2D(t.TEXTURE_2D,pe,Ae,Pe.width,Pe.height,0,Q,me,Pe.data)}else if(N.isDataArrayTexture)ut?($t&&n.texStorage3D(t.TEXTURE_2D_ARRAY,te,Ae,ge.width,ge.height,ge.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,ge.width,ge.height,ge.depth,Q,me,ge.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ae,ge.width,ge.height,ge.depth,0,Q,me,ge.data);else if(N.isData3DTexture)ut?($t&&n.texStorage3D(t.TEXTURE_3D,te,Ae,ge.width,ge.height,ge.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,ge.width,ge.height,ge.depth,Q,me,ge.data)):n.texImage3D(t.TEXTURE_3D,0,Ae,ge.width,ge.height,ge.depth,0,Q,me,ge.data);else if(N.isFramebufferTexture){if($t)if(ut)n.texStorage2D(t.TEXTURE_2D,te,Ae,ge.width,ge.height);else{let pe=ge.width,Ce=ge.height;for(let We=0;We<te;We++)n.texImage2D(t.TEXTURE_2D,We,Ae,pe,Ce,0,Q,me,null),pe>>=1,Ce>>=1}}else if(nt.length>0&&Je){ut&&$t&&n.texStorage2D(t.TEXTURE_2D,te,Ae,nt[0].width,nt[0].height);for(let pe=0,Ce=nt.length;pe<Ce;pe++)Pe=nt[pe],ut?n.texSubImage2D(t.TEXTURE_2D,pe,0,0,Q,me,Pe):n.texImage2D(t.TEXTURE_2D,pe,Ae,Q,me,Pe);N.generateMipmaps=!1}else ut?($t&&n.texStorage2D(t.TEXTURE_2D,te,Ae,ge.width,ge.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Q,me,ge)):n.texImage2D(t.TEXTURE_2D,0,Ae,Q,me,ge);T(N,Je)&&P(ce),Ke.__version=Te.version,N.onUpdate&&N.onUpdate(N)}V.__version=N.version}function Xe(V,N,Y){if(N.image.length!==6)return;const ce=K(V,N),Se=N.source;n.bindTexture(t.TEXTURE_CUBE_MAP,V.__webglTexture,t.TEXTURE0+Y);const Te=r.get(Se);if(Se.version!==Te.__version||ce===!0){n.activeTexture(t.TEXTURE0+Y),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,N.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,N.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Ke=N.isCompressedTexture||N.image[0].isCompressedTexture,Ue=N.image[0]&&N.image[0].isDataTexture,ge=[];for(let pe=0;pe<6;pe++)!Ke&&!Ue?ge[pe]=w(N.image[pe],!1,!0,c):ge[pe]=Ue?N.image[pe].image:N.image[pe],ge[pe]=ht(N,ge[pe]);const Je=ge[0],Q=b(Je)||a,me=s.convert(N.format,N.colorSpace),Ae=s.convert(N.type),Pe=B(N.internalFormat,me,Ae,N.colorSpace),nt=a&&N.isVideoTexture!==!0,ut=Te.__version===void 0||ce===!0;let $t=R(N,Je,Q);be(t.TEXTURE_CUBE_MAP,N,Q);let te;if(Ke){nt&&ut&&n.texStorage2D(t.TEXTURE_CUBE_MAP,$t,Pe,Je.width,Je.height);for(let pe=0;pe<6;pe++){te=ge[pe].mipmaps;for(let Ce=0;Ce<te.length;Ce++){const We=te[Ce];N.format!==ai?me!==null?nt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce,0,0,We.width,We.height,me,We.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce,Pe,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce,0,0,We.width,We.height,me,Ae,We.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce,Pe,We.width,We.height,0,me,Ae,We.data)}}}else{te=N.mipmaps,nt&&ut&&(te.length>0&&$t++,n.texStorage2D(t.TEXTURE_CUBE_MAP,$t,Pe,ge[0].width,ge[0].height));for(let pe=0;pe<6;pe++)if(Ue){nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,ge[pe].width,ge[pe].height,me,Ae,ge[pe].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Pe,ge[pe].width,ge[pe].height,0,me,Ae,ge[pe].data);for(let Ce=0;Ce<te.length;Ce++){const rt=te[Ce].image[pe].image;nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce+1,0,0,rt.width,rt.height,me,Ae,rt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce+1,Pe,rt.width,rt.height,0,me,Ae,rt.data)}}else{nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,me,Ae,ge[pe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Pe,me,Ae,ge[pe]);for(let Ce=0;Ce<te.length;Ce++){const We=te[Ce];nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce+1,0,0,me,Ae,We.image[pe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce+1,Pe,me,Ae,We.image[pe])}}}T(N,Q)&&P(t.TEXTURE_CUBE_MAP),Te.__version=Se.version,N.onUpdate&&N.onUpdate(N)}V.__version=N.version}function Ee(V,N,Y,ce,Se){const Te=s.convert(Y.format,Y.colorSpace),Ke=s.convert(Y.type),Ue=B(Y.internalFormat,Te,Ke,Y.colorSpace);r.get(N).__hasExternalTextures||(Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY?n.texImage3D(Se,0,Ue,N.width,N.height,N.depth,0,Te,Ke,null):n.texImage2D(Se,0,Ue,N.width,N.height,0,Te,Ke,null)),n.bindFramebuffer(t.FRAMEBUFFER,V),ze(N)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ce,Se,r.get(Y).__webglTexture,0,Ze(N)):(Se===t.TEXTURE_2D||Se>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ce,Se,r.get(Y).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Me(V,N,Y){if(t.bindRenderbuffer(t.RENDERBUFFER,V),N.depthBuffer&&!N.stencilBuffer){let ce=t.DEPTH_COMPONENT16;if(Y||ze(N)){const Se=N.depthTexture;Se&&Se.isDepthTexture&&(Se.type===bs?ce=t.DEPTH_COMPONENT32F:Se.type===Do&&(ce=t.DEPTH_COMPONENT24));const Te=Ze(N);ze(N)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Te,ce,N.width,N.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Te,ce,N.width,N.height)}else t.renderbufferStorage(t.RENDERBUFFER,ce,N.width,N.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,V)}else if(N.depthBuffer&&N.stencilBuffer){const ce=Ze(N);Y&&ze(N)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ce,t.DEPTH24_STENCIL8,N.width,N.height):ze(N)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ce,t.DEPTH24_STENCIL8,N.width,N.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,N.width,N.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,V)}else{const ce=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let Se=0;Se<ce.length;Se++){const Te=ce[Se],Ke=s.convert(Te.format,Te.colorSpace),Ue=s.convert(Te.type),ge=B(Te.internalFormat,Ke,Ue,Te.colorSpace),Je=Ze(N);Y&&ze(N)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Je,ge,N.width,N.height):ze(N)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Je,ge,N.width,N.height):t.renderbufferStorage(t.RENDERBUFFER,ge,N.width,N.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ve(V,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,V),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),z(N.depthTexture,0);const ce=r.get(N.depthTexture).__webglTexture,Se=Ze(N);if(N.depthTexture.format===za)ze(N)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ce,0,Se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ce,0);else if(N.depthTexture.format===Qa)ze(N)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ce,0,Se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ce,0);else throw new Error("Unknown depthTexture format")}function re(V){const N=r.get(V),Y=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!N.__autoAllocateDepthBuffer){if(Y)throw new Error("target.depthTexture not supported in Cube render targets");ve(N.__webglFramebuffer,V)}else if(Y){N.__webglDepthbuffer=[];for(let ce=0;ce<6;ce++)n.bindFramebuffer(t.FRAMEBUFFER,N.__webglFramebuffer[ce]),N.__webglDepthbuffer[ce]=t.createRenderbuffer(),Me(N.__webglDepthbuffer[ce],V,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer=t.createRenderbuffer(),Me(N.__webglDepthbuffer,V,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function he(V,N,Y){const ce=r.get(V);N!==void 0&&Ee(ce.__webglFramebuffer,V,V.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),Y!==void 0&&re(V)}function Fe(V){const N=V.texture,Y=r.get(V),ce=r.get(N);V.addEventListener("dispose",X),V.isWebGLMultipleRenderTargets!==!0&&(ce.__webglTexture===void 0&&(ce.__webglTexture=t.createTexture()),ce.__version=N.version,o.memory.textures++);const Se=V.isWebGLCubeRenderTarget===!0,Te=V.isWebGLMultipleRenderTargets===!0,Ke=b(V)||a;if(Se){Y.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)Y.__webglFramebuffer[Ue]=t.createFramebuffer()}else{if(Y.__webglFramebuffer=t.createFramebuffer(),Te)if(i.drawBuffers){const Ue=V.texture;for(let ge=0,Je=Ue.length;ge<Je;ge++){const Q=r.get(Ue[ge]);Q.__webglTexture===void 0&&(Q.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&V.samples>0&&ze(V)===!1){const Ue=Te?N:[N];Y.__webglMultisampledFramebuffer=t.createFramebuffer(),Y.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Y.__webglMultisampledFramebuffer);for(let ge=0;ge<Ue.length;ge++){const Je=Ue[ge];Y.__webglColorRenderbuffer[ge]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Y.__webglColorRenderbuffer[ge]);const Q=s.convert(Je.format,Je.colorSpace),me=s.convert(Je.type),Ae=B(Je.internalFormat,Q,me,Je.colorSpace,V.isXRRenderTarget===!0),Pe=Ze(V);t.renderbufferStorageMultisample(t.RENDERBUFFER,Pe,Ae,V.width,V.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ge,t.RENDERBUFFER,Y.__webglColorRenderbuffer[ge])}t.bindRenderbuffer(t.RENDERBUFFER,null),V.depthBuffer&&(Y.__webglDepthRenderbuffer=t.createRenderbuffer(),Me(Y.__webglDepthRenderbuffer,V,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Se){n.bindTexture(t.TEXTURE_CUBE_MAP,ce.__webglTexture),be(t.TEXTURE_CUBE_MAP,N,Ke);for(let Ue=0;Ue<6;Ue++)Ee(Y.__webglFramebuffer[Ue],V,N,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ue);T(N,Ke)&&P(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Te){const Ue=V.texture;for(let ge=0,Je=Ue.length;ge<Je;ge++){const Q=Ue[ge],me=r.get(Q);n.bindTexture(t.TEXTURE_2D,me.__webglTexture),be(t.TEXTURE_2D,Q,Ke),Ee(Y.__webglFramebuffer,V,Q,t.COLOR_ATTACHMENT0+ge,t.TEXTURE_2D),T(Q,Ke)&&P(t.TEXTURE_2D)}n.unbindTexture()}else{let Ue=t.TEXTURE_2D;(V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(a?Ue=V.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ue,ce.__webglTexture),be(Ue,N,Ke),Ee(Y.__webglFramebuffer,V,N,t.COLOR_ATTACHMENT0,Ue),T(N,Ke)&&P(Ue),n.unbindTexture()}V.depthBuffer&&re(V)}function Be(V){const N=b(V)||a,Y=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let ce=0,Se=Y.length;ce<Se;ce++){const Te=Y[ce];if(T(Te,N)){const Ke=V.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ue=r.get(Te).__webglTexture;n.bindTexture(Ke,Ue),P(Ke),n.unbindTexture()}}}function ke(V){if(a&&V.samples>0&&ze(V)===!1){const N=V.isWebGLMultipleRenderTargets?V.texture:[V.texture],Y=V.width,ce=V.height;let Se=t.COLOR_BUFFER_BIT;const Te=[],Ke=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ue=r.get(V),ge=V.isWebGLMultipleRenderTargets===!0;if(ge)for(let Je=0;Je<N.length;Je++)n.bindFramebuffer(t.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ue.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ue.__webglFramebuffer);for(let Je=0;Je<N.length;Je++){Te.push(t.COLOR_ATTACHMENT0+Je),V.depthBuffer&&Te.push(Ke);const Q=Ue.__ignoreDepthValues!==void 0?Ue.__ignoreDepthValues:!1;if(Q===!1&&(V.depthBuffer&&(Se|=t.DEPTH_BUFFER_BIT),V.stencilBuffer&&(Se|=t.STENCIL_BUFFER_BIT)),ge&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ue.__webglColorRenderbuffer[Je]),Q===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Ke]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Ke])),ge){const me=r.get(N[Je]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,me,0)}t.blitFramebuffer(0,0,Y,ce,0,0,Y,ce,Se,t.NEAREST),m&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Te)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ge)for(let Je=0;Je<N.length;Je++){n.bindFramebuffer(t.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.RENDERBUFFER,Ue.__webglColorRenderbuffer[Je]);const Q=r.get(N[Je]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ue.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.TEXTURE_2D,Q,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer)}}function Ze(V){return Math.min(f,V.samples)}function ze(V){const N=r.get(V);return a&&V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function tt(V){const N=o.render.frame;v.get(V)!==N&&(v.set(V,N),V.update())}function ht(V,N){const Y=V.colorSpace,ce=V.format,Se=V.type;return V.isCompressedTexture===!0||V.format===I0||Y!==Ls&&Y!==Ha&&(Y===St?a===!1?e.has("EXT_sRGB")===!0&&ce===ai?(V.format=I0,V.minFilter=Zt,V.generateMipmaps=!1):N=BA.sRGBToLinear(N):(ce!==ai||Se!==kr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Y)),N}this.allocateTextureUnit=U,this.resetTextureUnits=Z,this.setTexture2D=z,this.setTexture2DArray=ne,this.setTexture3D=J,this.setTextureCube=q,this.rebindTextures=he,this.setupRenderTarget=Fe,this.updateRenderTargetMipmap=Be,this.updateMultisampleRenderTarget=ke,this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=ze}function V3(t,e,n){const r=n.isWebGL2;function i(s,o=Ha){let a;if(s===kr)return t.UNSIGNED_BYTE;if(s===h3)return t.UNSIGNED_SHORT_4_4_4_4;if(s===p3)return t.UNSIGNED_SHORT_5_5_5_1;if(s===u3)return t.BYTE;if(s===d3)return t.SHORT;if(s===CA)return t.UNSIGNED_SHORT;if(s===f3)return t.INT;if(s===Do)return t.UNSIGNED_INT;if(s===bs)return t.FLOAT;if(s===Ya)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===m3)return t.ALPHA;if(s===ai)return t.RGBA;if(s===g3)return t.LUMINANCE;if(s===v3)return t.LUMINANCE_ALPHA;if(s===za)return t.DEPTH_COMPONENT;if(s===Qa)return t.DEPTH_STENCIL;if(s===I0)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===y3)return t.RED;if(s===x3)return t.RED_INTEGER;if(s===_3)return t.RG;if(s===S3)return t.RG_INTEGER;if(s===w3)return t.RGBA_INTEGER;if(s===Xv||s===Jv||s===Kv||s===Yv)if(o===St)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Xv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Jv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Kv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Yv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Xv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Jv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Kv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Yv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===rw||s===iw||s===sw||s===ow)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===rw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===iw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===sw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===ow)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===E3)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===aw||s===lw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===aw)return o===St?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===lw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===cw||s===uw||s===dw||s===fw||s===hw||s===pw||s===mw||s===gw||s===vw||s===yw||s===xw||s===_w||s===Sw||s===ww)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===cw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===uw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===dw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===fw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===hw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===pw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===mw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===gw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===vw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===yw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===xw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===_w)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Sw)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===ww)return o===St?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Qv)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Qv)return o===St?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===A3||s===Ew||s===Aw||s===bw)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Qv)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Ew)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Aw)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===bw)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ka?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class W3 extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Lo extends zt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const xV={type:"move"};class t_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Lo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Lo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Lo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const x=n.getJointPose(y,r),g=this._getHandJoint(c,y);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const d=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=d.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(xV)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Lo;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class wy extends dn{constructor(e,n,r,i,s,o,a,l,c,d){if(d=d!==void 0?d:za,d!==za&&d!==Qa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===za&&(r=Do),r===void 0&&d===Qa&&(r=ka),super(null,i,s,o,a,l,d,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:nn,this.minFilter=l!==void 0?l:nn,this.flipY=!1,this.generateMipmaps=!1}}class _V extends Fi{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,f=null,p=null,m=null,v=null;const y=n.getContextAttributes();let x=null,g=null;const _=[],w=[],b=new Set,C=new Map,T=new rn;T.layers.enable(1),T.viewport=new Bt;const P=new rn;P.layers.enable(2),P.viewport=new Bt;const B=[T,P],R=new W3;R.layers.enable(1),R.layers.enable(2);let D=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let ee=_[q];return ee===void 0&&(ee=new t_,_[q]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(q){let ee=_[q];return ee===void 0&&(ee=new t_,_[q]=ee),ee.getGripSpace()},this.getHand=function(q){let ee=_[q];return ee===void 0&&(ee=new t_,_[q]=ee),ee.getHandSpace()};function X(q){const ee=w.indexOf(q.inputSource);if(ee===-1)return;const _e=_[ee];_e!==void 0&&(_e.update(q.inputSource,q.frame,c||o),_e.dispatchEvent({type:q.type,data:q.inputSource}))}function $(){i.removeEventListener("select",X),i.removeEventListener("selectstart",X),i.removeEventListener("selectend",X),i.removeEventListener("squeeze",X),i.removeEventListener("squeezestart",X),i.removeEventListener("squeezeend",X),i.removeEventListener("end",$),i.removeEventListener("inputsourceschange",j);for(let q=0;q<_.length;q++){const ee=w[q];ee!==null&&(w[q]=null,_[q].disconnect(ee))}D=null,k=null,e.setRenderTarget(x),m=null,p=null,f=null,i=null,g=null,J.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){s=q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){a=q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(q){c=q},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(q){if(i=q,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",X),i.addEventListener("selectstart",X),i.addEventListener("selectend",X),i.addEventListener("squeeze",X),i.addEventListener("squeezestart",X),i.addEventListener("squeezeend",X),i.addEventListener("end",$),i.addEventListener("inputsourceschange",j),y.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ee={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,ee),i.updateRenderState({baseLayer:m}),g=new vn(m.framebufferWidth,m.framebufferHeight,{format:ai,type:kr,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let ee=null,_e=null,be=null;y.depth&&(be=y.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ee=y.stencil?Qa:za,_e=y.stencil?ka:Do);const K={colorFormat:n.RGBA8,depthFormat:be,scaleFactor:s};f=new XRWebGLBinding(i,n),p=f.createProjectionLayer(K),i.updateRenderState({layers:[p]}),g=new vn(p.textureWidth,p.textureHeight,{format:ai,type:kr,depthTexture:new wy(p.textureWidth,p.textureHeight,_e,void 0,void 0,void 0,void 0,void 0,void 0,ee),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const je=e.properties.get(g);je.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),J.setContext(i),J.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function j(q){for(let ee=0;ee<q.removed.length;ee++){const _e=q.removed[ee],be=w.indexOf(_e);be>=0&&(w[be]=null,_[be].disconnect(_e))}for(let ee=0;ee<q.added.length;ee++){const _e=q.added[ee];let be=w.indexOf(_e);if(be===-1){for(let je=0;je<_.length;je++)if(je>=w.length){w.push(_e),be=je;break}else if(w[je]===null){w[je]=_e,be=je;break}if(be===-1)break}const K=_[be];K&&K.connect(_e)}}const H=new F,ie=new F;function Z(q,ee,_e){H.setFromMatrixPosition(ee.matrixWorld),ie.setFromMatrixPosition(_e.matrixWorld);const be=H.distanceTo(ie),K=ee.projectionMatrix.elements,je=_e.projectionMatrix.elements,Xe=K[14]/(K[10]-1),Ee=K[14]/(K[10]+1),Me=(K[9]+1)/K[5],ve=(K[9]-1)/K[5],re=(K[8]-1)/K[0],he=(je[8]+1)/je[0],Fe=Xe*re,Be=Xe*he,ke=be/(-re+he),Ze=ke*-re;ee.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(Ze),q.translateZ(ke),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const ze=Xe+ke,tt=Ee+ke,ht=Fe-Ze,V=Be+(be-Ze),N=Me*Ee/tt*ze,Y=ve*Ee/tt*ze;q.projectionMatrix.makePerspective(ht,V,N,Y,ze,tt),q.projectionMatrixInverse.copy(q.projectionMatrix).invert()}function U(q,ee){ee===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(ee.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(i===null)return;R.near=P.near=T.near=q.near,R.far=P.far=T.far=q.far,(D!==R.near||k!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),D=R.near,k=R.far);const ee=q.parent,_e=R.cameras;U(R,ee);for(let be=0;be<_e.length;be++)U(_e[be],ee);_e.length===2?Z(R,T,P):R.projectionMatrix.copy(T.projectionMatrix),O(q,R,ee)};function O(q,ee,_e){_e===null?q.matrix.copy(ee.matrixWorld):(q.matrix.copy(_e.matrixWorld),q.matrix.invert(),q.matrix.multiply(ee.matrixWorld)),q.matrix.decompose(q.position,q.quaternion,q.scale),q.updateMatrixWorld(!0);const be=q.children;for(let K=0,je=be.length;K<je;K++)be[K].updateMatrixWorld(!0);q.projectionMatrix.copy(ee.projectionMatrix),q.projectionMatrixInverse.copy(ee.projectionMatrixInverse),q.isPerspectiveCamera&&(q.fov=Ad*2*Math.atan(1/q.projectionMatrix.elements[5]),q.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(q){l=q,p!==null&&(p.fixedFoveation=q),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=q)},this.getPlanes=function(){return b};let z=null;function ne(q,ee){if(d=ee.getViewerPose(c||o),v=ee,d!==null){const _e=d.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let be=!1;_e.length!==R.cameras.length&&(R.cameras.length=0,be=!0);for(let K=0;K<_e.length;K++){const je=_e[K];let Xe=null;if(m!==null)Xe=m.getViewport(je);else{const Me=f.getViewSubImage(p,je);Xe=Me.viewport,K===0&&(e.setRenderTargetTextures(g,Me.colorTexture,p.ignoreDepthValues?void 0:Me.depthStencilTexture),e.setRenderTarget(g))}let Ee=B[K];Ee===void 0&&(Ee=new rn,Ee.layers.enable(K),Ee.viewport=new Bt,B[K]=Ee),Ee.matrix.fromArray(je.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(je.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(Xe.x,Xe.y,Xe.width,Xe.height),K===0&&(R.matrix.copy(Ee.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),be===!0&&R.cameras.push(Ee)}}for(let _e=0;_e<_.length;_e++){const be=w[_e],K=_[_e];be!==null&&K!==void 0&&K.update(be,ee,c||o)}if(z&&z(q,ee),ee.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:ee.detectedPlanes});let _e=null;for(const be of b)ee.detectedPlanes.has(be)||(_e===null&&(_e=[]),_e.push(be));if(_e!==null)for(const be of _e)b.delete(be),C.delete(be),r.dispatchEvent({type:"planeremoved",data:be});for(const be of ee.detectedPlanes)if(!b.has(be))b.add(be),C.set(be,ee.lastChangedTime),r.dispatchEvent({type:"planeadded",data:be});else{const K=C.get(be);be.lastChangedTime>K&&(C.set(be,be.lastChangedTime),r.dispatchEvent({type:"planechanged",data:be}))}}v=null}const J=new k3;J.setAnimationLoop(ne),this.setAnimationLoop=function(q){z=q},this.dispose=function(){}}}function SV(t,e){function n(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function r(x,g){g.color.getRGB(x.fogColor.value,O3(t)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function i(x,g,_,w,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),f(x,g)):g.isMeshPhongMaterial?(s(x,g),d(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,b)):g.isMeshMatcapMaterial?(s(x,g),v(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),y(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,_,w):g.isSpriteMaterial?c(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,n(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,n(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,n(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===rr&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,n(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===rr&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,n(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,n(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(x.envMap.value=_,x.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap){x.lightMap.value=g.lightMap;const w=t.useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=g.lightMapIntensity*w,n(g.lightMap,x.lightMapTransform)}g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,n(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,_,w){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*_,x.scale.value=w*.5,g.map&&(x.map.value=g.map,n(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function c(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,n(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function d(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function f(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,x.roughnessMapTransform)),e.get(g).envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,_){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===rr&&x.clearcoatNormalScale.value.negate())),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,g){g.matcap&&(x.matcap.value=g.matcap)}function y(x,g){const _=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function wV(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(_,w){const b=w.program;r.uniformBlockBinding(_,b)}function c(_,w){let b=i[_.id];b===void 0&&(v(_),b=d(_),i[_.id]=b,_.addEventListener("dispose",x));const C=w.program;r.updateUBOMapping(_,C);const T=e.render.frame;s[_.id]!==T&&(p(_),s[_.id]=T)}function d(_){const w=f();_.__bindingPointIndex=w;const b=t.createBuffer(),C=_.__size,T=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,b),t.bufferData(t.UNIFORM_BUFFER,C,T),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,b),b}function f(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const w=i[_.id],b=_.uniforms,C=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let T=0,P=b.length;T<P;T++){const B=b[T];if(m(B,T,C)===!0){const R=B.__offset,D=Array.isArray(B.value)?B.value:[B.value];let k=0;for(let X=0;X<D.length;X++){const $=D[X],j=y($);typeof $=="number"?(B.__data[0]=$,t.bufferSubData(t.UNIFORM_BUFFER,R+k,B.__data)):$.isMatrix3?(B.__data[0]=$.elements[0],B.__data[1]=$.elements[1],B.__data[2]=$.elements[2],B.__data[3]=$.elements[0],B.__data[4]=$.elements[3],B.__data[5]=$.elements[4],B.__data[6]=$.elements[5],B.__data[7]=$.elements[0],B.__data[8]=$.elements[6],B.__data[9]=$.elements[7],B.__data[10]=$.elements[8],B.__data[11]=$.elements[0]):($.toArray(B.__data,k),k+=j.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,R,B.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(_,w,b){const C=_.value;if(b[w]===void 0){if(typeof C=="number")b[w]=C;else{const T=Array.isArray(C)?C:[C],P=[];for(let B=0;B<T.length;B++)P.push(T[B].clone());b[w]=P}return!0}else if(typeof C=="number"){if(b[w]!==C)return b[w]=C,!0}else{const T=Array.isArray(b[w])?b[w]:[b[w]],P=Array.isArray(C)?C:[C];for(let B=0;B<T.length;B++){const R=T[B];if(R.equals(P[B])===!1)return R.copy(P[B]),!0}}return!1}function v(_){const w=_.uniforms;let b=0;const C=16;let T=0;for(let P=0,B=w.length;P<B;P++){const R=w[P],D={boundary:0,storage:0},k=Array.isArray(R.value)?R.value:[R.value];for(let X=0,$=k.length;X<$;X++){const j=k[X],H=y(j);D.boundary+=H.boundary,D.storage+=H.storage}if(R.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=b,P>0){T=b%C;const X=C-T;T!==0&&X-D.boundary<0&&(b+=C-T,R.__offset=b)}b+=D.storage}return T=b%C,T>0&&(b+=C-T),_.__size=b,_.__cache={},this}function y(_){const w={boundary:0,storage:0};return typeof _=="number"?(w.boundary=4,w.storage=4):_.isVector2?(w.boundary=8,w.storage=8):_.isVector3||_.isColor?(w.boundary=16,w.storage=12):_.isVector4?(w.boundary=16,w.storage=16):_.isMatrix3?(w.boundary=48,w.storage=48):_.isMatrix4?(w.boundary=64,w.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),w}function x(_){const w=_.target;w.removeEventListener("dispose",x);const b=o.indexOf(w.__bindingPointIndex);o.splice(b,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function g(){for(const _ in i)t.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}function EV(){const t=Yh("canvas");return t.style.display="block",t}class kA{constructor(e={}){const{canvas:n=EV(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;let m=null,v=null;const y=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=St,this.useLegacyLights=!0,this.toneMapping=Rs,this.toneMappingExposure=1;const g=this;let _=!1,w=0,b=0,C=null,T=-1,P=null;const B=new Bt,R=new Bt;let D=null,k=n.width,X=n.height,$=1,j=null,H=null;const ie=new Bt(0,0,k,X),Z=new Bt(0,0,k,X);let U=!1;const O=new _y;let z=!1,ne=!1,J=null;const q=new Ve,ee=new F,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function be(){return C===null?$:1}let K=r;function je(G,ue){for(let xe=0;xe<G.length;xe++){const ae=G[xe],we=n.getContext(ae,ue);if(we!==null)return we}return null}try{const G={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${ol}`),n.addEventListener("webglcontextlost",Pe,!1),n.addEventListener("webglcontextrestored",nt,!1),n.addEventListener("webglcontextcreationerror",ut,!1),K===null){const ue=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&ue.shift(),K=je(ue,G),K===null)throw je(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let Xe,Ee,Me,ve,re,he,Fe,Be,ke,Ze,ze,tt,ht,V,N,Y,ce,Se,Te,Ke,Ue,ge,Je,Q;function me(){Xe=new k9(K),Ee=new D9(K,Xe,e),Xe.init(Ee),ge=new V3(K,Xe,Ee),Me=new vV(K,Xe,Ee),ve=new G9(K),re=new sV,he=new yV(K,Xe,Me,re,Ee,ge,ve),Fe=new F9(g),Be=new U9(g),ke=new e6(K,Ee),Je=new I9(K,Xe,ke,Ee),Ze=new z9(K,ke,ve,Je),ze=new j9(K,Ze,ke,ve),Te=new W9(K,Ee,he),Y=new L9(re),tt=new iV(g,Fe,Be,Xe,Ee,Je,Y),ht=new SV(g,re),V=new aV,N=new hV(Xe,Ee),Se=new P9(g,Fe,Be,Me,ze,p,l),ce=new gV(g,ze,Ee),Q=new wV(K,ve,Ee,Me),Ke=new B9(K,Xe,ve,Ee),Ue=new H9(K,Xe,ve,Ee),ve.programs=tt.programs,g.capabilities=Ee,g.extensions=Xe,g.properties=re,g.renderLists=V,g.shadowMap=ce,g.state=Me,g.info=ve}me();const Ae=new _V(g,K);this.xr=Ae,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const G=Xe.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Xe.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(G){G!==void 0&&($=G,this.setSize(k,X,!1))},this.getSize=function(G){return G.set(k,X)},this.setSize=function(G,ue,xe=!0){if(Ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=G,X=ue,n.width=Math.floor(G*$),n.height=Math.floor(ue*$),xe===!0&&(n.style.width=G+"px",n.style.height=ue+"px"),this.setViewport(0,0,G,ue)},this.getDrawingBufferSize=function(G){return G.set(k*$,X*$).floor()},this.setDrawingBufferSize=function(G,ue,xe){k=G,X=ue,$=xe,n.width=Math.floor(G*xe),n.height=Math.floor(ue*xe),this.setViewport(0,0,G,ue)},this.getCurrentViewport=function(G){return G.copy(B)},this.getViewport=function(G){return G.copy(ie)},this.setViewport=function(G,ue,xe,ae){G.isVector4?ie.set(G.x,G.y,G.z,G.w):ie.set(G,ue,xe,ae),Me.viewport(B.copy(ie).multiplyScalar($).floor())},this.getScissor=function(G){return G.copy(Z)},this.setScissor=function(G,ue,xe,ae){G.isVector4?Z.set(G.x,G.y,G.z,G.w):Z.set(G,ue,xe,ae),Me.scissor(R.copy(Z).multiplyScalar($).floor())},this.getScissorTest=function(){return U},this.setScissorTest=function(G){Me.setScissorTest(U=G)},this.setOpaqueSort=function(G){j=G},this.setTransparentSort=function(G){H=G},this.getClearColor=function(G){return G.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor.apply(Se,arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha.apply(Se,arguments)},this.clear=function(G=!0,ue=!0,xe=!0){let ae=0;G&&(ae|=K.COLOR_BUFFER_BIT),ue&&(ae|=K.DEPTH_BUFFER_BIT),xe&&(ae|=K.STENCIL_BUFFER_BIT),K.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Pe,!1),n.removeEventListener("webglcontextrestored",nt,!1),n.removeEventListener("webglcontextcreationerror",ut,!1),V.dispose(),N.dispose(),re.dispose(),Fe.dispose(),Be.dispose(),ze.dispose(),Je.dispose(),Q.dispose(),tt.dispose(),Ae.dispose(),Ae.removeEventListener("sessionstart",rt),Ae.removeEventListener("sessionend",Kt),J&&(J.dispose(),J=null),Yt.stop()};function Pe(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function nt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const G=ve.autoReset,ue=ce.enabled,xe=ce.autoUpdate,ae=ce.needsUpdate,we=ce.type;me(),ve.autoReset=G,ce.enabled=ue,ce.autoUpdate=xe,ce.needsUpdate=ae,ce.type=we}function ut(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function $t(G){const ue=G.target;ue.removeEventListener("dispose",$t),te(ue)}function te(G){pe(G),re.remove(G)}function pe(G){const ue=re.get(G).programs;ue!==void 0&&(ue.forEach(function(xe){tt.releaseProgram(xe)}),G.isShaderMaterial&&tt.releaseShaderCache(G))}this.renderBufferDirect=function(G,ue,xe,ae,we,ot){ue===null&&(ue=_e);const lt=we.isMesh&&we.matrixWorld.determinant()<0,dt=sm(G,ue,xe,ae,we);Me.setMaterial(ae,lt);let xt=xe.index,bt=1;ae.wireframe===!0&&(xt=Ze.getWireframeAttribute(xe),bt=2);const Mt=xe.drawRange,Pt=xe.attributes.position;let Qt=Mt.start*bt,hr=(Mt.start+Mt.count)*bt;ot!==null&&(Qt=Math.max(Qt,ot.start*bt),hr=Math.min(hr,(ot.start+ot.count)*bt)),xt!==null?(Qt=Math.max(Qt,0),hr=Math.min(hr,xt.count)):Pt!=null&&(Qt=Math.max(Qt,0),hr=Math.min(hr,Pt.count));const xi=hr-Qt;if(xi<0||xi===1/0)return;Je.setup(we,ae,dt,xe,xt);let ls,cn=Ke;if(xt!==null&&(ls=ke.get(xt),cn=Ue,cn.setIndex(ls)),we.isMesh)ae.wireframe===!0?(Me.setLineWidth(ae.wireframeLinewidth*be()),cn.setMode(K.LINES)):cn.setMode(K.TRIANGLES);else if(we.isLine){let It=ae.linewidth;It===void 0&&(It=1),Me.setLineWidth(It*be()),we.isLineSegments?cn.setMode(K.LINES):we.isLineLoop?cn.setMode(K.LINE_LOOP):cn.setMode(K.LINE_STRIP)}else we.isPoints?cn.setMode(K.POINTS):we.isSprite&&cn.setMode(K.TRIANGLES);if(we.isInstancedMesh)cn.renderInstances(Qt,xi,we.count);else if(xe.isInstancedBufferGeometry){const It=xe._maxInstanceCount!==void 0?xe._maxInstanceCount:1/0,hl=Math.min(xe.instanceCount,It);cn.renderInstances(Qt,xi,hl)}else cn.render(Qt,xi)},this.compile=function(G,ue){function xe(ae,we,ot){ae.transparent===!0&&ae.side===_r&&ae.forceSinglePass===!1?(ae.side=rr,ae.needsUpdate=!0,Hc(ae,we,ot),ae.side=Bs,ae.needsUpdate=!0,Hc(ae,we,ot),ae.side=_r):Hc(ae,we,ot)}v=N.get(G),v.init(),x.push(v),G.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ue.layers)&&(v.pushLight(ae),ae.castShadow&&v.pushShadow(ae))}),v.setupLights(g.useLegacyLights),G.traverse(function(ae){const we=ae.material;if(we)if(Array.isArray(we))for(let ot=0;ot<we.length;ot++){const lt=we[ot];xe(lt,G,ae)}else xe(we,G,ae)}),x.pop(),v=null};let Ce=null;function We(G){Ce&&Ce(G)}function rt(){Yt.stop()}function Kt(){Yt.start()}const Yt=new k3;Yt.setAnimationLoop(We),typeof self<"u"&&Yt.setContext(self),this.setAnimationLoop=function(G){Ce=G,Ae.setAnimationLoop(G),G===null?Yt.stop():Yt.start()},Ae.addEventListener("sessionstart",rt),Ae.addEventListener("sessionend",Kt),this.render=function(G,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Ae.enabled===!0&&Ae.isPresenting===!0&&(Ae.cameraAutoUpdate===!0&&Ae.updateCamera(ue),ue=Ae.getCamera()),G.isScene===!0&&G.onBeforeRender(g,G,ue,C),v=N.get(G,x.length),v.init(),x.push(v),q.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),O.setFromProjectionMatrix(q),ne=this.localClippingEnabled,z=Y.init(this.clippingPlanes,ne),m=V.get(G,y.length),m.init(),y.push(m),or(G,ue,0,g.sortObjects),m.finish(),g.sortObjects===!0&&m.sort(j,H),z===!0&&Y.beginShadows();const xe=v.state.shadowsArray;if(ce.render(xe,G,ue),z===!0&&Y.endShadows(),this.info.autoReset===!0&&this.info.reset(),Se.render(m,G),v.setupLights(g.useLegacyLights),ue.isArrayCamera){const ae=ue.cameras;for(let we=0,ot=ae.length;we<ot;we++){const lt=ae[we];as(m,G,lt,lt.viewport)}}else as(m,G,ue);C!==null&&(he.updateMultisampleRenderTarget(C),he.updateRenderTargetMipmap(C)),G.isScene===!0&&G.onAfterRender(g,G,ue),Je.resetDefaultState(),T=-1,P=null,x.pop(),x.length>0?v=x[x.length-1]:v=null,y.pop(),y.length>0?m=y[y.length-1]:m=null};function or(G,ue,xe,ae){if(G.visible===!1)return;if(G.layers.test(ue.layers)){if(G.isGroup)xe=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ue);else if(G.isLight)v.pushLight(G),G.castShadow&&v.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||O.intersectsSprite(G)){ae&&ee.setFromMatrixPosition(G.matrixWorld).applyMatrix4(q);const lt=ze.update(G),dt=G.material;dt.visible&&m.push(G,lt,dt,xe,ee.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||O.intersectsObject(G))){G.isSkinnedMesh&&G.skeleton.frame!==ve.render.frame&&(G.skeleton.update(),G.skeleton.frame=ve.render.frame);const lt=ze.update(G),dt=G.material;if(ae&&(lt.boundingSphere===null&&lt.computeBoundingSphere(),ee.copy(lt.boundingSphere.center).applyMatrix4(G.matrixWorld).applyMatrix4(q)),Array.isArray(dt)){const xt=lt.groups;for(let bt=0,Mt=xt.length;bt<Mt;bt++){const Pt=xt[bt],Qt=dt[Pt.materialIndex];Qt&&Qt.visible&&m.push(G,lt,Qt,xe,ee.z,Pt)}}else dt.visible&&m.push(G,lt,dt,xe,ee.z,null)}}const ot=G.children;for(let lt=0,dt=ot.length;lt<dt;lt++)or(ot[lt],ue,xe,ae)}function as(G,ue,xe,ae){const we=G.opaque,ot=G.transmissive,lt=G.transparent;v.setupLightsView(xe),z===!0&&Y.setGlobalState(g.clippingPlanes,xe),ot.length>0&&yn(we,ot,ue,xe),ae&&Me.viewport(B.copy(ae)),we.length>0&&Gr(we,ue,xe),ot.length>0&&Gr(ot,ue,xe),lt.length>0&&Gr(lt,ue,xe),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function yn(G,ue,xe,ae){if(J===null){const dt=Ee.isWebGL2;J=new vn(1024,1024,{generateMipmaps:!0,type:Xe.has("EXT_color_buffer_half_float")?Ya:kr,minFilter:Ds,samples:dt&&a===!0?4:0})}const we=g.getRenderTarget();g.setRenderTarget(J),g.clear();const ot=g.toneMapping;g.toneMapping=Rs,Gr(G,xe,ae),he.updateMultisampleRenderTarget(J),he.updateRenderTargetMipmap(J);let lt=!1;for(let dt=0,xt=ue.length;dt<xt;dt++){const bt=ue[dt],Mt=bt.object,Pt=bt.geometry,Qt=bt.material,hr=bt.group;if(Qt.side===_r&&Mt.layers.test(ae.layers)){const xi=Qt.side;Qt.side=rr,Qt.needsUpdate=!0,Ui(Mt,xe,ae,Pt,Qt,hr),Qt.side=xi,Qt.needsUpdate=!0,lt=!0}}lt===!0&&(he.updateMultisampleRenderTarget(J),he.updateRenderTargetMipmap(J)),g.setRenderTarget(we),g.toneMapping=ot}function Gr(G,ue,xe){const ae=ue.isScene===!0?ue.overrideMaterial:null;for(let we=0,ot=G.length;we<ot;we++){const lt=G[we],dt=lt.object,xt=lt.geometry,bt=ae===null?lt.material:ae,Mt=lt.group;dt.layers.test(xe.layers)&&Ui(dt,ue,xe,xt,bt,Mt)}}function Ui(G,ue,xe,ae,we,ot){G.onBeforeRender(g,ue,xe,ae,we,ot),G.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),we.onBeforeRender(g,ue,xe,ae,G,ot),we.transparent===!0&&we.side===_r&&we.forceSinglePass===!1?(we.side=rr,we.needsUpdate=!0,g.renderBufferDirect(xe,ue,ae,we,G,ot),we.side=Bs,we.needsUpdate=!0,g.renderBufferDirect(xe,ue,ae,we,G,ot),we.side=_r):g.renderBufferDirect(xe,ue,ae,we,G,ot),G.onAfterRender(g,ue,xe,ae,we,ot)}function Hc(G,ue,xe){ue.isScene!==!0&&(ue=_e);const ae=re.get(G),we=v.state.lights,ot=v.state.shadowsArray,lt=we.state.version,dt=tt.getParameters(G,we.state,ot,ue,xe),xt=tt.getProgramCacheKey(dt);let bt=ae.programs;ae.environment=G.isMeshStandardMaterial?ue.environment:null,ae.fog=ue.fog,ae.envMap=(G.isMeshStandardMaterial?Be:Fe).get(G.envMap||ae.environment),bt===void 0&&(G.addEventListener("dispose",$t),bt=new Map,ae.programs=bt);let Mt=bt.get(xt);if(Mt!==void 0){if(ae.currentProgram===Mt&&ae.lightsStateVersion===lt)return im(G,dt),Mt}else dt.uniforms=tt.getUniforms(G),G.onBuild(xe,dt,g),G.onBeforeCompile(dt,g),Mt=tt.acquireProgram(dt,xt),bt.set(xt,Mt),ae.uniforms=dt.uniforms;const Pt=ae.uniforms;(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(Pt.clippingPlanes=Y.uniform),im(G,dt),ae.needsLights=rx(G),ae.lightsStateVersion=lt,ae.needsLights&&(Pt.ambientLightColor.value=we.state.ambient,Pt.lightProbe.value=we.state.probe,Pt.directionalLights.value=we.state.directional,Pt.directionalLightShadows.value=we.state.directionalShadow,Pt.spotLights.value=we.state.spot,Pt.spotLightShadows.value=we.state.spotShadow,Pt.rectAreaLights.value=we.state.rectArea,Pt.ltc_1.value=we.state.rectAreaLTC1,Pt.ltc_2.value=we.state.rectAreaLTC2,Pt.pointLights.value=we.state.point,Pt.pointLightShadows.value=we.state.pointShadow,Pt.hemisphereLights.value=we.state.hemi,Pt.directionalShadowMap.value=we.state.directionalShadowMap,Pt.directionalShadowMatrix.value=we.state.directionalShadowMatrix,Pt.spotShadowMap.value=we.state.spotShadowMap,Pt.spotLightMatrix.value=we.state.spotLightMatrix,Pt.spotLightMap.value=we.state.spotLightMap,Pt.pointShadowMap.value=we.state.pointShadowMap,Pt.pointShadowMatrix.value=we.state.pointShadowMatrix);const Qt=Mt.getUniforms(),hr=e0.seqWithValue(Qt.seq,Pt);return ae.currentProgram=Mt,ae.uniformsList=hr,Mt}function im(G,ue){const xe=re.get(G);xe.outputColorSpace=ue.outputColorSpace,xe.instancing=ue.instancing,xe.skinning=ue.skinning,xe.morphTargets=ue.morphTargets,xe.morphNormals=ue.morphNormals,xe.morphColors=ue.morphColors,xe.morphTargetsCount=ue.morphTargetsCount,xe.numClippingPlanes=ue.numClippingPlanes,xe.numIntersection=ue.numClipIntersection,xe.vertexAlphas=ue.vertexAlphas,xe.vertexTangents=ue.vertexTangents,xe.toneMapping=ue.toneMapping}function sm(G,ue,xe,ae,we){ue.isScene!==!0&&(ue=_e),he.resetTextureUnits();const ot=ue.fog,lt=ae.isMeshStandardMaterial?ue.environment:null,dt=C===null?g.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Ls,xt=(ae.isMeshStandardMaterial?Be:Fe).get(ae.envMap||lt),bt=ae.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,Mt=!!ae.normalMap&&!!xe.attributes.tangent,Pt=!!xe.morphAttributes.position,Qt=!!xe.morphAttributes.normal,hr=!!xe.morphAttributes.color,xi=ae.toneMapped?g.toneMapping:Rs,ls=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,cn=ls!==void 0?ls.length:0,It=re.get(ae),hl=v.state.lights;if(z===!0&&(ne===!0||G!==P)){const tn=G===P&&ae.id===T;Y.setState(ae,G,tn)}let jn=!1;ae.version===It.__version?(It.needsLights&&It.lightsStateVersion!==hl.state.version||It.outputColorSpace!==dt||we.isInstancedMesh&&It.instancing===!1||!we.isInstancedMesh&&It.instancing===!0||we.isSkinnedMesh&&It.skinning===!1||!we.isSkinnedMesh&&It.skinning===!0||It.envMap!==xt||ae.fog===!0&&It.fog!==ot||It.numClippingPlanes!==void 0&&(It.numClippingPlanes!==Y.numPlanes||It.numIntersection!==Y.numIntersection)||It.vertexAlphas!==bt||It.vertexTangents!==Mt||It.morphTargets!==Pt||It.morphNormals!==Qt||It.morphColors!==hr||It.toneMapping!==xi||Ee.isWebGL2===!0&&It.morphTargetsCount!==cn)&&(jn=!0):(jn=!0,It.__version=ae.version);let cs=It.currentProgram;jn===!0&&(cs=Hc(ae,ue,we));let uo=!1,Zr=!1,qt=!1;const _t=cs.getUniforms(),br=It.uniforms;if(Me.useProgram(cs.program)&&(uo=!0,Zr=!0,qt=!0),ae.id!==T&&(T=ae.id,Zr=!0),uo||P!==G){if(_t.setValue(K,"projectionMatrix",G.projectionMatrix),Ee.logarithmicDepthBuffer&&_t.setValue(K,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),P!==G&&(P=G,Zr=!0,qt=!0),ae.isShaderMaterial||ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshStandardMaterial||ae.envMap){const tn=_t.map.cameraPosition;tn!==void 0&&tn.setValue(K,ee.setFromMatrixPosition(G.matrixWorld))}(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&_t.setValue(K,"isOrthographic",G.isOrthographicCamera===!0),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial||ae.isShadowMaterial||we.isSkinnedMesh)&&_t.setValue(K,"viewMatrix",G.matrixWorldInverse)}if(we.isSkinnedMesh){_t.setOptional(K,we,"bindMatrix"),_t.setOptional(K,we,"bindMatrixInverse");const tn=we.skeleton;tn&&(Ee.floatVertexTextures?(tn.boneTexture===null&&tn.computeBoneTexture(),_t.setValue(K,"boneTexture",tn.boneTexture,he),_t.setValue(K,"boneTextureSize",tn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Xn=xe.morphAttributes;if((Xn.position!==void 0||Xn.normal!==void 0||Xn.color!==void 0&&Ee.isWebGL2===!0)&&Te.update(we,xe,cs),(Zr||It.receiveShadow!==we.receiveShadow)&&(It.receiveShadow=we.receiveShadow,_t.setValue(K,"receiveShadow",we.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(br.envMap.value=xt,br.flipEnvMap.value=xt.isCubeTexture&&xt.isRenderTargetTexture===!1?-1:1),Zr&&(_t.setValue(K,"toneMappingExposure",g.toneMappingExposure),It.needsLights&&ef(br,qt),ot&&ae.fog===!0&&ht.refreshFogUniforms(br,ot),ht.refreshMaterialUniforms(br,ae,$,X,J),e0.upload(K,It.uniformsList,br,he)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(e0.upload(K,It.uniformsList,br,he),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&_t.setValue(K,"center",we.center),_t.setValue(K,"modelViewMatrix",we.modelViewMatrix),_t.setValue(K,"normalMatrix",we.normalMatrix),_t.setValue(K,"modelMatrix",we.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){const tn=ae.uniformsGroups;for(let us=0,Qo=tn.length;us<Qo;us++)if(Ee.isWebGL2){const pr=tn[us];Q.update(pr,cs),Q.bind(pr,cs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return cs}function ef(G,ue){G.ambientLightColor.needsUpdate=ue,G.lightProbe.needsUpdate=ue,G.directionalLights.needsUpdate=ue,G.directionalLightShadows.needsUpdate=ue,G.pointLights.needsUpdate=ue,G.pointLightShadows.needsUpdate=ue,G.spotLights.needsUpdate=ue,G.spotLightShadows.needsUpdate=ue,G.rectAreaLights.needsUpdate=ue,G.hemisphereLights.needsUpdate=ue}function rx(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(G,ue,xe){re.get(G.texture).__webglTexture=ue,re.get(G.depthTexture).__webglTexture=xe;const ae=re.get(G);ae.__hasExternalTextures=!0,ae.__hasExternalTextures&&(ae.__autoAllocateDepthBuffer=xe===void 0,ae.__autoAllocateDepthBuffer||Xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ae.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,ue){const xe=re.get(G);xe.__webglFramebuffer=ue,xe.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function(G,ue=0,xe=0){C=G,w=ue,b=xe;let ae=!0,we=null,ot=!1,lt=!1;if(G){const xt=re.get(G);xt.__useDefaultFramebuffer!==void 0?(Me.bindFramebuffer(K.FRAMEBUFFER,null),ae=!1):xt.__webglFramebuffer===void 0?he.setupRenderTarget(G):xt.__hasExternalTextures&&he.rebindTextures(G,re.get(G.texture).__webglTexture,re.get(G.depthTexture).__webglTexture);const bt=G.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(lt=!0);const Mt=re.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(we=Mt[ue],ot=!0):Ee.isWebGL2&&G.samples>0&&he.useMultisampledRTT(G)===!1?we=re.get(G).__webglMultisampledFramebuffer:we=Mt,B.copy(G.viewport),R.copy(G.scissor),D=G.scissorTest}else B.copy(ie).multiplyScalar($).floor(),R.copy(Z).multiplyScalar($).floor(),D=U;if(Me.bindFramebuffer(K.FRAMEBUFFER,we)&&Ee.drawBuffers&&ae&&Me.drawBuffers(G,we),Me.viewport(B),Me.scissor(R),Me.setScissorTest(D),ot){const xt=re.get(G.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+ue,xt.__webglTexture,xe)}else if(lt){const xt=re.get(G.texture),bt=ue||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,xt.__webglTexture,xe||0,bt)}T=-1},this.readRenderTargetPixels=function(G,ue,xe,ae,we,ot,lt){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=re.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&lt!==void 0&&(dt=dt[lt]),dt){Me.bindFramebuffer(K.FRAMEBUFFER,dt);try{const xt=G.texture,bt=xt.format,Mt=xt.type;if(bt!==ai&&ge.convert(bt)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Pt=Mt===Ya&&(Xe.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&Xe.has("EXT_color_buffer_float"));if(Mt!==kr&&ge.convert(Mt)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Mt===bs&&(Ee.isWebGL2||Xe.has("OES_texture_float")||Xe.has("WEBGL_color_buffer_float")))&&!Pt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=G.width-ae&&xe>=0&&xe<=G.height-we&&K.readPixels(ue,xe,ae,we,ge.convert(bt),ge.convert(Mt),ot)}finally{const xt=C!==null?re.get(C).__webglFramebuffer:null;Me.bindFramebuffer(K.FRAMEBUFFER,xt)}}},this.copyFramebufferToTexture=function(G,ue,xe=0){const ae=Math.pow(2,-xe),we=Math.floor(ue.image.width*ae),ot=Math.floor(ue.image.height*ae);he.setTexture2D(ue,0),K.copyTexSubImage2D(K.TEXTURE_2D,xe,0,0,G.x,G.y,we,ot),Me.unbindTexture()},this.copyTextureToTexture=function(G,ue,xe,ae=0){const we=ue.image.width,ot=ue.image.height,lt=ge.convert(xe.format),dt=ge.convert(xe.type);he.setTexture2D(xe,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,xe.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,xe.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,xe.unpackAlignment),ue.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,ae,G.x,G.y,we,ot,lt,dt,ue.image.data):ue.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,ae,G.x,G.y,ue.mipmaps[0].width,ue.mipmaps[0].height,lt,ue.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,ae,G.x,G.y,lt,dt,ue.image),ae===0&&xe.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(G,ue,xe,ae,we=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ot=G.max.x-G.min.x+1,lt=G.max.y-G.min.y+1,dt=G.max.z-G.min.z+1,xt=ge.convert(ae.format),bt=ge.convert(ae.type);let Mt;if(ae.isData3DTexture)he.setTexture3D(ae,0),Mt=K.TEXTURE_3D;else if(ae.isDataArrayTexture)he.setTexture2DArray(ae,0),Mt=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,ae.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,ae.unpackAlignment);const Pt=K.getParameter(K.UNPACK_ROW_LENGTH),Qt=K.getParameter(K.UNPACK_IMAGE_HEIGHT),hr=K.getParameter(K.UNPACK_SKIP_PIXELS),xi=K.getParameter(K.UNPACK_SKIP_ROWS),ls=K.getParameter(K.UNPACK_SKIP_IMAGES),cn=xe.isCompressedTexture?xe.mipmaps[0]:xe.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,cn.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,cn.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,G.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,G.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,G.min.z),xe.isDataTexture||xe.isData3DTexture?K.texSubImage3D(Mt,we,ue.x,ue.y,ue.z,ot,lt,dt,xt,bt,cn.data):xe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(Mt,we,ue.x,ue.y,ue.z,ot,lt,dt,xt,cn.data)):K.texSubImage3D(Mt,we,ue.x,ue.y,ue.z,ot,lt,dt,xt,bt,cn),K.pixelStorei(K.UNPACK_ROW_LENGTH,Pt),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Qt),K.pixelStorei(K.UNPACK_SKIP_PIXELS,hr),K.pixelStorei(K.UNPACK_SKIP_ROWS,xi),K.pixelStorei(K.UNPACK_SKIP_IMAGES,ls),we===0&&ae.generateMipmaps&&K.generateMipmap(Mt),Me.unbindTexture()},this.initTexture=function(G){G.isCubeTexture?he.setTextureCube(G,0):G.isData3DTexture?he.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?he.setTexture2DArray(G,0):he.setTexture2D(G,0),Me.unbindTexture()},this.resetState=function(){w=0,b=0,C=null,Me.reset(),Je.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===St?Yr:Ap}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Yr?St:Ls}}class j3 extends kA{}j3.prototype.isWebGL1Renderer=!0;class Ey{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ne(e),this.density=n}clone(){return new Ey(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Ay{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Ne(e),this.near=n,this.far=r}clone(){return new Ay(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Md extends zt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Tp{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Kh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ii()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ii()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ii()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wr=new F;class ui{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Wr.fromBufferAttribute(this,n),Wr.applyMatrix4(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Wr.fromBufferAttribute(this,n),Wr.applyNormalMatrix(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Wr.fromBufferAttribute(this,n),Wr.transformDirection(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}setX(e,n){return this.normalized&&(n=At(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=At(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=At(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=At(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Ti(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Ti(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Ti(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Ti(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=At(n,this.array),r=At(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=At(n,this.array),r=At(r,this.array),i=At(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=At(n,this.array),r=At(r,this.array),i=At(i,this.array),s=At(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Dt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ui(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zA extends Fn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let vu;const Df=new F,yu=new F,xu=new F,_u=new de,Lf=new de,X3=new Ve,Ug=new F,Ff=new F,kg=new F,G2=new de,n_=new de,$2=new de;class J3 extends zt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",vu===void 0){vu=new yt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Tp(n,5);vu.setIndex([0,1,2,0,2,3]),vu.setAttribute("position",new ui(r,3,0,!1)),vu.setAttribute("uv",new ui(r,2,3,!1))}this.geometry=vu,this.material=e!==void 0?e:new zA,this.center=new de(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),yu.setFromMatrixScale(this.matrixWorld),X3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),xu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&yu.multiplyScalar(-xu.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;zg(Ug.set(-.5,-.5,0),xu,o,yu,i,s),zg(Ff.set(.5,-.5,0),xu,o,yu,i,s),zg(kg.set(.5,.5,0),xu,o,yu,i,s),G2.set(0,0),n_.set(1,0),$2.set(1,1);let a=e.ray.intersectTriangle(Ug,Ff,kg,!1,Df);if(a===null&&(zg(Ff.set(-.5,.5,0),xu,o,yu,i,s),n_.set(0,1),a=e.ray.intersectTriangle(Ug,kg,Ff,!1,Df),a===null))return;const l=e.ray.origin.distanceTo(Df);l<e.near||l>e.far||n.push({distance:l,point:Df.clone(),uv:nc.getInterpolation(Df,Ug,Ff,kg,G2,n_,$2,new de),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function zg(t,e,n,r,i,s){_u.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Lf.x=s*_u.x-i*_u.y,Lf.y=i*_u.x+s*_u.y):Lf.copy(_u),t.copy(e),t.x+=Lf.x,t.y+=Lf.y,t.applyMatrix4(X3)}const Hg=new F,V2=new F;class K3 extends zt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){Hg.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Hg);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Hg.setFromMatrixPosition(e.matrixWorld),V2.setFromMatrixPosition(this.matrixWorld);const r=Hg.distanceTo(V2)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const W2=new F,j2=new Bt,X2=new Bt,AV=new F,J2=new Ve,Su=new F;class HA extends qn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ve,this.bindMatrixInverse=new Ve,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Sn),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)Su.fromBufferAttribute(n,r),this.applyBoneTransform(r,Su),this.boundingBox.expandByPoint(Su)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new mi),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)Su.fromBufferAttribute(n,r),this.applyBoneTransform(r,Su),this.boundingSphere.expandByPoint(Su)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Bt,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;j2.fromBufferAttribute(i.attributes.skinIndex,e),X2.fromBufferAttribute(i.attributes.skinWeight,e),W2.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=X2.getComponent(s);if(o!==0){const a=j2.getComponent(s);J2.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(AV.copy(W2).applyMatrix4(J2),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class by extends zt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class cd extends dn{constructor(e=null,n=1,r=1,i,s,o,a,l,c=nn,d=nn,f,p){super(null,o,a,l,c,d,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const K2=new Ve,bV=new Ve;let GA=class Y3{constructor(e=[],n=[]){this.uuid=Ii(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ve)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Ve;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:bV;K2.multiplyMatrices(a,n[s]),K2.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Y3(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=B3(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new cd(n,e,e,ai,bs);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new by),this.bones.push(o),this.boneInverses.push(new Ve().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}};class Cd extends Dt{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const wu=new Ve,Y2=new Ve,Gg=[],Q2=new Sn,MV=new Ve,Of=new qn,Nf=new mi;class $A extends qn{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Cd(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,MV)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Sn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,wu),Q2.copy(e.boundingBox).applyMatrix4(wu),this.boundingBox.union(Q2)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new mi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,wu),Nf.copy(e.boundingSphere).applyMatrix4(wu),this.boundingSphere.union(Nf)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Of.geometry=this.geometry,Of.material=this.material,Of.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Nf.copy(this.boundingSphere),Nf.applyMatrix4(r),e.ray.intersectsSphere(Nf)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,wu),Y2.multiplyMatrices(r,wu),Of.matrixWorld=Y2,Of.raycast(e,Gg);for(let o=0,a=Gg.length;o<a;o++){const l=Gg[o];l.instanceId=s,l.object=this,n.push(l)}Gg.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Cd(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class zr extends Fn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ne(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const q2=new F,Z2=new F,eR=new Ve,r_=new cl,$g=new mi;let Vo=class extends zt{constructor(e=new yt,n=new zr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)q2.fromBufferAttribute(n,i-1),Z2.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=q2.distanceTo(Z2);e.setAttribute("lineDistance",new et(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),$g.copy(r.boundingSphere),$g.applyMatrix4(i),$g.radius+=s,e.ray.intersectsSphere($g)===!1)return;eR.copy(i).invert(),r_.copy(e.ray).applyMatrix4(eR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new F,d=new F,f=new F,p=new F,m=this.isLineSegments?2:1,v=r.index,x=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),_=Math.min(v.count,o.start+o.count);for(let w=g,b=_-1;w<b;w+=m){const C=v.getX(w),T=v.getX(w+1);if(c.fromBufferAttribute(x,C),d.fromBufferAttribute(x,T),r_.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(p);B<e.near||B>e.far||n.push({distance:B,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),_=Math.min(x.count,o.start+o.count);for(let w=g,b=_-1;w<b;w+=m){if(c.fromBufferAttribute(x,w),d.fromBufferAttribute(x,w+1),r_.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||n.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const tR=new F,nR=new F;class Os extends Vo{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)tR.fromBufferAttribute(n,i),nR.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+tR.distanceTo(nR);e.setAttribute("lineDistance",new et(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class VA extends Vo{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class My extends Fn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const rR=new Ve,Pw=new cl,Vg=new mi,Wg=new F;class WA extends zt{constructor(e=new yt,n=new My){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Vg.copy(r.boundingSphere),Vg.applyMatrix4(i),Vg.radius+=s,e.ray.intersectsSphere(Vg)===!1)return;rR.copy(i).invert(),Pw.copy(e.ray).applyMatrix4(rR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,y=m;v<y;v++){const x=c.getX(v);Wg.fromBufferAttribute(f,x),iR(Wg,x,l,i,e,n,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,y=m;v<y;v++)Wg.fromBufferAttribute(f,v),iR(Wg,v,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function iR(t,e,n,r,i,s,o){const a=Pw.distanceSqToPoint(t);if(a<n){const l=new F;Pw.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class CV extends dn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Zt,this.magFilter=s!==void 0?s:Zt,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class TV extends dn{constructor(e,n,r){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=nn,this.minFilter=nn,this.generateMipmaps=!1,this.needsUpdate=!0}}class jA extends dn{constructor(e,n,r,i,s,o,a,l,c,d,f,p){super(null,o,a,l,c,d,i,s,f,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class RV extends jA{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Sr}}class PV extends dn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ns{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const d=r[i],p=r[i+1]-d,m=(o-d)/p;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new de:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new F,i=[],s=[],o=[],a=new F,l=new Ve;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new F)}s[0]=new F,o[0]=new F;let c=Number.MAX_VALUE;const d=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);d<=c&&(c=d,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Ln(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(Ln(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Cy extends Ns{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new de,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*f+this.aX,c=p*f+m*d+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Q3 extends Cy{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function XA(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,f){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+f)+(l-a)/f;p*=d,m*=d,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const jg=new F,i_=new XA,s_=new XA,o_=new XA;class q3 extends Ns{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new F){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,d;this.closed||a>0?c=i[(a-1)%s]:(jg.subVectors(i[0],i[1]).add(i[0]),c=jg);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?d=i[(a+2)%s]:(jg.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=jg),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),y=Math.pow(f.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(d),m);y<1e-4&&(y=1),v<1e-4&&(v=y),x<1e-4&&(x=y),i_.initNonuniformCatmullRom(c.x,f.x,p.x,d.x,v,y,x),s_.initNonuniformCatmullRom(c.y,f.y,p.y,d.y,v,y,x),o_.initNonuniformCatmullRom(c.z,f.z,p.z,d.z,v,y,x)}else this.curveType==="catmullrom"&&(i_.initCatmullRom(c.x,f.x,p.x,d.x,this.tension),s_.initCatmullRom(c.y,f.y,p.y,d.y,this.tension),o_.initCatmullRom(c.z,f.z,p.z,d.z,this.tension));return r.set(i_.calc(l),s_.calc(l),o_.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new F().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function sR(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function IV(t,e){const n=1-t;return n*n*e}function BV(t,e){return 2*(1-t)*t*e}function DV(t,e){return t*t*e}function yh(t,e,n,r){return IV(t,e)+BV(t,n)+DV(t,r)}function LV(t,e){const n=1-t;return n*n*n*e}function FV(t,e){const n=1-t;return 3*n*n*t*e}function OV(t,e){return 3*(1-t)*t*t*e}function NV(t,e){return t*t*t*e}function xh(t,e,n,r,i){return LV(t,e)+FV(t,n)+OV(t,r)+NV(t,i)}class JA extends Ns{constructor(e=new de,n=new de,r=new de,i=new de){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new de){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(xh(e,i.x,s.x,o.x,a.x),xh(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Z3 extends Ns{constructor(e=new F,n=new F,r=new F,i=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new F){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(xh(e,i.x,s.x,o.x,a.x),xh(e,i.y,s.y,o.y,a.y),xh(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ty extends Ns{constructor(e=new de,n=new de){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new de){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new de){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eF extends Ns{constructor(e=new F,n=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new F){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new F){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KA extends Ns{constructor(e=new de,n=new de,r=new de){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new de){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(yh(e,i.x,s.x,o.x),yh(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YA extends Ns{constructor(e=new F,n=new F,r=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new F){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(yh(e,i.x,s.x,o.x),yh(e,i.y,s.y,o.y),yh(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QA extends Ns{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new de){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],d=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(sR(a,l.x,c.x,d.x,f.x),sR(a,l.y,c.y,d.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new de().fromArray(i))}return this}}var qA=Object.freeze({__proto__:null,ArcCurve:Q3,CatmullRomCurve3:q3,CubicBezierCurve:JA,CubicBezierCurve3:Z3,EllipseCurve:Cy,LineCurve:Ty,LineCurve3:eF,QuadraticBezierCurve:KA,QuadraticBezierCurve3:YA,SplineCurve:QA});class tF extends Ns{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new Ty(n,e))}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new qA[i.type]().fromJSON(i))}return this}}class Qh extends tF{constructor(e){super(),this.type="Path",this.currentPoint=new de,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new Ty(this.currentPoint.clone(),new de(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new KA(this.currentPoint.clone(),new de(e,n),new de(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new JA(this.currentPoint.clone(),new de(e,n),new de(r,i),new de(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new QA(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,n+d,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new Cy(e,n,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Gd extends yt{constructor(e=[new de(0,-.5),new de(.5,0),new de(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Ln(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],d=1/n,f=new F,p=new de,m=new F,v=new F,y=new F;let x=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,v.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(v)}for(let _=0;_<=n;_++){const w=r+_*d*i,b=Math.sin(w),C=Math.cos(w);for(let T=0;T<=e.length-1;T++){f.x=e[T].x*b,f.y=e[T].y,f.z=e[T].x*C,o.push(f.x,f.y,f.z),p.x=_/n,p.y=T/(e.length-1),a.push(p.x,p.y);const P=l[3*T+0]*b,B=l[3*T+1],R=l[3*T+0]*C;c.push(P,B,R)}}for(let _=0;_<n;_++)for(let w=0;w<e.length-1;w++){const b=w+_*e.length,C=b,T=b+e.length,P=b+e.length+1,B=b+1;s.push(C,T,B),s.push(P,B,T)}this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("uv",new et(a,2)),this.setAttribute("normal",new et(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gd(e.points,e.segments,e.phiStart,e.phiLength)}}class Rp extends Gd{constructor(e=1,n=1,r=4,i=8){const s=new Qh;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new Rp(e.radius,e.length,e.capSegments,e.radialSegments)}}class Pp extends yt{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new F,d=new de;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=n;f++,p+=3){const m=r+f/n*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("normal",new et(a,3)),this.setAttribute("uv",new et(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Rc extends yt{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const d=[],f=[],p=[],m=[];let v=0;const y=[],x=r/2;let g=0;_(),o===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(d),this.setAttribute("position",new et(f,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(m,2));function _(){const b=new F,C=new F;let T=0;const P=(n-e)/r;for(let B=0;B<=s;B++){const R=[],D=B/s,k=D*(n-e)+e;for(let X=0;X<=i;X++){const $=X/i,j=$*l+a,H=Math.sin(j),ie=Math.cos(j);C.x=k*H,C.y=-D*r+x,C.z=k*ie,f.push(C.x,C.y,C.z),b.set(H,P,ie).normalize(),p.push(b.x,b.y,b.z),m.push($,1-D),R.push(v++)}y.push(R)}for(let B=0;B<i;B++)for(let R=0;R<s;R++){const D=y[R][B],k=y[R+1][B],X=y[R+1][B+1],$=y[R][B+1];d.push(D,k,$),d.push(k,X,$),T+=6}c.addGroup(g,T,0),g+=T}function w(b){const C=v,T=new de,P=new F;let B=0;const R=b===!0?e:n,D=b===!0?1:-1;for(let X=1;X<=i;X++)f.push(0,x*D,0),p.push(0,D,0),m.push(.5,.5),v++;const k=v;for(let X=0;X<=i;X++){const j=X/i*l+a,H=Math.cos(j),ie=Math.sin(j);P.x=R*ie,P.y=x*D,P.z=R*H,f.push(P.x,P.y,P.z),p.push(0,D,0),T.x=H*.5+.5,T.y=ie*.5*D+.5,m.push(T.x,T.y),v++}for(let X=0;X<i;X++){const $=C+X,j=k+X;b===!0?d.push(j,j+1,$):d.push(j+1,j,$),B+=3}c.addGroup(g,B,b===!0?1:2),g+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ip extends Rc{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Ip(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xo extends yt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),d(),this.setAttribute("position",new et(s,3)),this.setAttribute("normal",new et(s.slice(),3)),this.setAttribute("uv",new et(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const w=new F,b=new F,C=new F;for(let T=0;T<n.length;T+=3)m(n[T+0],w),m(n[T+1],b),m(n[T+2],C),l(w,b,C,_)}function l(_,w,b,C){const T=C+1,P=[];for(let B=0;B<=T;B++){P[B]=[];const R=_.clone().lerp(b,B/T),D=w.clone().lerp(b,B/T),k=T-B;for(let X=0;X<=k;X++)X===0&&B===T?P[B][X]=R:P[B][X]=R.clone().lerp(D,X/k)}for(let B=0;B<T;B++)for(let R=0;R<2*(T-B)-1;R++){const D=Math.floor(R/2);R%2===0?(p(P[B][D+1]),p(P[B+1][D]),p(P[B][D])):(p(P[B][D+1]),p(P[B+1][D+1]),p(P[B+1][D]))}}function c(_){const w=new F;for(let b=0;b<s.length;b+=3)w.x=s[b+0],w.y=s[b+1],w.z=s[b+2],w.normalize().multiplyScalar(_),s[b+0]=w.x,s[b+1]=w.y,s[b+2]=w.z}function d(){const _=new F;for(let w=0;w<s.length;w+=3){_.x=s[w+0],_.y=s[w+1],_.z=s[w+2];const b=x(_)/2/Math.PI+.5,C=g(_)/Math.PI+.5;o.push(b,1-C)}v(),f()}function f(){for(let _=0;_<o.length;_+=6){const w=o[_+0],b=o[_+2],C=o[_+4],T=Math.max(w,b,C),P=Math.min(w,b,C);T>.9&&P<.1&&(w<.2&&(o[_+0]+=1),b<.2&&(o[_+2]+=1),C<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,w){const b=_*3;w.x=e[b+0],w.y=e[b+1],w.z=e[b+2]}function v(){const _=new F,w=new F,b=new F,C=new F,T=new de,P=new de,B=new de;for(let R=0,D=0;R<s.length;R+=9,D+=6){_.set(s[R+0],s[R+1],s[R+2]),w.set(s[R+3],s[R+4],s[R+5]),b.set(s[R+6],s[R+7],s[R+8]),T.set(o[D+0],o[D+1]),P.set(o[D+2],o[D+3]),B.set(o[D+4],o[D+5]),C.copy(_).add(w).add(b).divideScalar(3);const k=x(C);y(T,D+0,_,k),y(P,D+2,w,k),y(B,D+4,b,k)}}function y(_,w,b,C){C<0&&_.x===1&&(o[w]=_.x-1),b.x===0&&b.z===0&&(o[w]=C/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xo(e.vertices,e.indices,e.radius,e.details)}}class Bp extends Xo{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Bp(e.radius,e.detail)}}const Xg=new F,Jg=new F,a_=new F,Kg=new nc;class B0 extends yt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(lc*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:y,b:x,c:g}=Kg;if(y.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Kg.getNormal(a_),f[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,f[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const w=(_+1)%3,b=f[_],C=f[w],T=Kg[d[_]],P=Kg[d[w]],B=`${b}_${C}`,R=`${C}_${b}`;R in p&&p[R]?(a_.dot(p[R].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(P.x,P.y,P.z)),p[R]=null):B in p||(p[B]={index0:c[_],index1:c[w],normal:a_.clone()})}}for(const v in p)if(p[v]){const{index0:y,index1:x}=p[v];Xg.fromBufferAttribute(a,y),Jg.fromBufferAttribute(a,x),m.push(Xg.x,Xg.y,Xg.z),m.push(Jg.x,Jg.y,Jg.z)}this.setAttribute("position",new et(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class dc extends Qh{constructor(e){super(e),this.uuid=Ii(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Qh().fromJSON(i))}return this}}const UV={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=nF(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,f,p,m;if(r&&(s=$V(t,e,s,n)),t.length>80*n){a=c=t[0],l=d=t[1];for(let v=n;v<i;v+=n)f=t[v],p=t[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>d&&(d=p);m=Math.max(c-a,d-l),m=m!==0?32767/m:0}return qh(s,o,n,a,l,m,0),o}};function nF(t,e,n,r,i){let s,o;if(i===eW(t,e,n,r)>0)for(s=e;s<n;s+=r)o=oR(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=oR(s,t[s],t[s+1],o);return o&&Ry(o,o.next)&&(ep(o),o=o.next),o}function xc(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(Ry(n,n.next)||Mn(n.prev,n,n.next)===0)){if(ep(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function qh(t,e,n,r,i,s,o){if(!t)return;!o&&s&&JV(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?zV(t,r,i,s):kV(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),ep(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=HV(xc(t),e,n),qh(t,e,n,r,i,s,2)):o===2&&GV(t,e,n,r,i,s):qh(xc(t),e,n,r,i,s,1);break}}}function kV(t){const e=t.prev,n=t,r=t.next;if(Mn(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,d=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=d&&v.x<=p&&v.y>=f&&v.y<=m&&Qu(i,a,s,l,o,c,v.x,v.y)&&Mn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function zV(t,e,n,r){const i=t.prev,s=t,o=t.next;if(Mn(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,d=i.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=d<f?d<p?d:p:f<p?f:p,y=a>l?a>c?a:c:l>c?l:c,x=d>f?d>p?d:p:f>p?f:p,g=Iw(m,v,e,n,r),_=Iw(y,x,e,n,r);let w=t.prevZ,b=t.nextZ;for(;w&&w.z>=g&&b&&b.z<=_;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=x&&w!==i&&w!==o&&Qu(a,d,l,f,c,p,w.x,w.y)&&Mn(w.prev,w,w.next)>=0||(w=w.prevZ,b.x>=m&&b.x<=y&&b.y>=v&&b.y<=x&&b!==i&&b!==o&&Qu(a,d,l,f,c,p,b.x,b.y)&&Mn(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;w&&w.z>=g;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=x&&w!==i&&w!==o&&Qu(a,d,l,f,c,p,w.x,w.y)&&Mn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;b&&b.z<=_;){if(b.x>=m&&b.x<=y&&b.y>=v&&b.y<=x&&b!==i&&b!==o&&Qu(a,d,l,f,c,p,b.x,b.y)&&Mn(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function HV(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!Ry(i,s)&&rF(i,r,r.next,s)&&Zh(i,s)&&Zh(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),ep(r),ep(r.next),r=t=s),r=r.next}while(r!==t);return xc(r)}function GV(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&QV(o,a)){let l=iF(o,a);o=xc(o,o.next),l=xc(l,l.next),qh(o,e,n,r,i,s,0),qh(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function $V(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=nF(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(YV(c));for(i.sort(VV),s=0;s<i.length;s++)n=WV(i[s],n);return n}function VV(t,e){return t.x-e.x}function WV(t,e){const n=jV(t,e);if(!n)return e;const r=iF(n,t);return xc(r,r.next),xc(n,n.next)}function jV(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let d=1/0,f;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&Qu(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(f=Math.abs(o-n.y)/(s-n.x),Zh(n,t)&&(f<d||f===d&&(n.x>i.x||n.x===i.x&&XV(i,n)))&&(i=n,d=f)),n=n.next;while(n!==a);return i}function XV(t,e){return Mn(t.prev,t,e.prev)<0&&Mn(e.next,t,t.next)<0}function JV(t,e,n,r){let i=t;do i.z===0&&(i.z=Iw(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,KV(i)}function KV(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function Iw(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function YV(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Qu(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function QV(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!qV(t,e)&&(Zh(t,e)&&Zh(e,t)&&ZV(t,e)&&(Mn(t.prev,t,e.prev)||Mn(t,e.prev,e))||Ry(t,e)&&Mn(t.prev,t,t.next)>0&&Mn(e.prev,e,e.next)>0)}function Mn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ry(t,e){return t.x===e.x&&t.y===e.y}function rF(t,e,n,r){const i=Qg(Mn(t,e,n)),s=Qg(Mn(t,e,r)),o=Qg(Mn(n,r,t)),a=Qg(Mn(n,r,e));return!!(i!==s&&o!==a||i===0&&Yg(t,n,e)||s===0&&Yg(t,r,e)||o===0&&Yg(n,t,r)||a===0&&Yg(n,e,r))}function Yg(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Qg(t){return t>0?1:t<0?-1:0}function qV(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&rF(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Zh(t,e){return Mn(t.prev,t,t.next)<0?Mn(t,e,t.next)>=0&&Mn(t,t.prev,e)>=0:Mn(t,e,t.prev)<0||Mn(t,t.next,e)<0}function ZV(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function iF(t,e){const n=new Bw(t.i,t.x,t.y),r=new Bw(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function oR(t,e,n,r){const i=new Bw(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ep(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Bw(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function eW(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class io{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return io.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];aR(e),lR(r,e);let o=e.length;n.forEach(aR);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,lR(r,n[l]);const a=UV.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function aR(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function lR(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class $d extends yt{constructor(e=new dc([new de(.5,.5),new de(-.5,.5),new de(-.5,-.5),new de(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new et(i,3)),this.setAttribute("uv",new et(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,v=n.bevelSize!==void 0?n.bevelSize:m-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:tW;let w,b=!1,C,T,P,B;g&&(w=g.getSpacedPoints(d),b=!0,p=!1,C=g.computeFrenetFrames(d,!1),T=new F,P=new F,B=new F),p||(x=0,m=0,v=0,y=0);const R=a.extractPoints(c);let D=R.shape;const k=R.holes;if(!io.isClockWise(D)){D=D.reverse();for(let ve=0,re=k.length;ve<re;ve++){const he=k[ve];io.isClockWise(he)&&(k[ve]=he.reverse())}}const $=io.triangulateShape(D,k),j=D;for(let ve=0,re=k.length;ve<re;ve++){const he=k[ve];D=D.concat(he)}function H(ve,re,he){return re||console.error("THREE.ExtrudeGeometry: vec does not exist"),ve.clone().addScaledVector(re,he)}const ie=D.length,Z=$.length;function U(ve,re,he){let Fe,Be,ke;const Ze=ve.x-re.x,ze=ve.y-re.y,tt=he.x-ve.x,ht=he.y-ve.y,V=Ze*Ze+ze*ze,N=Ze*ht-ze*tt;if(Math.abs(N)>Number.EPSILON){const Y=Math.sqrt(V),ce=Math.sqrt(tt*tt+ht*ht),Se=re.x-ze/Y,Te=re.y+Ze/Y,Ke=he.x-ht/ce,Ue=he.y+tt/ce,ge=((Ke-Se)*ht-(Ue-Te)*tt)/(Ze*ht-ze*tt);Fe=Se+Ze*ge-ve.x,Be=Te+ze*ge-ve.y;const Je=Fe*Fe+Be*Be;if(Je<=2)return new de(Fe,Be);ke=Math.sqrt(Je/2)}else{let Y=!1;Ze>Number.EPSILON?tt>Number.EPSILON&&(Y=!0):Ze<-Number.EPSILON?tt<-Number.EPSILON&&(Y=!0):Math.sign(ze)===Math.sign(ht)&&(Y=!0),Y?(Fe=-ze,Be=Ze,ke=Math.sqrt(V)):(Fe=Ze,Be=ze,ke=Math.sqrt(V/2))}return new de(Fe/ke,Be/ke)}const O=[];for(let ve=0,re=j.length,he=re-1,Fe=ve+1;ve<re;ve++,he++,Fe++)he===re&&(he=0),Fe===re&&(Fe=0),O[ve]=U(j[ve],j[he],j[Fe]);const z=[];let ne,J=O.concat();for(let ve=0,re=k.length;ve<re;ve++){const he=k[ve];ne=[];for(let Fe=0,Be=he.length,ke=Be-1,Ze=Fe+1;Fe<Be;Fe++,ke++,Ze++)ke===Be&&(ke=0),Ze===Be&&(Ze=0),ne[Fe]=U(he[Fe],he[ke],he[Ze]);z.push(ne),J=J.concat(ne)}for(let ve=0;ve<x;ve++){const re=ve/x,he=m*Math.cos(re*Math.PI/2),Fe=v*Math.sin(re*Math.PI/2)+y;for(let Be=0,ke=j.length;Be<ke;Be++){const Ze=H(j[Be],O[Be],Fe);K(Ze.x,Ze.y,-he)}for(let Be=0,ke=k.length;Be<ke;Be++){const Ze=k[Be];ne=z[Be];for(let ze=0,tt=Ze.length;ze<tt;ze++){const ht=H(Ze[ze],ne[ze],Fe);K(ht.x,ht.y,-he)}}}const q=v+y;for(let ve=0;ve<ie;ve++){const re=p?H(D[ve],J[ve],q):D[ve];b?(P.copy(C.normals[0]).multiplyScalar(re.x),T.copy(C.binormals[0]).multiplyScalar(re.y),B.copy(w[0]).add(P).add(T),K(B.x,B.y,B.z)):K(re.x,re.y,0)}for(let ve=1;ve<=d;ve++)for(let re=0;re<ie;re++){const he=p?H(D[re],J[re],q):D[re];b?(P.copy(C.normals[ve]).multiplyScalar(he.x),T.copy(C.binormals[ve]).multiplyScalar(he.y),B.copy(w[ve]).add(P).add(T),K(B.x,B.y,B.z)):K(he.x,he.y,f/d*ve)}for(let ve=x-1;ve>=0;ve--){const re=ve/x,he=m*Math.cos(re*Math.PI/2),Fe=v*Math.sin(re*Math.PI/2)+y;for(let Be=0,ke=j.length;Be<ke;Be++){const Ze=H(j[Be],O[Be],Fe);K(Ze.x,Ze.y,f+he)}for(let Be=0,ke=k.length;Be<ke;Be++){const Ze=k[Be];ne=z[Be];for(let ze=0,tt=Ze.length;ze<tt;ze++){const ht=H(Ze[ze],ne[ze],Fe);b?K(ht.x,ht.y+w[d-1].y,w[d-1].x+he):K(ht.x,ht.y,f+he)}}}ee(),_e();function ee(){const ve=i.length/3;if(p){let re=0,he=ie*re;for(let Fe=0;Fe<Z;Fe++){const Be=$[Fe];je(Be[2]+he,Be[1]+he,Be[0]+he)}re=d+x*2,he=ie*re;for(let Fe=0;Fe<Z;Fe++){const Be=$[Fe];je(Be[0]+he,Be[1]+he,Be[2]+he)}}else{for(let re=0;re<Z;re++){const he=$[re];je(he[2],he[1],he[0])}for(let re=0;re<Z;re++){const he=$[re];je(he[0]+ie*d,he[1]+ie*d,he[2]+ie*d)}}r.addGroup(ve,i.length/3-ve,0)}function _e(){const ve=i.length/3;let re=0;be(j,re),re+=j.length;for(let he=0,Fe=k.length;he<Fe;he++){const Be=k[he];be(Be,re),re+=Be.length}r.addGroup(ve,i.length/3-ve,1)}function be(ve,re){let he=ve.length;for(;--he>=0;){const Fe=he;let Be=he-1;Be<0&&(Be=ve.length-1);for(let ke=0,Ze=d+x*2;ke<Ze;ke++){const ze=ie*ke,tt=ie*(ke+1),ht=re+Fe+ze,V=re+Be+ze,N=re+Be+tt,Y=re+Fe+tt;Xe(ht,V,N,Y)}}}function K(ve,re,he){l.push(ve),l.push(re),l.push(he)}function je(ve,re,he){Ee(ve),Ee(re),Ee(he);const Fe=i.length/3,Be=_.generateTopUV(r,i,Fe-3,Fe-2,Fe-1);Me(Be[0]),Me(Be[1]),Me(Be[2])}function Xe(ve,re,he,Fe){Ee(ve),Ee(re),Ee(Fe),Ee(re),Ee(he),Ee(Fe);const Be=i.length/3,ke=_.generateSideWallUV(r,i,Be-6,Be-3,Be-2,Be-1);Me(ke[0]),Me(ke[1]),Me(ke[3]),Me(ke[1]),Me(ke[2]),Me(ke[3])}function Ee(ve){i.push(l[ve*3+0]),i.push(l[ve*3+1]),i.push(l[ve*3+2])}function Me(ve){s.push(ve.x),s.push(ve.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return nW(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new qA[i.type]().fromJSON(i)),new $d(r,e.options)}}const tW={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],d=e[i*3+1];return[new de(s,o),new de(a,l),new de(c,d)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],d=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],y=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-d)<Math.abs(o-c)?[new de(o,1-l),new de(c,1-f),new de(p,1-v),new de(y,1-g)]:[new de(a,1-l),new de(d,1-f),new de(m,1-v),new de(x,1-g)]}};function nW(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Dp extends Xo{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Dp(e.radius,e.detail)}}class Vd extends Xo{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Vd(e.radius,e.detail)}}class Lp extends yt{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],d=[];let f=e;const p=(n-e)/i,m=new F,v=new de;for(let y=0;y<=i;y++){for(let x=0;x<=r;x++){const g=s+x/r*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/n+1)/2,v.y=(m.y/n+1)/2,d.push(v.x,v.y)}f+=p}for(let y=0;y<i;y++){const x=y*(r+1);for(let g=0;g<r;g++){const _=g+x,w=_,b=_+r+1,C=_+r+2,T=_+1;a.push(w,b,T),a.push(b,C,T)}}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(c,3)),this.setAttribute("uv",new et(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lp(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Fp extends yt{constructor(e=new dc([new de(0,.5),new de(-.5,-.5),new de(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new et(i,3)),this.setAttribute("normal",new et(s,3)),this.setAttribute("uv",new et(o,2));function c(d){const f=i.length/3,p=d.extractPoints(n);let m=p.shape;const v=p.holes;io.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=v.length;x<g;x++){const _=v[x];io.isClockWise(_)===!0&&(v[x]=_.reverse())}const y=io.triangulateShape(m,v);for(let x=0,g=v.length;x<g;x++){const _=v[x];m=m.concat(_)}for(let x=0,g=m.length;x<g;x++){const _=m[x];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let x=0,g=y.length;x<g;x++){const _=y[x],w=_[0]+f,b=_[1]+f,C=_[2]+f;r.push(w,b,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return rW(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new Fp(r,e.curveSegments)}}function rW(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Wd extends yt{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const d=[],f=new F,p=new F,m=[],v=[],y=[],x=[];for(let g=0;g<=r;g++){const _=[],w=g/r;let b=0;g===0&&o===0?b=.5/n:g===r&&l===Math.PI&&(b=-.5/n);for(let C=0;C<=n;C++){const T=C/n;f.x=-e*Math.cos(i+T*s)*Math.sin(o+w*a),f.y=e*Math.cos(o+w*a),f.z=e*Math.sin(i+T*s)*Math.sin(o+w*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),y.push(p.x,p.y,p.z),x.push(T+b,1-w),_.push(c++)}d.push(_)}for(let g=0;g<r;g++)for(let _=0;_<n;_++){const w=d[g][_+1],b=d[g][_],C=d[g+1][_],T=d[g+1][_+1];(g!==0||o>0)&&m.push(w,b,T),(g!==r-1||l<Math.PI)&&m.push(b,C,T)}this.setIndex(m),this.setAttribute("position",new et(v,3)),this.setAttribute("normal",new et(y,3)),this.setAttribute("uv",new et(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Op extends Xo{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Op(e.radius,e.detail)}}class Np extends yt{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],d=new F,f=new F,p=new F;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const y=v/i*s,x=m/r*Math.PI*2;f.x=(e+n*Math.cos(x))*Math.cos(y),f.y=(e+n*Math.cos(x))*Math.sin(y),f.z=n*Math.sin(x),a.push(f.x,f.y,f.z),d.x=e*Math.cos(y),d.y=e*Math.sin(y),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const y=(i+1)*m+v-1,x=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,_=(i+1)*m+v;o.push(y,x,_),o.push(x,g,_)}this.setIndex(o),this.setAttribute("position",new et(a,3)),this.setAttribute("normal",new et(l,3)),this.setAttribute("uv",new et(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Np(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Up extends yt{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],d=[],f=new F,p=new F,m=new F,v=new F,y=new F,x=new F,g=new F;for(let w=0;w<=r;++w){const b=w/r*s*Math.PI*2;_(b,s,o,e,m),_(b+.01,s,o,e,v),x.subVectors(v,m),g.addVectors(v,m),y.crossVectors(x,g),g.crossVectors(y,x),y.normalize(),g.normalize();for(let C=0;C<=i;++C){const T=C/i*Math.PI*2,P=-n*Math.cos(T),B=n*Math.sin(T);f.x=m.x+(P*g.x+B*y.x),f.y=m.y+(P*g.y+B*y.y),f.z=m.z+(P*g.z+B*y.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),d.push(w/r),d.push(C/i)}}for(let w=1;w<=r;w++)for(let b=1;b<=i;b++){const C=(i+1)*(w-1)+(b-1),T=(i+1)*w+(b-1),P=(i+1)*w+b,B=(i+1)*(w-1)+b;a.push(C,T,B),a.push(T,P,B)}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(c,3)),this.setAttribute("uv",new et(d,2));function _(w,b,C,T,P){const B=Math.cos(w),R=Math.sin(w),D=C/b*w,k=Math.cos(D);P.x=T*(2+k)*.5*B,P.y=T*(2+k)*R*.5,P.z=T*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Up(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class kp extends yt{constructor(e=new YA(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,c=new de;let d=new F;const f=[],p=[],m=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new et(f,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(m,2));function y(){for(let w=0;w<n;w++)x(w);x(s===!1?n:0),_(),g()}function x(w){d=e.getPointAt(w/n,d);const b=o.normals[w],C=o.binormals[w];for(let T=0;T<=i;T++){const P=T/i*Math.PI*2,B=Math.sin(P),R=-Math.cos(P);l.x=R*b.x+B*C.x,l.y=R*b.y+B*C.y,l.z=R*b.z+B*C.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+r*l.x,a.y=d.y+r*l.y,a.z=d.z+r*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let w=1;w<=n;w++)for(let b=1;b<=i;b++){const C=(i+1)*(w-1)+(b-1),T=(i+1)*w+(b-1),P=(i+1)*w+b,B=(i+1)*(w-1)+b;v.push(C,T,B),v.push(T,P,B)}}function _(){for(let w=0;w<=n;w++)for(let b=0;b<=i;b++)c.x=w/n,c.y=b/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new kp(new qA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ZA extends yt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,y=p+m;v<y;v+=3)for(let x=0;x<3;x++){const g=a.getX(v+x),_=a.getX(v+(x+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),cR(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const d=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,d),s.fromBufferAttribute(o,f),cR(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new et(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function cR(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var uR=Object.freeze({__proto__:null,BoxGeometry:so,CapsuleGeometry:Rp,CircleGeometry:Pp,ConeGeometry:Ip,CylinderGeometry:Rc,DodecahedronGeometry:Bp,EdgesGeometry:B0,ExtrudeGeometry:$d,IcosahedronGeometry:Dp,LatheGeometry:Gd,OctahedronGeometry:Vd,PlaneGeometry:Tc,PolyhedronGeometry:Xo,RingGeometry:Lp,ShapeGeometry:Fp,SphereGeometry:Wd,TetrahedronGeometry:Op,TorusGeometry:Np,TorusKnotGeometry:Up,TubeGeometry:kp,WireframeGeometry:ZA});class sF extends Fn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ne(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class oF extends Wn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class zp extends Fn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ne(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ll,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Jo extends zp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new de(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ln(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ne(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ne(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ne(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class aF extends Fn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ne(16777215),this.specular=new Ne(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ll,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ep,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lF extends Fn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ne(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ll,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class eb extends Fn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ll,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class cF extends Fn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ll,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ep,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uF extends Fn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ne(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ll,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dF extends zr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Yi(t,e,n){return tb(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function rc(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function tb(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fF(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function Dw(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function nb(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function iW(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<n||v>=r)){f.push(c.times[m]);for(let y=0;y<d;++y)p.push(c.values[m*d+y])}}f.length!==0&&(c.times=rc(f,c.times.constructor),c.values=rc(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function sW(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let d=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let y;if(s<=a.times[0]){const g=d,_=f-d;y=Yi(a.values,g,_)}else if(s>=a.times[v]){const g=v*f+d,_=g+f-d;y=Yi(a.values,g,_)}else{const g=a.createInterpolant(),_=d,w=f-d;g.evaluate(s),y=Yi(g.resultBuffer,_,w)}l==="quaternion"&&new Vn().fromArray(y).normalize().conjugate().toArray(y);const x=c.times.length;for(let g=0;g<x;++g){const _=g*m+p;if(l==="quaternion")Vn.multiplyQuaternionsFlat(c.values,_,y,0,c.values,_);else{const w=m-p*2;for(let b=0;b<w;++b)c.values[_+b]-=y[b]}}}return t.blendMode=TA,t}const oW={arraySlice:Yi,convertArray:rc,isTypedArray:tb,getKeyframeOrder:fF,sortedArray:Dw,flattenJSON:nb,subclip:iW,makeClipAdditive:sW};class jd{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hF extends jd{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zl,endingEnd:Zl}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case ec:s=e,a=2*n-r;break;case Jh:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case ec:o=e,l=2*r-n;break;case Jh:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,d=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-n)/(i-n),y=v*v,x=y*v,g=-p*x+2*p*y-p*v,_=(1+p)*x+(-1.5-2*p)*y+(-.5+p)*v+1,w=(-1-m)*x+(1.5+m)*y+.5*v,b=m*x-m*y;for(let C=0;C!==a;++C)s[C]=g*o[d+C]+_*o[c+C]+w*o[l+C]+b*o[f+C];return s}}class rb extends jd{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(r-n)/(i-n),f=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*d;return s}}class pF extends jd{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Us{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rc(n,this.TimeBufferType),this.values=rc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:rc(e.times,Array),values:rc(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new pF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Ed:n=this.InterpolantFactoryMethodDiscrete;break;case yc:n=this.InterpolantFactoryMethodLinear;break;case qv:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ed;case this.InterpolantFactoryMethodLinear:return yc;case this.InterpolantFactoryMethodSmooth:return qv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Yi(r,s,o),this.values=Yi(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&tb(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Yi(this.times),n=Yi(this.values),r=this.getValueSize(),i=this.getInterpolation()===qv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,m=f+r;for(let v=0;v!==r;++v){const y=n[f+v];if(y!==n[p+v]||y!==n[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let m=0;m!==r;++m)n[p+m]=n[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=Yi(e,0,o),this.values=Yi(n,0,o*r)):(this.times=e,this.values=n),this}clone(){const e=Yi(this.times,0),n=Yi(this.values,0),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Us.prototype.TimeBufferType=Float32Array;Us.prototype.ValueBufferType=Float32Array;Us.prototype.DefaultInterpolation=yc;class Pc extends Us{}Pc.prototype.ValueTypeName="bool";Pc.prototype.ValueBufferType=Array;Pc.prototype.DefaultInterpolation=Ed;Pc.prototype.InterpolantFactoryMethodLinear=void 0;Pc.prototype.InterpolantFactoryMethodSmooth=void 0;class ib extends Us{}ib.prototype.ValueTypeName="color";class Td extends Us{}Td.prototype.ValueTypeName="number";class mF extends jd{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let d=c+a;c!==d;c+=4)Vn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class qa extends Us{InterpolantFactoryMethodLinear(e){return new mF(this.times,this.values,this.getValueSize(),e)}}qa.prototype.ValueTypeName="quaternion";qa.prototype.DefaultInterpolation=yc;qa.prototype.InterpolantFactoryMethodSmooth=void 0;class Ic extends Us{}Ic.prototype.ValueTypeName="string";Ic.prototype.ValueBufferType=Array;Ic.prototype.DefaultInterpolation=Ed;Ic.prototype.InterpolantFactoryMethodLinear=void 0;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;class Rd extends Us{}Rd.prototype.ValueTypeName="vector";class Pd{constructor(e,n=-1,r,i=yy){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Ii(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(lW(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Us.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=fF(l);l=Dw(l,1,d),c=Dw(c,1,d),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Td(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const f=d[1];let p=i[f];p||(i[f]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,v,y){if(m.length!==0){const x=[],g=[];nb(m,x,g,v),x.length!==0&&y.push(new f(p,x,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let y=0;y<p[v].morphTargets.length;y++)m[p[v].morphTargets[y]]=-1;for(const y in m){const x=[],g=[];for(let _=0;_!==p[v].morphTargets.length;++_){const w=p[v];x.push(w.time),g.push(w.morphTarget===y?1:0)}i.push(new Td(".morphTargetInfluence["+y+"]",x,g))}l=m.length*o}else{const m=".bones["+n[f].name+"]";r(Rd,m+".position",p,"pos",i),r(qa,m+".quaternion",p,"rot",i),r(Rd,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function aW(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Td;case"vector":case"vector2":case"vector3":case"vector4":return Rd;case"color":return ib;case"quaternion":return qa;case"bool":case"boolean":return Pc;case"string":return Ic}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function lW(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=aW(t.type);if(t.times===void 0){const n=[],r=[];nb(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const _c={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class sb{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(d){a++,s===!1&&i.onStart!==void 0&&i.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return c.push(d,f),this},this.removeHandler=function(d){const f=c.indexOf(d);return f!==-1&&c.splice(f,2),this},this.getHandler=function(d){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return v}return null}}}const qu=new sb;let Hr=class{constructor(e){this.manager=e!==void 0?e:qu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Ao={};class cW extends Error{constructor(e,n){super(e),this.response=n}}class pi extends Hr{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=_c.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Ao[e]!==void 0){Ao[e].push({onLoad:n,onProgress:r,onError:i});return}Ao[e]=[],Ao[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Ao[e],f=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let y=0;const x=new ReadableStream({start(g){_();function _(){f.read().then(({done:w,value:b})=>{if(w)g.close();else{y+=b.byteLength;const C=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:m});for(let T=0,P=d.length;T<P;T++){const B=d[T];B.onProgress&&B.onProgress(C)}g.enqueue(b),_()}})}}});return new Response(x)}else throw new cW(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{_c.add(e,c);const d=Ao[e];delete Ao[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=Ao[e];if(d===void 0)throw this.manager.itemError(e),c;delete Ao[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class uW extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new pi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=Pd.parse(e[r]);n.push(i)}return n}}class dW extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new jA,l=new pi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Zt),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)d(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+y]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Zt),a.format=p.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class tp extends Hr{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=_c.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Yh("img");function l(){d(),_c.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(f){d(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class fW extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=new Cp,o=new tp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class hW extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new cd,a=new pi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Sr,o.wrapT=c.wrapT!==void 0?c.wrapT:Sr,o.magFilter=c.magFilter!==void 0?c.magFilter:Zt,o.minFilter=c.minFilter!==void 0?c.minFilter:Zt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ds),c.mipmapCount===1&&(o.minFilter=Zt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c))},r,i),o}}class Hp extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=new dn,o=new tp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class ul extends zt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ne(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class gF extends ul{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ne(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const l_=new Ve,dR=new F,fR=new F;class ob{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.map=null,this.mapPass=null,this.matrix=new Ve,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _y,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new Bt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;dR.setFromMatrixPosition(e.matrixWorld),n.position.copy(dR),fR.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(fR),n.updateMatrixWorld(),l_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l_),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(l_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pW extends ob{constructor(){super(new rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Ad*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ab extends ul{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new pW}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const hR=new Ve,Uf=new F,c_=new F;class mW extends ob{constructor(){super(new rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new de(4,2),this._viewportCount=6,this._viewports=[new Bt(2,1,1,1),new Bt(0,1,1,1),new Bt(3,1,1,1),new Bt(1,1,1,1),new Bt(3,0,1,1),new Bt(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Uf.setFromMatrixPosition(e.matrixWorld),r.position.copy(Uf),c_.copy(r.position),c_.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(c_),r.updateMatrixWorld(),i.makeTranslation(-Uf.x,-Uf.y,-Uf.z),hR.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hR)}}class lb extends ul{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new mW}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class gW extends ob{constructor(){super(new Ps(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class cb extends ul{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.shadow=new gW}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class vF extends ul{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class yF extends ul{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class xF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class Py extends ul{constructor(e=new xF,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Iy extends Hr{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new pi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=Iy.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Ne().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Ne().setHex(o.value);break;case"v2":i.uniforms[s].value=new de().fromArray(o.value);break;case"v3":i.uniforms[s].value=new F().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Bt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Tt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ve().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new de().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new de().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:sF,SpriteMaterial:zA,RawShaderMaterial:oF,ShaderMaterial:Wn,PointsMaterial:My,MeshPhysicalMaterial:Jo,MeshStandardMaterial:zp,MeshPhongMaterial:aF,MeshToonMaterial:lF,MeshNormalMaterial:eb,MeshLambertMaterial:cF,MeshDepthMaterial:NA,MeshDistanceMaterial:UA,MeshBasicMaterial:ci,MeshMatcapMaterial:uF,LineDashedMaterial:dF,LineBasicMaterial:zr,Material:Fn};return new n[e]}}class Id{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class ub extends yt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class _F extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new pi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,v){if(n[v]!==void 0)return n[v];const x=m.interleavedBuffers[v],g=s(m,x.buffer),_=Ku(x.type,g),w=new Tp(_,x.stride);return w.uuid=x.uuid,n[v]=w,w}function s(m,v){if(r[v]!==void 0)return r[v];const x=m.arrayBuffers[v],g=new Uint32Array(x).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new ub:new yt,a=e.data.index;if(a!==void 0){const m=Ku(a.type,a.array);o.setIndex(new Dt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let y;if(v.isInterleavedBufferAttribute){const x=i(e.data,v.data);y=new ui(x,v.itemSize,v.offset,v.normalized)}else{const x=Ku(v.type,v.array),g=v.isInstancedBufferAttribute?Cd:Dt;y=new g(x,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),v.updateRange!==void 0&&(y.updateRange.offset=v.updateRange.offset,y.updateRange.count=v.updateRange.count),o.setAttribute(m,y)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],y=[];for(let x=0,g=v.length;x<g;x++){const _=v[x];let w;if(_.isInterleavedBufferAttribute){const b=i(e.data,_.data);w=new ui(b,_.itemSize,_.offset,_.normalized)}else{const b=Ku(_.type,_.array);w=new Dt(b,_.itemSize,_.normalized)}_.name!==void 0&&(w.name=_.name),y.push(w)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const y=f[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new F;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new mi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class vW extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?Id.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new pi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Id.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new pi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),n!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new dc().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new GA().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new _F;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in uR?a=uR[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new Iy;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Pd.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(d)}else return l.data?{data:Ku(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new sb(n);s=new tp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new cd(g.data,g.width,g.height)))}i[f.uuid]=new tc(m)}else{const m=a(f.url);i[f.uuid]=new tc(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Ku(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new tp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new cd(v.data,v.width,v.height)))}r[l.uuid]=new tc(d)}else{const d=await s(l.url);r[l.uuid]=new tc(d)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let d;Array.isArray(c)?(d=new Cp,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new cd:d=new dn,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=r(a.mapping,yW)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=r(a.wrap[0],pR),d.wrapT=r(a.wrap[1],pR)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=r(a.minFilter,mR)),a.magFilter!==void 0&&(d.magFilter=r(a.magFilter,mR)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(d.userData=a.userData),i[a.uuid]=d}return i}parseObject(e,n,r,i,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(r[x])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let d,f;switch(e.type){case"Scene":o=new Md,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ne(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Ay(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Ey(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ps(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new vF(e.color,e.intensity);break;case"DirectionalLight":o=new cb(e.color,e.intensity);break;case"PointLight":o=new lb(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new yF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new ab(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new gF(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Py().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),f=l(e.material),o=new HA(d,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),f=l(e.material),o=new qn(d,f);break;case"InstancedMesh":d=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new $A(d,f,p),o.instanceMatrix=new Cd(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Cd(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new K3;break;case"Line":o=new Vo(a(e.geometry),l(e.material));break;case"LineLoop":o=new VA(a(e.geometry),l(e.material));break;case"LineSegments":o=new Os(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new WA(a(e.geometry),l(e.material));break;case"Sprite":o=new J3(l(e.material));break;case"Group":o=new Lo;break;case"Bone":o=new by;break;default:o=new zt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],n,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],y=o.getObjectByProperty("uuid",v.object);y!==void 0&&o.addLevel(y,v.distance,v.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const yW={UVMapping:gy,CubeReflectionMapping:Xa,CubeRefractionMapping:Ja,EquirectangularReflectionMapping:Wh,EquirectangularRefractionMapping:jh,CubeUVReflectionMapping:kd},pR={RepeatWrapping:Ka,ClampToEdgeWrapping:Sr,MirroredRepeatWrapping:wd},mR={NearestFilter:nn,NearestMipmapNearestFilter:Xh,NearestMipmapLinearFilter:ad,LinearFilter:Zt,LinearMipmapNearestFilter:vy,LinearMipmapLinearFilter:Ds};class SF extends Hr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=_c.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){_c.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let qg;class db{static getContext(){return qg===void 0&&(qg=new(window.AudioContext||window.webkitAudioContext)),qg}static setContext(e){qg=e}}class xW extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new pi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);db.getContext().decodeAudioData(c,function(f){n(f)},a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class _W extends Py{constructor(e,n,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new Ne().set(e),s=new Ne().set(n),o=new F(i.r,i.g,i.b),a=new F(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class SW extends Py{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const r=new Ne().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const gR=new Ve,vR=new Ve,Ml=new Ve;class wW{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Ml.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(lc*n.fov*.5)/n.zoom;let a,l;vR.elements[12]=-i,gR.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Ml.elements[0]=2*n.near/(l-a),Ml.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ml),a=-o*n.aspect-s,l=o*n.aspect-s,Ml.elements[0]=2*n.near/(l-a),Ml.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ml)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(vR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(gR)}}class fb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=yR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=yR();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function yR(){return(typeof performance>"u"?Date:performance).now()}const Cl=new F,xR=new Vn,EW=new F,Tl=new F;class AW extends zt{constructor(){super(),this.type="AudioListener",this.context=db.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Cl,xR,EW),Tl.set(0,0,-1).applyQuaternion(xR),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Cl.x,i),n.positionY.linearRampToValueAtTime(Cl.y,i),n.positionZ.linearRampToValueAtTime(Cl.z,i),n.forwardX.linearRampToValueAtTime(Tl.x,i),n.forwardY.linearRampToValueAtTime(Tl.y,i),n.forwardZ.linearRampToValueAtTime(Tl.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Cl.x,Cl.y,Cl.z),n.setOrientation(Tl.x,Tl.y,Tl.z,r.x,r.y,r.z)}}class wF extends zt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Rl=new F,_R=new Vn,bW=new F,Pl=new F;class MW extends wF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Rl,_R,bW),Pl.set(0,0,1).applyQuaternion(_R);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Rl.x,r),n.positionY.linearRampToValueAtTime(Rl.y,r),n.positionZ.linearRampToValueAtTime(Rl.z,r),n.orientationX.linearRampToValueAtTime(Pl.x,r),n.orientationY.linearRampToValueAtTime(Pl.y,r),n.orientationZ.linearRampToValueAtTime(Pl.z,r)}else n.setPosition(Rl.x,Rl.y,Rl.z),n.setOrientation(Pl.x,Pl.y,Pl.z)}}class CW{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class EF{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){Vn.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;Vn.multiplyQuaternionsFlat(e,o,e,n,e,r),Vn.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const hb="\\[\\]\\.:\\/",TW=new RegExp("["+hb+"]","g"),pb="[^"+hb+"]",RW="[^"+hb.replace("\\.","")+"]",PW=/((?:WC+[\/:])*)/.source.replace("WC",pb),IW=/(WCOD+)?/.source.replace("WCOD",RW),BW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pb),DW=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pb),LW=new RegExp("^"+PW+IW+BW+DW+"$"),FW=["material","materials","bones","map"];class OW{constructor(e,n,r){const i=r||Ut.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Ut{constructor(e,n,r){this.path=n,this.parsedPath=r||Ut.parseTrackName(n),this.node=Ut.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Ut.Composite(e,n,r):new Ut(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(TW,"")}static parseTrackName(e){const n=LW.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);FW.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=Ut.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ut.Composite=OW;Ut.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ut.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ut.prototype.GetterByBindingType=[Ut.prototype._getValue_direct,Ut.prototype._getValue_array,Ut.prototype._getValue_arrayElement,Ut.prototype._getValue_toArray];Ut.prototype.SetterByBindingTypeAndVersioning=[[Ut.prototype._setValue_direct,Ut.prototype._setValue_direct_setNeedsUpdate,Ut.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_array,Ut.prototype._setValue_array_setNeedsUpdate,Ut.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_arrayElement,Ut.prototype._setValue_arrayElement_setNeedsUpdate,Ut.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_fromArray,Ut.prototype._setValue_fromArray_setNeedsUpdate,Ut.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class NW{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ii(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const p=arguments[d],m=p.uuid;let v=n[m];if(v===void 0){v=l++,n[m]=v,e.push(p);for(let y=0,x=o;y!==x;++y)s[y].push(new Ut(p,r[y],i[y]))}else if(v<c){a=e[v];const y=--c,x=e[y];n[x.uuid]=v,e[v]=x,n[m]=y,e[y]=p;for(let g=0,_=o;g!==_;++g){const w=s[g],b=w[y];let C=w[v];w[v]=b,C===void 0&&(C=new Ut(p,r[g],i[g])),w[y]=C}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=n[c];if(d!==void 0&&d>=s){const f=s++,p=e[f];n[p.uuid]=d,e[d]=p,n[c]=f,e[f]=l;for(let m=0,v=i;m!==v;++m){const y=r[m],x=y[f],g=y[d];y[d]=x,y[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,f=n[d];if(f!==void 0)if(delete n[d],f<s){const p=--s,m=e[p],v=--o,y=e[v];n[m.uuid]=f,e[f]=m,n[y.uuid]=p,e[p]=y,e.pop();for(let x=0,g=i;x!==g;++x){const _=r[x],w=_[p],b=_[v];_[f]=w,_[p]=b,_.pop()}}else{const p=--o,m=e[p];p>0&&(n[m.uuid]=f),e[f]=m,e.pop();for(let v=0,y=i;v!==y;++v){const x=r[v];x[f]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(f);for(let p=d,m=l.length;p!==m;++p){const v=l[p];f[p]=new Ut(v,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class AF{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Zl,endingEnd:Zl};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=M3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case TA:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);break;case yy:default:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===C3;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===b3){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=ec,i.endingEnd=ec):(e?i.endingStart=this.zeroSlopeAtStart?ec:Zl:i.endingStart=Jh,n?i.endingEnd=this.zeroSlopeAtEnd?ec:Zl:i.endingEnd=Jh)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const UW=new Float32Array(1);class kW extends Fi{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let f=0;f!==s;++f){const p=i[f],m=p.name;let v=d[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const y=n&&n._propertyBindings[f].binding.parsedPath;v=new EF(Ut.create(r,m,y),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new rb(new Float32Array(2),new Float32Array(2),1,UW),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?Pd.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=yy),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new AF(this,o,n,r);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?Pd.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,f=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=d,n[d]=f,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class $e{constructor(e){this.value=e}clone(){return new $e(this.value.clone===void 0?this.value:this.value.clone())}}let zW=0;class HW extends Fi{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:zW++}),this.name="",this.usage=Kh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class D0 extends Tp{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class GW{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class bF{constructor(e,n,r=0,i=1/0){this.ray=new cl(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new uc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return Lw(e,this,r,n),r.sort(SR),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Lw(e[i],this,r,n);return r.sort(SR),r}}function SR(t,e){return t.distance-e.distance}function Lw(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)Lw(i[s],e,n,!0)}}class Fw{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ln(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class $W{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const wR=new de;class VW{constructor(e=new de(1/0,1/0),n=new de(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=wR.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ER=new F,Zg=new F;class MF{constructor(e=new F,n=new F){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){ER.subVectors(e,this.start),Zg.subVectors(this.end,this.start);const r=Zg.dot(Zg);let s=Zg.dot(ER)/r;return n&&(s=Ln(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const AR=new F;class WW extends zt{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new yt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new et(i,3));const s=new zr({fog:!1,toneMapped:!1});this.cone=new Os(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),AR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(AR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const da=new F,ev=new Ve,u_=new Ve;class jW extends Os{constructor(e){const n=CF(e),r=new yt,i=[],s=[],o=new Ne(0,0,1),a=new Ne(0,1,0);for(let c=0;c<n.length;c++){const d=n[c];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new et(i,3)),r.setAttribute("color",new et(s,3));const l=new zr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");u_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(ev.multiplyMatrices(u_,a.matrixWorld),da.setFromMatrixPosition(ev),i.setXYZ(o,da.x,da.y,da.z),ev.multiplyMatrices(u_,a.parent.matrixWorld),da.setFromMatrixPosition(ev),i.setXYZ(o+1,da.x,da.y,da.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function CF(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,CF(t.children[n]));return e}class XW extends qn{constructor(e,n,r){const i=new Wd(n,4,2),s=new ci({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const JW=new F,bR=new Ne,MR=new Ne;class KW extends zt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Vd(n);i.rotateY(Math.PI*.5),this.material=new ci({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Dt(o,3)),this.add(new qn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");bR.copy(this.light.color),MR.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?bR:MR;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(JW.setFromMatrixPosition(this.light.matrixWorld).negate())}}class YW extends Os{constructor(e=10,n=10,r=4473924,i=8947848){r=new Ne(r),i=new Ne(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=n;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const y=p===s?r:i;y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3}const d=new yt;d.setAttribute("position",new et(l,3)),d.setAttribute("color",new et(c,3));const f=new zr({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class QW extends Os{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new Ne(s),o=new Ne(o);const a=[],l=[];if(n>1)for(let f=0;f<n;f++){const p=f/n*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const y=f&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let f=0;f<r;f++){const p=f&1?s:o,m=e-e/r*f;for(let v=0;v<i;v++){let y=v/i*(Math.PI*2),x=Math.sin(y)*m,g=Math.cos(y)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),y=(v+1)/i*(Math.PI*2),x=Math.sin(y)*m,g=Math.cos(y)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const c=new yt;c.setAttribute("position",new et(a,3)),c.setAttribute("color",new et(l,3));const d=new zr({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const CR=new F,tv=new F,TR=new F;class qW extends zt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new yt;i.setAttribute("position",new et([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new zr({fog:!1,toneMapped:!1});this.lightPlane=new Vo(i,s),this.add(this.lightPlane),i=new yt,i.setAttribute("position",new et([0,0,0,0,0,1],3)),this.targetLine=new Vo(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),CR.setFromMatrixPosition(this.light.matrixWorld),tv.setFromMatrixPosition(this.light.target.matrixWorld),TR.subVectors(tv,CR),this.lightPlane.lookAt(tv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(tv),this.targetLine.scale.z=TR.length()}}const nv=new F,Bn=new zd;class ZW extends Os{constructor(e){const n=new yt,r=new zr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,y){l(v),l(y)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}n.setAttribute("position",new et(i,3)),n.setAttribute("color",new et(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ne(16755200),d=new Ne(16711680),f=new Ne(43775),p=new Ne(16777215),m=new Ne(3355443);this.setColors(c,d,f,p,m)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Bn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Un("c",n,e,Bn,0,0,-1),Un("t",n,e,Bn,0,0,1),Un("n1",n,e,Bn,-r,-i,-1),Un("n2",n,e,Bn,r,-i,-1),Un("n3",n,e,Bn,-r,i,-1),Un("n4",n,e,Bn,r,i,-1),Un("f1",n,e,Bn,-r,-i,1),Un("f2",n,e,Bn,r,-i,1),Un("f3",n,e,Bn,-r,i,1),Un("f4",n,e,Bn,r,i,1),Un("u1",n,e,Bn,r*.7,i*1.1,-1),Un("u2",n,e,Bn,-r*.7,i*1.1,-1),Un("u3",n,e,Bn,0,i*2,-1),Un("cf1",n,e,Bn,-r,0,1),Un("cf2",n,e,Bn,r,0,1),Un("cf3",n,e,Bn,0,-i,1),Un("cf4",n,e,Bn,0,i,1),Un("cn1",n,e,Bn,-r,0,-1),Un("cn2",n,e,Bn,r,0,-1),Un("cn3",n,e,Bn,0,-i,-1),Un("cn4",n,e,Bn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Un(t,e,n,r,i,s,o){nv.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],nv.x,nv.y,nv.z)}}const rv=new Sn;class e7 extends Os{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new yt;s.setIndex(new Dt(r,1)),s.setAttribute("position",new Dt(i,3)),super(s,new zr({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&rv.setFromObject(this.object),rv.isEmpty())return;const n=rv.min,r=rv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class t7 extends Os{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new yt;s.setIndex(new Dt(r,1)),s.setAttribute("position",new et(i,3)),super(s,new zr({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class n7 extends Vo{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new yt;o.setAttribute("position",new et(s,3)),o.computeBoundingSphere(),super(o,new zr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new yt;l.setAttribute("position",new et(a,3)),l.computeBoundingSphere(),this.add(new qn(l,new ci({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const RR=new F;let iv,d_;class r7 extends zt{constructor(e=new F(0,0,1),n=new F(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",iv===void 0&&(iv=new yt,iv.setAttribute("position",new et([0,0,0,0,1,0],3)),d_=new Rc(0,.5,1,5,1),d_.translate(0,-.5,0)),this.position.copy(n),this.line=new Vo(iv,new zr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new qn(d_,new ci({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{RR.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(RR,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class i7 extends Os{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new yt;i.setAttribute("position",new et(n,3)),i.setAttribute("color",new et(r,3));const s=new zr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new Ne,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TF{constructor(){this.type="ShapePath",this.color=new Ne,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Qh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const _=[];for(let w=0,b=g.length;w<b;w++){const C=g[w],T=new dc;T.curves=C.curves,_.push(T)}return _}function r(g,_){const w=_.length;let b=!1;for(let C=w-1,T=0;T<w;C=T++){let P=_[C],B=_[T],R=B.x-P.x,D=B.y-P.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(P=_[T],R=-R,B=_[C],D=-D),g.y<P.y||g.y>B.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const k=D*(g.x-P.x)-R*(g.y-P.y);if(k===0)return!0;if(k<0)continue;b=!b}}else{if(g.y!==P.y)continue;if(B.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=B.x)return!0}}return b}const i=io.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new dc,l.curves=a.curves,c.push(l),c;let d=!i(s[0].getPoints());d=e?!d:d;const f=[],p=[];let m=[],v=0,y;p[v]=void 0,m[v]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],y=a.getPoints(),o=i(y),o=e?!o:o,o?(!d&&p[v]&&v++,p[v]={s:new dc,p:y},p[v].s.curves=a.curves,d&&v++,m[v]=[]):m[v].push({h:a,p:y[0]});if(!p[0])return n(s);if(p.length>1){let g=!1,_=0;for(let w=0,b=p.length;w<b;w++)f[w]=[];for(let w=0,b=p.length;w<b;w++){const C=m[w];for(let T=0;T<C.length;T++){const P=C[T];let B=!0;for(let R=0;R<p.length;R++)r(P.p,p[R].p)&&(w!==R&&_++,B?(B=!1,f[R].push(P)):g=!0);B&&f[w].push(P)}}_>0&&g===!1&&(m=f)}let x;for(let g=0,_=p.length;g<_;g++){l=p[g].s,c.push(l),x=m[g];for(let w=0,b=x.length;w<b;w++)l.holes.push(x[w].h)}return c}}class s7 extends so{constructor(e,n,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,r,i,s,o)}}class o7 extends Rp{constructor(e,n,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,r,i)}}class a7 extends Pp{constructor(e,n,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,r,i)}}class l7 extends Ip{constructor(e,n,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,r,i,s,o,a)}}class c7 extends Rc{constructor(e,n,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,r,i,s,o,a,l)}}class u7 extends Bp{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class d7 extends $d{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class f7 extends Dp{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class h7 extends Gd{constructor(e,n,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,r,i)}}class p7 extends Vd{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class m7 extends Tc{constructor(e,n,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,r,i)}}class g7 extends Xo{constructor(e,n,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,r,i)}}class v7 extends Lp{constructor(e,n,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,r,i,s,o)}}class y7 extends Fp{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class x7 extends Wd{constructor(e,n,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,r,i,s,o,a)}}class _7 extends Op{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class S7 extends Np{constructor(e,n,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,r,i,s)}}class w7 extends Up{constructor(e,n,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,r,i,s,o)}}class E7 extends kp{constructor(e,n,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ol}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ol);const A7=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:MA,AddEquation:jl,AddOperation:s3,AdditiveAnimationBlendMode:TA,AdditiveBlending:qS,AlphaFormat:m3,AlwaysDepth:qL,AlwaysStencilFunc:I3,AmbientLight:vF,AmbientLightProbe:SW,AnimationAction:AF,AnimationClip:Pd,AnimationLoader:uW,AnimationMixer:kW,AnimationObjectGroup:NW,AnimationUtils:oW,ArcCurve:Q3,ArrayCamera:W3,ArrowHelper:r7,Audio:wF,AudioAnalyser:CW,AudioContext:db,AudioListener:AW,AudioLoader:xW,AxesHelper:i7,BackSide:rr,BasicDepthPacking:al,BasicShadowMap:UL,Bone:by,BooleanKeyframeTrack:Pc,Box2:VW,Box3:Sn,Box3Helper:t7,BoxBufferGeometry:s7,BoxGeometry:so,BoxHelper:e7,BufferAttribute:Dt,BufferGeometry:yt,BufferGeometryLoader:_F,ByteType:u3,Cache:_c,Camera:zd,CameraHelper:ZW,CanvasTexture:PV,CapsuleBufferGeometry:o7,CapsuleGeometry:Rp,CatmullRomCurve3:q3,CineonToneMapping:l3,CircleBufferGeometry:a7,CircleGeometry:Pp,ClampToEdgeWrapping:Sr,Clock:fb,Color:Ne,ColorKeyframeTrack:ib,ColorManagement:Ji,CompressedArrayTexture:RV,CompressedTexture:jA,CompressedTextureLoader:dW,ConeBufferGeometry:l7,ConeGeometry:Ip,CubeCamera:N3,CubeReflectionMapping:Xa,CubeRefractionMapping:Ja,CubeTexture:Cp,CubeTextureLoader:fW,CubeUVReflectionMapping:kd,CubicBezierCurve:JA,CubicBezierCurve3:Z3,CubicInterpolant:hF,CullFaceBack:QS,CullFaceFront:NL,CullFaceFrontBack:IH,CullFaceNone:OL,Curve:Ns,CurvePath:tF,CustomBlending:kL,CustomToneMapping:c3,CylinderBufferGeometry:c7,CylinderGeometry:Rc,Cylindrical:$W,Data3DTexture:DA,DataArrayTexture:xy,DataTexture:cd,DataTextureLoader:hW,DataUtils:kG,DecrementStencilOp:zH,DecrementWrapStencilOp:GH,DefaultLoadingManager:qu,DepthFormat:za,DepthStencilFormat:Qa,DepthTexture:wy,DirectionalLight:cb,DirectionalLightHelper:qW,DiscreteInterpolant:pF,DisplayP3ColorSpace:PA,DodecahedronBufferGeometry:u7,DodecahedronGeometry:Bp,DoubleSide:_r,DstAlphaFactor:jL,DstColorFactor:JL,DynamicCopyUsage:rG,DynamicDrawUsage:QH,DynamicReadUsage:eG,EdgesGeometry:B0,EllipseCurve:Cy,EqualDepth:e3,EqualStencilFunc:jH,EquirectangularReflectionMapping:Wh,EquirectangularRefractionMapping:jh,Euler:bp,EventDispatcher:Fi,ExtrudeBufferGeometry:d7,ExtrudeGeometry:$d,FileLoader:pi,Float16BufferAttribute:WG,Float32BufferAttribute:et,Float64BufferAttribute:jG,FloatType:bs,Fog:Ay,FogExp2:Ey,FramebufferTexture:TV,FrontSide:Bs,Frustum:_y,GLBufferAttribute:GW,GLSL1:sG,GLSL3:Mw,GreaterDepth:n3,GreaterEqualDepth:t3,GreaterEqualStencilFunc:YH,GreaterStencilFunc:JH,GridHelper:YW,Group:Lo,HalfFloatType:Ya,HemisphereLight:gF,HemisphereLightHelper:KW,HemisphereLightProbe:_W,IcosahedronBufferGeometry:f7,IcosahedronGeometry:Dp,ImageBitmapLoader:SF,ImageLoader:tp,ImageUtils:BA,IncrementStencilOp:kH,IncrementWrapStencilOp:HH,InstancedBufferAttribute:Cd,InstancedBufferGeometry:ub,InstancedInterleavedBuffer:D0,InstancedMesh:$A,Int16BufferAttribute:$G,Int32BufferAttribute:VG,Int8BufferAttribute:zG,IntType:f3,InterleavedBuffer:Tp,InterleavedBufferAttribute:ui,Interpolant:jd,InterpolateDiscrete:Ed,InterpolateLinear:yc,InterpolateSmooth:qv,InvertStencilOp:$H,KeepStencilOp:Zv,KeyframeTrack:Us,LOD:K3,LatheBufferGeometry:h7,LatheGeometry:Gd,Layers:uc,LessDepth:ZL,LessEqualDepth:R0,LessEqualStencilFunc:XH,LessStencilFunc:WH,Light:ul,LightProbe:Py,Line:Vo,Line3:MF,LineBasicMaterial:zr,LineCurve:Ty,LineCurve3:eF,LineDashedMaterial:dF,LineLoop:VA,LineSegments:Os,LinearEncoding:Ap,LinearFilter:Zt,LinearInterpolant:rb,LinearMipMapLinearFilter:OH,LinearMipMapNearestFilter:FH,LinearMipmapLinearFilter:Ds,LinearMipmapNearestFilter:vy,LinearSRGBColorSpace:Ls,LinearToneMapping:o3,Loader:Hr,LoaderUtils:Id,LoadingManager:sb,LoopOnce:b3,LoopPingPong:C3,LoopRepeat:M3,LuminanceAlphaFormat:v3,LuminanceFormat:g3,MOUSE:Ul,Material:Fn,MaterialLoader:Iy,MathUtils:cc,Matrix3:Tt,Matrix4:Ve,MaxEquation:nw,Mesh:qn,MeshBasicMaterial:ci,MeshDepthMaterial:NA,MeshDistanceMaterial:UA,MeshLambertMaterial:cF,MeshMatcapMaterial:uF,MeshNormalMaterial:eb,MeshPhongMaterial:aF,MeshPhysicalMaterial:Jo,MeshStandardMaterial:zp,MeshToonMaterial:lF,MinEquation:tw,MirroredRepeatWrapping:wd,MixOperation:i3,MultiplyBlending:ew,MultiplyOperation:Ep,NearestFilter:nn,NearestMipMapLinearFilter:LH,NearestMipMapNearestFilter:DH,NearestMipmapLinearFilter:ad,NearestMipmapNearestFilter:Xh,NeverDepth:QL,NeverStencilFunc:VH,NoBlending:Er,NoColorSpace:Ha,NoToneMapping:Rs,NormalAnimationBlendMode:yy,NormalBlending:ac,NotEqualDepth:r3,NotEqualStencilFunc:KH,NumberKeyframeTrack:Td,Object3D:zt,ObjectLoader:vW,ObjectSpaceNormalMap:P3,OctahedronBufferGeometry:p7,OctahedronGeometry:Vd,OneFactor:$L,OneMinusDstAlphaFactor:XL,OneMinusDstColorFactor:KL,OneMinusSrcAlphaFactor:bA,OneMinusSrcColorFactor:WL,OrthographicCamera:Ps,PCFShadowMap:my,PCFSoftShadowMap:mh,PMREMGenerator:Tw,Path:Qh,PerspectiveCamera:rn,Plane:Zs,PlaneBufferGeometry:m7,PlaneGeometry:Tc,PlaneHelper:n7,PointLight:lb,PointLightHelper:XW,Points:WA,PointsMaterial:My,PolarGridHelper:QW,PolyhedronBufferGeometry:g7,PolyhedronGeometry:Xo,PositionalAudio:MW,PropertyBinding:Ut,PropertyMixer:EF,QuadraticBezierCurve:KA,QuadraticBezierCurve3:YA,Quaternion:Vn,QuaternionKeyframeTrack:qa,QuaternionLinearInterpolant:mF,RED_GREEN_RGTC2_Format:Aw,RED_RGTC1_Format:A3,REVISION:ol,RGBADepthPacking:R3,RGBAFormat:ai,RGBAIntegerFormat:w3,RGBA_ASTC_10x10_Format:_w,RGBA_ASTC_10x5_Format:vw,RGBA_ASTC_10x6_Format:yw,RGBA_ASTC_10x8_Format:xw,RGBA_ASTC_12x10_Format:Sw,RGBA_ASTC_12x12_Format:ww,RGBA_ASTC_4x4_Format:cw,RGBA_ASTC_5x4_Format:uw,RGBA_ASTC_5x5_Format:dw,RGBA_ASTC_6x5_Format:fw,RGBA_ASTC_6x6_Format:hw,RGBA_ASTC_8x5_Format:pw,RGBA_ASTC_8x6_Format:mw,RGBA_ASTC_8x8_Format:gw,RGBA_BPTC_Format:Qv,RGBA_ETC2_EAC_Format:lw,RGBA_PVRTC_2BPPV1_Format:ow,RGBA_PVRTC_4BPPV1_Format:sw,RGBA_S3TC_DXT1_Format:Jv,RGBA_S3TC_DXT3_Format:Kv,RGBA_S3TC_DXT5_Format:Yv,RGB_ETC1_Format:E3,RGB_ETC2_Format:aw,RGB_PVRTC_2BPPV1_Format:iw,RGB_PVRTC_4BPPV1_Format:rw,RGB_S3TC_DXT1_Format:Xv,RGFormat:_3,RGIntegerFormat:S3,RawShaderMaterial:oF,Ray:cl,Raycaster:bF,RectAreaLight:yF,RedFormat:y3,RedIntegerFormat:x3,ReinhardToneMapping:a3,RepeatWrapping:Ka,ReplaceStencilOp:UH,ReverseSubtractEquation:HL,RingBufferGeometry:v7,RingGeometry:Lp,SIGNED_RED_GREEN_RGTC2_Format:bw,SIGNED_RED_RGTC1_Format:Ew,SRGBColorSpace:St,Scene:Md,ShaderChunk:Et,ShaderLib:Jr,ShaderMaterial:Wn,ShadowMaterial:sF,Shape:dc,ShapeBufferGeometry:y7,ShapeGeometry:Fp,ShapePath:TF,ShapeUtils:io,ShortType:d3,Skeleton:GA,SkeletonHelper:jW,SkinnedMesh:HA,Source:tc,Sphere:mi,SphereBufferGeometry:x7,SphereGeometry:Wd,Spherical:Fw,SphericalHarmonics3:xF,SplineCurve:QA,SpotLight:ab,SpotLightHelper:WW,Sprite:J3,SpriteMaterial:zA,SrcAlphaFactor:AA,SrcAlphaSaturateFactor:YL,SrcColorFactor:VL,StaticCopyUsage:nG,StaticDrawUsage:Kh,StaticReadUsage:ZH,StereoCamera:wW,StreamCopyUsage:iG,StreamDrawUsage:qH,StreamReadUsage:tG,StringKeyframeTrack:Ic,SubtractEquation:zL,SubtractiveBlending:ZS,TOUCH:kl,TangentSpaceNormalMap:ll,TetrahedronBufferGeometry:_7,TetrahedronGeometry:Op,Texture:dn,TextureLoader:Hp,TorusBufferGeometry:S7,TorusGeometry:Np,TorusKnotBufferGeometry:w7,TorusKnotGeometry:Up,Triangle:nc,TriangleFanDrawMode:P0,TriangleStripDrawMode:RA,TrianglesDrawMode:T3,TubeBufferGeometry:E7,TubeGeometry:kp,TwoPassDoubleSide:BH,UVMapping:gy,Uint16BufferAttribute:LA,Uint32BufferAttribute:FA,Uint8BufferAttribute:HG,Uint8ClampedBufferAttribute:GG,Uniform:$e,UniformsGroup:HW,UniformsLib:Oe,UniformsUtils:Mp,UnsignedByteType:kr,UnsignedInt248Type:ka,UnsignedIntType:Do,UnsignedShort4444Type:h3,UnsignedShort5551Type:p3,UnsignedShortType:CA,VSMShadowMap:Ss,Vector2:de,Vector3:F,Vector4:Bt,VectorKeyframeTrack:Rd,VideoTexture:CV,WebGL1Renderer:j3,WebGL3DRenderTarget:TG,WebGLArrayRenderTarget:CG,WebGLCubeRenderTarget:U3,WebGLMultipleRenderTargets:RG,WebGLRenderTarget:vn,WebGLRenderer:kA,WebGLUtils:V3,WireframeGeometry:ZA,WrapAroundEnding:Jh,ZeroCurvatureEnding:Zl,ZeroFactor:GL,ZeroSlopeEnding:ec,ZeroStencilOp:NH,_SRGBAFormat:I0,sRGBEncoding:Yr},Symbol.toStringTag,{value:"Module"})),Ow=new Map,sv=t=>{const e=Ow.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},b7=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Ow.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Ow.set(n.name,i),{type:"tracked",store:t,...i}},M7=(t,e={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=e;let c;try{c=(s??({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,i);const{connection:d,...f}=b7(a,c,l);let p=!0;i.setState=(y,x,g)=>{const _=n(y,x);if(!p)return _;const w=g===void 0?{type:o||"anonymous"}:typeof g=="string"?{type:g}:g;return a===void 0?(d==null||d.send(w,r()),_):(d==null||d.send({...w,type:`${a}/${w.type}`},{...sv(l.name),[a]:i.getState()}),_)};const m=(...y)=>{const x=p;p=!1,n(...y),p=x},v=t(i.setState,r,i);if(f.type==="untracked"?d==null||d.init(v):(f.stores[f.store]=i,d==null||d.init(Object.fromEntries(Object.entries(f.stores).map(([y,x])=>[y,y===f.store?v:x.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let y=!1;const x=i.dispatch;i.dispatch=(...g)=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&g[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),x(...g)}}return d.subscribe(y=>{var x;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return f_(y.payload,g=>{if(g.type==="__setState"){if(a===void 0){m(g.state);return}Object.keys(g.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const _=g.state[a];if(_==null)return;JSON.stringify(i.getState())!==JSON.stringify(_)&&m(_);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(g)});case"DISPATCH":switch(y.payload.type){case"RESET":return m(v),a===void 0?d==null?void 0:d.init(i.getState()):d==null?void 0:d.init(sv(l.name));case"COMMIT":if(a===void 0){d==null||d.init(i.getState());return}return d==null?void 0:d.init(sv(l.name));case"ROLLBACK":return f_(y.state,g=>{if(a===void 0){m(g),d==null||d.init(i.getState());return}m(g[a]),d==null||d.init(sv(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return f_(y.state,g=>{if(a===void 0){m(g);return}JSON.stringify(i.getState())!==JSON.stringify(g[a])&&m(g[a])});case"IMPORT_STATE":{const{nextLiftedState:g}=y.payload,_=(x=g.computedStates.slice(-1)[0])==null?void 0:x.state;if(!_)return;m(a===void 0?_:_[a]),d==null||d.send(null,g);return}case"PAUSE_RECORDING":return p=!p}return}}),v},C7=M7,f_=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function T7(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>n.removeItem(i)}}const np=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return np(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return np(r)(n)}}}},R7=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,g)=>({...g,...x}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...x)},r,i);const d=np(s.serialize),f=()=>{const x=s.partialize({...r()});let g;const _=d({state:x,version:s.version}).then(w=>c.setItem(s.name,w)).catch(w=>{g=w});if(g)throw g;return _},p=i.setState;i.setState=(x,g)=>{p(x,g),f()};const m=t((...x)=>{n(...x),f()},r,i);let v;const y=()=>{var x;if(!c)return;o=!1,a.forEach(_=>_(r()));const g=((x=s.onRehydrateStorage)==null?void 0:x.call(s,r()))||void 0;return np(c.getItem.bind(c))(s.name).then(_=>{if(_)return s.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return s.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var w;return v=s.merge(_,(w=r())!=null?w:m),n(v,!0),f()}).then(()=>{g==null||g(v,void 0),o=!0,l.forEach(_=>_(v))}).catch(_=>{g==null||g(void 0,_)})};return i.persist={setOptions:x=>{s={...s,...x},x.getStorage&&(c=x.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},y(),v||m},P7=(t,e)=>(n,r,i)=>{let s={storage:T7(()=>localStorage),partialize:y=>y,version:0,merge:(y,x)=>({...x,...y}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...y)},r,i);const d=()=>{const y=s.partialize({...r()});return c.setItem(s.name,{state:y,version:s.version})},f=i.setState;i.setState=(y,x)=>{f(y,x),d()};const p=t((...y)=>{n(...y),d()},r,i);let m;const v=()=>{var y,x;if(!c)return;o=!1,a.forEach(_=>{var w;return _((w=r())!=null?w:p)});const g=((x=s.onRehydrateStorage)==null?void 0:x.call(s,(y=r())!=null?y:p))||void 0;return np(c.getItem.bind(c))(s.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return s.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var w;return m=s.merge(_,(w=r())!=null?w:p),n(m,!0),d()}).then(()=>{g==null||g(m,void 0),m=r(),o=!0,l.forEach(_=>_(m))}).catch(_=>{g==null||g(void 0,_)})};return i.persist={setOptions:y=>{s={...s,...y},y.storage&&(c=y.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:y=>(a.add(y),()=>{a.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},s.skipHydration||v(),m||p},I7=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),R7(t,e)):P7(t,e),B7=I7,Bc=jo()(C7(B7((t,e)=>({textsAndModels:[],height:0,renderOrder:99,modelLayerNumber:0,textLayerNumber:0,isBackboardVisible:!0,setIsBackboardVisible:n=>t(()=>({isBackboardVisible:n})),addText:(n,r,i,s)=>t(o=>{const a=[{text:n,id:i2(),isBase:!0,height:o.height,font:i,color:s,renderOrder:o.renderOrder,worldMatrix:null,layerName:o.textLayerNumber===0?n:`${n}(${o.textLayerNumber})`,isLayerNameSet:!1,isSelected:!1,bboxSize:new F},...o.textsAndModels];return{height:o.height+.8,renderOrder:o.renderOrder-1,textLayerNumber:o.textLayerNumber+1,textsAndModels:a}}),removeText:n=>t(r=>{const s=r.textsAndModels.filter(o=>o.id!==n).length===0?0:r.height-.8;return{textsAndModels:r.textsAndModels.filter(o=>o.id!==n),height:Math.max(s,0),renderOrder:Math.min(r.renderOrder+1,99),textLayerNumber:r.textLayerNumber===0?0:r.textLayerNumber-1}}),editText:(n,r)=>t(i=>({textsAndModels:PH(i.textsAndModels,n,r)})),addModel:(n,r,i)=>t(s=>({textsAndModels:[{isSelected:!1,id:i2(),isBase:!0,color:i,path:n,height:s.height,renderOrder:s.renderOrder,layerName:s.modelLayerNumber===0?n:`${n}(${s.modelLayerNumber})`,worldMatrix:null,isLayerNameSet:!1,bboxSize:new F},...s.textsAndModels],height:s.height+.8,renderOrder:s.renderOrder-1,modelLayerNumber:s.modelLayerNumber+1})),loadTemplate:n=>t(()=>n),isSelectionOn:!1,setIsSelectionOn:n=>t(()=>({isSelectionOn:n})),selectedItems:[],setSelectedItems:n=>t(()=>({textsAndModels:e().textsAndModels.map(i=>n.includes(i.id)?{...i,isSelected:!0}:{...i,isSelected:!1})})),clearBoard:()=>t(()=>({textsAndModels:[],height:0,renderOrder:99,textLayerNumber:0,modelLayerNumber:0}))}),{name:"neon-storage",version:2})));jo()(t=>({isSelectionOn:!1,setIsSelectionOn:e=>t(()=>({isSelectionOn:e})),selectedItems:[],setSelectedItems:e=>t(()=>({selectedItems:e}))}));const Gp=jo()(t=>({isOpen:!1,placement:"indoor",cableColor:"white",mountingKit:{type:"hanging",color:"gold"},setIsOpen:e=>t(()=>({isOpen:e})),setPlacement:e=>t(()=>({placement:e})),setCableColor:e=>t(()=>({cableColor:e})),setMountingKit:e=>t(()=>({mountingKit:e}))})),oo=jo()((t,e)=>({isCustom:!1,lastBoardType:"Auto-fit",boardColor:"transparent",boardStyle:"full-board",setBoardColor:n=>t(()=>({boardColor:n})),boardSize:[70,110,0],boardCenter:new F(0,0,0),setBoardStyle:n=>t(()=>({boardStyle:n})),setBoardSize:(n,r)=>t(()=>({boardSize:r,boardCenter:n})),setIsCustom:(n,r)=>t(()=>({isCustom:n,lastBoardType:r})),smallestBoardCitizen:7,setSmallestBoardCitizen:n=>t(()=>{n.length===0&&n.push(7);const r=Math.min(...n),i=Number(Number(1/(r/10)).toFixed(2));return{smallestBoardCitizen:r,scaleCoefficient:i}}),scaleCoefficient:1,actualBoardSize:[0,0],setActualBoardSize:n=>t(()=>({actualBoardSize:n})),scale:1,setScale:(n,r=300)=>t(()=>{const i=e().smallestBoardCitizen,s=e().boardSize[0],o=r,a=s/o,l=e().scaleCoefficient;if(l*n*s>o||o<300){if(i*(1/a)<=10)return{scale:l};if(n===2)return{scale:1/a};if(n===1.5)return{scale:1/a*.95};if(n===1.25)return{scale:1/a*.9}}return{scale:l*n}}),scaleCurrent:1,setScaleCurrent:n=>t(()=>({scaleCurrent:n}))})),Dc=jo(t=>({selectedSidebar:5,isShown:!0,setIsShown:e=>t(()=>({isShown:e})),setSelectedSidebar:e=>t(()=>({selectedSidebar:e}))})),mb=jo()(t=>({isOpen:!1,templates:[],setIsOpen:e=>t(()=>({isOpen:e})),addTemplate:e=>t(n=>({templates:[...n.templates,e]}))})),$p=jo(t=>({url:"./bg.jpg",scale:1,personUploadedImage:"",setUrl:e=>t(()=>({url:e})),setScale:e=>t(()=>({scale:e})),setPersonUploadedImage:e=>t(()=>({personUploadedImage:e}))})),Lc=jo(t=>({is3dModeOn:!1,isRullerOn:!1,brightness:100,switch:e=>t(()=>({is3dModeOn:e})),setRuller:e=>t(()=>({isRullerOn:e})),setBrightness:e=>t(()=>({brightness:e}))})),Za=jo(t=>({selected:"",setSelected:e=>t(()=>({selected:e}))}));function Re(){return Re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Re.apply(this,arguments)}function D7(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function gb(...t){return e=>t.forEach(n=>D7(n,e))}function On(...t){return E.useCallback(gb(...t),t)}const Sc=E.forwardRef((t,e)=>{const{children:n,...r}=t,i=E.Children.toArray(n),s=i.find(F7);if(s){const o=s.props.children,a=i.map(l=>l===s?E.Children.count(o)>1?E.Children.only(null):E.isValidElement(o)?o.props.children:null:l);return E.createElement(Nw,Re({},r,{ref:e}),E.isValidElement(o)?E.cloneElement(o,void 0,a):null)}return E.createElement(Nw,Re({},r,{ref:e}),n)});Sc.displayName="Slot";const Nw=E.forwardRef((t,e)=>{const{children:n,...r}=t;return E.isValidElement(n)?E.cloneElement(n,{...O7(r,n.props),ref:gb(e,n.ref)}):E.Children.count(n)>1?E.Children.only(null):null});Nw.displayName="SlotClone";const L7=({children:t})=>E.createElement(E.Fragment,null,t);function F7(t){return E.isValidElement(t)&&t.type===L7}function O7(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function RF(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=RF(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function PF(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=RF(t))&&(r&&(r+=" "),r+=e);return r}const PR=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,IR=PF,N7=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return IR(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],f=s==null?void 0:s[c];if(d===null)return null;const p=PR(d)||PR(f);return i[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(v=>{let[y,x]=v;return Array.isArray(x)?x.includes({...s,...a}[y]):{...s,...a}[y]===x})?[...c,f,p]:c},[]);return IR(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function U7(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=IF(e))&&(r&&(r+=" "),r+=n);return r}function IF(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=IF(t[r]))&&(n&&(n+=" "),n+=e);return n}var vb="-";function k7(t){var e=H7(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(vb);return l[0]===""&&l.length!==1&&l.shift(),BF(l,e)||z7(a)}function o(a,l){var c=n[a]||[];return l&&i[a]?[].concat(c,i[a]):c}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function BF(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?BF(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=t.join(vb);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var BR=/^\[(.+)\]$/;function z7(t){if(BR.test(t)){var e=BR.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function H7(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=$7(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],a=s[1];Uw(a,r,o,e)}),r}function Uw(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:DR(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(G7(i)){Uw(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];Uw(l,DR(e,a),n,r)})})}function DR(t,e){var n=t;return e.split(vb).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function G7(t){return t.isThemeGetter}function $7(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,s]}):t}function V7(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):i(o,a)}}}var DF="!";function W7(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,c=0,d,f=0;f<o.length;f++){var p=o[f];if(l===0){if(p===r&&(n||o.slice(f,f+i)===e)){a.push(o.slice(c,f)),c=f+i;continue}if(p==="/"){d=f;continue}}p==="["?l++:p==="]"&&l--}var m=a.length===0?o:o.substring(c),v=m.startsWith(DF),y=v?m.substring(1):m,x=d&&d>c?d-c:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:x}}}function j7(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function X7(t){return{cache:V7(t.cacheSize),splitModifiers:W7(t),...k7(t)}}var J7=/\s+/;function K7(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(J7).map(function(o){var a=n(o),l=a.modifiers,c=a.hasImportantModifier,d=a.baseClassName,f=a.maybePostfixModifierPosition,p=r(f?d.substring(0,f):d),m=!!f;if(!p){if(!f)return{isTailwindClass:!1,originalClassName:o};if(p=r(d),!p)return{isTailwindClass:!1,originalClassName:o};m=!1}var v=j7(l).join(":"),y=c?v+DF:v;return{isTailwindClass:!0,modifierId:y,classGroupId:p,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,d=a+l;return s.has(d)?!1:(s.add(d),i(l,c).forEach(function(f){return s.add(a+f)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Y7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=a;function a(c){var d=e[0],f=e.slice(1),p=f.reduce(function(m,v){return v(m)},d());return r=X7(p),i=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){var d=i(c);if(d)return d;var f=K7(c,r);return s(c,f),f}return function(){return o(U7.apply(null,arguments))}}function fn(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var LF=/^\[(?:([a-z-]+):)?(.+)\]$/i,Q7=/^\d+\/\d+$/,q7=new Set(["px","full","screen"]),Z7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ej=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))/,tj=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ys(t){return ic(t)||q7.has(t)||Q7.test(t)||ya(t)}function ya(t){return Fc(t,"length",aj)}function nj(t){return Fc(t,"size",FF)}function rj(t){return Fc(t,"position",FF)}function ij(t){return Fc(t,"url",lj)}function ov(t){return Fc(t,"number",ic)}function ic(t){return!Number.isNaN(Number(t))}function sj(t){return t.endsWith("%")&&ic(t.slice(0,-1))}function kf(t){return LR(t)||Fc(t,"number",LR)}function kn(t){return LF.test(t)}function zf(){return!0}function fa(t){return Z7.test(t)}function oj(t){return Fc(t,"",cj)}function Fc(t,e,n){var r=LF.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function aj(t){return ej.test(t)}function FF(){return!1}function lj(t){return t.startsWith("url(")}function LR(t){return Number.isInteger(Number(t))}function cj(t){return tj.test(t)}function uj(){var t=fn("colors"),e=fn("spacing"),n=fn("blur"),r=fn("brightness"),i=fn("borderColor"),s=fn("borderRadius"),o=fn("borderSpacing"),a=fn("borderWidth"),l=fn("contrast"),c=fn("grayscale"),d=fn("hueRotate"),f=fn("invert"),p=fn("gap"),m=fn("gradientColorStops"),v=fn("gradientColorStopPositions"),y=fn("inset"),x=fn("margin"),g=fn("opacity"),_=fn("padding"),w=fn("saturate"),b=fn("scale"),C=fn("sepia"),T=fn("skew"),P=fn("space"),B=fn("translate"),R=function(){return["auto","contain","none"]},D=function(){return["auto","hidden","clip","visible","scroll"]},k=function(){return["auto",e]},X=function(){return["",ys]},$=function(){return["auto",ic,kn]},j=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},H=function(){return["solid","dashed","dotted","double","none"]},ie=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Z=function(){return["start","end","center","between","around","evenly","stretch"]},U=function(){return["","0",kn]},O=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},z=function(){return[ic,ov]},ne=function(){return[ic,kn]};return{cacheSize:500,theme:{colors:[zf],spacing:[ys],blur:["none","",fa,ya],brightness:z(),borderColor:[t],borderRadius:["none","","full",fa,ya],borderSpacing:[e],borderWidth:X(),contrast:z(),grayscale:U(),hueRotate:ne(),invert:U(),gap:[e],gradientColorStops:[t],gradientColorStopPositions:[sj,ya],inset:k(),margin:k(),opacity:z(),padding:[e],saturate:z(),scale:z(),sepia:U(),skew:ne(),space:[e],translate:[e]},classGroups:{aspect:[{aspect:["auto","square","video",kn]}],container:["container"],columns:[{columns:[fa]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(j(),[kn])}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",kf]}],basis:[{basis:[e]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",kn]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",kf]}],"grid-cols":[{"grid-cols":[zf]}],"col-start-end":[{col:["auto",{span:[kf]},kn]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[zf]}],"row-start-end":[{row:["auto",{span:[kf]},kn]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",kn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",kn]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(Z())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Z(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Z(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",e]}],"min-w":[{"min-w":["min","max","fit",ys]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[fa]},fa,ya]}],h:[{h:[e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ys]}],"max-h":[{"max-h":[e,"min","max","fit"]}],"font-size":[{text:["base",fa,ya]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ov]}],"font-family":[{font:[zf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ya]}],"line-clamp":[{"line-clamp":["none",ic,ov]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ys]}],"list-image":[{"list-image":["none",kn]}],"list-style-type":[{list:["none","disc","decimal",kn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(H(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ys]}],"underline-offset":[{"underline-offset":["auto",ys]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[e]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ya]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",kn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(j(),[rj])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nj]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ij]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[].concat(H(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:H()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(H())}],"outline-offset":[{"outline-offset":[ys]}],"outline-w":[{outline:[ys]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[ys]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fa,oj]}],"shadow-color":[{shadow:[zf]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":ie()}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",fa,kn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",kn]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",kn]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",kn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[kf,kn]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",kn]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",kn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[e]}],"scroll-mx":[{"scroll-mx":[e]}],"scroll-my":[{"scroll-my":[e]}],"scroll-ms":[{"scroll-ms":[e]}],"scroll-me":[{"scroll-me":[e]}],"scroll-mt":[{"scroll-mt":[e]}],"scroll-mr":[{"scroll-mr":[e]}],"scroll-mb":[{"scroll-mb":[e]}],"scroll-ml":[{"scroll-ml":[e]}],"scroll-p":[{"scroll-p":[e]}],"scroll-px":[{"scroll-px":[e]}],"scroll-py":[{"scroll-py":[e]}],"scroll-ps":[{"scroll-ps":[e]}],"scroll-pe":[{"scroll-pe":[e]}],"scroll-pt":[{"scroll-pt":[e]}],"scroll-pr":[{"scroll-pr":[e]}],"scroll-pb":[{"scroll-pb":[e]}],"scroll-pl":[{"scroll-pl":[e]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",kn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ys,ov]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var dj=Y7(uj);function Lt(...t){return dj(PF(t))}const _h={red:{color:"#FFFFFF",emissive:"#FF0100",emissiveIntensity:5},"light-pink":{color:"#FFFFFF",emissive:"#FD0857",emissiveIntensity:5},pink:{color:"#FFFFFF",emissive:"#FE08E8",emissiveIntensity:5},yellow:{color:"#FFFFFF",emissive:"#E9DE00",emissiveIntensity:3},orange:{color:"#FFFFFF",emissive:"#FF5601",emissiveIntensity:5},golden:{color:"#FFFFFF",emissive:"#FF7D00",emissiveIntensity:5},green:{color:"#FFFFFF",emissive:"#04FA28",emissiveIntensity:2},"ice-blue":{color:"#FFFFFF",emissive:"#00AFE6",emissiveIntensity:4},blue:{color:"#FFFFFF",emissive:"#0101FE",emissiveIntensity:13.5},purple:{color:"#FFFFFF",emissive:"#9100F3",emissiveIntensity:9},"warm-white":{color:"#FFFFFF",emissive:"#FCB562",emissiveIntensity:5},"cold-white":{color:"#FFFFFF",emissive:"#9BB1D9",emissiveIntensity:4}},FR=()=>{const t=Object.keys(_h);return _h[t[t.length*Math.random()<<0]]},fj=N7("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-[linear-gradient(277deg,_#f50cf5_-3%,#f50cf5_28%,#f5002e_123%)] bg-cover  bg-blend-normal bg-no-repeat rounded-[200px] text-white uppercase text-xs tracking-wide ",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-solid border-red-500 rounded-[200px] text-primarypink",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-5 ",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Or=E.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Sc:"button";return L.jsx(o,{className:Lt(fj({variant:e,size:n,className:t})),ref:s,...i})});Or.displayName="Button";var hj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const pj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ln=(t,e)=>{const n=E.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>E.createElement("svg",{ref:c,...hj,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${pj(t)}`,...l},[...e.map(([d,f])=>E.createElement(d,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},mj=ln("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),gj=ln("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]),OF=ln("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),vj=ln("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),yj=ln("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),xj=ln("Croissant",[["path",{d:"m4.6 13.11 5.79-3.21c1.89-1.05 4.79 1.78 3.71 3.71l-3.22 5.81C8.8 23.16.79 15.23 4.6 13.11Z",key:"1ozxlb"}],["path",{d:"m10.5 9.5-1-2.29C9.2 6.48 8.8 6 8 6H4.5C2.79 6 2 6.5 2 8.5a7.71 7.71 0 0 0 2 4.83",key:"ffuyb5"}],["path",{d:"M8 6c0-1.55.24-4-2-4-2 0-2.5 2.17-2.5 4",key:"osnpzi"}],["path",{d:"m14.5 13.5 2.29 1c.73.3 1.21.7 1.21 1.5v3.5c0 1.71-.5 2.5-2.5 2.5a7.71 7.71 0 0 1-4.83-2",key:"1vubaw"}],["path",{d:"M18 16c1.55 0 4-.24 4 2 0 2-2.17 2.5-4 2.5",key:"wxr772"}]]),_j=ln("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]),Sj=ln("Diamond",[["rect",{width:"15.56",height:"15.56",x:"12",y:"1",rx:"2.41",transform:"rotate(45 12 1)",key:"mruvuj"}]]),wj=ln("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]),Ej=ln("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Aj=ln("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),bj=ln("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Mj=ln("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Cj=ln("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Tj=ln("LightbulbOff",[["path",{d:"M16.8 11.2c.8-.9 1.2-2 1.2-3.2a6 6 0 0 0-9.3-5",key:"1fkcox"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M6.3 6.3a4.67 4.67 0 0 0 1.2 5.2c.7.7 1.3 1.5 1.5 2.5",key:"10m8kw"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Rj=ln("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Pj=ln("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Ij=ln("Ruler",[["path",{d:"M21.3 8.7 8.7 21.3c-1 1-2.5 1-3.4 0l-2.6-2.6c-1-1-1-2.5 0-3.4L15.3 2.7c1-1 2.5-1 3.4 0l2.6 2.6c1 1 1 2.5 0 3.4Z",key:"14xb44"}],["path",{d:"m7.5 10.5 2 2",key:"3h1c69"}],["path",{d:"m10.5 7.5 2 2",key:"1lvsmz"}],["path",{d:"m13.5 4.5 2 2",key:"1i616n"}],["path",{d:"m4.5 13.5 2 2",key:"16iojn"}]]),Bj=ln("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}]]),Dj=ln("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Lj=ln("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Fj=ln("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),NF=ln("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Oj=ln("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),yb=ln("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Nj=ln("Triangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}]]),By=ln("X",[["line",{x1:"18",x2:"6",y1:"6",y2:"18",key:"15jfxm"}],["line",{x1:"6",x2:"18",y1:"6",y2:"18",key:"d1lma3"}]]),Uj={file:L.jsx(Ej,{size:36,strokeWidth:1}),layers:L.jsx(Cj,{size:36,strokeWidth:1}),star:L.jsx(NF,{size:36,strokeWidth:1}),image:L.jsx(Mj,{size:36,strokeWidth:1}),crop:L.jsx(_j,{size:36,strokeWidth:1}),settings:L.jsx(Dj,{size:36,strokeWidth:1})},kj=t=>[t.setSelectedSidebar,t.selectedSidebar,t.setIsShown],Hf=({icon:t,text:e,id:n})=>{const[r,i,s]=Dc(kj),o=mb(l=>l.setIsOpen),a=Gp(l=>l.setIsOpen);return L.jsxs("button",{onClick:()=>{switch(n){case 1:o(!0),r(1),s(!1);break;case 0:r(0),s(!1),a(!0);break;default:if(i===n){s(!1),r(-1);return}o(!1),a(!1),s(!0),r(n);break}},className:Lt("flex relative flex-col gap-1 justify-center items-center rounded-sm px-3 hover:text-accent-foreground",'after:absolute after:content-[""] after:left-0 after:right-0 after:h-0.5 after:bg-transparent hover:after:bg-primarypink after:rounded-t-sm after:-bottom-1',i===n&&"after:bg-primarypink"),children:[Uj[t],L.jsx("h1",{className:Lt("text-xs relative"),children:e})]})},zj=()=>{const t=oo(s=>s.boardSize),[e,n]=Gp(s=>[s.placement,s.mountingKit]),r=e==="outdoor"?10:0,i=n.type==="wall"?10:0;return L.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background",children:L.jsxs("div",{className:" flex h-16 items-center justify-between space-2 px-2 sm:justify-between sm:space-x-0",children:[L.jsx("div",{className:"flex items-center justify-between space-x-2",children:L.jsxs("nav",{className:"flex items-center space-x-2",children:[L.jsx(Hf,{icon:"file",text:"Template gallery",id:1}),L.jsx(Hf,{icon:"layers",text:"Layers",id:5}),L.jsx(Hf,{icon:"image",text:"Background",id:3}),L.jsx(Hf,{icon:"crop",text:"Board",id:6}),L.jsx(Hf,{icon:"settings",text:"Sign settings",id:0})]})}),L.jsxs("div",{className:"flex flex-auto items-center justify-center gap-1",children:[L.jsx("h1",{className:"uppercase font-thin",children:t!==null&&!isNaN(t[0])&&!isNaN(t[1])?`${Math.floor(t[0])}cm x ${Math.floor(t[1])}cm`:"0cm x 0cm"}),L.jsx(wj,{scale:24}),L.jsx("p",{className:"font-bold text-[#F60793]",children:t&&!isNaN(t[0])&&!isNaN(t[1])?Math.floor(t[0])*Math.floor(t[1])/100+i+r+"$":"0$"})]}),L.jsxs("div",{className:" flex flex-1 justify-end space-x-4",children:[L.jsx(Or,{children:"Order now"}),L.jsx(Or,{variant:"outline",children:"Get custom design"})]})]})})};var UF={exports:{}},Oc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Oc.ConcurrentRoot=1;Oc.ContinuousEventPriority=4;Oc.DefaultEventPriority=16;Oc.DiscreteEventPriority=1;Oc.IdleEventPriority=536870912;Oc.LegacyRoot=0;UF.exports=Oc;var Zu=UF.exports;function Hj(t){let e;const n=new Set,r=(c,d)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=d?f:Object.assign({},e,f),n.forEach(m=>m(e,p))}},i=()=>e,s=(c,d=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const v=d(e);if(!f(p,v)){const y=p;c(p=v,y)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,d,f)=>d||f?s(c,d,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Gj=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),OR=Gj?E.useEffect:E.useLayoutEffect;function $j(t){const e=typeof t=="function"?Hj(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=E.useReducer(x=>x+1,0),o=e.getState(),a=E.useRef(o),l=E.useRef(r),c=E.useRef(i),d=E.useRef(!1),f=E.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||d.current)&&(p=r(o),m=!i(f.current,p)),OR(()=>{m&&(f.current=p),a.current=o,l.current=r,c.current=i,d.current=!1});const v=E.useRef(o);OR(()=>{const x=()=>{try{const _=e.getState(),w=l.current(_);c.current(f.current,w)||(a.current=_,f.current=w,s())}catch{d.current=!0,s()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const y=m?p:f.current;return E.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var kF={exports:{}},zF={exports:{}},HF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,O){var z=U.length;U.push(O);e:for(;0<z;){var ne=z-1>>>1,J=U[ne];if(0<i(J,O))U[ne]=O,U[z]=J,z=ne;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var O=U[0],z=U.pop();if(z!==O){U[0]=z;e:for(var ne=0,J=U.length,q=J>>>1;ne<q;){var ee=2*(ne+1)-1,_e=U[ee],be=ee+1,K=U[be];if(0>i(_e,z))be<J&&0>i(K,_e)?(U[ne]=K,U[be]=z,ne=be):(U[ne]=_e,U[ee]=z,ne=ee);else if(be<J&&0>i(K,z))U[ne]=K,U[be]=z,ne=be;else break e}}return O}function i(U,O){var z=U.sortIndex-O.sortIndex;return z!==0?z:U.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=U)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function b(U){if(y=!1,w(U),!v)if(n(l)!==null)v=!0,ie(C);else{var O=n(c);O!==null&&Z(b,O.startTime-U)}}function C(U,O){v=!1,y&&(y=!1,g(B),B=-1),m=!0;var z=p;try{for(w(O),f=n(l);f!==null&&(!(f.expirationTime>O)||U&&!k());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var J=ne(f.expirationTime<=O);O=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(l)&&r(l),w(O)}else r(l);f=n(l)}if(f!==null)var q=!0;else{var ee=n(c);ee!==null&&Z(b,ee.startTime-O),q=!1}return q}finally{f=null,p=z,m=!1}}var T=!1,P=null,B=-1,R=5,D=-1;function k(){return!(t.unstable_now()-D<R)}function X(){if(P!==null){var U=t.unstable_now();D=U;var O=!0;try{O=P(!0,U)}finally{O?$():(T=!1,P=null)}}else T=!1}var $;if(typeof _=="function")$=function(){_(X)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=X,$=function(){H.postMessage(null)}}else $=function(){x(X,0)};function ie(U){P=U,T||(T=!0,$())}function Z(U,O){B=x(function(){U(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,ie(C))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var z=p;p=O;try{return U()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,O){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=p;p=U;try{return O()}finally{p=z}},t.unstable_scheduleCallback=function(U,O,z){var ne=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ne+z:ne):z=ne,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,U={id:d++,callback:O,priorityLevel:U,startTime:z,expirationTime:J,sortIndex:-1},z>ne?(U.sortIndex=z,e(c,U),n(l)===null&&U===n(c)&&(y?(g(B),B=-1):y=!0,Z(b,z-ne))):(U.sortIndex=J,e(l,U),v||m||(v=!0,ie(C))),U},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(U){var O=p;return function(){var z=p;p=O;try{return U.apply(this,arguments)}finally{p=z}}}})(HF);zF.exports=HF;var kw=zF.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vj=function(e){var n={},r=E,i=kw,s=Object.assign;function o(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,S=1;S<arguments.length;S++)h+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),C=Symbol.iterator;function T(u){return u===null||typeof u!="object"?null:(u=C&&u[C]||u["@@iterator"],typeof u=="function"?u:null)}function P(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case d:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case y:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case _:return h=u.displayName||null,h!==null?h:P(u.type)||"Memo";case w:h=u._payload,u=u._init;try{return P(u(h))}catch{}}return null}function B(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(h);case 8:return h===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function R(u){var h=u,S=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,h.flags&4098&&(S=h.return),u=h.return;while(u)}return h.tag===3?S:null}function D(u){if(R(u)!==u)throw Error(o(188))}function k(u){var h=u.alternate;if(!h){if(h=R(u),h===null)throw Error(o(188));return h!==u?null:u}for(var S=u,A=h;;){var M=S.return;if(M===null)break;var I=M.alternate;if(I===null){if(A=M.return,A!==null){S=A;continue}break}if(M.child===I.child){for(I=M.child;I;){if(I===S)return D(M),u;if(I===A)return D(M),h;I=I.sibling}throw Error(o(188))}if(S.return!==A.return)S=M,A=I;else{for(var W=!1,se=M.child;se;){if(se===S){W=!0,S=M,A=I;break}if(se===A){W=!0,A=M,S=I;break}se=se.sibling}if(!W){for(se=I.child;se;){if(se===S){W=!0,S=I,A=M;break}if(se===A){W=!0,A=I,S=M;break}se=se.sibling}if(!W)throw Error(o(189))}}if(S.alternate!==A)throw Error(o(190))}if(S.tag!==3)throw Error(o(188));return S.stateNode.current===S?u:h}function X(u){return u=k(u),u!==null?$(u):null}function $(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=$(u);if(h!==null)return h;u=u.sibling}return null}function j(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var h=j(u);if(h!==null)return h}u=u.sibling}return null}var H=Array.isArray,ie=e.getPublicInstance,Z=e.getRootHostContext,U=e.getChildHostContext,O=e.prepareForCommit,z=e.resetAfterCommit,ne=e.createInstance,J=e.appendInitialChild,q=e.finalizeInitialChildren,ee=e.prepareUpdate,_e=e.shouldSetTextContent,be=e.createTextInstance,K=e.scheduleTimeout,je=e.cancelTimeout,Xe=e.noTimeout,Ee=e.isPrimaryRenderer,Me=e.supportsMutation,ve=e.supportsPersistence,re=e.supportsHydration,he=e.getInstanceFromNode,Fe=e.preparePortalMount,Be=e.getCurrentEventPriority,ke=e.detachDeletedInstance,Ze=e.supportsMicrotasks,ze=e.scheduleMicrotask,tt=e.supportsTestSelectors,ht=e.findFiberRoot,V=e.getBoundingRect,N=e.getTextContent,Y=e.isHiddenSubtree,ce=e.matchAccessibilityRole,Se=e.setFocusIfFocusable,Te=e.setupIntersectionObserver,Ke=e.appendChild,Ue=e.appendChildToContainer,ge=e.commitTextUpdate,Je=e.commitMount,Q=e.commitUpdate,me=e.insertBefore,Ae=e.insertInContainerBefore,Pe=e.removeChild,nt=e.removeChildFromContainer,ut=e.resetTextContent,$t=e.hideInstance,te=e.hideTextInstance,pe=e.unhideInstance,Ce=e.unhideTextInstance,We=e.clearContainer,rt=e.cloneInstance,Kt=e.createContainerChildSet,Yt=e.appendChildToContainerChildSet,or=e.finalizeContainerChildren,as=e.replaceContainerChildren,yn=e.cloneHiddenInstance,Gr=e.cloneHiddenTextInstance,Ui=e.canHydrateInstance,Hc=e.canHydrateTextInstance,im=e.canHydrateSuspenseInstance,sm=e.isSuspenseInstancePending,ef=e.isSuspenseInstanceFallback,rx=e.registerSuspenseInstanceRetry,G=e.getNextHydratableSibling,ue=e.getFirstHydratableChild,xe=e.getFirstHydratableChildWithinContainer,ae=e.getFirstHydratableChildWithinSuspenseInstance,we=e.hydrateInstance,ot=e.hydrateTextInstance,lt=e.hydrateSuspenseInstance,dt=e.getNextHydratableInstanceAfterSuspenseInstance,xt=e.commitHydratedContainer,bt=e.commitHydratedSuspenseInstance,Mt=e.clearSuspenseBoundary,Pt=e.clearSuspenseBoundaryFromContainer,Qt=e.shouldDeleteUnhydratedTailInstances,hr=e.didNotMatchHydratedContainerTextInstance,xi=e.didNotMatchHydratedTextInstance,ls;function cn(u){if(ls===void 0)try{throw Error()}catch(S){var h=S.stack.trim().match(/\n( *(at )?)/);ls=h&&h[1]||""}return`
`+ls+u}var It=!1;function hl(u,h){if(!u||It)return"";It=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(De){var A=De}Reflect.construct(u,[],h)}else{try{h.call()}catch(De){A=De}u.call(h.prototype)}else{try{throw Error()}catch(De){A=De}u()}}catch(De){if(De&&A&&typeof De.stack=="string"){for(var M=De.stack.split(`
`),I=A.stack.split(`
`),W=M.length-1,se=I.length-1;1<=W&&0<=se&&M[W]!==I[se];)se--;for(;1<=W&&0<=se;W--,se--)if(M[W]!==I[se]){if(W!==1||se!==1)do if(W--,se--,0>se||M[W]!==I[se]){var ye=`
`+M[W].replace(" at new "," at ");return u.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",u.displayName)),ye}while(1<=W&&0<=se);break}}}finally{It=!1,Error.prepareStackTrace=S}return(u=u?u.displayName||u.name:"")?cn(u):""}var jn=Object.prototype.hasOwnProperty,cs=[],uo=-1;function Zr(u){return{current:u}}function qt(u){0>uo||(u.current=cs[uo],cs[uo]=null,uo--)}function _t(u,h){uo++,cs[uo]=u.current,u.current=h}var br={},Xn=Zr(br),tn=Zr(!1),us=br;function Qo(u,h){var S=u.type.contextTypes;if(!S)return br;var A=u.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===h)return A.__reactInternalMemoizedMaskedChildContext;var M={},I;for(I in S)M[I]=h[I];return A&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=M),M}function pr(u){return u=u.childContextTypes,u!=null}function om(){qt(tn),qt(Xn)}function fM(u,h,S){if(Xn.current!==br)throw Error(o(168));_t(Xn,h),_t(tn,S)}function hM(u,h,S){var A=u.stateNode;if(h=h.childContextTypes,typeof A.getChildContext!="function")return S;A=A.getChildContext();for(var M in A)if(!(M in h))throw Error(o(108,B(u)||"Unknown",M));return s({},S,A)}function am(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||br,us=Xn.current,_t(Xn,u),_t(tn,tn.current),!0}function pM(u,h,S){var A=u.stateNode;if(!A)throw Error(o(169));S?(u=hM(u,h,us),A.__reactInternalMemoizedMergedChildContext=u,qt(tn),qt(Xn),_t(Xn,u)):qt(tn),_t(tn,S)}var ds=Math.clz32?Math.clz32:zk,Uk=Math.log,kk=Math.LN2;function zk(u){return u>>>=0,u===0?32:31-(Uk(u)/kk|0)|0}var lm=64,cm=4194304;function tf(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function um(u,h){var S=u.pendingLanes;if(S===0)return 0;var A=0,M=u.suspendedLanes,I=u.pingedLanes,W=S&268435455;if(W!==0){var se=W&~M;se!==0?A=tf(se):(I&=W,I!==0&&(A=tf(I)))}else W=S&~M,W!==0?A=tf(W):I!==0&&(A=tf(I));if(A===0)return 0;if(h!==0&&h!==A&&!(h&M)&&(M=A&-A,I=h&-h,M>=I||M===16&&(I&4194240)!==0))return h;if(A&4&&(A|=S&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=A;0<h;)S=31-ds(h),M=1<<S,A|=u[S],h&=~M;return A}function Hk(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gk(u,h){for(var S=u.suspendedLanes,A=u.pingedLanes,M=u.expirationTimes,I=u.pendingLanes;0<I;){var W=31-ds(I),se=1<<W,ye=M[W];ye===-1?(!(se&S)||se&A)&&(M[W]=Hk(se,h)):ye<=h&&(u.expiredLanes|=se),I&=~se}}function ix(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function sx(u){for(var h=[],S=0;31>S;S++)h.push(u);return h}function nf(u,h,S){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-ds(h),u[h]=S}function $k(u,h){var S=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var A=u.eventTimes;for(u=u.expirationTimes;0<S;){var M=31-ds(S),I=1<<M;h[M]=0,A[M]=-1,u[M]=-1,S&=~I}}function ox(u,h){var S=u.entangledLanes|=h;for(u=u.entanglements;S;){var A=31-ds(S),M=1<<A;M&h|u[A]&h&&(u[A]|=h),S&=~M}}var Vt=0;function mM(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var ax=i.unstable_scheduleCallback,gM=i.unstable_cancelCallback,Vk=i.unstable_shouldYield,Wk=i.unstable_requestPaint,ar=i.unstable_now,lx=i.unstable_ImmediatePriority,jk=i.unstable_UserBlockingPriority,cx=i.unstable_NormalPriority,Xk=i.unstable_IdlePriority,dm=null,ks=null;function Jk(u){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(dm,u,void 0,(u.current.flags&128)===128)}catch{}}function Kk(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var zs=typeof Object.is=="function"?Object.is:Kk,fo=null,fm=!1,ux=!1;function vM(u){fo===null?fo=[u]:fo.push(u)}function Yk(u){fm=!0,vM(u)}function Hs(){if(!ux&&fo!==null){ux=!0;var u=0,h=Vt;try{var S=fo;for(Vt=1;u<S.length;u++){var A=S[u];do A=A(!0);while(A!==null)}fo=null,fm=!1}catch(M){throw fo!==null&&(fo=fo.slice(u+1)),ax(lx,Hs),M}finally{Vt=h,ux=!1}}return null}var Qk=a.ReactCurrentBatchConfig;function hm(u,h){if(zs(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var S=Object.keys(u),A=Object.keys(h);if(S.length!==A.length)return!1;for(A=0;A<S.length;A++){var M=S[A];if(!jn.call(h,M)||!zs(u[M],h[M]))return!1}return!0}function qk(u){switch(u.tag){case 5:return cn(u.type);case 16:return cn("Lazy");case 13:return cn("Suspense");case 19:return cn("SuspenseList");case 0:case 2:case 15:return u=hl(u.type,!1),u;case 11:return u=hl(u.type.render,!1),u;case 1:return u=hl(u.type,!0),u;default:return""}}function fs(u,h){if(u&&u.defaultProps){h=s({},h),u=u.defaultProps;for(var S in u)h[S]===void 0&&(h[S]=u[S]);return h}return h}var pm=Zr(null),mm=null,Gc=null,dx=null;function fx(){dx=Gc=mm=null}function yM(u,h,S){Ee?(_t(pm,h._currentValue),h._currentValue=S):(_t(pm,h._currentValue2),h._currentValue2=S)}function hx(u){var h=pm.current;qt(pm),Ee?u._currentValue=h:u._currentValue2=h}function px(u,h,S){for(;u!==null;){var A=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,A!==null&&(A.childLanes|=h)):A!==null&&(A.childLanes&h)!==h&&(A.childLanes|=h),u===S)break;u=u.return}}function $c(u,h){mm=u,dx=Gc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&h&&(wi=!0),u.firstContext=null)}function ki(u){var h=Ee?u._currentValue:u._currentValue2;if(dx!==u)if(u={context:u,memoizedValue:h,next:null},Gc===null){if(mm===null)throw Error(o(308));Gc=u,mm.dependencies={lanes:0,firstContext:u}}else Gc=Gc.next=u;return h}var Gs=null,qo=!1;function mx(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xM(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function ho(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function Zo(u,h){var S=u.updateQueue;S!==null&&(S=S.shared,Jn!==null&&u.mode&1&&!(Ct&2)?(u=S.interleaved,u===null?(h.next=h,Gs===null?Gs=[S]:Gs.push(S)):(h.next=u.next,u.next=h),S.interleaved=h):(u=S.pending,u===null?h.next=h:(h.next=u.next,u.next=h),S.pending=h))}function gm(u,h,S){if(h=h.updateQueue,h!==null&&(h=h.shared,(S&4194240)!==0)){var A=h.lanes;A&=u.pendingLanes,S|=A,h.lanes=S,ox(u,S)}}function _M(u,h){var S=u.updateQueue,A=u.alternate;if(A!==null&&(A=A.updateQueue,S===A)){var M=null,I=null;if(S=S.firstBaseUpdate,S!==null){do{var W={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};I===null?M=I=W:I=I.next=W,S=S.next}while(S!==null);I===null?M=I=h:I=I.next=h}else M=I=h;S={baseState:A.baseState,firstBaseUpdate:M,lastBaseUpdate:I,shared:A.shared,effects:A.effects},u.updateQueue=S;return}u=S.lastBaseUpdate,u===null?S.firstBaseUpdate=h:u.next=h,S.lastBaseUpdate=h}function vm(u,h,S,A){var M=u.updateQueue;qo=!1;var I=M.firstBaseUpdate,W=M.lastBaseUpdate,se=M.shared.pending;if(se!==null){M.shared.pending=null;var ye=se,De=ye.next;ye.next=null,W===null?I=De:W.next=De,W=ye;var qe=u.alternate;qe!==null&&(qe=qe.updateQueue,se=qe.lastBaseUpdate,se!==W&&(se===null?qe.firstBaseUpdate=De:se.next=De,qe.lastBaseUpdate=ye))}if(I!==null){var pt=M.baseState;W=0,qe=De=ye=null,se=I;do{var at=se.lane,sn=se.eventTime;if((A&at)===at){qe!==null&&(qe=qe.next={eventTime:sn,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var st=u,Rr=se;switch(at=h,sn=S,Rr.tag){case 1:if(st=Rr.payload,typeof st=="function"){pt=st.call(sn,pt,at);break e}pt=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=Rr.payload,at=typeof st=="function"?st.call(sn,pt,at):st,at==null)break e;pt=s({},pt,at);break e;case 2:qo=!0}}se.callback!==null&&se.lane!==0&&(u.flags|=64,at=M.effects,at===null?M.effects=[se]:at.push(se))}else sn={eventTime:sn,lane:at,tag:se.tag,payload:se.payload,callback:se.callback,next:null},qe===null?(De=qe=sn,ye=pt):qe=qe.next=sn,W|=at;if(se=se.next,se===null){if(se=M.shared.pending,se===null)break;at=se,se=at.next,at.next=null,M.lastBaseUpdate=at,M.shared.pending=null}}while(1);if(qe===null&&(ye=pt),M.baseState=ye,M.firstBaseUpdate=De,M.lastBaseUpdate=qe,h=M.shared.interleaved,h!==null){M=h;do W|=M.lane,M=M.next;while(M!==h)}else I===null&&(M.shared.lanes=0);qc|=W,u.lanes=W,u.memoizedState=pt}}function SM(u,h,S){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var A=u[h],M=A.callback;if(M!==null){if(A.callback=null,A=S,typeof M!="function")throw Error(o(191,M));M.call(A)}}}var wM=new r.Component().refs;function gx(u,h,S,A){h=u.memoizedState,S=S(A,h),S=S==null?h:s({},h,S),u.memoizedState=S,u.lanes===0&&(u.updateQueue.baseState=S)}var ym={isMounted:function(u){return(u=u._reactInternals)?R(u)===u:!1},enqueueSetState:function(u,h,S){u=u._reactInternals;var A=Vr(),M=na(u),I=ho(A,M);I.payload=h,S!=null&&(I.callback=S),Zo(u,I),h=Vi(u,M,A),h!==null&&gm(h,u,M)},enqueueReplaceState:function(u,h,S){u=u._reactInternals;var A=Vr(),M=na(u),I=ho(A,M);I.tag=1,I.payload=h,S!=null&&(I.callback=S),Zo(u,I),h=Vi(u,M,A),h!==null&&gm(h,u,M)},enqueueForceUpdate:function(u,h){u=u._reactInternals;var S=Vr(),A=na(u),M=ho(S,A);M.tag=2,h!=null&&(M.callback=h),Zo(u,M),h=Vi(u,A,S),h!==null&&gm(h,u,A)}};function EM(u,h,S,A,M,I,W){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(A,I,W):h.prototype&&h.prototype.isPureReactComponent?!hm(S,A)||!hm(M,I):!0}function AM(u,h,S){var A=!1,M=br,I=h.contextType;return typeof I=="object"&&I!==null?I=ki(I):(M=pr(h)?us:Xn.current,A=h.contextTypes,I=(A=A!=null)?Qo(u,M):br),h=new h(S,I),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=ym,u.stateNode=h,h._reactInternals=u,A&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=M,u.__reactInternalMemoizedMaskedChildContext=I),h}function bM(u,h,S,A){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(S,A),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(S,A),h.state!==u&&ym.enqueueReplaceState(h,h.state,null)}function vx(u,h,S,A){var M=u.stateNode;M.props=S,M.state=u.memoizedState,M.refs=wM,mx(u);var I=h.contextType;typeof I=="object"&&I!==null?M.context=ki(I):(I=pr(h)?us:Xn.current,M.context=Qo(u,I)),M.state=u.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(gx(u,h,I,S),M.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(h=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),h!==M.state&&ym.enqueueReplaceState(M,M.state,null),vm(u,S,M,A),M.state=u.memoizedState),typeof M.componentDidMount=="function"&&(u.flags|=4194308)}var Vc=[],Wc=0,xm=null,_m=0,zi=[],Hi=0,pl=null,po=1,mo="";function ml(u,h){Vc[Wc++]=_m,Vc[Wc++]=xm,xm=u,_m=h}function MM(u,h,S){zi[Hi++]=po,zi[Hi++]=mo,zi[Hi++]=pl,pl=u;var A=po;u=mo;var M=32-ds(A)-1;A&=~(1<<M),S+=1;var I=32-ds(h)+M;if(30<I){var W=M-M%5;I=(A&(1<<W)-1).toString(32),A>>=W,M-=W,po=1<<32-ds(h)+M|S<<M|A,mo=I+u}else po=1<<I|S<<M|A,mo=u}function yx(u){u.return!==null&&(ml(u,1),MM(u,1,0))}function xx(u){for(;u===xm;)xm=Vc[--Wc],Vc[Wc]=null,_m=Vc[--Wc],Vc[Wc]=null;for(;u===pl;)pl=zi[--Hi],zi[Hi]=null,mo=zi[--Hi],zi[Hi]=null,po=zi[--Hi],zi[Hi]=null}var _i=null,Si=null,xn=!1,rf=!1,hs=null;function CM(u,h){var S=Wi(5,null,null,0);S.elementType="DELETED",S.stateNode=h,S.return=u,h=u.deletions,h===null?(u.deletions=[S],u.flags|=16):h.push(S)}function TM(u,h){switch(u.tag){case 5:return h=Ui(h,u.type,u.pendingProps),h!==null?(u.stateNode=h,_i=u,Si=ue(h),!0):!1;case 6:return h=Hc(h,u.pendingProps),h!==null?(u.stateNode=h,_i=u,Si=null,!0):!1;case 13:if(h=im(h),h!==null){var S=pl!==null?{id:po,overflow:mo}:null;return u.memoizedState={dehydrated:h,treeContext:S,retryLane:1073741824},S=Wi(18,null,null,0),S.stateNode=h,S.return=u,u.child=S,_i=u,Si=null,!0}return!1;default:return!1}}function _x(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Sx(u){if(xn){var h=Si;if(h){var S=h;if(!TM(u,h)){if(_x(u))throw Error(o(418));h=G(S);var A=_i;h&&TM(u,h)?CM(A,S):(u.flags=u.flags&-4097|2,xn=!1,_i=u)}}else{if(_x(u))throw Error(o(418));u.flags=u.flags&-4097|2,xn=!1,_i=u}}}function RM(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;_i=u}function sf(u){if(!re||u!==_i)return!1;if(!xn)return RM(u),xn=!0,!1;if(u.tag!==3&&(u.tag!==5||Qt(u.type)&&!_e(u.type,u.memoizedProps))){var h=Si;if(h){if(_x(u)){for(u=Si;u;)u=G(u);throw Error(o(418))}for(;h;)CM(u,h),h=G(h)}}if(RM(u),u.tag===13){if(!re)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Si=dt(u)}else Si=_i?G(u.stateNode):null;return!0}function jc(){re&&(Si=_i=null,rf=xn=!1)}function wx(u){hs===null?hs=[u]:hs.push(u)}function of(u,h,S){if(u=S.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(o(309));var A=S.stateNode}if(!A)throw Error(o(147,u));var M=A,I=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(W){var se=M.refs;se===wM&&(se=M.refs={}),W===null?delete se[I]:se[I]=W},h._stringRef=I,h)}if(typeof u!="string")throw Error(o(284));if(!S._owner)throw Error(o(290,u))}return u}function Sm(u,h){throw u=Object.prototype.toString.call(h),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function PM(u){var h=u._init;return h(u._payload)}function IM(u){function h(le,oe){if(u){var fe=le.deletions;fe===null?(le.deletions=[oe],le.flags|=16):fe.push(oe)}}function S(le,oe){if(!u)return null;for(;oe!==null;)h(le,oe),oe=oe.sibling;return null}function A(le,oe){for(le=new Map;oe!==null;)oe.key!==null?le.set(oe.key,oe):le.set(oe.index,oe),oe=oe.sibling;return le}function M(le,oe){return le=ia(le,oe),le.index=0,le.sibling=null,le}function I(le,oe,fe){return le.index=fe,u?(fe=le.alternate,fe!==null?(fe=fe.index,fe<oe?(le.flags|=2,oe):fe):(le.flags|=2,oe)):(le.flags|=1048576,oe)}function W(le){return u&&le.alternate===null&&(le.flags|=2),le}function se(le,oe,fe,Ge){return oe===null||oe.tag!==6?(oe=s1(fe,le.mode,Ge),oe.return=le,oe):(oe=M(oe,fe),oe.return=le,oe)}function ye(le,oe,fe,Ge){var it=fe.type;return it===d?qe(le,oe,fe.props.children,Ge,fe.key):oe!==null&&(oe.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===w&&PM(it)===oe.type)?(Ge=M(oe,fe.props),Ge.ref=of(le,oe,fe),Ge.return=le,Ge):(Ge=qm(fe.type,fe.key,fe.props,null,le.mode,Ge),Ge.ref=of(le,oe,fe),Ge.return=le,Ge)}function De(le,oe,fe,Ge){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==fe.containerInfo||oe.stateNode.implementation!==fe.implementation?(oe=o1(fe,le.mode,Ge),oe.return=le,oe):(oe=M(oe,fe.children||[]),oe.return=le,oe)}function qe(le,oe,fe,Ge,it){return oe===null||oe.tag!==7?(oe=wl(fe,le.mode,Ge,it),oe.return=le,oe):(oe=M(oe,fe),oe.return=le,oe)}function pt(le,oe,fe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=s1(""+oe,le.mode,fe),oe.return=le,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case l:return fe=qm(oe.type,oe.key,oe.props,null,le.mode,fe),fe.ref=of(le,null,oe),fe.return=le,fe;case c:return oe=o1(oe,le.mode,fe),oe.return=le,oe;case w:var Ge=oe._init;return pt(le,Ge(oe._payload),fe)}if(H(oe)||T(oe))return oe=wl(oe,le.mode,fe,null),oe.return=le,oe;Sm(le,oe)}return null}function at(le,oe,fe,Ge){var it=oe!==null?oe.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return it!==null?null:se(le,oe,""+fe,Ge);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:return fe.key===it?ye(le,oe,fe,Ge):null;case c:return fe.key===it?De(le,oe,fe,Ge):null;case w:return it=fe._init,at(le,oe,it(fe._payload),Ge)}if(H(fe)||T(fe))return it!==null?null:qe(le,oe,fe,Ge,null);Sm(le,fe)}return null}function sn(le,oe,fe,Ge,it){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return le=le.get(fe)||null,se(oe,le,""+Ge,it);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:return le=le.get(Ge.key===null?fe:Ge.key)||null,ye(oe,le,Ge,it);case c:return le=le.get(Ge.key===null?fe:Ge.key)||null,De(oe,le,Ge,it);case w:var wt=Ge._init;return sn(le,oe,fe,wt(Ge._payload),it)}if(H(Ge)||T(Ge))return le=le.get(fe)||null,qe(oe,le,Ge,it,null);Sm(oe,Ge)}return null}function st(le,oe,fe,Ge){for(var it=null,wt=null,mt=oe,Wt=oe=0,cr=null;mt!==null&&Wt<fe.length;Wt++){mt.index>Wt?(cr=mt,mt=null):cr=mt.sibling;var jt=at(le,mt,fe[Wt],Ge);if(jt===null){mt===null&&(mt=cr);break}u&&mt&&jt.alternate===null&&h(le,mt),oe=I(jt,oe,Wt),wt===null?it=jt:wt.sibling=jt,wt=jt,mt=cr}if(Wt===fe.length)return S(le,mt),xn&&ml(le,Wt),it;if(mt===null){for(;Wt<fe.length;Wt++)mt=pt(le,fe[Wt],Ge),mt!==null&&(oe=I(mt,oe,Wt),wt===null?it=mt:wt.sibling=mt,wt=mt);return xn&&ml(le,Wt),it}for(mt=A(le,mt);Wt<fe.length;Wt++)cr=sn(mt,le,Wt,fe[Wt],Ge),cr!==null&&(u&&cr.alternate!==null&&mt.delete(cr.key===null?Wt:cr.key),oe=I(cr,oe,Wt),wt===null?it=cr:wt.sibling=cr,wt=cr);return u&&mt.forEach(function(sa){return h(le,sa)}),xn&&ml(le,Wt),it}function Rr(le,oe,fe,Ge){var it=T(fe);if(typeof it!="function")throw Error(o(150));if(fe=it.call(fe),fe==null)throw Error(o(151));for(var wt=it=null,mt=oe,Wt=oe=0,cr=null,jt=fe.next();mt!==null&&!jt.done;Wt++,jt=fe.next()){mt.index>Wt?(cr=mt,mt=null):cr=mt.sibling;var sa=at(le,mt,jt.value,Ge);if(sa===null){mt===null&&(mt=cr);break}u&&mt&&sa.alternate===null&&h(le,mt),oe=I(sa,oe,Wt),wt===null?it=sa:wt.sibling=sa,wt=sa,mt=cr}if(jt.done)return S(le,mt),xn&&ml(le,Wt),it;if(mt===null){for(;!jt.done;Wt++,jt=fe.next())jt=pt(le,jt.value,Ge),jt!==null&&(oe=I(jt,oe,Wt),wt===null?it=jt:wt.sibling=jt,wt=jt);return xn&&ml(le,Wt),it}for(mt=A(le,mt);!jt.done;Wt++,jt=fe.next())jt=sn(mt,le,Wt,jt.value,Ge),jt!==null&&(u&&jt.alternate!==null&&mt.delete(jt.key===null?Wt:jt.key),oe=I(jt,oe,Wt),wt===null?it=jt:wt.sibling=jt,wt=jt);return u&&mt.forEach(function(T4){return h(le,T4)}),xn&&ml(le,Wt),it}function ji(le,oe,fe,Ge){if(typeof fe=="object"&&fe!==null&&fe.type===d&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:e:{for(var it=fe.key,wt=oe;wt!==null;){if(wt.key===it){if(it=fe.type,it===d){if(wt.tag===7){S(le,wt.sibling),oe=M(wt,fe.props.children),oe.return=le,le=oe;break e}}else if(wt.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===w&&PM(it)===wt.type){S(le,wt.sibling),oe=M(wt,fe.props),oe.ref=of(le,wt,fe),oe.return=le,le=oe;break e}S(le,wt);break}else h(le,wt);wt=wt.sibling}fe.type===d?(oe=wl(fe.props.children,le.mode,Ge,fe.key),oe.return=le,le=oe):(Ge=qm(fe.type,fe.key,fe.props,null,le.mode,Ge),Ge.ref=of(le,oe,fe),Ge.return=le,le=Ge)}return W(le);case c:e:{for(wt=fe.key;oe!==null;){if(oe.key===wt)if(oe.tag===4&&oe.stateNode.containerInfo===fe.containerInfo&&oe.stateNode.implementation===fe.implementation){S(le,oe.sibling),oe=M(oe,fe.children||[]),oe.return=le,le=oe;break e}else{S(le,oe);break}else h(le,oe);oe=oe.sibling}oe=o1(fe,le.mode,Ge),oe.return=le,le=oe}return W(le);case w:return wt=fe._init,ji(le,oe,wt(fe._payload),Ge)}if(H(fe))return st(le,oe,fe,Ge);if(T(fe))return Rr(le,oe,fe,Ge);Sm(le,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,oe!==null&&oe.tag===6?(S(le,oe.sibling),oe=M(oe,fe),oe.return=le,le=oe):(S(le,oe),oe=s1(fe,le.mode,Ge),oe.return=le,le=oe),W(le)):S(le,oe)}return ji}var Xc=IM(!0),BM=IM(!1),af={},Gi=Zr(af),lf=Zr(af),Jc=Zr(af);function $s(u){if(u===af)throw Error(o(174));return u}function Ex(u,h){_t(Jc,h),_t(lf,u),_t(Gi,af),u=Z(h),qt(Gi),_t(Gi,u)}function Kc(){qt(Gi),qt(lf),qt(Jc)}function DM(u){var h=$s(Jc.current),S=$s(Gi.current);h=U(S,u.type,h),S!==h&&(_t(lf,u),_t(Gi,h))}function Ax(u){lf.current===u&&(qt(Gi),qt(lf))}var wn=Zr(0);function wm(u){for(var h=u;h!==null;){if(h.tag===13){var S=h.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||sm(S)||ef(S)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var bx=[];function Mx(){for(var u=0;u<bx.length;u++){var h=bx[u];Ee?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}bx.length=0}var Em=a.ReactCurrentDispatcher,$i=a.ReactCurrentBatchConfig,Yc=0,In=null,Mr=null,lr=null,Am=!1,cf=!1,uf=0,Zk=0;function Cr(){throw Error(o(321))}function Cx(u,h){if(h===null)return!1;for(var S=0;S<h.length&&S<u.length;S++)if(!zs(u[S],h[S]))return!1;return!0}function Tx(u,h,S,A,M,I){if(Yc=I,In=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Em.current=u===null||u.memoizedState===null?r4:i4,u=S(A,M),cf){I=0;do{if(cf=!1,uf=0,25<=I)throw Error(o(301));I+=1,lr=Mr=null,h.updateQueue=null,Em.current=s4,u=S(A,M)}while(cf)}if(Em.current=Rm,h=Mr!==null&&Mr.next!==null,Yc=0,lr=Mr=In=null,Am=!1,h)throw Error(o(300));return u}function Rx(){var u=uf!==0;return uf=0,u}function go(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?In.memoizedState=lr=u:lr=lr.next=u,lr}function Vs(){if(Mr===null){var u=In.alternate;u=u!==null?u.memoizedState:null}else u=Mr.next;var h=lr===null?In.memoizedState:lr.next;if(h!==null)lr=h,Mr=u;else{if(u===null)throw Error(o(310));Mr=u,u={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},lr===null?In.memoizedState=lr=u:lr=lr.next=u}return lr}function gl(u,h){return typeof h=="function"?h(u):h}function bm(u){var h=Vs(),S=h.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=u;var A=Mr,M=A.baseQueue,I=S.pending;if(I!==null){if(M!==null){var W=M.next;M.next=I.next,I.next=W}A.baseQueue=M=I,S.pending=null}if(M!==null){I=M.next,A=A.baseState;var se=W=null,ye=null,De=I;do{var qe=De.lane;if((Yc&qe)===qe)ye!==null&&(ye=ye.next={lane:0,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),A=De.hasEagerState?De.eagerState:u(A,De.action);else{var pt={lane:qe,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null};ye===null?(se=ye=pt,W=A):ye=ye.next=pt,In.lanes|=qe,qc|=qe}De=De.next}while(De!==null&&De!==I);ye===null?W=A:ye.next=se,zs(A,h.memoizedState)||(wi=!0),h.memoizedState=A,h.baseState=W,h.baseQueue=ye,S.lastRenderedState=A}if(u=S.interleaved,u!==null){M=u;do I=M.lane,In.lanes|=I,qc|=I,M=M.next;while(M!==u)}else M===null&&(S.lanes=0);return[h.memoizedState,S.dispatch]}function Mm(u){var h=Vs(),S=h.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=u;var A=S.dispatch,M=S.pending,I=h.memoizedState;if(M!==null){S.pending=null;var W=M=M.next;do I=u(I,W.action),W=W.next;while(W!==M);zs(I,h.memoizedState)||(wi=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),S.lastRenderedState=I}return[I,A]}function LM(){}function FM(u,h){var S=In,A=Vs(),M=h(),I=!zs(A.memoizedState,M);if(I&&(A.memoizedState=M,wi=!0),A=A.queue,ff(UM.bind(null,S,A,u),[u]),A.getSnapshot!==h||I||lr!==null&&lr.memoizedState.tag&1){if(S.flags|=2048,df(9,NM.bind(null,S,A,M,h),void 0,null),Jn===null)throw Error(o(349));Yc&30||OM(S,h,M)}return M}function OM(u,h,S){u.flags|=16384,u={getSnapshot:h,value:S},h=In.updateQueue,h===null?(h={lastEffect:null,stores:null},In.updateQueue=h,h.stores=[u]):(S=h.stores,S===null?h.stores=[u]:S.push(u))}function NM(u,h,S,A){h.value=S,h.getSnapshot=A,kM(h)&&Vi(u,1,-1)}function UM(u,h,S){return S(function(){kM(h)&&Vi(u,1,-1)})}function kM(u){var h=u.getSnapshot;u=u.value;try{var S=h();return!zs(u,S)}catch{return!0}}function Px(u){var h=go();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:u},h.queue=u,u=u.dispatch=n4.bind(null,In,u),[h.memoizedState,u]}function df(u,h,S,A){return u={tag:u,create:h,destroy:S,deps:A,next:null},h=In.updateQueue,h===null?(h={lastEffect:null,stores:null},In.updateQueue=h,h.lastEffect=u.next=u):(S=h.lastEffect,S===null?h.lastEffect=u.next=u:(A=S.next,S.next=u,u.next=A,h.lastEffect=u)),u}function zM(){return Vs().memoizedState}function Cm(u,h,S,A){var M=go();In.flags|=u,M.memoizedState=df(1|h,S,void 0,A===void 0?null:A)}function Tm(u,h,S,A){var M=Vs();A=A===void 0?null:A;var I=void 0;if(Mr!==null){var W=Mr.memoizedState;if(I=W.destroy,A!==null&&Cx(A,W.deps)){M.memoizedState=df(h,S,I,A);return}}In.flags|=u,M.memoizedState=df(1|h,S,I,A)}function Ix(u,h){return Cm(8390656,8,u,h)}function ff(u,h){return Tm(2048,8,u,h)}function HM(u,h){return Tm(4,2,u,h)}function GM(u,h){return Tm(4,4,u,h)}function $M(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function VM(u,h,S){return S=S!=null?S.concat([u]):null,Tm(4,4,$M.bind(null,h,u),S)}function Bx(){}function WM(u,h){var S=Vs();h=h===void 0?null:h;var A=S.memoizedState;return A!==null&&h!==null&&Cx(h,A[1])?A[0]:(S.memoizedState=[u,h],u)}function jM(u,h){var S=Vs();h=h===void 0?null:h;var A=S.memoizedState;return A!==null&&h!==null&&Cx(h,A[1])?A[0]:(u=u(),S.memoizedState=[u,h],u)}function e4(u,h){var S=Vt;Vt=S!==0&&4>S?S:4,u(!0);var A=$i.transition;$i.transition={};try{u(!1),h()}finally{Vt=S,$i.transition=A}}function XM(){return Vs().memoizedState}function t4(u,h,S){var A=na(u);S={lane:A,action:S,hasEagerState:!1,eagerState:null,next:null},JM(u)?KM(h,S):(YM(u,h,S),S=Vr(),u=Vi(u,A,S),u!==null&&QM(u,h,A))}function n4(u,h,S){var A=na(u),M={lane:A,action:S,hasEagerState:!1,eagerState:null,next:null};if(JM(u))KM(h,M);else{YM(u,h,M);var I=u.alternate;if(u.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var W=h.lastRenderedState,se=I(W,S);if(M.hasEagerState=!0,M.eagerState=se,zs(se,W))return}catch{}finally{}S=Vr(),u=Vi(u,A,S),u!==null&&QM(u,h,A)}}function JM(u){var h=u.alternate;return u===In||h!==null&&h===In}function KM(u,h){cf=Am=!0;var S=u.pending;S===null?h.next=h:(h.next=S.next,S.next=h),u.pending=h}function YM(u,h,S){Jn!==null&&u.mode&1&&!(Ct&2)?(u=h.interleaved,u===null?(S.next=S,Gs===null?Gs=[h]:Gs.push(h)):(S.next=u.next,u.next=S),h.interleaved=S):(u=h.pending,u===null?S.next=S:(S.next=u.next,u.next=S),h.pending=S)}function QM(u,h,S){if(S&4194240){var A=h.lanes;A&=u.pendingLanes,S|=A,h.lanes=S,ox(u,S)}}var Rm={readContext:ki,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},r4={readContext:ki,useCallback:function(u,h){return go().memoizedState=[u,h===void 0?null:h],u},useContext:ki,useEffect:Ix,useImperativeHandle:function(u,h,S){return S=S!=null?S.concat([u]):null,Cm(4194308,4,$M.bind(null,h,u),S)},useLayoutEffect:function(u,h){return Cm(4194308,4,u,h)},useInsertionEffect:function(u,h){return Cm(4,2,u,h)},useMemo:function(u,h){var S=go();return h=h===void 0?null:h,u=u(),S.memoizedState=[u,h],u},useReducer:function(u,h,S){var A=go();return h=S!==void 0?S(h):h,A.memoizedState=A.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},A.queue=u,u=u.dispatch=t4.bind(null,In,u),[A.memoizedState,u]},useRef:function(u){var h=go();return u={current:u},h.memoizedState=u},useState:Px,useDebugValue:Bx,useDeferredValue:function(u){var h=Px(u),S=h[0],A=h[1];return Ix(function(){var M=$i.transition;$i.transition={};try{A(u)}finally{$i.transition=M}},[u]),S},useTransition:function(){var u=Px(!1),h=u[0];return u=e4.bind(null,u[1]),go().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,S){var A=In,M=go();if(xn){if(S===void 0)throw Error(o(407));S=S()}else{if(S=h(),Jn===null)throw Error(o(349));Yc&30||OM(A,h,S)}M.memoizedState=S;var I={value:S,getSnapshot:h};return M.queue=I,Ix(UM.bind(null,A,I,u),[u]),A.flags|=2048,df(9,NM.bind(null,A,I,S,h),void 0,null),S},useId:function(){var u=go(),h=Jn.identifierPrefix;if(xn){var S=mo,A=po;S=(A&~(1<<32-ds(A)-1)).toString(32)+S,h=":"+h+"R"+S,S=uf++,0<S&&(h+="H"+S.toString(32)),h+=":"}else S=Zk++,h=":"+h+"r"+S.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},i4={readContext:ki,useCallback:WM,useContext:ki,useEffect:ff,useImperativeHandle:VM,useInsertionEffect:HM,useLayoutEffect:GM,useMemo:jM,useReducer:bm,useRef:zM,useState:function(){return bm(gl)},useDebugValue:Bx,useDeferredValue:function(u){var h=bm(gl),S=h[0],A=h[1];return ff(function(){var M=$i.transition;$i.transition={};try{A(u)}finally{$i.transition=M}},[u]),S},useTransition:function(){var u=bm(gl)[0],h=Vs().memoizedState;return[u,h]},useMutableSource:LM,useSyncExternalStore:FM,useId:XM,unstable_isNewReconciler:!1},s4={readContext:ki,useCallback:WM,useContext:ki,useEffect:ff,useImperativeHandle:VM,useInsertionEffect:HM,useLayoutEffect:GM,useMemo:jM,useReducer:Mm,useRef:zM,useState:function(){return Mm(gl)},useDebugValue:Bx,useDeferredValue:function(u){var h=Mm(gl),S=h[0],A=h[1];return ff(function(){var M=$i.transition;$i.transition={};try{A(u)}finally{$i.transition=M}},[u]),S},useTransition:function(){var u=Mm(gl)[0],h=Vs().memoizedState;return[u,h]},useMutableSource:LM,useSyncExternalStore:FM,useId:XM,unstable_isNewReconciler:!1};function Dx(u,h){try{var S="",A=h;do S+=qk(A),A=A.return;while(A);var M=S}catch(I){M=`
Error generating stack: `+I.message+`
`+I.stack}return{value:u,source:h,stack:M}}function Lx(u,h){try{console.error(h.value)}catch(S){setTimeout(function(){throw S})}}var o4=typeof WeakMap=="function"?WeakMap:Map;function qM(u,h,S){S=ho(-1,S),S.tag=3,S.payload={element:null};var A=h.value;return S.callback=function(){Wm||(Wm=!0,qx=A),Lx(u,h)},S}function ZM(u,h,S){S=ho(-1,S),S.tag=3;var A=u.type.getDerivedStateFromError;if(typeof A=="function"){var M=h.value;S.payload=function(){return A(M)},S.callback=function(){Lx(u,h)}}var I=u.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(S.callback=function(){Lx(u,h),typeof A!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var W=h.stack;this.componentDidCatch(h.value,{componentStack:W!==null?W:""})}),S}function eC(u,h,S){var A=u.pingCache;if(A===null){A=u.pingCache=new o4;var M=new Set;A.set(h,M)}else M=A.get(h),M===void 0&&(M=new Set,A.set(h,M));M.has(S)||(M.add(S),u=_4.bind(null,u,h,S),h.then(u,u))}function tC(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function nC(u,h,S,A,M){return u.mode&1?(u.flags|=65536,u.lanes=M,u):(u===h?u.flags|=65536:(u.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(h=ho(-1,1),h.tag=2,Zo(S,h))),S.lanes|=1),u)}function Ws(u){u.flags|=4}function rC(u,h){if(u!==null&&u.child===h.child)return!0;if(h.flags&16)return!1;for(u=h.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var hf,pf,Pm,Im;if(Me)hf=function(u,h){for(var S=h.child;S!==null;){if(S.tag===5||S.tag===6)J(u,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},pf=function(){},Pm=function(u,h,S,A,M){if(u=u.memoizedProps,u!==A){var I=h.stateNode,W=$s(Gi.current);S=ee(I,S,u,A,M,W),(h.updateQueue=S)&&Ws(h)}},Im=function(u,h,S,A){S!==A&&Ws(h)};else if(ve){hf=function(u,h,S,A){for(var M=h.child;M!==null;){if(M.tag===5){var I=M.stateNode;S&&A&&(I=yn(I,M.type,M.memoizedProps,M)),J(u,I)}else if(M.tag===6)I=M.stateNode,S&&A&&(I=Gr(I,M.memoizedProps,M)),J(u,I);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)I=M.child,I!==null&&(I.return=M),hf(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var iC=function(u,h,S,A){for(var M=h.child;M!==null;){if(M.tag===5){var I=M.stateNode;S&&A&&(I=yn(I,M.type,M.memoizedProps,M)),Yt(u,I)}else if(M.tag===6)I=M.stateNode,S&&A&&(I=Gr(I,M.memoizedProps,M)),Yt(u,I);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)I=M.child,I!==null&&(I.return=M),iC(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};pf=function(u,h){var S=h.stateNode;if(!rC(u,h)){u=S.containerInfo;var A=Kt(u);iC(A,h,!1,!1),S.pendingChildren=A,Ws(h),or(u,A)}},Pm=function(u,h,S,A,M){var I=u.stateNode,W=u.memoizedProps;if((u=rC(u,h))&&W===A)h.stateNode=I;else{var se=h.stateNode,ye=$s(Gi.current),De=null;W!==A&&(De=ee(se,S,W,A,M,ye)),u&&De===null?h.stateNode=I:(I=rt(I,De,S,W,A,h,u,se),q(I,S,A,M,ye)&&Ws(h),h.stateNode=I,u?Ws(h):hf(I,h,!1,!1))}},Im=function(u,h,S,A){S!==A?(u=$s(Jc.current),S=$s(Gi.current),h.stateNode=be(A,u,S,h),Ws(h)):h.stateNode=u.stateNode}}else pf=function(){},Pm=function(){},Im=function(){};function mf(u,h){if(!xn)switch(u.tailMode){case"hidden":h=u.tail;for(var S=null;h!==null;)h.alternate!==null&&(S=h),h=h.sibling;S===null?u.tail=null:S.sibling=null;break;case"collapsed":S=u.tail;for(var A=null;S!==null;)S.alternate!==null&&(A=S),S=S.sibling;A===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:A.sibling=null}}function Tr(u){var h=u.alternate!==null&&u.alternate.child===u.child,S=0,A=0;if(h)for(var M=u.child;M!==null;)S|=M.lanes|M.childLanes,A|=M.subtreeFlags&14680064,A|=M.flags&14680064,M.return=u,M=M.sibling;else for(M=u.child;M!==null;)S|=M.lanes|M.childLanes,A|=M.subtreeFlags,A|=M.flags,M.return=u,M=M.sibling;return u.subtreeFlags|=A,u.childLanes=S,h}function a4(u,h,S){var A=h.pendingProps;switch(xx(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(h),null;case 1:return pr(h.type)&&om(),Tr(h),null;case 3:return A=h.stateNode,Kc(),qt(tn),qt(Xn),Mx(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(u===null||u.child===null)&&(sf(h)?Ws(h):u===null||u.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,hs!==null&&(t1(hs),hs=null))),pf(u,h),Tr(h),null;case 5:Ax(h),S=$s(Jc.current);var M=h.type;if(u!==null&&h.stateNode!=null)Pm(u,h,M,A,S),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!A){if(h.stateNode===null)throw Error(o(166));return Tr(h),null}if(u=$s(Gi.current),sf(h)){if(!re)throw Error(o(175));u=we(h.stateNode,h.type,h.memoizedProps,S,u,h,!rf),h.updateQueue=u,u!==null&&Ws(h)}else{var I=ne(M,A,S,u,h);hf(I,h,!1,!1),h.stateNode=I,q(I,M,A,S,u)&&Ws(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Tr(h),null;case 6:if(u&&h.stateNode!=null)Im(u,h,u.memoizedProps,A);else{if(typeof A!="string"&&h.stateNode===null)throw Error(o(166));if(u=$s(Jc.current),S=$s(Gi.current),sf(h)){if(!re)throw Error(o(176));if(u=h.stateNode,A=h.memoizedProps,(S=ot(u,A,h,!rf))&&(M=_i,M!==null))switch(I=(M.mode&1)!==0,M.tag){case 3:hr(M.stateNode.containerInfo,u,A,I);break;case 5:xi(M.type,M.memoizedProps,M.stateNode,u,A,I)}S&&Ws(h)}else h.stateNode=be(A,u,S,h)}return Tr(h),null;case 13:if(qt(wn),A=h.memoizedState,xn&&Si!==null&&h.mode&1&&!(h.flags&128)){for(u=Si;u;)u=G(u);return jc(),h.flags|=98560,h}if(A!==null&&A.dehydrated!==null){if(A=sf(h),u===null){if(!A)throw Error(o(318));if(!re)throw Error(o(344));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));lt(u,h)}else jc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Tr(h),null}return hs!==null&&(t1(hs),hs=null),h.flags&128?(h.lanes=S,h):(A=A!==null,S=!1,u===null?sf(h):S=u.memoizedState!==null,A&&!S&&(h.child.flags|=8192,h.mode&1&&(u===null||wn.current&1?Zn===0&&(Zn=3):r1())),h.updateQueue!==null&&(h.flags|=4),Tr(h),null);case 4:return Kc(),pf(u,h),u===null&&Fe(h.stateNode.containerInfo),Tr(h),null;case 10:return hx(h.type._context),Tr(h),null;case 17:return pr(h.type)&&om(),Tr(h),null;case 19:if(qt(wn),M=h.memoizedState,M===null)return Tr(h),null;if(A=(h.flags&128)!==0,I=M.rendering,I===null)if(A)mf(M,!1);else{if(Zn!==0||u!==null&&u.flags&128)for(u=h.child;u!==null;){if(I=wm(u),I!==null){for(h.flags|=128,mf(M,!1),u=I.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),h.subtreeFlags=0,u=S,A=h.child;A!==null;)S=A,M=u,S.flags&=14680066,I=S.alternate,I===null?(S.childLanes=0,S.lanes=M,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=I.childLanes,S.lanes=I.lanes,S.child=I.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=I.memoizedProps,S.memoizedState=I.memoizedState,S.updateQueue=I.updateQueue,S.type=I.type,M=I.dependencies,S.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),A=A.sibling;return _t(wn,wn.current&1|2),h.child}u=u.sibling}M.tail!==null&&ar()>Qx&&(h.flags|=128,A=!0,mf(M,!1),h.lanes=4194304)}else{if(!A)if(u=wm(I),u!==null){if(h.flags|=128,A=!0,u=u.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),mf(M,!0),M.tail===null&&M.tailMode==="hidden"&&!I.alternate&&!xn)return Tr(h),null}else 2*ar()-M.renderingStartTime>Qx&&S!==1073741824&&(h.flags|=128,A=!0,mf(M,!1),h.lanes=4194304);M.isBackwards?(I.sibling=h.child,h.child=I):(u=M.last,u!==null?u.sibling=I:h.child=I,M.last=I)}return M.tail!==null?(h=M.tail,M.rendering=h,M.tail=h.sibling,M.renderingStartTime=ar(),h.sibling=null,u=wn.current,_t(wn,A?u&1|2:u&1),h):(Tr(h),null);case 22:case 23:return n1(),A=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==A&&(h.flags|=8192),A&&h.mode&1?Ei&1073741824&&(Tr(h),Me&&h.subtreeFlags&6&&(h.flags|=8192)):Tr(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var l4=a.ReactCurrentOwner,wi=!1;function $r(u,h,S,A){h.child=u===null?BM(h,null,S,A):Xc(h,u.child,S,A)}function sC(u,h,S,A,M){S=S.render;var I=h.ref;return $c(h,M),A=Tx(u,h,S,A,I,M),S=Rx(),u!==null&&!wi?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~M,vo(u,h,M)):(xn&&S&&yx(h),h.flags|=1,$r(u,h,A,M),h.child)}function oC(u,h,S,A,M){if(u===null){var I=S.type;return typeof I=="function"&&!i1(I)&&I.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(h.tag=15,h.type=I,aC(u,h,I,A,M)):(u=qm(S.type,null,A,h,h.mode,M),u.ref=h.ref,u.return=h,h.child=u)}if(I=u.child,!(u.lanes&M)){var W=I.memoizedProps;if(S=S.compare,S=S!==null?S:hm,S(W,A)&&u.ref===h.ref)return vo(u,h,M)}return h.flags|=1,u=ia(I,A),u.ref=h.ref,u.return=h,h.child=u}function aC(u,h,S,A,M){if(u!==null&&hm(u.memoizedProps,A)&&u.ref===h.ref)if(wi=!1,(u.lanes&M)!==0)u.flags&131072&&(wi=!0);else return h.lanes=u.lanes,vo(u,h,M);return Fx(u,h,S,A,M)}function lC(u,h,S){var A=h.pendingProps,M=A.children,I=u!==null?u.memoizedState:null;if(A.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},_t(Qc,Ei),Ei|=S;else if(S&1073741824)h.memoizedState={baseLanes:0,cachePool:null},A=I!==null?I.baseLanes:S,_t(Qc,Ei),Ei|=A;else return u=I!==null?I.baseLanes|S:S,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null},h.updateQueue=null,_t(Qc,Ei),Ei|=u,null;else I!==null?(A=I.baseLanes|S,h.memoizedState=null):A=S,_t(Qc,Ei),Ei|=A;return $r(u,h,M,S),h.child}function cC(u,h){var S=h.ref;(u===null&&S!==null||u!==null&&u.ref!==S)&&(h.flags|=512,h.flags|=2097152)}function Fx(u,h,S,A,M){var I=pr(S)?us:Xn.current;return I=Qo(h,I),$c(h,M),S=Tx(u,h,S,A,I,M),A=Rx(),u!==null&&!wi?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~M,vo(u,h,M)):(xn&&A&&yx(h),h.flags|=1,$r(u,h,S,M),h.child)}function uC(u,h,S,A,M){if(pr(S)){var I=!0;am(h)}else I=!1;if($c(h,M),h.stateNode===null)u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),AM(h,S,A),vx(h,S,A,M),A=!0;else if(u===null){var W=h.stateNode,se=h.memoizedProps;W.props=se;var ye=W.context,De=S.contextType;typeof De=="object"&&De!==null?De=ki(De):(De=pr(S)?us:Xn.current,De=Qo(h,De));var qe=S.getDerivedStateFromProps,pt=typeof qe=="function"||typeof W.getSnapshotBeforeUpdate=="function";pt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(se!==A||ye!==De)&&bM(h,W,A,De),qo=!1;var at=h.memoizedState;W.state=at,vm(h,A,W,M),ye=h.memoizedState,se!==A||at!==ye||tn.current||qo?(typeof qe=="function"&&(gx(h,S,qe,A),ye=h.memoizedState),(se=qo||EM(h,S,se,A,at,ye,De))?(pt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(h.flags|=4194308)):(typeof W.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=A,h.memoizedState=ye),W.props=A,W.state=ye,W.context=De,A=se):(typeof W.componentDidMount=="function"&&(h.flags|=4194308),A=!1)}else{W=h.stateNode,xM(u,h),se=h.memoizedProps,De=h.type===h.elementType?se:fs(h.type,se),W.props=De,pt=h.pendingProps,at=W.context,ye=S.contextType,typeof ye=="object"&&ye!==null?ye=ki(ye):(ye=pr(S)?us:Xn.current,ye=Qo(h,ye));var sn=S.getDerivedStateFromProps;(qe=typeof sn=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(se!==pt||at!==ye)&&bM(h,W,A,ye),qo=!1,at=h.memoizedState,W.state=at,vm(h,A,W,M);var st=h.memoizedState;se!==pt||at!==st||tn.current||qo?(typeof sn=="function"&&(gx(h,S,sn,A),st=h.memoizedState),(De=qo||EM(h,S,De,A,at,st,ye)||!1)?(qe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(A,st,ye),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(A,st,ye)),typeof W.componentDidUpdate=="function"&&(h.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof W.componentDidUpdate!="function"||se===u.memoizedProps&&at===u.memoizedState||(h.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||se===u.memoizedProps&&at===u.memoizedState||(h.flags|=1024),h.memoizedProps=A,h.memoizedState=st),W.props=A,W.state=st,W.context=ye,A=De):(typeof W.componentDidUpdate!="function"||se===u.memoizedProps&&at===u.memoizedState||(h.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||se===u.memoizedProps&&at===u.memoizedState||(h.flags|=1024),A=!1)}return Ox(u,h,S,A,I,M)}function Ox(u,h,S,A,M,I){cC(u,h);var W=(h.flags&128)!==0;if(!A&&!W)return M&&pM(h,S,!1),vo(u,h,I);A=h.stateNode,l4.current=h;var se=W&&typeof S.getDerivedStateFromError!="function"?null:A.render();return h.flags|=1,u!==null&&W?(h.child=Xc(h,u.child,null,I),h.child=Xc(h,null,se,I)):$r(u,h,se,I),h.memoizedState=A.state,M&&pM(h,S,!0),h.child}function dC(u){var h=u.stateNode;h.pendingContext?fM(u,h.pendingContext,h.pendingContext!==h.context):h.context&&fM(u,h.context,!1),Ex(u,h.containerInfo)}function fC(u,h,S,A,M){return jc(),wx(M),h.flags|=256,$r(u,h,S,A),h.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function Dm(u){return{baseLanes:u,cachePool:null}}function hC(u,h,S){var A=h.pendingProps,M=wn.current,I=!1,W=(h.flags&128)!==0,se;if((se=W)||(se=u!==null&&u.memoizedState===null?!1:(M&2)!==0),se?(I=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(M|=1),_t(wn,M&1),u===null)return Sx(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(h.mode&1?ef(u)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(M=A.children,u=A.fallback,I?(A=h.mode,I=h.child,M={mode:"hidden",children:M},!(A&1)&&I!==null?(I.childLanes=0,I.pendingProps=M):I=Zm(M,A,0,null),u=wl(u,A,S,null),I.return=h,u.return=h,I.sibling=u,h.child=I,h.child.memoizedState=Dm(S),h.memoizedState=Bm,u):Nx(h,M));if(M=u.memoizedState,M!==null){if(se=M.dehydrated,se!==null){if(W)return h.flags&256?(h.flags&=-257,Lm(u,h,S,Error(o(422)))):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(I=A.fallback,M=h.mode,A=Zm({mode:"visible",children:A.children},M,0,null),I=wl(I,M,S,null),I.flags|=2,A.return=h,I.return=h,A.sibling=I,h.child=A,h.mode&1&&Xc(h,u.child,null,S),h.child.memoizedState=Dm(S),h.memoizedState=Bm,I);if(!(h.mode&1))h=Lm(u,h,S,null);else if(ef(se))h=Lm(u,h,S,Error(o(419)));else if(A=(S&u.childLanes)!==0,wi||A){if(A=Jn,A!==null){switch(S&-S){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}A=I&(A.suspendedLanes|S)?0:I,A!==0&&A!==M.retryLane&&(M.retryLane=A,Vi(u,A,-1))}r1(),h=Lm(u,h,S,Error(o(421)))}else sm(se)?(h.flags|=128,h.child=u.child,h=S4.bind(null,u),rx(se,h),h=null):(S=M.treeContext,re&&(Si=ae(se),_i=h,xn=!0,hs=null,rf=!1,S!==null&&(zi[Hi++]=po,zi[Hi++]=mo,zi[Hi++]=pl,po=S.id,mo=S.overflow,pl=h)),h=Nx(h,h.pendingProps.children),h.flags|=4096);return h}return I?(A=mC(u,h,A.children,A.fallback,S),I=h.child,M=u.child.memoizedState,I.memoizedState=M===null?Dm(S):{baseLanes:M.baseLanes|S,cachePool:null},I.childLanes=u.childLanes&~S,h.memoizedState=Bm,A):(S=pC(u,h,A.children,S),h.memoizedState=null,S)}return I?(A=mC(u,h,A.children,A.fallback,S),I=h.child,M=u.child.memoizedState,I.memoizedState=M===null?Dm(S):{baseLanes:M.baseLanes|S,cachePool:null},I.childLanes=u.childLanes&~S,h.memoizedState=Bm,A):(S=pC(u,h,A.children,S),h.memoizedState=null,S)}function Nx(u,h){return h=Zm({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function pC(u,h,S,A){var M=u.child;return u=M.sibling,S=ia(M,{mode:"visible",children:S}),!(h.mode&1)&&(S.lanes=A),S.return=h,S.sibling=null,u!==null&&(A=h.deletions,A===null?(h.deletions=[u],h.flags|=16):A.push(u)),h.child=S}function mC(u,h,S,A,M){var I=h.mode;u=u.child;var W=u.sibling,se={mode:"hidden",children:S};return!(I&1)&&h.child!==u?(S=h.child,S.childLanes=0,S.pendingProps=se,h.deletions=null):(S=ia(u,se),S.subtreeFlags=u.subtreeFlags&14680064),W!==null?A=ia(W,A):(A=wl(A,I,M,null),A.flags|=2),A.return=h,S.return=h,S.sibling=A,h.child=S,A}function Lm(u,h,S,A){return A!==null&&wx(A),Xc(h,u.child,null,S),u=Nx(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function gC(u,h,S){u.lanes|=h;var A=u.alternate;A!==null&&(A.lanes|=h),px(u.return,h,S)}function Ux(u,h,S,A,M){var I=u.memoizedState;I===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:A,tail:S,tailMode:M}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=A,I.tail=S,I.tailMode=M)}function vC(u,h,S){var A=h.pendingProps,M=A.revealOrder,I=A.tail;if($r(u,h,A.children,S),A=wn.current,A&2)A=A&1|2,h.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&gC(u,S,h);else if(u.tag===19)gC(u,S,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}A&=1}if(_t(wn,A),!(h.mode&1))h.memoizedState=null;else switch(M){case"forwards":for(S=h.child,M=null;S!==null;)u=S.alternate,u!==null&&wm(u)===null&&(M=S),S=S.sibling;S=M,S===null?(M=h.child,h.child=null):(M=S.sibling,S.sibling=null),Ux(h,!1,M,S,I);break;case"backwards":for(S=null,M=h.child,h.child=null;M!==null;){if(u=M.alternate,u!==null&&wm(u)===null){h.child=M;break}u=M.sibling,M.sibling=S,S=M,M=u}Ux(h,!0,S,null,I);break;case"together":Ux(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function vo(u,h,S){if(u!==null&&(h.dependencies=u.dependencies),qc|=h.lanes,!(S&h.childLanes))return null;if(u!==null&&h.child!==u.child)throw Error(o(153));if(h.child!==null){for(u=h.child,S=ia(u,u.pendingProps),h.child=S,S.return=h;u.sibling!==null;)u=u.sibling,S=S.sibling=ia(u,u.pendingProps),S.return=h;S.sibling=null}return h.child}function c4(u,h,S){switch(h.tag){case 3:dC(h),jc();break;case 5:DM(h);break;case 1:pr(h.type)&&am(h);break;case 4:Ex(h,h.stateNode.containerInfo);break;case 10:yM(h,h.type._context,h.memoizedProps.value);break;case 13:var A=h.memoizedState;if(A!==null)return A.dehydrated!==null?(_t(wn,wn.current&1),h.flags|=128,null):S&h.child.childLanes?hC(u,h,S):(_t(wn,wn.current&1),u=vo(u,h,S),u!==null?u.sibling:null);_t(wn,wn.current&1);break;case 19:if(A=(S&h.childLanes)!==0,u.flags&128){if(A)return vC(u,h,S);h.flags|=128}var M=h.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),_t(wn,wn.current),A)break;return null;case 22:case 23:return h.lanes=0,lC(u,h,S)}return vo(u,h,S)}function u4(u,h){switch(xx(h),h.tag){case 1:return pr(h.type)&&om(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Kc(),qt(tn),qt(Xn),Mx(),u=h.flags,u&65536&&!(u&128)?(h.flags=u&-65537|128,h):null;case 5:return Ax(h),null;case 13:if(qt(wn),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(o(340));jc()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return qt(wn),null;case 4:return Kc(),null;case 10:return hx(h.type._context),null;case 22:case 23:return n1(),null;case 24:return null;default:return null}}var Fm=!1,vl=!1,d4=typeof WeakSet=="function"?WeakSet:Set,He=null;function Om(u,h){var S=u.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(A){ni(u,h,A)}else S.current=null}function kx(u,h,S){try{S()}catch(A){ni(u,h,A)}}var yC=!1;function f4(u,h){for(O(u.containerInfo),He=h;He!==null;)if(u=He,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,He=h;else for(;He!==null;){u=He;try{var S=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,M=S.memoizedState,I=u.stateNode,W=I.getSnapshotBeforeUpdate(u.elementType===u.type?A:fs(u.type,A),M);I.__reactInternalSnapshotBeforeUpdate=W}break;case 3:Me&&We(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(se){ni(u,u.return,se)}if(h=u.sibling,h!==null){h.return=u.return,He=h;break}He=u.return}return S=yC,yC=!1,S}function yl(u,h,S){var A=h.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var M=A=A.next;do{if((M.tag&u)===u){var I=M.destroy;M.destroy=void 0,I!==void 0&&kx(h,S,I)}M=M.next}while(M!==A)}}function gf(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var S=h=h.next;do{if((S.tag&u)===u){var A=S.create;S.destroy=A()}S=S.next}while(S!==h)}}function zx(u){var h=u.ref;if(h!==null){var S=u.stateNode;switch(u.tag){case 5:u=ie(S);break;default:u=S}typeof h=="function"?h(u):h.current=u}}function xC(u,h,S){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(dm,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(u=h.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var A=u=u.next;do{var M=A,I=M.destroy;M=M.tag,I!==void 0&&(M&2||M&4)&&kx(h,S,I),A=A.next}while(A!==u)}break;case 1:if(Om(h,S),u=h.stateNode,typeof u.componentWillUnmount=="function")try{u.props=h.memoizedProps,u.state=h.memoizedState,u.componentWillUnmount()}catch(W){ni(h,S,W)}break;case 5:Om(h,S);break;case 4:Me?bC(u,h,S):ve&&ve&&(h=h.stateNode.containerInfo,S=Kt(h),as(h,S))}}function _C(u,h,S){for(var A=h;;)if(xC(u,A,S),A.child===null||Me&&A.tag===4){if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function SC(u){var h=u.alternate;h!==null&&(u.alternate=null,SC(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&ke(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function wC(u){return u.tag===5||u.tag===3||u.tag===4}function EC(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||wC(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function AC(u){if(Me){e:{for(var h=u.return;h!==null;){if(wC(h))break e;h=h.return}throw Error(o(160))}var S=h;switch(S.tag){case 5:h=S.stateNode,S.flags&32&&(ut(h),S.flags&=-33),S=EC(u),Gx(u,S,h);break;case 3:case 4:h=S.stateNode.containerInfo,S=EC(u),Hx(u,S,h);break;default:throw Error(o(161))}}}function Hx(u,h,S){var A=u.tag;if(A===5||A===6)u=u.stateNode,h?Ae(S,u,h):Ue(S,u);else if(A!==4&&(u=u.child,u!==null))for(Hx(u,h,S),u=u.sibling;u!==null;)Hx(u,h,S),u=u.sibling}function Gx(u,h,S){var A=u.tag;if(A===5||A===6)u=u.stateNode,h?me(S,u,h):Ke(S,u);else if(A!==4&&(u=u.child,u!==null))for(Gx(u,h,S),u=u.sibling;u!==null;)Gx(u,h,S),u=u.sibling}function bC(u,h,S){for(var A=h,M=!1,I,W;;){if(!M){M=A.return;e:for(;;){if(M===null)throw Error(o(160));switch(I=M.stateNode,M.tag){case 5:W=!1;break e;case 3:I=I.containerInfo,W=!0;break e;case 4:I=I.containerInfo,W=!0;break e}M=M.return}M=!0}if(A.tag===5||A.tag===6)_C(u,A,S),W?nt(I,A.stateNode):Pe(I,A.stateNode);else if(A.tag===18)W?Pt(I,A.stateNode):Mt(I,A.stateNode);else if(A.tag===4){if(A.child!==null){I=A.stateNode.containerInfo,W=!0,A.child.return=A,A=A.child;continue}}else if(xC(u,A,S),A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return;A=A.return,A.tag===4&&(M=!1)}A.sibling.return=A.return,A=A.sibling}}function $x(u,h){if(Me){switch(h.tag){case 0:case 11:case 14:case 15:yl(3,h,h.return),gf(3,h),yl(5,h,h.return);return;case 1:return;case 5:var S=h.stateNode;if(S!=null){var A=h.memoizedProps;u=u!==null?u.memoizedProps:A;var M=h.type,I=h.updateQueue;h.updateQueue=null,I!==null&&Q(S,I,M,u,A,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));S=h.memoizedProps,ge(h.stateNode,u!==null?u.memoizedProps:S,S);return;case 3:re&&u!==null&&u.memoizedState.isDehydrated&&xt(h.stateNode.containerInfo);return;case 12:return;case 13:Nm(h);return;case 19:Nm(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:yl(3,h,h.return),gf(3,h),yl(5,h,h.return);return;case 12:return;case 13:Nm(h);return;case 19:Nm(h);return;case 3:re&&u!==null&&u.memoizedState.isDehydrated&&xt(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(ve){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,as(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Nm(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var S=u.stateNode;S===null&&(S=u.stateNode=new d4),h.forEach(function(A){var M=w4.bind(null,u,A);S.has(A)||(S.add(A),A.then(M,M))})}}function h4(u,h){for(He=h;He!==null;){h=He;var S=h.deletions;if(S!==null)for(var A=0;A<S.length;A++){var M=S[A];try{var I=u;Me?bC(I,M,h):_C(I,M,h);var W=M.alternate;W!==null&&(W.return=null),M.return=null}catch(it){ni(M,h,it)}}if(S=h.child,h.subtreeFlags&12854&&S!==null)S.return=h,He=S;else for(;He!==null;){h=He;try{var se=h.flags;if(se&32&&Me&&ut(h.stateNode),se&512){var ye=h.alternate;if(ye!==null){var De=ye.ref;De!==null&&(typeof De=="function"?De(null):De.current=null)}}if(se&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var qe=h.alternate;(qe===null||qe.memoizedState===null)&&(Yx=ar())}break;case 22:var pt=h.memoizedState!==null,at=h.alternate,sn=at!==null&&at.memoizedState!==null;if(S=h,Me){e:if(A=S,M=pt,I=null,Me)for(var st=A;;){if(st.tag===5){if(I===null){I=st;var Rr=st.stateNode;M?$t(Rr):pe(st.stateNode,st.memoizedProps)}}else if(st.tag===6){if(I===null){var ji=st.stateNode;M?te(ji):Ce(ji,st.memoizedProps)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===A)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===A)break;for(;st.sibling===null;){if(st.return===null||st.return===A)break e;I===st&&(I=null),st=st.return}I===st&&(I=null),st.sibling.return=st.return,st=st.sibling}}if(pt&&!sn&&S.mode&1){He=S;for(var le=S.child;le!==null;){for(S=He=le;He!==null;){A=He;var oe=A.child;switch(A.tag){case 0:case 11:case 14:case 15:yl(4,A,A.return);break;case 1:Om(A,A.return);var fe=A.stateNode;if(typeof fe.componentWillUnmount=="function"){var Ge=A.return;try{fe.props=A.memoizedProps,fe.state=A.memoizedState,fe.componentWillUnmount()}catch(it){ni(A,Ge,it)}}break;case 5:Om(A,A.return);break;case 22:if(A.memoizedState!==null){TC(S);continue}}oe!==null?(oe.return=A,He=oe):TC(S)}le=le.sibling}}}switch(se&4102){case 2:AC(h),h.flags&=-3;break;case 6:AC(h),h.flags&=-3,$x(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,$x(h.alternate,h);break;case 4:$x(h.alternate,h)}}catch(it){ni(h,h.return,it)}if(S=h.sibling,S!==null){S.return=h.return,He=S;break}He=h.return}}}function p4(u,h,S){He=u,MC(u)}function MC(u,h,S){for(var A=(u.mode&1)!==0;He!==null;){var M=He,I=M.child;if(M.tag===22&&A){var W=M.memoizedState!==null||Fm;if(!W){var se=M.alternate,ye=se!==null&&se.memoizedState!==null||vl;se=Fm;var De=vl;if(Fm=W,(vl=ye)&&!De)for(He=M;He!==null;)W=He,ye=W.child,W.tag===22&&W.memoizedState!==null?RC(M):ye!==null?(ye.return=W,He=ye):RC(M);for(;I!==null;)He=I,MC(I),I=I.sibling;He=M,Fm=se,vl=De}CC(u)}else M.subtreeFlags&8772&&I!==null?(I.return=M,He=I):CC(u)}}function CC(u){for(;He!==null;){var h=He;if(h.flags&8772){var S=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:vl||gf(5,h);break;case 1:var A=h.stateNode;if(h.flags&4&&!vl)if(S===null)A.componentDidMount();else{var M=h.elementType===h.type?S.memoizedProps:fs(h.type,S.memoizedProps);A.componentDidUpdate(M,S.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&SM(h,I,A);break;case 3:var W=h.updateQueue;if(W!==null){if(S=null,h.child!==null)switch(h.child.tag){case 5:S=ie(h.child.stateNode);break;case 1:S=h.child.stateNode}SM(h,W,S)}break;case 5:var se=h.stateNode;S===null&&h.flags&4&&Je(se,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(re&&h.memoizedState===null){var ye=h.alternate;if(ye!==null){var De=ye.memoizedState;if(De!==null){var qe=De.dehydrated;qe!==null&&bt(qe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}vl||h.flags&512&&zx(h)}catch(pt){ni(h,h.return,pt)}}if(h===u){He=null;break}if(S=h.sibling,S!==null){S.return=h.return,He=S;break}He=h.return}}function TC(u){for(;He!==null;){var h=He;if(h===u){He=null;break}var S=h.sibling;if(S!==null){S.return=h.return,He=S;break}He=h.return}}function RC(u){for(;He!==null;){var h=He;try{switch(h.tag){case 0:case 11:case 15:var S=h.return;try{gf(4,h)}catch(ye){ni(h,S,ye)}break;case 1:var A=h.stateNode;if(typeof A.componentDidMount=="function"){var M=h.return;try{A.componentDidMount()}catch(ye){ni(h,M,ye)}}var I=h.return;try{zx(h)}catch(ye){ni(h,I,ye)}break;case 5:var W=h.return;try{zx(h)}catch(ye){ni(h,W,ye)}}}catch(ye){ni(h,h.return,ye)}if(h===u){He=null;break}var se=h.sibling;if(se!==null){se.return=h.return,He=se;break}He=h.return}}var Um=0,km=1,zm=2,Hm=3,Gm=4;if(typeof Symbol=="function"&&Symbol.for){var vf=Symbol.for;Um=vf("selector.component"),km=vf("selector.has_pseudo_class"),zm=vf("selector.role"),Hm=vf("selector.test_id"),Gm=vf("selector.text")}function Vx(u){var h=he(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(u=ht(u),u===null)throw Error(o(362));return u.stateNode.current}function Wx(u,h){switch(h.$$typeof){case Um:if(u.type===h.value)return!0;break;case km:e:{h=h.value,u=[u,0];for(var S=0;S<u.length;){var A=u[S++],M=u[S++],I=h[M];if(A.tag!==5||!Y(A)){for(;I!=null&&Wx(A,I);)M++,I=h[M];if(M===h.length){h=!0;break e}else for(A=A.child;A!==null;)u.push(A,M),A=A.sibling}}h=!1}return h;case zm:if(u.tag===5&&ce(u.stateNode,h.value))return!0;break;case Gm:if((u.tag===5||u.tag===6)&&(u=N(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case Hm:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function jx(u){switch(u.$$typeof){case Um:return"<"+(P(u.value)||"Unknown")+">";case km:return":has("+(jx(u)||"")+")";case zm:return'[role="'+u.value+'"]';case Gm:return'"'+u.value+'"';case Hm:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function PC(u,h){var S=[];u=[u,0];for(var A=0;A<u.length;){var M=u[A++],I=u[A++],W=h[I];if(M.tag!==5||!Y(M)){for(;W!=null&&Wx(M,W);)I++,W=h[I];if(I===h.length)S.push(M);else for(M=M.child;M!==null;)u.push(M,I),M=M.sibling}}return S}function Xx(u,h){if(!tt)throw Error(o(363));u=Vx(u),u=PC(u,h),h=[],u=Array.from(u);for(var S=0;S<u.length;){var A=u[S++];if(A.tag===5)Y(A)||h.push(A.stateNode);else for(A=A.child;A!==null;)u.push(A),A=A.sibling}return h}var m4=Math.ceil,$m=a.ReactCurrentDispatcher,Jx=a.ReactCurrentOwner,Nn=a.ReactCurrentBatchConfig,Ct=0,Jn=null,Kn=null,mr=0,Ei=0,Qc=Zr(0),Zn=0,yf=null,qc=0,Vm=0,Kx=0,xf=null,ei=null,Yx=0,Qx=1/0;function Zc(){Qx=ar()+500}var Wm=!1,qx=null,ea=null,jm=!1,ta=null,Xm=0,_f=0,Zx=null,Jm=-1,Km=0;function Vr(){return Ct&6?ar():Jm!==-1?Jm:Jm=ar()}function na(u){return u.mode&1?Ct&2&&mr!==0?mr&-mr:Qk.transition!==null?(Km===0&&(u=lm,lm<<=1,!(lm&4194240)&&(lm=64),Km=u),Km):(u=Vt,u!==0?u:Be()):1}function Vi(u,h,S){if(50<_f)throw _f=0,Zx=null,Error(o(185));var A=Ym(u,h);return A===null?null:(nf(A,h,S),(!(Ct&2)||A!==Jn)&&(A===Jn&&(!(Ct&2)&&(Vm|=h),Zn===4&&ra(A,mr)),ti(A,S),h===1&&Ct===0&&!(u.mode&1)&&(Zc(),fm&&Hs())),A)}function Ym(u,h){u.lanes|=h;var S=u.alternate;for(S!==null&&(S.lanes|=h),S=u,u=u.return;u!==null;)u.childLanes|=h,S=u.alternate,S!==null&&(S.childLanes|=h),S=u,u=u.return;return S.tag===3?S.stateNode:null}function ti(u,h){var S=u.callbackNode;Gk(u,h);var A=um(u,u===Jn?mr:0);if(A===0)S!==null&&gM(S),u.callbackNode=null,u.callbackPriority=0;else if(h=A&-A,u.callbackPriority!==h){if(S!=null&&gM(S),h===1)u.tag===0?Yk(BC.bind(null,u)):vM(BC.bind(null,u)),Ze?ze(function(){Ct===0&&Hs()}):ax(lx,Hs),S=null;else{switch(mM(A)){case 1:S=lx;break;case 4:S=jk;break;case 16:S=cx;break;case 536870912:S=Xk;break;default:S=cx}S=HC(S,IC.bind(null,u))}u.callbackPriority=h,u.callbackNode=S}}function IC(u,h){if(Jm=-1,Km=0,Ct&6)throw Error(o(327));var S=u.callbackNode;if(Sl()&&u.callbackNode!==S)return null;var A=um(u,u===Jn?mr:0);if(A===0)return null;if(A&30||A&u.expiredLanes||h)h=Qm(u,A);else{h=A;var M=Ct;Ct|=2;var I=FC();(Jn!==u||mr!==h)&&(Zc(),xl(u,h));do try{y4();break}catch(se){LC(u,se)}while(1);fx(),$m.current=I,Ct=M,Kn!==null?h=0:(Jn=null,mr=0,h=Zn)}if(h!==0){if(h===2&&(M=ix(u),M!==0&&(A=M,h=e1(u,M))),h===1)throw S=yf,xl(u,0),ra(u,A),ti(u,ar()),S;if(h===6)ra(u,A);else{if(M=u.current.alternate,!(A&30)&&!g4(M)&&(h=Qm(u,A),h===2&&(I=ix(u),I!==0&&(A=I,h=e1(u,I))),h===1))throw S=yf,xl(u,0),ra(u,A),ti(u,ar()),S;switch(u.finishedWork=M,u.finishedLanes=A,h){case 0:case 1:throw Error(o(345));case 2:_l(u,ei);break;case 3:if(ra(u,A),(A&130023424)===A&&(h=Yx+500-ar(),10<h)){if(um(u,0)!==0)break;if(M=u.suspendedLanes,(M&A)!==A){Vr(),u.pingedLanes|=u.suspendedLanes&M;break}u.timeoutHandle=K(_l.bind(null,u,ei),h);break}_l(u,ei);break;case 4:if(ra(u,A),(A&4194240)===A)break;for(h=u.eventTimes,M=-1;0<A;){var W=31-ds(A);I=1<<W,W=h[W],W>M&&(M=W),A&=~I}if(A=M,A=ar()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*m4(A/1960))-A,10<A){u.timeoutHandle=K(_l.bind(null,u,ei),A);break}_l(u,ei);break;case 5:_l(u,ei);break;default:throw Error(o(329))}}}return ti(u,ar()),u.callbackNode===S?IC.bind(null,u):null}function e1(u,h){var S=xf;return u.current.memoizedState.isDehydrated&&(xl(u,h).flags|=256),u=Qm(u,h),u!==2&&(h=ei,ei=S,h!==null&&t1(h)),u}function t1(u){ei===null?ei=u:ei.push.apply(ei,u)}function g4(u){for(var h=u;;){if(h.flags&16384){var S=h.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var A=0;A<S.length;A++){var M=S[A],I=M.getSnapshot;M=M.value;try{if(!zs(I(),M))return!1}catch{return!1}}}if(S=h.child,h.subtreeFlags&16384&&S!==null)S.return=h,h=S;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ra(u,h){for(h&=~Kx,h&=~Vm,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var S=31-ds(h),A=1<<S;u[S]=-1,h&=~A}}function BC(u){if(Ct&6)throw Error(o(327));Sl();var h=um(u,0);if(!(h&1))return ti(u,ar()),null;var S=Qm(u,h);if(u.tag!==0&&S===2){var A=ix(u);A!==0&&(h=A,S=e1(u,A))}if(S===1)throw S=yf,xl(u,0),ra(u,h),ti(u,ar()),S;if(S===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,_l(u,ei),ti(u,ar()),null}function DC(u){ta!==null&&ta.tag===0&&!(Ct&6)&&Sl();var h=Ct;Ct|=1;var S=Nn.transition,A=Vt;try{if(Nn.transition=null,Vt=1,u)return u()}finally{Vt=A,Nn.transition=S,Ct=h,!(Ct&6)&&Hs()}}function n1(){Ei=Qc.current,qt(Qc)}function xl(u,h){u.finishedWork=null,u.finishedLanes=0;var S=u.timeoutHandle;if(S!==Xe&&(u.timeoutHandle=Xe,je(S)),Kn!==null)for(S=Kn.return;S!==null;){var A=S;switch(xx(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&om();break;case 3:Kc(),qt(tn),qt(Xn),Mx();break;case 5:Ax(A);break;case 4:Kc();break;case 13:qt(wn);break;case 19:qt(wn);break;case 10:hx(A.type._context);break;case 22:case 23:n1()}S=S.return}if(Jn=u,Kn=u=ia(u.current,null),mr=Ei=h,Zn=0,yf=null,Kx=Vm=qc=0,ei=xf=null,Gs!==null){for(h=0;h<Gs.length;h++)if(S=Gs[h],A=S.interleaved,A!==null){S.interleaved=null;var M=A.next,I=S.pending;if(I!==null){var W=I.next;I.next=M,A.next=W}S.pending=A}Gs=null}return u}function LC(u,h){do{var S=Kn;try{if(fx(),Em.current=Rm,Am){for(var A=In.memoizedState;A!==null;){var M=A.queue;M!==null&&(M.pending=null),A=A.next}Am=!1}if(Yc=0,lr=Mr=In=null,cf=!1,uf=0,Jx.current=null,S===null||S.return===null){Zn=1,yf=h,Kn=null;break}e:{var I=u,W=S.return,se=S,ye=h;if(h=mr,se.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var De=ye,qe=se,pt=qe.tag;if(!(qe.mode&1)&&(pt===0||pt===11||pt===15)){var at=qe.alternate;at?(qe.updateQueue=at.updateQueue,qe.memoizedState=at.memoizedState,qe.lanes=at.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var sn=tC(W);if(sn!==null){sn.flags&=-257,nC(sn,W,se,I,h),sn.mode&1&&eC(I,De,h),h=sn,ye=De;var st=h.updateQueue;if(st===null){var Rr=new Set;Rr.add(ye),h.updateQueue=Rr}else st.add(ye);break e}else{if(!(h&1)){eC(I,De,h),r1();break e}ye=Error(o(426))}}else if(xn&&se.mode&1){var ji=tC(W);if(ji!==null){!(ji.flags&65536)&&(ji.flags|=256),nC(ji,W,se,I,h),wx(ye);break e}}I=ye,Zn!==4&&(Zn=2),xf===null?xf=[I]:xf.push(I),ye=Dx(ye,se),se=W;do{switch(se.tag){case 3:se.flags|=65536,h&=-h,se.lanes|=h;var le=qM(se,ye,h);_M(se,le);break e;case 1:I=ye;var oe=se.type,fe=se.stateNode;if(!(se.flags&128)&&(typeof oe.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(ea===null||!ea.has(fe)))){se.flags|=65536,h&=-h,se.lanes|=h;var Ge=ZM(se,I,h);_M(se,Ge);break e}}se=se.return}while(se!==null)}NC(S)}catch(it){h=it,Kn===S&&S!==null&&(Kn=S=S.return);continue}break}while(1)}function FC(){var u=$m.current;return $m.current=Rm,u===null?Rm:u}function r1(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),Jn===null||!(qc&268435455)&&!(Vm&268435455)||ra(Jn,mr)}function Qm(u,h){var S=Ct;Ct|=2;var A=FC();Jn===u&&mr===h||xl(u,h);do try{v4();break}catch(M){LC(u,M)}while(1);if(fx(),Ct=S,$m.current=A,Kn!==null)throw Error(o(261));return Jn=null,mr=0,Zn}function v4(){for(;Kn!==null;)OC(Kn)}function y4(){for(;Kn!==null&&!Vk();)OC(Kn)}function OC(u){var h=zC(u.alternate,u,Ei);u.memoizedProps=u.pendingProps,h===null?NC(u):Kn=h,Jx.current=null}function NC(u){var h=u;do{var S=h.alternate;if(u=h.return,h.flags&32768){if(S=u4(S,h),S!==null){S.flags&=32767,Kn=S;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Zn=6,Kn=null;return}}else if(S=a4(S,h,Ei),S!==null){Kn=S;return}if(h=h.sibling,h!==null){Kn=h;return}Kn=h=u}while(h!==null);Zn===0&&(Zn=5)}function _l(u,h){var S=Vt,A=Nn.transition;try{Nn.transition=null,Vt=1,x4(u,h,S)}finally{Nn.transition=A,Vt=S}return null}function x4(u,h,S){do Sl();while(ta!==null);if(Ct&6)throw Error(o(327));var A=u.finishedWork,M=u.finishedLanes;if(A===null)return null;if(u.finishedWork=null,u.finishedLanes=0,A===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var I=A.lanes|A.childLanes;if($k(u,I),u===Jn&&(Kn=Jn=null,mr=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||jm||(jm=!0,HC(cx,function(){return Sl(),null})),I=(A.flags&15990)!==0,A.subtreeFlags&15990||I){I=Nn.transition,Nn.transition=null;var W=Vt;Vt=1;var se=Ct;Ct|=4,Jx.current=null,f4(u,A),h4(u,A),z(u.containerInfo),u.current=A,p4(A),Wk(),Ct=se,Vt=W,Nn.transition=I}else u.current=A;if(jm&&(jm=!1,ta=u,Xm=M),I=u.pendingLanes,I===0&&(ea=null),Jk(A.stateNode),ti(u,ar()),h!==null)for(S=u.onRecoverableError,A=0;A<h.length;A++)S(h[A]);if(Wm)throw Wm=!1,u=qx,qx=null,u;return Xm&1&&u.tag!==0&&Sl(),I=u.pendingLanes,I&1?u===Zx?_f++:(_f=0,Zx=u):_f=0,Hs(),null}function Sl(){if(ta!==null){var u=mM(Xm),h=Nn.transition,S=Vt;try{if(Nn.transition=null,Vt=16>u?16:u,ta===null)var A=!1;else{if(u=ta,ta=null,Xm=0,Ct&6)throw Error(o(331));var M=Ct;for(Ct|=4,He=u.current;He!==null;){var I=He,W=I.child;if(He.flags&16){var se=I.deletions;if(se!==null){for(var ye=0;ye<se.length;ye++){var De=se[ye];for(He=De;He!==null;){var qe=He;switch(qe.tag){case 0:case 11:case 15:yl(8,qe,I)}var pt=qe.child;if(pt!==null)pt.return=qe,He=pt;else for(;He!==null;){qe=He;var at=qe.sibling,sn=qe.return;if(SC(qe),qe===De){He=null;break}if(at!==null){at.return=sn,He=at;break}He=sn}}}var st=I.alternate;if(st!==null){var Rr=st.child;if(Rr!==null){st.child=null;do{var ji=Rr.sibling;Rr.sibling=null,Rr=ji}while(Rr!==null)}}He=I}}if(I.subtreeFlags&2064&&W!==null)W.return=I,He=W;else e:for(;He!==null;){if(I=He,I.flags&2048)switch(I.tag){case 0:case 11:case 15:yl(9,I,I.return)}var le=I.sibling;if(le!==null){le.return=I.return,He=le;break e}He=I.return}}var oe=u.current;for(He=oe;He!==null;){W=He;var fe=W.child;if(W.subtreeFlags&2064&&fe!==null)fe.return=W,He=fe;else e:for(W=oe;He!==null;){if(se=He,se.flags&2048)try{switch(se.tag){case 0:case 11:case 15:gf(9,se)}}catch(it){ni(se,se.return,it)}if(se===W){He=null;break e}var Ge=se.sibling;if(Ge!==null){Ge.return=se.return,He=Ge;break e}He=se.return}}if(Ct=M,Hs(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(dm,u)}catch{}A=!0}return A}finally{Vt=S,Nn.transition=h}}return!1}function UC(u,h,S){h=Dx(S,h),h=qM(u,h,1),Zo(u,h),h=Vr(),u=Ym(u,1),u!==null&&(nf(u,1,h),ti(u,h))}function ni(u,h,S){if(u.tag===3)UC(u,u,S);else for(;h!==null;){if(h.tag===3){UC(h,u,S);break}else if(h.tag===1){var A=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(ea===null||!ea.has(A))){u=Dx(S,u),u=ZM(h,u,1),Zo(h,u),u=Vr(),h=Ym(h,1),h!==null&&(nf(h,1,u),ti(h,u));break}}h=h.return}}function _4(u,h,S){var A=u.pingCache;A!==null&&A.delete(h),h=Vr(),u.pingedLanes|=u.suspendedLanes&S,Jn===u&&(mr&S)===S&&(Zn===4||Zn===3&&(mr&130023424)===mr&&500>ar()-Yx?xl(u,0):Kx|=S),ti(u,h)}function kC(u,h){h===0&&(u.mode&1?(h=cm,cm<<=1,!(cm&130023424)&&(cm=4194304)):h=1);var S=Vr();u=Ym(u,h),u!==null&&(nf(u,h,S),ti(u,S))}function S4(u){var h=u.memoizedState,S=0;h!==null&&(S=h.retryLane),kC(u,S)}function w4(u,h){var S=0;switch(u.tag){case 13:var A=u.stateNode,M=u.memoizedState;M!==null&&(S=M.retryLane);break;case 19:A=u.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(h),kC(u,S)}var zC;zC=function(u,h,S){if(u!==null)if(u.memoizedProps!==h.pendingProps||tn.current)wi=!0;else{if(!(u.lanes&S)&&!(h.flags&128))return wi=!1,c4(u,h,S);wi=!!(u.flags&131072)}else wi=!1,xn&&h.flags&1048576&&MM(h,_m,h.index);switch(h.lanes=0,h.tag){case 2:var A=h.type;u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps;var M=Qo(h,Xn.current);$c(h,S),M=Tx(null,h,A,u,M,S);var I=Rx();return h.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,pr(A)?(I=!0,am(h)):I=!1,h.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,mx(h),M.updater=ym,h.stateNode=M,M._reactInternals=h,vx(h,A,u,S),h=Ox(null,h,A,!0,I,S)):(h.tag=0,xn&&I&&yx(h),$r(null,h,M,S),h=h.child),h;case 16:A=h.elementType;e:{switch(u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps,M=A._init,A=M(A._payload),h.type=A,M=h.tag=A4(A),u=fs(A,u),M){case 0:h=Fx(null,h,A,u,S);break e;case 1:h=uC(null,h,A,u,S);break e;case 11:h=sC(null,h,A,u,S);break e;case 14:h=oC(null,h,A,fs(A.type,u),S);break e}throw Error(o(306,A,""))}return h;case 0:return A=h.type,M=h.pendingProps,M=h.elementType===A?M:fs(A,M),Fx(u,h,A,M,S);case 1:return A=h.type,M=h.pendingProps,M=h.elementType===A?M:fs(A,M),uC(u,h,A,M,S);case 3:e:{if(dC(h),u===null)throw Error(o(387));A=h.pendingProps,I=h.memoizedState,M=I.element,xM(u,h),vm(h,A,null,S);var W=h.memoizedState;if(A=W.element,re&&I.isDehydrated)if(I={element:A,isDehydrated:!1,cache:W.cache,transitions:W.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){M=Error(o(423)),h=fC(u,h,A,S,M);break e}else if(A!==M){M=Error(o(424)),h=fC(u,h,A,S,M);break e}else for(re&&(Si=xe(h.stateNode.containerInfo),_i=h,xn=!0,hs=null,rf=!1),S=BM(h,null,A,S),h.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(jc(),A===M){h=vo(u,h,S);break e}$r(u,h,A,S)}h=h.child}return h;case 5:return DM(h),u===null&&Sx(h),A=h.type,M=h.pendingProps,I=u!==null?u.memoizedProps:null,W=M.children,_e(A,M)?W=null:I!==null&&_e(A,I)&&(h.flags|=32),cC(u,h),$r(u,h,W,S),h.child;case 6:return u===null&&Sx(h),null;case 13:return hC(u,h,S);case 4:return Ex(h,h.stateNode.containerInfo),A=h.pendingProps,u===null?h.child=Xc(h,null,A,S):$r(u,h,A,S),h.child;case 11:return A=h.type,M=h.pendingProps,M=h.elementType===A?M:fs(A,M),sC(u,h,A,M,S);case 7:return $r(u,h,h.pendingProps,S),h.child;case 8:return $r(u,h,h.pendingProps.children,S),h.child;case 12:return $r(u,h,h.pendingProps.children,S),h.child;case 10:e:{if(A=h.type._context,M=h.pendingProps,I=h.memoizedProps,W=M.value,yM(h,A,W),I!==null)if(zs(I.value,W)){if(I.children===M.children&&!tn.current){h=vo(u,h,S);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var se=I.dependencies;if(se!==null){W=I.child;for(var ye=se.firstContext;ye!==null;){if(ye.context===A){if(I.tag===1){ye=ho(-1,S&-S),ye.tag=2;var De=I.updateQueue;if(De!==null){De=De.shared;var qe=De.pending;qe===null?ye.next=ye:(ye.next=qe.next,qe.next=ye),De.pending=ye}}I.lanes|=S,ye=I.alternate,ye!==null&&(ye.lanes|=S),px(I.return,S,h),se.lanes|=S;break}ye=ye.next}}else if(I.tag===10)W=I.type===h.type?null:I.child;else if(I.tag===18){if(W=I.return,W===null)throw Error(o(341));W.lanes|=S,se=W.alternate,se!==null&&(se.lanes|=S),px(W,S,h),W=I.sibling}else W=I.child;if(W!==null)W.return=I;else for(W=I;W!==null;){if(W===h){W=null;break}if(I=W.sibling,I!==null){I.return=W.return,W=I;break}W=W.return}I=W}$r(u,h,M.children,S),h=h.child}return h;case 9:return M=h.type,A=h.pendingProps.children,$c(h,S),M=ki(M),A=A(M),h.flags|=1,$r(u,h,A,S),h.child;case 14:return A=h.type,M=fs(A,h.pendingProps),M=fs(A.type,M),oC(u,h,A,M,S);case 15:return aC(u,h,h.type,h.pendingProps,S);case 17:return A=h.type,M=h.pendingProps,M=h.elementType===A?M:fs(A,M),u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,pr(A)?(u=!0,am(h)):u=!1,$c(h,S),AM(h,A,M),vx(h,A,M,S),Ox(null,h,A,!0,u,S);case 19:return vC(u,h,S);case 22:return lC(u,h,S)}throw Error(o(156,h.tag))};function HC(u,h){return ax(u,h)}function E4(u,h,S,A){this.tag=u,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(u,h,S,A){return new E4(u,h,S,A)}function i1(u){return u=u.prototype,!(!u||!u.isReactComponent)}function A4(u){if(typeof u=="function")return i1(u)?1:0;if(u!=null){if(u=u.$$typeof,u===y)return 11;if(u===_)return 14}return 2}function ia(u,h){var S=u.alternate;return S===null?(S=Wi(u.tag,h,u.key,u.mode),S.elementType=u.elementType,S.type=u.type,S.stateNode=u.stateNode,S.alternate=u,u.alternate=S):(S.pendingProps=h,S.type=u.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=u.flags&14680064,S.childLanes=u.childLanes,S.lanes=u.lanes,S.child=u.child,S.memoizedProps=u.memoizedProps,S.memoizedState=u.memoizedState,S.updateQueue=u.updateQueue,h=u.dependencies,S.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},S.sibling=u.sibling,S.index=u.index,S.ref=u.ref,S}function qm(u,h,S,A,M,I){var W=2;if(A=u,typeof u=="function")i1(u)&&(W=1);else if(typeof u=="string")W=5;else e:switch(u){case d:return wl(S.children,M,I,h);case f:W=8,M|=8;break;case p:return u=Wi(12,S,h,M|2),u.elementType=p,u.lanes=I,u;case x:return u=Wi(13,S,h,M),u.elementType=x,u.lanes=I,u;case g:return u=Wi(19,S,h,M),u.elementType=g,u.lanes=I,u;case b:return Zm(S,M,I,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:W=10;break e;case v:W=9;break e;case y:W=11;break e;case _:W=14;break e;case w:W=16,A=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return h=Wi(W,S,h,M),h.elementType=u,h.type=A,h.lanes=I,h}function wl(u,h,S,A){return u=Wi(7,u,A,h),u.lanes=S,u}function Zm(u,h,S,A){return u=Wi(22,u,A,h),u.elementType=b,u.lanes=S,u.stateNode={},u}function s1(u,h,S){return u=Wi(6,u,null,h),u.lanes=S,u}function o1(u,h,S){return h=Wi(4,u.children!==null?u.children:[],u.key,h),h.lanes=S,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function b4(u,h,S,A,M){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sx(0),this.expirationTimes=sx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sx(0),this.identifierPrefix=A,this.onRecoverableError=M,re&&(this.mutableSourceEagerHydrationData=null)}function GC(u,h,S,A,M,I,W,se,ye){return u=new b4(u,h,S,se,ye),h===1?(h=1,I===!0&&(h|=8)):h=0,I=Wi(3,null,null,h),u.current=I,I.stateNode=u,I.memoizedState={element:A,isDehydrated:S,cache:null,transitions:null},mx(I),u}function $C(u){if(!u)return br;u=u._reactInternals;e:{if(R(u)!==u||u.tag!==1)throw Error(o(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(pr(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(u.tag===1){var S=u.type;if(pr(S))return hM(u,S,h)}return h}function VC(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=X(h),u===null?null:u.stateNode}function WC(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var S=u.retryLane;u.retryLane=S!==0&&S<h?S:h}}function a1(u,h){WC(u,h),(u=u.alternate)&&WC(u,h)}function M4(u){return u=X(u),u===null?null:u.stateNode}function C4(){return null}return n.attemptContinuousHydration=function(u){if(u.tag===13){var h=Vr();Vi(u,134217728,h),a1(u,134217728)}},n.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Vr(),S=na(u);Vi(u,S,h),a1(u,S)}},n.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var S=tf(h.pendingLanes);S!==0&&(ox(h,S|1),ti(h,ar()),!(Ct&6)&&(Zc(),Hs()))}break;case 13:var A=Vr();DC(function(){return Vi(u,1,A)}),a1(u,1)}},n.batchedUpdates=function(u,h){var S=Ct;Ct|=1;try{return u(h)}finally{Ct=S,Ct===0&&(Zc(),fm&&Hs())}},n.createComponentSelector=function(u){return{$$typeof:Um,value:u}},n.createContainer=function(u,h,S,A,M,I,W){return GC(u,h,!1,null,S,A,M,I,W)},n.createHasPseudoClassSelector=function(u){return{$$typeof:km,value:u}},n.createHydrationContainer=function(u,h,S,A,M,I,W,se,ye){return u=GC(S,A,!0,u,M,I,W,se,ye),u.context=$C(null),S=u.current,A=Vr(),M=na(S),I=ho(A,M),I.callback=h??null,Zo(S,I),u.current.lanes=M,nf(u,M,A),ti(u,A),u},n.createPortal=function(u,h,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:A==null?null:""+A,children:u,containerInfo:h,implementation:S}},n.createRoleSelector=function(u){return{$$typeof:zm,value:u}},n.createTestNameSelector=function(u){return{$$typeof:Hm,value:u}},n.createTextSelector=function(u){return{$$typeof:Gm,value:u}},n.deferredUpdates=function(u){var h=Vt,S=Nn.transition;try{return Nn.transition=null,Vt=16,u()}finally{Vt=h,Nn.transition=S}},n.discreteUpdates=function(u,h,S,A,M){var I=Vt,W=Nn.transition;try{return Nn.transition=null,Vt=1,u(h,S,A,M)}finally{Vt=I,Nn.transition=W,Ct===0&&Zc()}},n.findAllNodes=Xx,n.findBoundingRects=function(u,h){if(!tt)throw Error(o(363));h=Xx(u,h),u=[];for(var S=0;S<h.length;S++)u.push(V(h[S]));for(h=u.length-1;0<h;h--){S=u[h];for(var A=S.x,M=A+S.width,I=S.y,W=I+S.height,se=h-1;0<=se;se--)if(h!==se){var ye=u[se],De=ye.x,qe=De+ye.width,pt=ye.y,at=pt+ye.height;if(A>=De&&I>=pt&&M<=qe&&W<=at){u.splice(h,1);break}else if(A!==De||S.width!==ye.width||at<I||pt>W){if(!(I!==pt||S.height!==ye.height||qe<A||De>M)){De>A&&(ye.width+=De-A,ye.x=A),qe<M&&(ye.width=M-De),u.splice(h,1);break}}else{pt>I&&(ye.height+=pt-I,ye.y=I),at<W&&(ye.height=W-pt),u.splice(h,1);break}}}return u},n.findHostInstance=VC,n.findHostInstanceWithNoPortals=function(u){return u=k(u),u=u!==null?j(u):null,u===null?null:u.stateNode},n.findHostInstanceWithWarning=function(u){return VC(u)},n.flushControlled=function(u){var h=Ct;Ct|=1;var S=Nn.transition,A=Vt;try{Nn.transition=null,Vt=1,u()}finally{Vt=A,Nn.transition=S,Ct=h,Ct===0&&(Zc(),Hs())}},n.flushPassiveEffects=Sl,n.flushSync=DC,n.focusWithin=function(u,h){if(!tt)throw Error(o(363));for(u=Vx(u),h=PC(u,h),h=Array.from(h),u=0;u<h.length;){var S=h[u++];if(!Y(S)){if(S.tag===5&&Se(S.stateNode))return!0;for(S=S.child;S!==null;)h.push(S),S=S.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Vt},n.getFindAllNodesFailureDescription=function(u,h){if(!tt)throw Error(o(363));var S=0,A=[];u=[Vx(u),0];for(var M=0;M<u.length;){var I=u[M++],W=u[M++],se=h[W];if((I.tag!==5||!Y(I))&&(Wx(I,se)&&(A.push(jx(se)),W++,W>S&&(S=W)),W<h.length))for(I=I.child;I!==null;)u.push(I,W),I=I.sibling}if(S<h.length){for(u=[];S<h.length;S++)u.push(jx(h[S]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},n.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return ie(u.child.stateNode);default:return u.child.stateNode}},n.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:M4,findFiberByHostInstance:u.findFiberByHostInstance||C4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{dm=h.inject(u),ks=h}catch{}u=!!h.checkDCE}}return u},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(u,h,S,A){if(!tt)throw Error(o(363));u=Xx(u,h);var M=Te(u,S,A).disconnect;return{disconnect:function(){M()}}},n.registerMutableSourceForHydration=function(u,h){var S=h._getVersion;S=S(h._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,S]:u.mutableSourceEagerHydrationData.push(h,S)},n.runWithPriority=function(u,h){var S=Vt;try{return Vt=u,h()}finally{Vt=S}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(u,h,S,A){var M=h.current,I=Vr(),W=na(M);return S=$C(S),h.context===null?h.context=S:h.pendingContext=S,h=ho(I,W),h.payload={element:u},A=A===void 0?null:A,A!==null&&(h.callback=A),Zo(M,h),u=Vi(M,W,I),u!==null&&gm(u,M,W),W},n};kF.exports=Vj;var Wj=kF.exports;const jj=nl(Wj);function GF(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}const Po=[];function $F(t,e,n=!1,r={}){for(const s of Po)if(GF(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,promise:t(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=Po.indexOf(i);s!==-1&&Po.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(Po.push(i),!n)throw i.promise}const VF=(t,e,n)=>$F(t,e,!1,n),WF=(t,e,n)=>void $F(t,e,!0,n),jF=t=>{if(t===void 0||t.length===0)Po.splice(0,Po.length);else{const e=Po.find(n=>GF(t,n.keys,n.equal));if(e){const n=Po.indexOf(e);n!==-1&&Po.splice(n,1)}}},xb={},_b=t=>void Object.assign(xb,t);function Xj(t,e){function n(d,{args:f=[],attach:p,...m},v){let y=`${d[0].toUpperCase()}${d.slice(1)}`,x;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=Lu(g,{type:d,root:v,attach:p,primitive:!0})}else{const g=xb[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");x=Lu(new g(...f),{type:d,root:v,attach:p,memoizedProps:{args:f}})}return x.__r3f.attach===void 0&&(x instanceof yt?x.__r3f.attach="geometry":x instanceof Fn&&(x.__r3f.attach="material")),y!=="inject"&&m_(x,m),x}function r(d,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?p_(d,f,f.__r3f.attach):f.isObject3D&&d.isObject3D&&(d.add(f),p=!0),p||(v=d.__r3f)==null||v.objects.push(f),f.__r3f||Lu(f,{}),f.__r3f.parent=d,Hw(f),Fu(f)}}function i(d,f,p){let m=!1;if(f){var v,y;if((v=f.__r3f)!=null&&v.attach)p_(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){f.parent=d,f.dispatchEvent({type:"added"});const x=d.children.filter(_=>_!==f),g=x.indexOf(p);d.children=[...x.slice(0,g),f,...x.slice(g)],m=!0}m||(y=d.__r3f)==null||y.objects.push(f),f.__r3f||Lu(f,{}),f.__r3f.parent=d,Hw(f),Fu(f)}}function s(d,f,p=!1){d&&[...d].forEach(m=>o(f,m,p))}function o(d,f,p){if(f){var m,v,y;if(f.__r3f&&(f.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(b=>b!==f)),(v=f.__r3f)!=null&&v.attach)HR(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){var x;d.remove(f),(x=f.__r3f)!=null&&x.root&&tX(f.__r3f.root,f)}const _=(y=f.__r3f)==null?void 0:y.primitive,w=p===void 0?f.dispose!==null&&!_:p;if(!_){var g;s((g=f.__r3f)==null?void 0:g.objects,f,w),s(f.children,f,w)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,_||delete f.__r3f),w&&f.dispose&&f.type!=="Scene"&&kw.unstable_scheduleCallback(kw.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),Fu(d)}}function a(d,f,p,m){var v;const y=(v=d.__r3f)==null?void 0:v.parent;if(!y)return;const x=n(f,p,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&r(x,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>r(x,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(y,d),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(y,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:jj({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,f)=>{if(!f)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,r(p,f))},removeChildFromContainer:(d,f)=>{f&&o(d.getState().scene,f)},insertInContainerBefore:(d,f,p)=>{if(!f||!p)return;const m=d.getState().scene;m.__r3f&&i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var f;return!!((f=d==null?void 0:d.__r3f)!=null?f:{}).handlers},prepareUpdate(d,f,p,m){if(d.__r3f.primitive&&m.object&&m.object!==d)return[!0];{const{args:v=[],children:y,...x}=m,{args:g=[],children:_,...w}=p;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((C,T)=>C!==g[T]))return[!0];const b=ZF(d,x,w,!0);return b.changes.length?[!1,b]:null}},commitUpdate(d,[f,p],m,v,y,x){f?a(d,m,y,x):m_(d,p)},commitMount(d,f,p,m){var v;const y=(v=d.__r3f)!=null?v:{};d.raycast&&y.handlers&&y.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Lu(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var f;const{attach:p,parent:m}=(f=d.__r3f)!=null?f:{};p&&m&&HR(m,d,p),d.isObject3D&&(d.visible=!1),Fu(d)},unhideInstance(d,f){var p;const{attach:m,parent:v}=(p=d.__r3f)!=null?p:{};m&&v&&p_(v,d,m),(d.isObject3D&&f.visible==null||f.visible)&&(d.visible=!0),Fu(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Zu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&mn.fun(performance.now)?performance.now:mn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:mn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:mn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:m_}}var NR,UR;const h_=t=>"colorSpace"in t||"outputColorSpace"in t,XF=()=>{var t;return(t=xb.ColorManagement)!=null?t:null},JF=t=>t&&t.isOrthographicCamera,Jj=t=>t&&t.hasOwnProperty("current"),Vp=typeof window<"u"&&((NR=window.document)!=null&&NR.createElement||((UR=window.navigator)==null?void 0:UR.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function KF(t){const e=E.useRef(t);return Vp(()=>void(e.current=t),[t]),e}function Kj({set:t}){return Vp(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class YF extends E.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}YF.getDerivedStateFromError=()=>({error:!0});const QF="__default",kR=new Map,Yj=t=>t&&!!t.memoized&&!!t.changes;function qF(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Gf=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},mn={obj:t=>t===Object(t)&&!mn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(mn.str(t)||mn.num(t))return t===e;const s=mn.obj(t);if(s&&r==="reference")return t===e;const o=mn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!mn.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(mn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function Qj(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function qj(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Lu(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function zw(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const zR=/-\d+$/;function p_(t,e,n){if(mn.str(n)){if(zR.test(n)){const s=n.replace(zR,""),{target:o,key:a}=zw(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=zw(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function HR(t,e,n){var r,i;if(mn.str(n)){const{target:s,key:o}=zw(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function ZF(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var d;const f=(d=t==null?void 0:t.__r3f)!=null?d:{},p=Object.entries(i),m=[];if(c){const y=Object.keys(l);for(let x=0;x<y.length;x++)i.hasOwnProperty(y[x])||p.unshift([y[x],QF+"remove"])}p.forEach(([y,x])=>{var g;if((g=t.__r3f)!=null&&g.primitive&&y==="object"||mn.equ(x,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return m.push([y,x,!0,[]]);let _=[];y.includes("-")&&(_=y.split("-")),m.push([y,x,!1,_]);for(const w in i){const b=i[w];w.startsWith(`${y}-`)&&m.push([w,b,!1,w.split("-")])}});const v={...i};return f.memoizedProps&&f.memoizedProps.args&&(v.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(v.attach=f.memoizedProps.attach),{memoized:v,changes:m}}function m_(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=Yj(e)?e:ZF(t,e),d=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,v,y,x]=c[p];if(h_(t)){const b="srgb",C="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?b:C):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?b:C)}let g=t,_=g[m];if(x.length&&(_=x.reduce((w,b)=>w[b],t),!(_&&_.set))){const[w,...b]=x.reverse();g=b.reverse().reduce((C,T)=>C[T],t),m=w}if(v===QF+"remove")if(g.constructor){let w=kR.get(g.constructor);w||(w=new g.constructor,kR.set(g.constructor,w)),v=w[m]}else v=0;if(y)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof uc)){if(Array.isArray(v))_.fromArray?_.fromArray(v):_.set(...v);else if(_.copy&&v&&v.constructor&&_.constructor===v.constructor)_.copy(v);else if(v!==void 0){const w=_ instanceof Ne;!w&&_.setScalar?_.setScalar(v):_ instanceof uc&&v instanceof uc?_.mask=v.mask:_.set(v),!XF()&&!a.linear&&w&&_.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof dn&&g[m].format===ai&&g[m].type===kr){const w=g[m];h_(w)&&h_(a.gl)?w.colorSpace=a.gl.outputColorSpace:w.encoding=a.gl.outputEncoding}Fu(t)}if(s.parent&&a.internal&&t.raycast&&d!==s.eventCount){const p=a.internal.interaction.indexOf(t);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=t.__r3f)!=null&&i.parent&&Hw(t),t}function Fu(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function Hw(t){t.onUpdate==null||t.onUpdate(t)}function Zj(t,e){t.manual||(JF(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function av(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function eX(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Zu.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Zu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Zu.ContinuousEventPriority;default:return Zu.DefaultEventPriority}}function eO(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function tX(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{eO(n.capturedMap,e,r,i)})}function nX(t){function e(l){const{internal:c}=t.getState(),d=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+f*f))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+d]}))}function r(l,c){const d=t.getState(),f=new Set,p=[],m=c?c(d.internal.interaction):d.internal.interaction;for(let g=0;g<m.length;g++){const _=Gf(m[g]);_&&(_.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function v(g){const _=Gf(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var w;_.events.compute==null||_.events.compute(l,_,(w=_.previousRoot)==null?void 0:w.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let y=m.flatMap(v).sort((g,_)=>{const w=Gf(g.object),b=Gf(_.object);return!w||!b?g.distance-_.distance:b.events.priority-w.events.priority||g.distance-_.distance}).filter(g=>{const _=av(g);return f.has(_)?!1:(f.add(_),!0)});d.events.filter&&(y=d.events.filter(y,d));for(const g of y){let _=g.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let g of d.internal.capturedMap.get(l.pointerId).values())f.has(av(g.intersection))||p.push(g.intersection);return p}function i(l,c,d,f){const p=t.getState();if(l.length){const m={stopped:!1};for(const v of l){const y=Gf(v.object)||p,{raycaster:x,pointer:g,camera:_,internal:w}=y,b=new F(g.x,g.y,0).unproject(_),C=D=>{var k,X;return(k=(X=w.capturedMap.get(D))==null?void 0:X.has(v.eventObject))!=null?k:!1},T=D=>{const k={intersection:v,target:c.target};w.capturedMap.has(D)?w.capturedMap.get(D).set(v.eventObject,k):w.capturedMap.set(D,new Map([[v.eventObject,k]])),c.target.setPointerCapture(D)},P=D=>{const k=w.capturedMap.get(D);k&&eO(w.capturedMap,v.eventObject,k,D)};let B={};for(let D in c){let k=c[D];typeof k!="function"&&(B[D]=k)}let R={...v,...B,pointer:g,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:b,ray:x.ray,camera:_,stopPropagation(){const D="pointerId"in c&&w.capturedMap.get(c.pointerId);if((!D||D.has(v.eventObject))&&(R.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(k=>k.eventObject===v.eventObject))){const k=l.slice(0,l.indexOf(v));s([...k,v])}},target:{hasPointerCapture:C,setPointerCapture:T,releasePointerCapture:P},currentTarget:{hasPointerCapture:C,setPointerCapture:T,releasePointerCapture:P},nativeEvent:c};if(f(R),m.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const d of c.hovered.values())if(!l.length||!l.find(f=>f.object===d.object&&f.index===d.index&&f.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(av(d)),p!=null&&p.eventCount){const v={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let d=0;d<c.length;d++){const f=c[d].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:d}=t.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),s([]))})}}return function(d){const{onPointerMissed:f,internal:p}=t.getState();p.lastEvent.current=d;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(d,m?n:void 0),g=v?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=x.map(w=>w.eventObject)),v&&!x.length&&g<=2&&(o(d,p.interaction),f&&f(d)),m&&s(x);function _(w){const b=w.eventObject,C=b.__r3f,T=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const P=av(w),B=p.hovered.get(P);B?B.stopped&&w.stopPropagation():(p.hovered.set(P,w),T.onPointerOver==null||T.onPointerOver(w),T.onPointerEnter==null||T.onPointerEnter(w))}T.onPointerMove==null||T.onPointerMove(w)}else{const P=T[l];P?(!v||p.initialHits.includes(b))&&(o(d,p.interaction.filter(B=>!p.initialHits.includes(B))),P(w)):v&&p.initialHits.includes(b)&&o(d,p.interaction.filter(B=>!p.initialHits.includes(B)))}}i(x,d,g,_)}}return{handlePointer:a}}const tO=t=>!!(t!=null&&t.render),nO=E.createContext(null),rX=(t,e)=>{const n=$j((a,l)=>{const c=new F,d=new F,f=new F;function p(g=l().camera,_=d,w=l().size){const{width:b,height:C,top:T,left:P}=w,B=b/C;_ instanceof F?f.copy(_):f.set(..._);const R=g.getWorldPosition(c).distanceTo(f);if(JF(g))return{width:b/g.zoom,height:C/g.zoom,top:T,left:P,factor:1,distance:R,aspect:B};{const D=g.fov*Math.PI/180,k=2*Math.tan(D/2)*R,X=k*(b/C);return{width:X,height:k,top:T,left:P,factor:b/X,distance:R,aspect:B}}}let m;const v=g=>a(_=>({performance:{..._.performance,current:g}})),y=new de;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>t(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new fb,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,w,b,C)=>{const T=l().camera,P={width:g,height:_,top:b||0,left:C||0,updateStyle:w};a(B=>({size:P,viewport:{...B.viewport,...p(T,d,P)}}))},setDpr:g=>a(_=>{const w=qF(g);return{viewport:{..._.viewport,dpr:w,initialDpr:_.viewport.initialDpr||w}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:E.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,w)=>{const b=l().internal;return b.priority=b.priority+(_>0?1:0),b.subscribers.push({ref:g,priority:_,store:w}),b.subscribers=b.subscribers.sort((C,T)=>C.priority-T.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(_>0?1:0),C.subscribers=C.subscribers.filter(T=>T.ref!==g))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:d,set:f}=n.getState();if(l!==i||c.dpr!==s){var p;i=l,s=c.dpr,Zj(a,l),d.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let lv,iX=new Set,sX=new Set,oX=new Set;function g_(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function $f(t,e){switch(t){case"before":return g_(iX,e);case"after":return g_(sX,e);case"tail":return g_(oX,e)}}let v_,y_;function x_(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),v_=e.internal.subscribers,lv=0;lv<v_.length;lv++)y_=v_[lv],y_.ref.current(y_.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function aX(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,$f("before",l);for(const d of t.values()){var c;i=d.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(n+=x_(l,i))}if($f("after",l),n===0)return $f("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var d;if(!l)return t.forEach(f=>o(f.store.getState()),c);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,d,f){if(c&&$f("before",l),d)x_(l,d,f);else for(const p of t.values())x_(l,p.store.getState());c&&$f("after",l)}return{loop:s,invalidate:o,advance:a}}function rO(){const t=E.useContext(nO);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function an(t=n=>n,e){return rO()(t,e)}function Xd(t,e=0){const n=rO(),r=n.getState().internal.subscribe,i=KF(t);return Vp(()=>r(i,e,n),[e,r,n]),null}function iO(t,e){return function(n,...r){const i=new n;return t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Qj(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function dl(t,e,n,r){const i=Array.isArray(e)?e:[e],s=VF(iO(n,r),[t,...i],{equal:mn.equ});return Array.isArray(e)?s:s[0]}dl.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return WF(iO(n),[t,...r])};dl.clear=function(t,e){const n=Array.isArray(e)?e:[e];return jF([t,...n])};const Bd=new Map,{invalidate:GR,advance:$R}=aX(Bd),{reconciler:L0,applyProps:Eu}=Xj(Bd,eX),Au={objects:"shallow",strict:!1},lX=(t,e)=>{const n=typeof t=="function"?t(e):t;return tO(n)?n:new kA({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function cX(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:r,top:i,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function uX(t){const e=Bd.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||rX(GR,$R),o=n||L0.createContainer(s,Zu.ConcurrentRoot,null,!1,null,"",i,null);e||Bd.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(d={}){let{gl:f,size:p,scene:m,events:v,onCreated:y,shadows:x=!1,linear:g=!1,flat:_=!1,legacy:w=!1,orthographic:b=!1,frameloop:C="always",dpr:T=[1,2],performance:P,raycaster:B,camera:R,onPointerMissed:D}=d,k=s.getState(),X=k.gl;k.gl||k.set({gl:X=lX(f,t)});let $=k.raycaster;$||k.set({raycaster:$=new bF});const{params:j,...H}=B||{};if(mn.equ(H,$,Au)||Eu($,{...H}),mn.equ(j,$.params,Au)||Eu($,{params:{...$.params,...j}}),!k.camera||k.camera===c&&!mn.equ(c,R,Au)){c=R;const ne=R instanceof zd,J=ne?R:b?new Ps(0,0,0,0,.1,1e3):new rn(75,0,.1,1e3);ne||(J.position.z=5,R&&Eu(J,R),!k.camera&&!(R!=null&&R.rotation)&&J.lookAt(0,0,0)),k.set({camera:J})}if(!k.scene){let ne;m instanceof Md?ne=m:(ne=new Md,m&&Eu(ne,m)),k.set({scene:Lu(ne)})}if(!k.xr){const ne=(ee,_e)=>{const be=s.getState();be.frameloop!=="never"&&$R(ee,!0,be,_e)},J=()=>{const ee=s.getState();ee.gl.xr.enabled=ee.gl.xr.isPresenting,ee.gl.xr.setAnimationLoop(ee.gl.xr.isPresenting?ne:null),ee.gl.xr.isPresenting||GR(ee)},q={connect(){const ee=s.getState().gl;ee.xr.addEventListener("sessionstart",J),ee.xr.addEventListener("sessionend",J)},disconnect(){const ee=s.getState().gl;ee.xr.removeEventListener("sessionstart",J),ee.xr.removeEventListener("sessionend",J)}};X.xr&&q.connect(),k.set({xr:q})}if(X.shadowMap){const ne=X.shadowMap.enabled,J=X.shadowMap.type;if(X.shadowMap.enabled=!!x,mn.boo(x))X.shadowMap.type=mh;else if(mn.str(x)){var ie;const q={basic:UL,percentage:my,soft:mh,variance:Ss};X.shadowMap.type=(ie=q[x])!=null?ie:mh}else mn.obj(x)&&Object.assign(X.shadowMap,x);(ne!==X.shadowMap.enabled||J!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}const Z=XF();Z&&("enabled"in Z?Z.enabled=!w:"legacyMode"in Z&&(Z.legacyMode=w)),Eu(X,{outputEncoding:g?3e3:3001,toneMapping:_?Rs:MA}),k.legacy!==w&&k.set(()=>({legacy:w})),k.linear!==g&&k.set(()=>({linear:g})),k.flat!==_&&k.set(()=>({flat:_})),f&&!mn.fun(f)&&!tO(f)&&!mn.equ(f,X,Au)&&Eu(X,f),v&&!k.events.handlers&&k.set({events:v(s)});const z=cX(t,p);return mn.equ(z,k.size,Au)||k.setSize(z.width,z.height,z.updateStyle,z.top,z.left),T&&k.viewport.dpr!==qF(T)&&k.setDpr(T),k.frameloop!==C&&k.setFrameloop(C),k.onPointerMissed||k.set({onPointerMissed:D}),P&&!mn.equ(P,k.performance,Au)&&k.set(ne=>({performance:{...ne.performance,...P}})),a=y,l=!0,this},render(d){return l||this.configure(),L0.updateContainer(E.createElement(dX,{store:s,children:d,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){sO(t)}}}function dX({store:t,children:e,onCreated:n,rootElement:r}){return Vp(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),E.createElement(nO.Provider,{value:t},e)}function sO(t,e){const n=Bd.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),L0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),qj(i),Bd.delete(t),e&&e(t)}catch{}},500)})}}L0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:E.version});function Gw(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var d=Date.now()-o;d<e&&d>=0?r=setTimeout(l,e-d):(r=null,n||(a=t.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var d=n&&!r;return r||(r=setTimeout(l,e)),d&&(a=t.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}Gw.debounce=Gw;var fX=Gw;const VR=nl(fX);function hX(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=E.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=E.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,f=E.useRef(!1);E.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,m,v]=E.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:w,top:b,width:C,height:T,bottom:P,right:B,x:R,y:D}=l.current.element.getBoundingClientRect(),k={left:w,top:b,width:C,height:T,bottom:P,right:B,x:R,y:D};l.current.element instanceof HTMLElement&&i&&(k.height=l.current.element.offsetHeight,k.width=l.current.element.offsetWidth),Object.freeze(k),f.current&&!vX(l.current.lastBounds,k)&&a(l.current.lastBounds=k)};return[_,d?VR(_,d):_,c?VR(_,c):_]},[a,i,c,d]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=_=>{!_||_===l.current.element||(y(),l.current.element=_,l.current.scrollContainers=oO(_),x())};return mX(v,!!n),pX(m),E.useEffect(()=>{y(),x()},[n,v,m]),E.useEffect(()=>y,[]),[g,o,p]}function pX(t){E.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function mX(t,e){E.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function oO(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...oO(t.parentElement)]}const gX=["x","y","top","bottom","left","right","width","height"],vX=(t,e)=>gX.every(n=>t[n]===e[n]);var yX=Object.defineProperty,xX=Object.defineProperties,_X=Object.getOwnPropertyDescriptors,WR=Object.getOwnPropertySymbols,SX=Object.prototype.hasOwnProperty,wX=Object.prototype.propertyIsEnumerable,jR=(t,e,n)=>e in t?yX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XR=(t,e)=>{for(var n in e||(e={}))SX.call(e,n)&&jR(t,n,e[n]);if(WR)for(var n of WR(e))wX.call(e,n)&&jR(t,n,e[n]);return t},EX=(t,e)=>xX(t,_X(e));function aO(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=aO(r,e,n);if(i)return i;r=e?null:r.sibling}}function lO(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const Sb=lO(E.createContext(null));class cO extends E.Component{render(){return E.createElement(Sb.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:JR,ReactCurrentDispatcher:KR}=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function AX(){const t=E.useContext(Sb);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=E.useId();return E.useMemo(()=>{for(const r of[JR==null?void 0:JR.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=aO(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function bX(){var t,e;const n=AX(),[r]=E.useState(()=>new Map);r.clear();let i=n;for(;i;){const s=(t=i.type)==null?void 0:t._context;s&&s!==Sb&&!r.has(s)&&r.set(s,(e=KR==null?void 0:KR.current)==null?void 0:e.readContext(lO(s))),i=i.return}return r}function MX(){const t=bX();return E.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>E.createElement(e,null,E.createElement(n.Provider,EX(XR({},r),{value:t.get(n)}))),e=>E.createElement(cO,XR({},e))),[t])}const __={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function CX(t){const{handlePointer:e}=nX(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(__).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=__[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=__[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const TX=E.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=CX,eventSource:a,eventPrefix:l,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:y,performance:x,raycaster:g,camera:_,onPointerMissed:w,onCreated:b,...C},T){E.useMemo(()=>_b(A7),[]);const P=MX(),[B,R]=hX({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=E.useRef(null),k=E.useRef(null);E.useImperativeHandle(T,()=>D.current);const X=KF(w),[$,j]=E.useState(!1),[H,ie]=E.useState(!1);if($)throw $;if(H)throw H;const Z=E.useRef(null);Vp(()=>{const O=D.current;R.width>0&&R.height>0&&O&&(Z.current||(Z.current=uX(O)),Z.current.configure({gl:s,events:o,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:y,performance:x,raycaster:g,camera:_,size:R,onPointerMissed:(...z)=>X.current==null?void 0:X.current(...z),onCreated:z=>{z.events.connect==null||z.events.connect(a?Jj(a)?a.current:a:k.current),l&&z.setEvents({compute:(ne,J)=>{const q=ne[l+"X"],ee=ne[l+"Y"];J.pointer.set(q/J.size.width*2-1,-(ee/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),b==null||b(z)}}),Z.current.render(E.createElement(P,null,E.createElement(YF,{set:ie},E.createElement(E.Suspense,{fallback:E.createElement(Kj,{set:j})},e)))))}),E.useEffect(()=>{const O=D.current;if(O)return()=>sO(O)},[]);const U=a?"none":"auto";return E.createElement("div",Re({ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:U,...i}},C),E.createElement("div",{ref:B,style:{width:"100%",height:"100%"}},E.createElement("canvas",{ref:D,style:{display:"block"}},n)))}),RX=E.forwardRef(function(e,n){return E.createElement(cO,null,E.createElement(TX,Re({},e,{ref:n})))}),Wp=new F,wb=new F,PX=new F;function IX(t,e,n){const r=Wp.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function BX(t,e){const n=Wp.setFromMatrixPosition(t.matrixWorld),r=wb.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(PX);return i.angleTo(s)>Math.PI/2}function DX(t,e,n,r){const i=Wp.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function LX(t,e){if(e instanceof Ps)return e.zoom;if(e instanceof rn){const n=Wp.setFromMatrixPosition(t.matrixWorld),r=wb.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function FX(t,e,n){if(e instanceof rn||e instanceof Ps){const r=Wp.setFromMatrixPosition(t.matrixWorld),i=wb.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const $w=t=>Math.abs(t)<1e-10?0:t;function uO(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=$w(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const OX=(t=>e=>uO(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),NX=(t=>(e,n)=>uO(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function UX(t){return t&&typeof t=="object"&&"current"in t}const rp=E.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:d=!1,occlude:f,onOcclude:p,castShadow:m,receiveShadow:v,material:y,geometry:x,zIndexRange:g=[16777271,0],calculatePosition:_=IX,as:w="div",wrapperClass:b,pointerEvents:C="auto",...T},P)=>{const{gl:B,camera:R,scene:D,size:k,raycaster:X,events:$,viewport:j}=an(),[H]=E.useState(()=>document.createElement(w)),ie=E.useRef(),Z=E.useRef(null),U=E.useRef(0),O=E.useRef([0,0]),z=E.useRef(null),ne=E.useRef(null),J=(a==null?void 0:a.current)||$.connected||B.domElement.parentNode,q=E.useRef(null),ee=E.useRef(!1),_e=E.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&UX(f[0]),[f]);E.useLayoutEffect(()=>{const Ee=B.domElement;f&&f==="blending"?(Ee.style.zIndex=`${Math.floor(g[0]/2)}`,Ee.style.position="absolute",Ee.style.pointerEvents="none"):(Ee.style.zIndex=null,Ee.style.position=null,Ee.style.pointerEvents=null)},[f]),E.useLayoutEffect(()=>{if(Z.current){const Ee=ie.current=IL(H);if(D.updateMatrixWorld(),d)H.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Me=_(Z.current,R,k);H.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Me[0]}px,${Me[1]}px,0);transform-origin:0 0;`}return J&&(i?J.prepend(H):J.appendChild(H)),()=>{J&&J.removeChild(H),Ee.unmount()}}},[J,d]),E.useLayoutEffect(()=>{b&&(H.className=b)},[b]);const be=E.useMemo(()=>d?{position:"absolute",top:0,left:0,width:k.width,height:k.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-k.height/2,left:-k.width/2,width:k.width,height:k.height},...n},[n,s,o,k,d]),K=E.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);E.useLayoutEffect(()=>{if(ee.current=!1,d){var Ee;(Ee=ie.current)==null||Ee.render(E.createElement("div",{ref:z,style:be},E.createElement("div",{ref:ne,style:K},E.createElement("div",{ref:P,className:r,style:n,children:t}))))}else{var Me;(Me=ie.current)==null||Me.render(E.createElement("div",{ref:P,style:be,className:r,children:t}))}});const je=E.useRef(!0);Xd(Ee=>{if(Z.current){R.updateMatrixWorld(),Z.current.updateWorldMatrix(!0,!1);const Me=d?O.current:_(Z.current,R,k);if(d||Math.abs(U.current-R.zoom)>e||Math.abs(O.current[0]-Me[0])>e||Math.abs(O.current[1]-Me[1])>e){const ve=BX(Z.current,R);let re=!1;_e&&(f!=="blending"?re=[D]:Array.isArray(f)&&(re=f.map(ke=>ke.current)));const he=je.current;if(re){const ke=DX(Z.current,R,X,re);je.current=ke&&!ve}else je.current=!ve;he!==je.current&&(p?p(!je.current):H.style.display=je.current?"block":"none");const Fe=Math.floor(g[0]/2),Be=f?_e?[g[0],Fe]:[Fe-1,0]:g;if(H.style.zIndex=`${FX(Z.current,R,Be)}`,d){const[ke,Ze]=[k.width/2,k.height/2],ze=R.projectionMatrix.elements[5]*Ze,{isOrthographicCamera:tt,top:ht,left:V,bottom:N,right:Y}=R,ce=OX(R.matrixWorldInverse),Se=tt?`scale(${ze})translate(${$w(-(Y+V)/2)}px,${$w((ht+N)/2)}px)`:`translateZ(${ze}px)`;let Te=Z.current.matrixWorld;c&&(Te=R.matrixWorldInverse.clone().transpose().copyPosition(Te).scale(Z.current.scale),Te.elements[3]=Te.elements[7]=Te.elements[11]=0,Te.elements[15]=1),H.style.width=k.width+"px",H.style.height=k.height+"px",H.style.perspective=tt?"":`${ze}px`,z.current&&ne.current&&(z.current.style.transform=`${Se}${ce}translate(${ke}px,${Ze}px)`,ne.current.style.transform=NX(Te,1/((l||10)/400)))}else{const ke=l===void 0?1:LX(Z.current,R)*l;H.style.transform=`translate3d(${Me[0]}px,${Me[1]}px,0) scale(${ke})`}O.current=Me,U.current=R.zoom}}if(!_e&&q.current&&!ee.current)if(d){if(z.current){const Me=z.current.children[0];if(Me!=null&&Me.clientWidth&&Me!=null&&Me.clientHeight){const{isOrthographicCamera:ve}=R;if(ve||x)T.scale&&(Array.isArray(T.scale)?T.scale instanceof F?q.current.scale.copy(T.scale.clone().divideScalar(1)):q.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):q.current.scale.setScalar(1/T.scale));else{const re=(l||10)/400,he=Me.clientWidth*re,Fe=Me.clientHeight*re;q.current.scale.set(he,Fe,1)}ee.current=!0}}}else{const Me=H.children[0];if(Me!=null&&Me.clientWidth&&Me!=null&&Me.clientHeight){const ve=1/j.factor,re=Me.clientWidth*ve,he=Me.clientHeight*ve;q.current.scale.set(re,he,1),ee.current=!0}q.current.lookAt(Ee.camera.position)}});const Xe=E.useMemo(()=>({vertexShader:d?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[d]);return E.createElement("group",Re({},T,{ref:Z}),f&&!_e&&E.createElement("mesh",{castShadow:m,receiveShadow:v,ref:q},x||E.createElement("planeGeometry",null),y||E.createElement("shaderMaterial",{side:_r,vertexShader:Xe.vertexShader,fragmentShader:Xe.fragmentShader})))});function Dy(t,e="pointer",n="auto"){E.useEffect(()=>{if(t)return document.body.style.cursor=e,()=>void(document.body.style.cursor=n)},[t])}function kX(t){let e;const n=new Set,r=(c,d)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=d?f:Object.assign({},e,f),n.forEach(m=>m(e,p))}},i=()=>e,s=(c,d=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const v=d(e);if(!f(p,v)){const y=p;c(p=v,y)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,d,f)=>d||f?s(c,d,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const zX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),YR=zX?E.useEffect:E.useLayoutEffect;function HX(t){const e=typeof t=="function"?kX(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=E.useReducer(x=>x+1,0),o=e.getState(),a=E.useRef(o),l=E.useRef(r),c=E.useRef(i),d=E.useRef(!1),f=E.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||d.current)&&(p=r(o),m=!i(f.current,p)),YR(()=>{m&&(f.current=p),a.current=o,l.current=r,c.current=i,d.current=!1});const v=E.useRef(o);YR(()=>{const x=()=>{try{const _=e.getState(),w=l.current(_);c.current(f.current,w)||(a.current=_,f.current=w,s())}catch{d.current=!0,s()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const y=m?p:f.current;return E.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}let Vf=0;const GX=HX(t=>(qu.onStart=(e,n,r)=>{t({active:!0,item:e,loaded:n,total:r,progress:(n-Vf)/(r-Vf)*100})},qu.onLoad=()=>{t({active:!1})},qu.onError=e=>t(n=>({errors:[...n.errors,e]})),qu.onProgress=(e,n,r)=>{n===r&&(Vf=r),t({active:!0,item:e,loaded:n,total:r,progress:(n-Vf)/(r-Vf)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),$X=t=>`Loading ${t.toFixed(2)}%`;function VX({containerStyles:t,innerStyles:e,barStyles:n,dataStyles:r,dataInterpolation:i=$X,initialState:s=o=>o}){const{active:o,progress:a}=GX(),l=E.useRef(0),c=E.useRef(0),d=E.useRef(null),[f,p]=E.useState(s(o));E.useEffect(()=>{let v;return o!==f&&(v=setTimeout(()=>p(o),300)),()=>clearTimeout(v)},[f,o]);const m=E.useCallback(()=>{d.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),d.current.innerText=i(l.current),l.current<a&&(c.current=requestAnimationFrame(m)))},[i,a]);return E.useEffect(()=>(m(),()=>cancelAnimationFrame(c.current)),[m]),f?E.createElement("div",{style:{...cv.container,opacity:o?1:0,...t}},E.createElement("div",null,E.createElement("div",{style:{...cv.inner,...e}},E.createElement("div",{style:{...cv.bar,transform:`scaleX(${a/100})`,...n}}),E.createElement("span",{ref:d,style:{...cv.data,...r}})))):null}const cv={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function dO(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function WX(t,e,n){return Math.max(e,Math.min(t,n))}const Nr={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function QR(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function qR(t,e,n,r=.15){return r===0?WX(t,e,n):t<e?-QR(e-t,n-e,r)+e:t>n?+QR(t-n,n-e,r)+n:t}function jX(t,[e,n],[r,i]){const[[s,o],[a,l]]=t;return[qR(e,s,o,r),qR(n,a,l,i)]}function XX(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JX(t){var e=XX(t,"string");return typeof e=="symbol"?e:String(e)}function ii(t,e,n){return e=JX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZR(Object(n),!0).forEach(function(r){ii(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const fO={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function eP(t){return t?t[0].toUpperCase()+t.slice(1):""}const KX=["enter","leave"];function YX(t=!1,e){return t&&!KX.includes(e)}function QX(t,e="",n=!1){const r=fO[t],i=r&&r[e]||e;return"on"+eP(t)+eP(i)+(YX(n,i)?"Capture":"")}const qX=["gotpointercapture","lostpointercapture"];function ZX(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=qX.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function eJ(t,e=""){const n=fO[t],r=n&&n[e]||e;return t+r}function Ly(t){return"touches"in t}function hO(t){return Ly(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function tJ(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function nJ(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function pO(t){return Ly(t)?nJ(t)[0]:t}function rJ(t){return tJ(t).map(e=>e.identifier)}function S_(t){const e=pO(t);return Ly(t)?e.identifier:e.pointerId}function tP(t){const e=pO(t);return[e.clientX,e.clientY]}function iJ(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return e}function F0(t,...e){return typeof t=="function"?t(...e):t}function sJ(){}function oJ(...t){return t.length===0?sJ:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function nP(t,e){return Object.assign({},e,t||{})}const aJ=32;class lJ{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?F0(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,iJ(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const T=n._delta.map(Math.abs);Nr.addTo(n._distance,T)}this.axisIntent&&this.axisIntent(e);const[o,a]=n._movement,[l,c]=r.threshold,{_step:d,values:f}=n;if(r.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=l&&f[0]),d[1]===!1&&(d[1]=Math.abs(a)>=c&&f[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=l&&Math.sign(o)*l),d[1]===!1&&(d[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=d[0]!==!1||d[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[T,P]=f;p[0]=d[0]!==!1?T-d[0]:0,p[1]=d[1]!==!1?P-d[1]:0}else p[0]=d[0]!==!1?o-d[0]:0,p[1]=d[1]!==!1?a-d[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const m=n.offset,v=n._active&&!n._blocked||n.active;v&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=F0(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[y,x]=n.offset,[[g,_],[w,b]]=n._bounds;n.overflow=[y<g?-1:y>_?1:0,x<w?-1:x>b?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const C=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=jX(n._bounds,n.offset,C),n.delta=Nr.sub(n.offset,m),this.computeMovement(),v&&(!n.last||s>aJ)){n.delta=Nr.sub(n.offset,m);const T=n.delta.map(Math.abs);Nr.addTo(n.distance,T),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[T[0]/s,T[1]/s],n.timeDelta=s)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Cn(Cn(Cn({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function cJ([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class uJ extends lJ{constructor(...e){super(...e),ii(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Nr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Nr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[hO(e)]:r.axisThreshold;n.axis=cJ(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const dJ=t=>t,rP=.15,mO={enabled(t=!0){return t},eventOptions(t,e,n){return Cn(Cn({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[rP,rP];case!1:return[0,0];default:return Nr.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Nr.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||dJ},threshold(t){return Nr.toVector(t,0)}},fJ=0,jp=Cn(Cn({},mO),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=fJ){return t},bounds(t={}){if(typeof t=="function")return s=>jp.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),iP={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class hJ extends uJ{constructor(...e){super(...e),ii(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=jp.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=S_(e),r._pointerActive=!0,this.computeValues(tP(e)),this.computeInitial(),n.preventScrollAxis&&hO(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=S_(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=tP(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Nr.sub(s,n._values),this.computeValues(s)),Nr.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=S_(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=n._distance;if(n.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[c,d]=n._movement,[f,p]=r.swipe.velocity,[m,v]=r.swipe.distance,y=r.swipe.duration;if(n.elapsedTime<y){const x=Math.abs(a/n.timeDelta),g=Math.abs(l/n.timeDelta);x>f&&Math.abs(c)>m&&(n.swipe[0]=Math.sign(a)),g>p&&Math.abs(d)>v&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,pJ(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=iP[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Nr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in iP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function pJ(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Xp=typeof window<"u"&&window.document&&window.document.createElement;function mJ(){return Xp&&"ontouchstart"in window}function sP(){return mJ()||Xp&&window.navigator.maxTouchPoints>1}function gJ(){return Xp&&"onpointerdown"in window}function vJ(){return Xp&&"exitPointerLock"in window.document}function yJ(){try{return"constructor"in GestureEvent}catch{return!1}}const Zi={isBrowser:Xp,gesture:yJ(),touch:sP(),touchscreen:sP(),pointer:gJ(),pointerLock:vJ()},xJ=250,_J=180,SJ=.5,wJ=50,EJ=250,AJ=10,oP={mouse:0,touch:0,pen:8},bJ=Cn(Cn({},jp),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Zi.pointerLock,Zi.touch&&n?"touch":this.pointerLock?"mouse":Zi.pointer&&!i?"pointer":Zi.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?xJ:void 0,!(!Zi.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Nr.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:t=SJ,distance:e=wJ,duration:n=EJ}={}){return{velocity:this.transform(Nr.toVector(t)),distance:this.transform(Nr.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return _J;case!1:return 0;default:return t}},axisThreshold(t){return t?Cn(Cn({},oP),t):oP},keyboardDisplacement(t=AJ){return t}});Cn(Cn({},mO),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Zi.touch&&Zi.gesture)return"gesture";if(Zi.touch&&r)return"touch";if(Zi.touchscreen){if(Zi.pointer)return"pointer";if(Zi.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=o=>{const a=nP(F0(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=nP(F0(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Nr.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Cn(Cn({},jp),{},{mouseOnly:(t=!0)=>t});Cn(Cn({},jp),{},{mouseOnly:(t=!0)=>t});const gO=new Map,Vw=new Map;function MJ(t){gO.set(t.key,t.engine),Vw.set(t.key,t.resolver)}const CJ={key:"drag",engine:hJ,resolver:bJ};function TJ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function RJ(t,e){if(t==null)return{};var n=TJ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const PJ={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Zi.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},IJ=["target","eventOptions","window","enabled","transform"];function t0(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=t0(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function BJ(t,e,n={}){const r=t,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=RJ(r,IJ);if(n.shared=t0({target:i,eventOptions:s,window:o,enabled:a,transform:l},PJ),e){const d=Vw.get(e);n[e]=t0(Cn({shared:n.shared},c),d)}else for(const d in c){const f=Vw.get(d);f&&(n[d]=t0(Cn({shared:n.shared},c[d]),f))}return n}class vO{constructor(e,n){ii(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,s){const o=this._listeners,a=eJ(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Cn(Cn({},l),s);e.addEventListener(a,i,c);const d=()=>{e.removeEventListener(a,i,c),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class DJ{constructor(){ii(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class LJ{constructor(e){ii(this,"gestures",new Set),ii(this,"_targetEventStore",new vO(this)),ii(this,"gestureEventStores",{}),ii(this,"gestureTimeoutStores",{}),ii(this,"handlers",{}),ii(this,"config",{}),ii(this,"pointerIds",new Set),ii(this,"touchIds",new Set),ii(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),FJ(this,e)}setEventIds(e){if(Ly(e))return this.touchIds=new Set(rJ(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=BJ(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=aP(r,a.eventOptions,!!i);if(a.enabled){const c=gO.get(o);new c(this,e,o).bind(l)}}const s=aP(r,n.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Cn(Cn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=oJ(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=ZX(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function bu(t,e){t.gestures.add(e),t.gestureEventStores[e]=new vO(t,e),t.gestureTimeoutStores[e]=new DJ}function FJ(t,e){e.drag&&bu(t,"drag"),e.wheel&&bu(t,"wheel"),e.scroll&&bu(t,"scroll"),e.move&&bu(t,"move"),e.pinch&&bu(t,"pinch"),e.hover&&bu(t,"hover")}const aP=(t,e,n)=>(r,i,s,o={},a=!1)=>{var l,c;const d=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=a?r:QX(r,i,d);n&&f&&(p+="Passive"),t[p]=t[p]||[],t[p].push(s)};function OJ(t,e={},n,r){const i=Rt.useMemo(()=>new LJ(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),Rt.useEffect(i.effect.bind(i)),Rt.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function NJ(t,e){return MJ(CJ),OJ({drag:t},e||{},"drag")}function ip(t){return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function UJ(t,e){if(ip(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ip(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kJ(t){var e=UJ(t,"string");return ip(e)==="symbol"?e:String(e)}function ft(t,e,n){return e=kJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let Wf;function zJ(){if(Wf!==void 0)return Wf;try{var t;let e;const n=document.createElement("canvas");return Wf=!!(window.WebGL2RenderingContext&&(e=n.getContext("webgl2"))),e&&((t=e.getExtension("WEBGL_lose_context"))===null||t===void 0||t.loseContext()),Wf}catch{return Wf=!1}}function lP(t,e){if(e===T3)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===P0||e===RA){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,i=[];if(n)if(e===P0)for(let o=1;o<=r;o++)i.push(n.getX(0)),i.push(n.getX(o)),i.push(n.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(n.getX(o)),i.push(n.getX(o+1)),i.push(n.getX(o+2))):(i.push(n.getX(o+2)),i.push(n.getX(o+1)),i.push(n.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}const cP=(t,e)=>(t%e+e)%e;let HJ=class extends Fi{constructor(e,n){super(),ft(this,"object",void 0),ft(this,"domElement",void 0),ft(this,"enabled",!0),ft(this,"target",new F),ft(this,"minDistance",0),ft(this,"maxDistance",1/0),ft(this,"minZoom",0),ft(this,"maxZoom",1/0),ft(this,"minPolarAngle",0),ft(this,"maxPolarAngle",Math.PI),ft(this,"minAzimuthAngle",-1/0),ft(this,"maxAzimuthAngle",1/0),ft(this,"enableDamping",!1),ft(this,"dampingFactor",.05),ft(this,"enableZoom",!0),ft(this,"zoomSpeed",1),ft(this,"enableRotate",!0),ft(this,"rotateSpeed",1),ft(this,"enablePan",!0),ft(this,"panSpeed",1),ft(this,"screenSpacePanning",!0),ft(this,"keyPanSpeed",7),ft(this,"autoRotate",!1),ft(this,"autoRotateSpeed",2),ft(this,"reverseOrbit",!1),ft(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ft(this,"mouseButtons",{LEFT:Ul.ROTATE,MIDDLE:Ul.DOLLY,RIGHT:Ul.PAN}),ft(this,"touches",{ONE:kl.ROTATE,TWO:kl.DOLLY_PAN}),ft(this,"target0",void 0),ft(this,"position0",void 0),ft(this,"zoom0",void 0),ft(this,"_domElementKeyEvents",null),ft(this,"getPolarAngle",void 0),ft(this,"getAzimuthalAngle",void 0),ft(this,"setPolarAngle",void 0),ft(this,"setAzimuthalAngle",void 0),ft(this,"getDistance",void 0),ft(this,"listenToKeyEvents",void 0),ft(this,"saveState",void 0),ft(this,"reset",void 0),ft(this,"update",void 0),ft(this,"connect",void 0),ft(this,"dispose",void 0),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof rn?this.object.zoom:1,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=Q=>{let me=cP(Q,2*Math.PI),Ae=d.phi;Ae<0&&(Ae+=2*Math.PI),me<0&&(me+=2*Math.PI);let Pe=Math.abs(me-Ae);2*Math.PI-Pe<Pe&&(me<Ae?me+=2*Math.PI:Ae+=2*Math.PI),f.phi=me-Ae,r.update()},this.setAzimuthalAngle=Q=>{let me=cP(Q,2*Math.PI),Ae=d.theta;Ae<0&&(Ae+=2*Math.PI),me<0&&(me+=2*Math.PI);let Pe=Math.abs(me-Ae);2*Math.PI-Pe<Pe&&(me<Ae?me+=2*Math.PI:Ae+=2*Math.PI),f.theta=me-Ae,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Q=>{Q.addEventListener("keydown",Y),this._domElementKeyEvents=Q},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof rn?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof rn&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Q=new F,me=new Vn().setFromUnitVectors(e.up,new F(0,1,0)),Ae=me.clone().invert(),Pe=new F,nt=new Vn,ut=2*Math.PI;return function(){const te=r.object.position;Q.copy(te).sub(r.target),Q.applyQuaternion(me),d.setFromVector3(Q),r.autoRotate&&l===a.NONE&&X(D()),r.enableDamping?(d.theta+=f.theta*r.dampingFactor,d.phi+=f.phi*r.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let pe=r.minAzimuthAngle,Ce=r.maxAzimuthAngle;return isFinite(pe)&&isFinite(Ce)&&(pe<-Math.PI?pe+=ut:pe>Math.PI&&(pe-=ut),Ce<-Math.PI?Ce+=ut:Ce>Math.PI&&(Ce-=ut),pe<=Ce?d.theta=Math.max(pe,Math.min(Ce,d.theta)):d.theta=d.theta>(pe+Ce)/2?Math.max(pe,d.theta):Math.min(Ce,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=p,d.radius=Math.max(r.minDistance,Math.min(r.maxDistance,d.radius)),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),Q.setFromSpherical(d),Q.applyQuaternion(Ae),te.copy(r.target).add(Q),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0)),p=1,v||Pe.distanceToSquared(r.object.position)>c||8*(1-nt.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Pe.copy(r.object.position),nt.copy(r.object.quaternion),v=!1,!0):!1}})(),this.connect=Q=>{Q===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=Q,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Te),r.domElement.addEventListener("pointerdown",ke),r.domElement.addEventListener("pointercancel",tt),r.domElement.addEventListener("wheel",N)},this.dispose=()=>{var Q,me,Ae,Pe,nt,ut;(Q=r.domElement)===null||Q===void 0||Q.removeEventListener("contextmenu",Te),(me=r.domElement)===null||me===void 0||me.removeEventListener("pointerdown",ke),(Ae=r.domElement)===null||Ae===void 0||Ae.removeEventListener("pointercancel",tt),(Pe=r.domElement)===null||Pe===void 0||Pe.removeEventListener("wheel",N),(nt=r.domElement)===null||nt===void 0||nt.ownerDocument.removeEventListener("pointermove",Ze),(ut=r.domElement)===null||ut===void 0||ut.ownerDocument.removeEventListener("pointerup",ze),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Y)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,d=new Fw,f=new Fw;let p=1;const m=new F;let v=!1;const y=new de,x=new de,g=new de,_=new de,w=new de,b=new de,C=new de,T=new de,P=new de,B=[],R={};function D(){return 2*Math.PI/60/60*r.autoRotateSpeed}function k(){return Math.pow(.95,r.zoomSpeed)}function X(Q){r.reverseOrbit?f.theta+=Q:f.theta-=Q}function $(Q){r.reverseOrbit?f.phi+=Q:f.phi-=Q}const j=(()=>{const Q=new F;return function(Ae,Pe){Q.setFromMatrixColumn(Pe,0),Q.multiplyScalar(-Ae),m.add(Q)}})(),H=(()=>{const Q=new F;return function(Ae,Pe){r.screenSpacePanning===!0?Q.setFromMatrixColumn(Pe,1):(Q.setFromMatrixColumn(Pe,0),Q.crossVectors(r.object.up,Q)),Q.multiplyScalar(Ae),m.add(Q)}})(),ie=(()=>{const Q=new F;return function(Ae,Pe){const nt=r.domElement;if(nt&&r.object instanceof rn&&r.object.isPerspectiveCamera){const ut=r.object.position;Q.copy(ut).sub(r.target);let $t=Q.length();$t*=Math.tan(r.object.fov/2*Math.PI/180),j(2*Ae*$t/nt.clientHeight,r.object.matrix),H(2*Pe*$t/nt.clientHeight,r.object.matrix)}else nt&&r.object instanceof Ps&&r.object.isOrthographicCamera?(j(Ae*(r.object.right-r.object.left)/r.object.zoom/nt.clientWidth,r.object.matrix),H(Pe*(r.object.top-r.object.bottom)/r.object.zoom/nt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Z(Q){r.object instanceof rn&&r.object.isPerspectiveCamera?p/=Q:r.object instanceof Ps&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*Q)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function U(Q){r.object instanceof rn&&r.object.isPerspectiveCamera?p*=Q:r.object instanceof Ps&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/Q)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function O(Q){y.set(Q.clientX,Q.clientY)}function z(Q){C.set(Q.clientX,Q.clientY)}function ne(Q){_.set(Q.clientX,Q.clientY)}function J(Q){x.set(Q.clientX,Q.clientY),g.subVectors(x,y).multiplyScalar(r.rotateSpeed);const me=r.domElement;me&&(X(2*Math.PI*g.x/me.clientHeight),$(2*Math.PI*g.y/me.clientHeight)),y.copy(x),r.update()}function q(Q){T.set(Q.clientX,Q.clientY),P.subVectors(T,C),P.y>0?Z(k()):P.y<0&&U(k()),C.copy(T),r.update()}function ee(Q){w.set(Q.clientX,Q.clientY),b.subVectors(w,_).multiplyScalar(r.panSpeed),ie(b.x,b.y),_.copy(w),r.update()}function _e(Q){Q.deltaY<0?U(k()):Q.deltaY>0&&Z(k()),r.update()}function be(Q){let me=!1;switch(Q.code){case r.keys.UP:ie(0,r.keyPanSpeed),me=!0;break;case r.keys.BOTTOM:ie(0,-r.keyPanSpeed),me=!0;break;case r.keys.LEFT:ie(r.keyPanSpeed,0),me=!0;break;case r.keys.RIGHT:ie(-r.keyPanSpeed,0),me=!0;break}me&&(Q.preventDefault(),r.update())}function K(){if(B.length==1)y.set(B[0].pageX,B[0].pageY);else{const Q=.5*(B[0].pageX+B[1].pageX),me=.5*(B[0].pageY+B[1].pageY);y.set(Q,me)}}function je(){if(B.length==1)_.set(B[0].pageX,B[0].pageY);else{const Q=.5*(B[0].pageX+B[1].pageX),me=.5*(B[0].pageY+B[1].pageY);_.set(Q,me)}}function Xe(){const Q=B[0].pageX-B[1].pageX,me=B[0].pageY-B[1].pageY,Ae=Math.sqrt(Q*Q+me*me);C.set(0,Ae)}function Ee(){r.enableZoom&&Xe(),r.enablePan&&je()}function Me(){r.enableZoom&&Xe(),r.enableRotate&&K()}function ve(Q){if(B.length==1)x.set(Q.pageX,Q.pageY);else{const Ae=Je(Q),Pe=.5*(Q.pageX+Ae.x),nt=.5*(Q.pageY+Ae.y);x.set(Pe,nt)}g.subVectors(x,y).multiplyScalar(r.rotateSpeed);const me=r.domElement;me&&(X(2*Math.PI*g.x/me.clientHeight),$(2*Math.PI*g.y/me.clientHeight)),y.copy(x)}function re(Q){if(B.length==1)w.set(Q.pageX,Q.pageY);else{const me=Je(Q),Ae=.5*(Q.pageX+me.x),Pe=.5*(Q.pageY+me.y);w.set(Ae,Pe)}b.subVectors(w,_).multiplyScalar(r.panSpeed),ie(b.x,b.y),_.copy(w)}function he(Q){const me=Je(Q),Ae=Q.pageX-me.x,Pe=Q.pageY-me.y,nt=Math.sqrt(Ae*Ae+Pe*Pe);T.set(0,nt),P.set(0,Math.pow(T.y/C.y,r.zoomSpeed)),Z(P.y),C.copy(T)}function Fe(Q){r.enableZoom&&he(Q),r.enablePan&&re(Q)}function Be(Q){r.enableZoom&&he(Q),r.enableRotate&&ve(Q)}function ke(Q){if(r.enabled!==!1){if(B.length===0){var me,Ae;(me=r.domElement)===null||me===void 0||me.ownerDocument.addEventListener("pointermove",Ze),(Ae=r.domElement)===null||Ae===void 0||Ae.ownerDocument.addEventListener("pointerup",ze)}Ke(Q),Q.pointerType==="touch"?ce(Q):ht(Q)}}function Ze(Q){r.enabled!==!1&&(Q.pointerType==="touch"?Se(Q):V(Q))}function ze(Q){if(Ue(Q),B.length===0){var me,Ae,Pe;(me=r.domElement)===null||me===void 0||me.releasePointerCapture(Q.pointerId),(Ae=r.domElement)===null||Ae===void 0||Ae.ownerDocument.removeEventListener("pointermove",Ze),(Pe=r.domElement)===null||Pe===void 0||Pe.ownerDocument.removeEventListener("pointerup",ze)}r.dispatchEvent(o),l=a.NONE}function tt(Q){Ue(Q)}function ht(Q){let me;switch(Q.button){case 0:me=r.mouseButtons.LEFT;break;case 1:me=r.mouseButtons.MIDDLE;break;case 2:me=r.mouseButtons.RIGHT;break;default:me=-1}switch(me){case Ul.DOLLY:if(r.enableZoom===!1)return;z(Q),l=a.DOLLY;break;case Ul.ROTATE:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(r.enablePan===!1)return;ne(Q),l=a.PAN}else{if(r.enableRotate===!1)return;O(Q),l=a.ROTATE}break;case Ul.PAN:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(r.enableRotate===!1)return;O(Q),l=a.ROTATE}else{if(r.enablePan===!1)return;ne(Q),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function V(Q){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;J(Q);break;case a.DOLLY:if(r.enableZoom===!1)return;q(Q);break;case a.PAN:if(r.enablePan===!1)return;ee(Q);break}}function N(Q){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Q.preventDefault(),r.dispatchEvent(s),_e(Q),r.dispatchEvent(o))}function Y(Q){r.enabled===!1||r.enablePan===!1||be(Q)}function ce(Q){switch(ge(Q),B.length){case 1:switch(r.touches.ONE){case kl.ROTATE:if(r.enableRotate===!1)return;K(),l=a.TOUCH_ROTATE;break;case kl.PAN:if(r.enablePan===!1)return;je(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case kl.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ee(),l=a.TOUCH_DOLLY_PAN;break;case kl.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Se(Q){switch(ge(Q),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ve(Q),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;re(Q),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Fe(Q),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Be(Q),r.update();break;default:l=a.NONE}}function Te(Q){r.enabled!==!1&&Q.preventDefault()}function Ke(Q){B.push(Q)}function Ue(Q){delete R[Q.pointerId];for(let me=0;me<B.length;me++)if(B[me].pointerId==Q.pointerId){B.splice(me,1);return}}function ge(Q){let me=R[Q.pointerId];me===void 0&&(me=new de,R[Q.pointerId]=me),me.set(Q.pageX,Q.pageY)}function Je(Q){const me=Q.pointerId===B[0].pointerId?B[1]:B[0];return R[me.pointerId]}n!==void 0&&this.connect(n),this.update()}};class Eb extends Hr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new jJ(n)}),this.register(function(n){return new ZJ(n)}),this.register(function(n){return new eK(n)}),this.register(function(n){return new tK(n)}),this.register(function(n){return new JJ(n)}),this.register(function(n){return new KJ(n)}),this.register(function(n){return new YJ(n)}),this.register(function(n){return new QJ(n)}),this.register(function(n){return new WJ(n)}),this.register(function(n){return new qJ(n)}),this.register(function(n){return new XJ(n)}),this.register(function(n){return new $J(n)}),this.register(function(n){return new nK(n)}),this.register(function(n){return new rK(n)})}load(e,n,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Id.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new pi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(d){n(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===yO){try{o[kt.KHR_BINARY_GLTF]=new iK(e)}catch(f){i&&i(f);return}s=JSON.parse(o[kt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new vK(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const f=this.pluginCallbacks[d](c);a[f.name]=f,o[f.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const f=s.extensionsUsed[d],p=s.extensionsRequired||[];switch(f){case kt.KHR_MATERIALS_UNLIT:o[f]=new VJ;break;case kt.KHR_DRACO_MESH_COMPRESSION:o[f]=new sK(s,this.dracoLoader);break;case kt.KHR_TEXTURE_TRANSFORM:o[f]=new oK;break;case kt.KHR_MESH_QUANTIZATION:o[f]=new aK;break;default:p.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(r,i)}parseAsync(e,n){const r=this;return new Promise(function(i,s){r.parse(e,n,i,s)})}}function GJ(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const kt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class $J{constructor(e){this.parser=e,this.name=kt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const s=n[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let i=n.cache.get(r);if(i)return i;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const d=new Ne(16777215);l.color!==void 0&&d.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new cb(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new lb(d),c.distance=f;break;case"spot":c=new ab(d),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,wa(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),n.cache.add(r,i),i}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}}class VJ{constructor(){this.name=kt.KHR_MATERIALS_UNLIT}getMaterialType(){return ci}extendParams(e,n,r){const i=[];e.color=new Ne(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Yr))}return Promise.all(i)}}class WJ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class jJ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Jo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new de(a,a)}return Promise.all(s)}}class XJ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Jo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class JJ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Jo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new Ne(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(n,"sheenColorMap",o.sheenColorTexture,Yr)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class KJ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Jo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class YJ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Jo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new Ne(a[0],a[1],a[2]),Promise.all(s)}}class QJ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Jo}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class qJ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Jo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new Ne(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(n,"specularColorMap",o.specularColorTexture,Yr)),Promise.all(s)}}class ZJ{constructor(e){this.parser=e,this.name=kt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class eK{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class tK{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class nK{constructor(e){this.name=kt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,d=i.count,f=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,f,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(d*f);return o.decodeGltfBuffer(new Uint8Array(m),d,f,p,i.mode,i.filter),m})})}else return null}}class rK{constructor(e){this.name=kt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ki.TRIANGLES&&c.mode!==Ki.TRIANGLE_STRIP&&c.mode!==Ki.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),f=d.isGroup?d.children:[d],p=c[0].count,m=[];for(const v of f){const y=new Ve,x=new F,g=new Vn,_=new F(1,1,1),w=new $A(v.geometry,v.material,p);for(let b=0;b<p;b++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,b),l.SCALE&&_.fromBufferAttribute(l.SCALE,b),w.setMatrixAt(b,y.compose(x,g,_));for(const b in l)b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&v.geometry.setAttribute(b,l[b]);zt.prototype.copy.call(w,v),this.parser.assignFinalMaterial(w),m.push(w)}return d.isGroup?(d.clear(),d.add(...m),d):m[0]}))}}const yO="glTF",jf=12,uP={JSON:1313821514,BIN:5130562};class iK{constructor(e){this.name=kt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,jf),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==yO)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-jf,s=new DataView(e,jf);let o=0;for(;o<i;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===uP.JSON){const c=new Uint8Array(e,jf+o,a);this.content=r.decode(c)}else if(l===uP.BIN){const c=jf+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class sK{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const f=Ww[d]||d.toLowerCase();a[f]=o[d]}for(const d in e.attributes){const f=Ww[d]||d.toLowerCase();if(o[d]!==void 0){const p=r.accessors[e.attributes[d]],m=ud[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return n.getDependency("bufferView",s).then(function(d){return new Promise(function(f){i.decodeDracoFile(d,function(p){for(const m in p.attributes){const v=p.attributes[m],y=l[m];y!==void 0&&(v.normalized=y)}f(p)},a,c)})})}}class oK{constructor(){this.name=kt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class aK{constructor(){this.name=kt.KHR_MESH_QUANTIZATION}}class xO extends jd{constructor(e,n,r,i){super(e,n,r,i)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)n[o]=r[s+o];return n}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,d=i-n,f=(r-n)/d,p=f*f,m=p*f,v=e*c,y=v-c,x=-2*m+3*p,g=m-p,_=1-x,w=g-p+f;for(let b=0;b!==a;b++){const C=o[y+b+a],T=o[y+b+l]*d,P=o[v+b+a],B=o[v+b]*d;s[b]=_*C+w*T+x*P+g*B}return s}}const lK=new Vn;class cK extends xO{interpolate_(e,n,r,i){const s=super.interpolate_(e,n,r,i);return lK.fromArray(s).normalize().toArray(s),s}}const Ki={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ud={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},dP={9728:nn,9729:Zt,9984:Xh,9985:vy,9986:ad,9987:Ds},fP={33071:Sr,33648:wd,10497:Ka},w_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ww={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...ol.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ha={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uK={CUBICSPLINE:void 0,LINEAR:yc,STEP:Ed},E_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function dK(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new zp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Bs})),t.DefaultMaterial}function Xf(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function wa(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function fK(t,e,n){let r=!1,i=!1,s=!1;for(let c=0,d=e.length;c<d;c++){const f=e[c];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const f=e[c];if(r){const p=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;o.push(p)}if(i){const p=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],f=c[1],p=c[2];return r&&(t.morphAttributes.position=d),i&&(t.morphAttributes.normal=f),s&&(t.morphAttributes.color=p),t.morphTargetsRelative=!0,t})}function hK(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function pK(t){const e=t.extensions&&t.extensions[kt.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+hP(e.attributes):n=t.indices+":"+hP(t.attributes)+":"+t.mode,n}function hP(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function jw(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function mK(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const gK=new Ve;class vK{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new GJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new Hp(this.options.manager):this.textureLoader=new SF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new pi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Xf(s,a,i),wa(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[n]++,i}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=e(n[r]);if(i)return i}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const s=e(n[i]);s&&r.push(s)}return r}getDependency(e,n){const r=e+":"+n;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[kt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Id.resolveURL(n.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,s=n.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const n=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=w_[i.type],a=ud[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Dt(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=w_[i.type],c=ud[i.componentType],d=c.BYTES_PER_ELEMENT,f=d*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let y,x;if(m&&m!==f){const g=Math.floor(p/m),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let w=n.cache.get(_);w||(y=new c(a,g*m,i.count*m/d),w=new Tp(y,m/d),n.cache.add(_,w)),x=new ui(w,l,p%m/d,v)}else a===null?y=new c(i.count*l):y=new c(a,p,i.count*l),x=new Dt(y,l,v);if(i.sparse!==void 0){const g=w_.SCALAR,_=ud[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,C=new _(o[1],w,i.sparse.count*g),T=new c(o[2],b,i.sparse.count*l);a!==null&&(x=new Dt(x.array.slice(),x.itemSize,x.normalized));for(let P=0,B=C.length;P<B;P++){const R=C[P];if(x.setX(R,T[P*l]),l>=2&&x.setY(R,T[P*l+1]),l>=3&&x.setZ(R,T[P*l+2]),l>=4&&x.setW(R,T[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const n=this.json,r=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,r){const i=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,r).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return d.magFilter=dP[p.magFilter]||Zt,d.minFilter=dP[p.minFilter]||Ds,d.wrapS=fP[p.wrapS]||Ka,d.wrapT=fP[p.wrapT]||Ka,i.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let v=p;n.isImageBitmapLoader===!0&&(v=function(y){const x=new dn(y);x.needsUpdate=!0,p(x)}),n.load(Id.resolveURL(f,s.path),v,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||mK(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=d,d}assignTexture(e,n,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[kt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[kt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[kt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(o.encoding=i),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const i=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new My,Fn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new zr,Fn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return zp}loadMaterial(e){const n=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[kt.KHR_MATERIALS_UNLIT]){const f=i[kt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,n))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Ne(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",f.baseColorTexture,Yr)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=_r);const d=s.alphaMode||E_.OPAQUE;if(d===E_.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===E_.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ci&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new de(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==ci&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ci&&(a.emissive=new Ne().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==ci&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,Yr)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),wa(f,s),n.associations.set(f,{materials:e}),s.extensions&&Xf(i,f,s),f})}createUniqueName(e){const n=Ut.sanitizeNodeName(e||"");let r=n;for(let i=1;this.nodeNamesUsed[r];++i)r=n+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const n=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[kt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return pP(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=pK(c),f=i[d];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[kt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=pP(new yt,c,n),i[d]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const n=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=o[l].material===void 0?dK(this.cache):this.getDependency("material",o[l].material);a.push(d)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],f=[];for(let m=0,v=d.length;m<v;m++){const y=d[m],x=o[m];let g;const _=c[m];if(x.mode===Ki.TRIANGLES||x.mode===Ki.TRIANGLE_STRIP||x.mode===Ki.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new HA(y,_):new qn(y,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===Ki.TRIANGLE_STRIP?g.geometry=lP(g.geometry,RA):x.mode===Ki.TRIANGLE_FAN&&(g.geometry=lP(g.geometry,P0));else if(x.mode===Ki.LINES)g=new Os(y,_);else if(x.mode===Ki.LINE_STRIP)g=new Vo(y,_);else if(x.mode===Ki.LINE_LOOP)g=new VA(y,_);else if(x.mode===Ki.POINTS)g=new WA(y,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&hK(g,s),g.name=n.createUniqueName(s.name||"mesh_"+e),wa(g,s),x.extensions&&Xf(i,g,x),n.assignFinalMaterial(g),f.push(g)}for(let m=0,v=f.length;m<v;m++)n.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return f[0];const p=new Lo;n.associations.set(p,{meshes:e});for(let m=0,v=f.length;m<v;m++)p.add(f[m]);return p})}loadCamera(e){let n;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new rn(cc.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Ps(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),wa(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let i=0,s=n.joints.length;i<s;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const f=o[c];if(f){a.push(f);const p=new Ve;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new GA(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let d=0,f=r.channels.length;d<f;d++){const p=r.channels[d],m=r.samplers[p.sampler],v=p.target,y=v.node,x=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;v.node!==void 0&&(s.push(this.getDependency("node",y)),o.push(this.getDependency("accessor",x)),a.push(this.getDependency("accessor",g)),l.push(m),c.push(v))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(d){const f=d[0],p=d[1],m=d[2],v=d[3],y=d[4],x=[];for(let g=0,_=f.length;g<_;g++){const w=f[g],b=p[g],C=m[g],T=v[g],P=y[g];if(w===void 0)continue;w.updateMatrix();let B;switch(ha[P.path]){case ha.weights:B=Td;break;case ha.rotation:B=qa;break;case ha.position:case ha.scale:default:B=Rd;break}const R=w.name?w.name:w.uuid,D=T.interpolation!==void 0?uK[T.interpolation]:yc,k=[];ha[P.path]===ha.weights?w.traverse(function($){$.morphTargetInfluences&&k.push($.name?$.name:$.uuid)}):k.push(R);let X=C.array;if(C.normalized){const $=jw(X.constructor),j=new Float32Array(X.length);for(let H=0,ie=X.length;H<ie;H++)j[H]=X[H]*$;X=j}for(let $=0,j=k.length;$<j;$++){const H=new B(k[$]+"."+ha[P.path],b.array,X,D);T.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function(Z){const U=this instanceof qa?cK:xO;return new U(this.times,this.values,this.getValueSize()/3,Z)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),x.push(H)}}return new Pd(i,void 0,x)})}createNodeMesh(e){const n=this.json,r=this,i=n.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const n=this.json,r=this,i=n.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,d=a.length;c<d;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],f=c[1],p=c[2];p!==null&&d.traverse(function(m){m.isSkinnedMesh&&m.bind(p,gK)});for(let m=0,v=f.length;m<v;m++)d.add(f[m]);return d})}_loadNodeShallow(e){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(s.isBone===!0?d=new by:c.length>1?d=new Lo:c.length===1?d=c[0]:d=new zt,d!==c[0])for(let f=0,p=c.length;f<p;f++)d.add(c[f]);if(s.name&&(d.userData.name=s.name,d.name=o),wa(d,s),s.extensions&&Xf(r,d,s),s.matrix!==void 0){const f=new Ve;f.fromArray(s.matrix),d.applyMatrix4(f)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return i.associations.has(d)||i.associations.set(d,{}),i.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],i=this,s=new Lo;r.name&&(s.name=i.createUniqueName(r.name)),wa(s,r),r.extensions&&Xf(n,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,f=l.length;d<f;d++)s.add(l[d]);const c=d=>{const f=new Map;for(const[p,m]of i.associations)(p instanceof Fn||p instanceof dn)&&f.set(p,m);return d.traverse(p=>{const m=i.associations.get(p);m!=null&&f.set(p,m)}),f};return i.associations=c(s),s})}}function yK(t,e,n){const r=e.attributes,i=new Sn;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new F(l[0],l[1],l[2]),new F(c[0],c[1],c[2])),a.normalized){const d=jw(ud[a.componentType]);i.min.multiplyScalar(d),i.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new F,l=new F;for(let c=0,d=s.length;c<d;c++){const f=s[c];if(f.POSITION!==void 0){const p=n.json.accessors[f.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const y=jw(ud[p.componentType]);l.multiplyScalar(y)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}t.boundingBox=i;const o=new mi;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}function pP(t,e,n){const r=e.attributes,i=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in r){const a=Ww[o]||o.toLowerCase();a in t.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});i.push(o)}return wa(t,e),yK(t,e,n),Promise.all(i).then(function(){return e.targets!==void 0?fK(t,e.targets,n):t})}class xK extends $d{constructor(e,n={}){const{bevelEnabled:r=!1,bevelSize:i=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:d=0,...f}=n;if(o===void 0)super();else{const p=o.generateShapes(e,l,{lineHeight:c,letterSpacing:d});super(p,{...f,bevelEnabled:r,bevelSize:i,bevelThickness:s,depth:a})}this.type="TextGeometry"}}class _K extends Hr{constructor(e){super(e)}load(e,n,r,i){const s=new pi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);n&&n(l)},r,i)}parse(e){return new Ab(e)}}class Ab{constructor(e){ft(this,"data",void 0),this.data=e}generateShapes(e,n=100,r){const i=[],s={letterSpacing:0,lineHeight:1,...r},o=SK(e,n,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(i,o[a].toShapes(!1));return i}}ft(Ab,"isFont",void 0);ft(Ab,"type",void 0);function SK(t,e,n,r){const i=Array.from(t),s=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,a=[];let l=0,c=0;for(let d=0;d<i.length;d++){const f=i[d];if(f===`
`)l=0,c-=o*r.lineHeight;else{const p=wK(f,s,l,c,n);p&&(l+=p.offsetX+r.letterSpacing,a.push(p.path))}}return a}function wK(t,e,n,r,i){const s=i.glyphs[t]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");return}const o=new TF;let a,l,c,d,f,p,m,v;if(s.o){const y=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let x=0,g=y.length;x<g;)switch(y[x++]){case"m":a=parseInt(y[x++])*e+n,l=parseInt(y[x++])*e+r,o.moveTo(a,l);break;case"l":a=parseInt(y[x++])*e+n,l=parseInt(y[x++])*e+r,o.lineTo(a,l);break;case"q":c=parseInt(y[x++])*e+n,d=parseInt(y[x++])*e+r,f=parseInt(y[x++])*e+n,p=parseInt(y[x++])*e+r,o.quadraticCurveTo(f,p,c,d);break;case"b":c=parseInt(y[x++])*e+n,d=parseInt(y[x++])*e+r,f=parseInt(y[x++])*e+n,p=parseInt(y[x++])*e+r,m=parseInt(y[x++])*e+n,v=parseInt(y[x++])*e+r,o.bezierCurveTo(f,p,m,v,c,d);break}}return{offsetX:s.ha*e,path:o}}const A_=new WeakMap;class EK extends Hr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,r,i){const s=new pi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(i)},r,i)}decodeDracoFile(e,n,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const r=JSON.stringify(n);if(A_.has(e)){const l=A_.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,d)=>{i._callbacks[s]={resolve:c,reject:d},i.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),A_.set(e,{key:r,promise:a}),a}_createGeometry(e){const n=new yt;e.index&&n.setIndex(new Dt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;n.setAttribute(s,new Dt(o,a))}return n}_loadLibrary(e,n){const r=new pi(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=AK.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=n,r._taskLoad+=n,r})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function AK(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(d){t.onModuleLoaded=function(f){d({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(d=>{const f=d.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=n(f,p,m,c),y=v.attributes.map(x=>x.array.buffer);v.index&&y.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},y)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{f.destroy(m),f.destroy(p)}});break}};function n(o,a,l,c){const d=c.attributeIDs,f=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const y={index:null,attributes:[]};for(const x in d){const g=self[f[x]];let _,w;if(c.useUniqueIDs)w=d[x],_=a.GetAttributeByUniqueId(p,w);else{if(w=a.GetAttributeId(p,o[d[x]]),w===-1)continue;_=a.GetAttribute(p,w)}y.attributes.push(i(o,a,p,x,g,_))}return v===o.TRIANGULAR_MESH&&(y.index=r(o,a,p)),o.destroy(p),y}function r(o,a,l){const d=l.num_faces()*3,f=d*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,d).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,d,f){const p=f.num_components(),v=l.num_points()*p,y=v*d.BYTES_PER_ELEMENT,x=s(o,d),g=o._malloc(y);a.GetAttributeDataArrayForAllPoints(l,f,x,y,g);const _=new d(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:_,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const mP=new Sn,uv=new F;class bb extends ub{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new et(e,3)),this.setAttribute("uv",new et(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),r.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new D0(n,6,1);return this.setAttribute("instanceStart",new ui(r,3,0)),this.setAttribute("instanceEnd",new ui(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new D0(n,6,1);return this.setAttribute("instanceColorStart",new ui(r,3,0)),this.setAttribute("instanceColorEnd",new ui(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new ZA(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sn);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),mP.setFromBufferAttribute(n),this.boundingBox.union(mP))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new mi),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)uv.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(uv)),uv.fromBufferAttribute(n,s),i=Math.max(i,r.distanceToSquared(uv));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class _O extends bb{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setColors(r),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}Oe.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new de(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Jr.line={uniforms:Mp.merge([Oe.common,Oe.fog,Oe.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class Mb extends Wn{constructor(e){super({type:"LineMaterial",uniforms:Mp.clone(Jr.line.uniforms),vertexShader:Jr.line.vertexShader,fragmentShader:Jr.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const gP=new F,vP=new F,gr=new Bt,vr=new Bt,Js=new Bt,b_=new F,M_=new Ve,Lr=new MF,yP=new F,dv=new Sn,fv=new mi,Ks=new Bt;let to,Xw,SO,fc;function xP(t,e,n){return Ks.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),Ks.multiplyScalar(1/Ks.w),Ks.x=fc/n.width,Ks.y=fc/n.height,Ks.applyMatrix4(t.projectionMatrixInverse),Ks.multiplyScalar(1/Ks.w),Math.abs(Math.max(Ks.x,Ks.y))}function bK(t,e){for(let n=0,r=Xw.count;n<r;n++){Lr.start.fromBufferAttribute(Xw,n),Lr.end.fromBufferAttribute(SO,n);const i=new F,s=new F;to.distanceSqToSegment(Lr.start,Lr.end,s,i),s.distanceTo(i)<fc*.5&&e.push({point:s,pointOnLine:i,distance:to.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function MK(t,e,n){const r=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,d=-e.near;to.at(1,Js),Js.w=1,Js.applyMatrix4(e.matrixWorldInverse),Js.applyMatrix4(r),Js.multiplyScalar(1/Js.w),Js.x*=s.x/2,Js.y*=s.y/2,Js.z=0,b_.copy(Js),M_.multiplyMatrices(e.matrixWorldInverse,o);for(let f=0,p=l.count;f<p;f++){if(gr.fromBufferAttribute(l,f),vr.fromBufferAttribute(c,f),gr.w=1,vr.w=1,gr.applyMatrix4(M_),vr.applyMatrix4(M_),gr.z>d&&vr.z>d)continue;if(gr.z>d){const _=gr.z-vr.z,w=(gr.z-d)/_;gr.lerp(vr,w)}else if(vr.z>d){const _=vr.z-gr.z,w=(vr.z-d)/_;vr.lerp(gr,w)}gr.applyMatrix4(r),vr.applyMatrix4(r),gr.multiplyScalar(1/gr.w),vr.multiplyScalar(1/vr.w),gr.x*=s.x/2,gr.y*=s.y/2,vr.x*=s.x/2,vr.y*=s.y/2,Lr.start.copy(gr),Lr.start.z=0,Lr.end.copy(vr),Lr.end.z=0;const v=Lr.closestPointToPointParameter(b_,!0);Lr.at(v,yP);const y=cc.lerp(gr.z,vr.z,v),x=y>=-1&&y<=1,g=b_.distanceTo(yP)<fc*.5;if(x&&g){Lr.start.fromBufferAttribute(l,f),Lr.end.fromBufferAttribute(c,f),Lr.start.applyMatrix4(o),Lr.end.applyMatrix4(o);const _=new F,w=new F;to.distanceSqToSegment(Lr.start,Lr.end,w,_),n.push({point:w,pointOnLine:_,distance:to.origin.distanceTo(w),object:t,face:null,faceIndex:f,uv:null,uv2:null})}}}class wO extends qn{constructor(e=new bb,n=new Mb({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)gP.fromBufferAttribute(n,o),vP.fromBufferAttribute(r,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+gP.distanceTo(vP);const s=new D0(i,2,1);return e.setAttribute("instanceDistanceStart",new ui(s,1,0)),e.setAttribute("instanceDistanceEnd",new ui(s,1,1)),this}raycast(e,n){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;to=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;fc=l.linewidth+s,Xw=a.attributes.instanceStart,SO=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),fv.copy(a.boundingSphere).applyMatrix4(o);let c;if(r)c=fc*.5;else{const f=Math.max(i.near,fv.distanceToPoint(to.origin));c=xP(i,f,l.resolution)}if(fv.radius+=c,to.intersectsSphere(fv)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),dv.copy(a.boundingBox).applyMatrix4(o);let d;if(r)d=fc*.5;else{const f=Math.max(i.near,dv.distanceToPoint(to.origin));d=xP(i,f,l.resolution)}dv.expandByScalar(d),to.intersectsBox(dv)!==!1&&(r?bK(this,n):MK(this,i,n))}}class CK extends wO{constructor(e=new _O,n=new Mb({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}let hv;const C_=()=>{if(hv)return hv;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=t;WebAssembly.validate(n)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let v=0;v<f.length;++v){const y=f.charCodeAt(v);p[v]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let m=0;for(let v=0;v<f.length;++v)p[m++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(f,p,m,v,y,x){const g=s.exports.sbrk,_=m+3&-4,w=g(_*v),b=g(y.length),C=new Uint8Array(s.exports.memory.buffer);C.set(y,b);const T=f(w,m,v,b,y.length);if(T===0&&x&&x(w,_,v),p.set(C.subarray(w,w+m*v)),g(w-g(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return hv={ready:o,supported:!0,decodeVertexBuffer(f,p,m,v,y){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,v,s.exports[c[y]])},decodeIndexBuffer(f,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,v)},decodeIndexSequence(f,p,m,v){l(s.exports.meshopt_decodeIndexSequence,f,p,m,v)},decodeGltfBuffer(f,p,m,v,y,x){l(s.exports[d[y]],f,p,m,v,s.exports[c[x]])}},hv},Gl=E.forwardRef(function({points:e,color:n="black",vertexColors:r,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},c){const d=an(v=>v.size),f=E.useMemo(()=>o?new wO:new CK,[o]),[p]=E.useState(()=>new Mb),m=E.useMemo(()=>{const v=o?new bb:new _O,y=e.map(x=>{const g=Array.isArray(x);return x instanceof F?[x.x,x.y,x.z]:x instanceof de?[x.x,x.y,0]:g&&x.length===3?[x[0],x[1],x[2]]:g&&x.length===2?[x[0],x[1],0]:x});if(v.setPositions(y.flat()),r){const x=r.map(g=>g instanceof Ne?g.toArray():g);v.setColors(x.flat())}return v},[e,o,r]);return E.useLayoutEffect(()=>{f.computeLineDistances()},[e,f]),E.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),E.useEffect(()=>()=>m.dispose(),[m]),E.createElement("primitive",Re({object:f,ref:c},l),E.createElement("primitive",{object:m,attach:"geometry"}),E.createElement("primitive",Re({object:p,attach:"material",color:n,vertexColors:!!r,resolution:[d.width,d.height],linewidth:i??s,dashed:a},l)))});let T_=null;async function EO(t){T_||(T_=new _K);let e=typeof t=="string"?await(await fetch(t)).json():t;return T_.parse(e)}function Jp(t){return VF(EO,[t])}Jp.preload=t=>WF(EO,[t]);Jp.clear=t=>jF([t]);function TK(t,e,n,r){const i=class extends Wn{constructor(o={}){const a=Object.entries(t);super({uniforms:a.reduce((l,[c,d])=>{const f=Mp.clone({[c]:{value:d}});return{...l,...f}},{}),vertexShader:e,fragmentShader:n}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o),r&&r(this)}};return i.key=cc.generateUUID(),i}const _P=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function Cb(t,e){const n=an(i=>i.gl),r=dl(Hp,_P(t)?Object.values(t):t);if(E.useLayoutEffect(()=>{e==null||e(r)},[e]),E.useEffect(()=>{(Array.isArray(r)?r:[r]).forEach(n.initTexture)},[n,r]),_P(t)){const i=Object.keys(t),s={};return i.forEach(o=>Object.assign(s,{[o]:r[i.indexOf(o)]})),s}else return r}Cb.preload=t=>dl.preload(Hp,t);Cb.clear=t=>dl.clear(Hp,t);const RK=TK({color:new Ne("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`),AO=E.forwardRef(({children:t,color:e,segments:n=1,scale:r=1,zoom:i=1,grayscale:s=0,opacity:o=1,texture:a,toneMapped:l,transparent:c,...d},f)=>{_b({ImageMaterial:RK});const p=Array.isArray(r)?[r[0],r[1]]:[r,r],m=[a.image.width,a.image.height];return E.createElement("mesh",Re({ref:f,scale:Array.isArray(r)?[...r,1]:r},d),E.createElement("planeGeometry",{args:[1,1,n,n]}),E.createElement("imageMaterial",{color:e,map:a,zoom:i,grayscale:s,opacity:o,scale:p,imageBounds:m,toneMapped:l,transparent:c}),t)}),PK=E.forwardRef(({url:t,...e},n)=>{const r=Cb(t);return E.createElement(AO,Re({},e,{texture:r,ref:n}))}),IK=E.forwardRef(({url:t,...e},n)=>E.createElement(AO,Re({},e,{ref:n}))),BK=E.forwardRef((t,e)=>{if(t.url)return E.createElement(PK,Re({},t,{ref:e}));if(t.texture)return E.createElement(IK,Re({},t,{ref:e}));throw new Error("<Image /> requires a url or texture")});let pv=null;function bO(t,e,n){return r=>{n&&n(r),t&&(pv||(pv=new EK),pv.setDecoderPath(typeof t=="string"?t:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),r.setDRACOLoader(pv)),e&&r.setMeshoptDecoder(typeof C_=="function"?C_():C_)}}function Fy(t,e=!0,n=!0,r){return dl(Eb,t,bO(e,n,r))}Fy.preload=(t,e=!0,n=!0,r)=>dl.preload(Eb,t,bO(e,n,r));Fy.clear=t=>dl.clear(Eb,t);function MO(t,e,n){const r=an(p=>p.size),i=an(p=>p.viewport),s=typeof t=="number"?t:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:c,...d}=a,f=E.useMemo(()=>{const p=new vn(s,o,{minFilter:Zt,magFilter:Zt,type:Ya,...d});return c&&(p.depthTexture=new wy(s,o,bs)),p.samples=l,p},[]);return E.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),E.useEffect(()=>()=>f.dispose(),[]),f}const DK=t=>typeof t=="function",LK=E.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,children:r,makeDefault:i,...s},o)=>{const a=an(({set:x})=>x),l=an(({camera:x})=>x),c=an(({size:x})=>x),d=E.useRef(null),f=E.useRef(null),p=MO(e);E.useLayoutEffect(()=>{s.manual||d.current.updateProjectionMatrix()},[c,s]),E.useLayoutEffect(()=>{d.current.updateProjectionMatrix()}),E.useLayoutEffect(()=>{if(i){const x=l;return a(()=>({camera:d.current})),()=>a(()=>({camera:x}))}},[d,i,a]);let m=0,v=null;const y=DK(r);return Xd(x=>{y&&(n===1/0||m<n)&&(f.current.visible=!1,x.gl.setRenderTarget(p),v=x.scene.background,t&&(x.scene.background=t),x.gl.render(x.scene,d.current),x.scene.background=v,x.gl.setRenderTarget(null),f.current.visible=!0,m++)}),E.createElement(E.Fragment,null,E.createElement("orthographicCamera",Re({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:dO([d,o])},s),!y&&r),E.createElement("group",{ref:f},y&&r(p.texture)))}),FK=t=>typeof t=="function",OK=E.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=an(({set:x})=>x),l=an(({camera:x})=>x),c=an(({size:x})=>x),d=E.useRef(null),f=E.useRef(null),p=MO(e);E.useLayoutEffect(()=>{s.manual||(d.current.aspect=c.width/c.height)},[c,s]),E.useLayoutEffect(()=>{d.current.updateProjectionMatrix()});let m=0,v=null;const y=FK(i);return Xd(x=>{y&&(n===1/0||m<n)&&(f.current.visible=!1,x.gl.setRenderTarget(p),v=x.scene.background,t&&(x.scene.background=t),x.gl.render(x.scene,d.current),x.scene.background=v,x.gl.setRenderTarget(null),f.current.visible=!0,m++)}),E.useLayoutEffect(()=>{if(r){const x=l;return a(()=>({camera:d.current})),()=>a(()=>({camera:x}))}},[d,r,a]),E.createElement(E.Fragment,null,E.createElement("perspectiveCamera",Re({ref:dO([d,o])},s),!y&&i),E.createElement("group",{ref:f},y&&i(p.texture)))}),NK=E.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,onChange:s,onStart:o,onEnd:a,...l},c)=>{const d=an(C=>C.invalidate),f=an(C=>C.camera),p=an(C=>C.gl),m=an(C=>C.events),v=an(C=>C.setEvents),y=an(C=>C.set),x=an(C=>C.get),g=an(C=>C.performance),_=e||f,w=r||m.connected||p.domElement,b=E.useMemo(()=>new HJ(_),[_]);return Xd(()=>{b.enabled&&b.update()},-1),E.useEffect(()=>(b.connect(w),()=>void b.dispose()),[w,n,b,d]),E.useEffect(()=>{const C=B=>{d(),n&&g.regress(),s&&s(B)},T=B=>{o&&o(B)},P=B=>{a&&a(B)};return b.addEventListener("change",C),b.addEventListener("start",T),b.addEventListener("end",P),()=>{b.removeEventListener("start",T),b.removeEventListener("end",P),b.removeEventListener("change",C)}},[s,o,a,b,d,v]),E.useEffect(()=>{if(t){const C=x().controls;return y({controls:b}),()=>y({controls:C})}},[t,b]),E.createElement("primitive",Re({ref:c,object:b,enableDamping:i},l))}),UK=E.forwardRef(function({children:e,disable:n,disableX:r,disableY:i,disableZ:s,left:o,right:a,top:l,bottom:c,front:d,back:f,onCentered:p,precise:m=!0,cacheKey:v=0,...y},x){const g=E.useRef(null),_=E.useRef(null),w=E.useRef(null);return E.useLayoutEffect(()=>{_.current.matrixWorld.identity();const b=new Sn().setFromObject(w.current,m),C=new F,T=new mi,P=b.max.x-b.min.x,B=b.max.y-b.min.y,R=b.max.z-b.min.z;b.getCenter(C),b.getBoundingSphere(T);const D=l?B/2:c?-B/2:0,k=o?-P/2:a?P/2:0,X=d?R/2:f?-R/2:0;_.current.position.set(n||r?0:-C.x+k,n||i?0:-C.y+D,n||s?0:-C.z+X),typeof p<"u"&&p({parent:g.current.parent,container:g.current,width:P,height:B,depth:R,boundingBox:b,boundingSphere:T,center:C,verticalAlignment:D,horizontalAlignment:k,depthAlignment:X})},[v,p,l,o,d,n,r,i,s,m,a,c,f]),E.useImperativeHandle(x,()=>g.current,[]),E.createElement("group",Re({ref:g},y),E.createElement("group",{ref:_},E.createElement("group",{ref:w},e)))});function kK(t,e){const n=t+"Geometry";return E.forwardRef(({args:r,children:i,...s},o)=>{const a=E.useRef(null);return E.useImperativeHandle(o,()=>a.current),E.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),E.createElement("mesh",Re({ref:a},s),E.createElement(n,{attach:"geometry",args:r}),i)})}const zK=kK("box");var CO={exports:{}},HK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",GK=HK,$K=GK;function TO(){}function RO(){}RO.resetWarningCache=TO;var VK=function(){function t(r,i,s,o,a,l){if(l!==$K){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:RO,resetWarningCache:TO};return n.PropTypes=n,n};CO.exports=VK();var WK=CO.exports;const on=nl(WK);var SP=0/0,jK="[object Symbol]",XK=/^\s+|\s+$/g,JK=/^[-+]0x[0-9a-f]+$/i,KK=/^0b[01]+$/i,YK=/^0o[0-7]+$/i,QK=parseInt,qK=Object.prototype,ZK=qK.toString;function eY(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function wP(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function tY(t){return!!t&&typeof t=="object"}function nY(t){return typeof t=="symbol"||tY(t)&&ZK.call(t)==jK}function R_(t){if(typeof t=="number")return t;if(nY(t))return SP;if(wP(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=wP(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(XK,"");var n=KK.test(t);return n||YK.test(t)?QK(t.slice(2),n?2:8):JK.test(t)?SP:+t}function rY(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=R_(n),n=n===n?n:0),e!==void 0&&(e=R_(e),e=e===e?e:0),eY(R_(t),e,n)}var iY=rY;const PO=nl(iY);/**
 * postprocessing v6.31.0 build Sun May 07 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var sY=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,Tb="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",oY=class extends Wn{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new $e(null),luminanceBuffer1:new $e(null),minLuminance:new $e(.01),deltaTime:new $e(0),tau:new $e(1)},extensions:{shaderTextureLOD:!0},blending:Er,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:sY,vertexShader:Tb})}set luminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}setLuminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}set luminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}setLuminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}set mipLevel1x1(t){this.defines.MIP_LEVEL_1X1=t.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(t){this.mipLevel1x1=t}set deltaTime(t){this.uniforms.deltaTime.value=t}setDeltaTime(t){this.uniforms.deltaTime.value=t}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(t){this.uniforms.minLuminance.value=t}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(t){this.uniforms.minLuminance.value=t}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(t){this.uniforms.tau.value=t}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(t){this.uniforms.tau.value=t}},IO="",Hn="srgb",Oy="srgb-linear",aY=Number(ol.replace(/\D+/g,"")),BO=aY>=152,lY=new Map([[Ap,Oy],[Yr,Hn]]),cY=new Map([[Oy,Ap],[Hn,Yr]]);function wc(t){return t===null?null:BO?t.outputColorSpace:lY.get(t.outputEncoding)}function No(t,e){t!==null&&(BO?t.colorSpace=e:t.encoding=cY.get(e))}var ct={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Ga={NONE:0,DEPTH:1,CONVOLUTION:2},Xt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Nc={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},bo={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},mv={DEFAULT:0,ESKIL:1},uY=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,dY="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",fY=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],DO=class extends Wn{constructor(t=new Bt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new $e(null),texelSize:new $e(new Bt),scale:new $e(1),kernel:new $e(0)},blending:Er,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:uY,vertexShader:dY}),this.setTexelSize(t.x,t.y),this.kernelSize=Nc.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return fY[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},hY=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,LO=class extends Wn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new $e(null),opacity:new $e(1)},blending:Er,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:hY,vertexShader:Tb})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},pY=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,mY="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",gY=class extends Wn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new $e(null),normalBuffer:new $e(null),texelSize:new $e(new de)},blending:Er,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:pY,vertexShader:mY})}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=al){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,t!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},vY=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,yY="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",xY=class extends Wn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new $e(null),texelSize:new $e(new de)},blending:Er,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:vY,vertexShader:yY})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},_Y=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,SY="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",wY=class extends Wn{constructor(t,e,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ol.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new $e(null),depthBuffer:new $e(null),resolution:new $e(new de),texelSize:new $e(new de),cameraNear:new $e(.3),cameraFar:new $e(1e3),aspect:new $e(1),time:new $e(0)},blending:Er,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=al){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=_Y.replace(Xt.FRAGMENT_HEAD,t.get(Xt.FRAGMENT_HEAD)||"").replace(Xt.FRAGMENT_MAIN_UV,t.get(Xt.FRAGMENT_MAIN_UV)||"").replace(Xt.FRAGMENT_MAIN_IMAGE,t.get(Xt.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=SY.replace(Xt.VERTEX_HEAD,t.get(Xt.VERTEX_HEAD)||"").replace(Xt.VERTEX_MAIN_SUPPORT,t.get(Xt.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof rn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Xt}},EY=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,AY=class extends Wn{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ol.replace(/\D+/g,"")},uniforms:{inputBuffer:new $e(null),threshold:new $e(0),smoothing:new $e(1),range:new $e(null)},blending:Er,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:EY,vertexShader:Tb}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},bY=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,MY="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",CY=class extends DO{constructor({kernelSize:t=Nc.MEDIUM,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=bY,this.vertexShader=MY,this.kernelSize=t,this.uniforms.aspect=new $e(1),this.uniforms.rotation=new $e(new de),this.uniforms.maskParams=new $e(new Bt),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),n=Math.max(e-this.feather,0);t.set(this.offset-e,this.offset-n,this.offset+e,this.offset+n)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(t){this.uniforms.rotation.value.set(Math.cos(t),Math.sin(t))}get offset(){return this._offset}set offset(t){this._offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.updateParams()}setSize(t,e){super.setSize(t,e),this.uniforms.aspect.value=t/e}},TY=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,RY="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",PY=class extends Wn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new $e(null),supportBuffer:new $e(null),texelSize:new $e(new de),radius:new $e(.85)},blending:Er,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:TY,vertexShader:RY})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},IY=new zd,pa=null;function BY(){if(pa===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);pa=new yt,pa.setAttribute!==void 0?(pa.setAttribute("position",new Dt(t,3)),pa.setAttribute("uv",new Dt(e,2))):(pa.addAttribute("position",new Dt(t,3)),pa.addAttribute("uv",new Dt(e,2)))}return pa}var gi=class{constructor(t="Pass",e=new Md,n=IY){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new qn(BY(),t),e.frustumCulled=!1,this.scene===null&&(this.scene=new Md),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=al){}render(t,e,n,r,i){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof vn||e instanceof Fn||e instanceof dn||e instanceof gi)&&this[t].dispose()}}},FO=class extends gi{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new LO,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new vn(1,1,{minFilter:Zt,magFilter:Zt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==kr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":wc(t)===Hn&&No(this.renderTarget.texture,Hn))}},DY=class extends gi{constructor(t,{minLuminance:e=.01,adaptationRate:n=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new oY,this.needsSwap=!1,this.renderTargetPrevious=new vn(1,1,{minFilter:nn,magFilter:nn,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const r=this.fullscreenMaterial;r.luminanceBuffer0=this.renderTargetPrevious.texture,r.luminanceBuffer1=t,r.minLuminance=e,r.adaptationRate=n,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new FO(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(t){this.fullscreenMaterial.mipLevel1x1=t}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(t){this.fullscreenMaterial.adaptationRate=t}render(t,e,n,r,i){this.fullscreenMaterial.deltaTime=r,t.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),t.render(this.scene,this.camera),this.copyPass.render(t,this.renderTargetAdapted)}},LY=class extends gi{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const s=t.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},EP=new Ne,OO=class extends gi{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=t.getClearAlpha(),l=s!==null,c=o>=0;l?(t.getClearColor(EP),t.setClearColor(s,c?o:a)):c&&t.setClearAlpha(o),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(EP,a):c&&t.setClearAlpha(a)}},ma=-1,$n=class extends Fi{constructor(t,e=ma,n=ma,r=1){super(),this.resizable=t,this.baseSize=new de(1,1),this.preferredSize=new de(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new de,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==ma?n.width=e.width:e.height!==ma?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==ma?n.height=e.height:e.width!==ma?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(ma),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ma}},P_=!1,AP=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case _r:n=this.materialsFlatShadedDoubleSide;break;case rr:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case _r:n=this.materialsDoubleSide;break;case rr:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof Wn))return t.clone();const e=t.uniforms,n=new Map;for(const i in e){const s=e[i].value;s.isRenderTargetTexture&&(e[i].value=null,n.set(i,s))}const r=t.clone();for(const i of n)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=Bs;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=rr,r}),this.materialsDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=_r,r}),this.materialsFlatShaded=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=rr,r}),this.materialsFlatShadedDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=_r,r})}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,P_){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=i}t.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return P_}static set workaroundEnabled(t){P_=t}},NO=class extends gi{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new OO,this.overrideMaterialManager=n===null?null:new AP(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new AP(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,d=t.shadowMap.autoUpdate,f=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(f),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,s,o):t.render(s,o),o.layers.mask=l,s.background=c,t.shadowMap.autoUpdate=d}},FY=class extends gi{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=$n.AUTO_SIZE,height:r=$n.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new gY;o.normalBuffer=t,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new vn(1,1,{minFilter:nn,magFilter:nn,depthBuffer:!1,type:bs}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new $n(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=al){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,r,i){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){const r=t.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function bP(t,e,n){for(const r of e){const i="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of n.entries())o[1]!==null&&n.set(o[0],o[1].replace(s,i))}}function OY(t,e,n){let r=e.getFragmentShader(),i=e.getVertexShader();const s=r!==void 0&&/mainImage/.test(r),o=r!==void 0&&/mainUv/.test(r);if(n.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&n.attributes&Ga.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts;let c=l.get(Xt.FRAGMENT_HEAD)||"",d=l.get(Xt.FRAGMENT_MAIN_UV)||"",f=l.get(Xt.FRAGMENT_MAIN_IMAGE)||"",p=l.get(Xt.VERTEX_HEAD)||"",m=l.get(Xt.VERTEX_MAIN_SUPPORT)||"";const v=new Set,y=new Set;if(o&&(d+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const _=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);m+=`	${t}MainSupport(`,m+=_?`vUv);
`:`);
`;for(const w of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const b of w[1].split(/\s*,\s*/))n.varyings.add(b),v.add(b),y.add(b);for(const w of i.matchAll(a))y.add(w[1])}for(const _ of r.matchAll(a))y.add(_[1]);for(const _ of e.defines.keys())y.add(_.replace(/\([\w\s,]*\)/g,""));for(const _ of e.uniforms.keys())y.add(_);y.delete("while"),y.delete("for"),y.delete("if"),e.uniforms.forEach((_,w)=>n.uniforms.set(t+w.charAt(0).toUpperCase()+w.slice(1),_)),e.defines.forEach((_,w)=>n.defines.set(t+w.charAt(0).toUpperCase()+w.slice(1),_));const x=new Map([["fragment",r],["vertex",i]]);bP(t,y,n.defines),bP(t,y,x),r=x.get("fragment"),i=x.get("vertex");const g=e.blendMode;if(n.blendModes.set(g.blendFunction,g),s){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(f+=e.inputColorSpace===Hn?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==IO?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const _=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;f+=`${t}MainImage(color0, UV, `,n.attributes&Ga.DEPTH&&_.test(r)&&(f+="depth, ",n.readDepth=!0),f+=`color1);
	`;const w=t+"BlendOpacity";n.uniforms.set(w,g.opacity),f+=`color0 = blend${g.blendFunction}(color0, color1, ${w});

	`,c+=`uniform float ${w};

`}if(c+=r+`
`,i!==null&&(p+=i+`
`),l.set(Xt.FRAGMENT_HEAD,c),l.set(Xt.FRAGMENT_MAIN_UV,d),l.set(Xt.FRAGMENT_MAIN_IMAGE,f),l.set(Xt.VERTEX_HEAD,p),l.set(Xt.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const _ of e.extensions)n.extensions.add(_)}}var NY=class extends gi{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new wY(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new WY;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===ct.DST)t.attributes|=o.getAttributes()&Ga.DEPTH;else{if(t.attributes&o.getAttributes()&Ga.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);OY("e"+e++,o,t)}let n=t.shaderParts.get(Xt.FRAGMENT_HEAD),r=t.shaderParts.get(Xt.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get(Xt.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of t.blendModes.values())n+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;t.attributes&Ga.DEPTH?(t.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===Hn&&(r+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Xt.FRAGMENT_HEAD,n),t.shaderParts.set(Xt.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set(Xt.FRAGMENT_MAIN_UV,i);for(const[o,a]of t.shaderParts)a!==null&&t.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=al){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const s of this.effects)s.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==kr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},UO=class extends gi{constructor({kernelSize:t=Nc.MEDIUM,resolutionScale:e=.5,width:n=$n.AUTO_SIZE,height:r=$n.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new vn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new $n(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new DO,this._blurMaterial.kernelSize=t,this.copyMaterial=new LO}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,d=c.kernelSequence;let f=e;this.fullscreenMaterial=c;for(let p=0,m=d.length;p<m;++p){const v=p&1?l:a;c.kernel=d[p],c.inputBuffer=f.texture,t.setRenderTarget(v),t.render(s,o),f=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(s,o)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==kr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):wc(t)===Hn&&(No(this.renderTargetA.texture,Hn),No(this.renderTargetB.texture,Hn)))}static get AUTO_SIZE(){return $n.AUTO_SIZE}},kO=class extends gi{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:r=1,width:i=$n.AUTO_SIZE,height:s=$n.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new AY(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new vn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new $n(this,o,a,r);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==kr&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},UY=class extends gi{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new OO(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const s=t.getContext(),o=t.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,d=this.inverted?0:1,f=1-d;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,d,4294967295),o.stencil.setClear(f),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(t,null):(c.render(t,e),c.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(a,l)):(t.setRenderTarget(e),t.render(a,l),t.setRenderTarget(n),t.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},kY=class extends gi{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new vn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new xY,this.upsamplingMaterial=new PY,this.resolution=new de}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const r=e.clone();r.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let n=1,r=t-1;n<r;++n){const i=e.clone();i.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:d}=this;let f=e;this.fullscreenMaterial=a;for(let p=0,m=c.length;p<m;++p){const v=c[p];a.setSize(f.width,f.height),a.inputBuffer=f.texture,t.setRenderTarget(v),t.render(s,o),f=v}this.fullscreenMaterial=l;for(let p=d.length-1;p>=0;--p){const m=d[p];l.setSize(f.width,f.height),l.inputBuffer=f.texture,l.supportBuffer=c[p].texture,t.setRenderTarget(m),t.render(s,o),f=m}}setSize(t,e){const n=this.resolution;n.set(t,e);let r=n.width,i=n.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(t,e,n){if(n!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=n;if(n!==kr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(wc(t)===Hn)for(const i of r)No(i.texture,Hn)}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},zY=class extends gi{constructor(t,e,{renderTarget:n,resolutionScale:r=1,width:i=$n.AUTO_SIZE,height:s=$n.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new NO(t,e,new eb);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new Ne(7829503),c.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new vn(1,1,{minFilter:nn,magFilter:nn}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new $n(this,o,a,r);d.addEventListener("change",f=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},HY=class extends UO{constructor({offset:t=0,rotation:e=0,focusArea:n=.4,feather:r=.3,kernelSize:i=Nc.MEDIUM,resolutionScale:s=.5,resolutionX:o=$n.AUTO_SIZE,resolutionY:a=$n.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:s,resolutionX:o,resolutionY:a}),this.blurMaterial=new CY({kernelSize:i,offset:t,rotation:e,focusArea:n,feather:r})}},I_=1/1e3,GY=1e3,$Y=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*I_}get fixedDelta(){return this._fixedDelta*I_}set fixedDelta(t){this._fixedDelta=t*GY}get elapsed(){return this._elapsed*I_}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},VY=class{constructor(e=null,{depthBuffer:n=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(n,r,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new FO,this.depthTexture=null,this.passes=[],this.timer=new $Y,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const n=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer,n.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const n=e.getSize(new de),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===kr&&wc(e)===Hn&&(No(this.inputBuffer.texture,Hn),No(this.outputBuffer.texture,Hn),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(n.width,n.height);for(const s of this.passes)s.initialize(e,r,i)}}replaceRenderer(e,n=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),n&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new wy;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Qa,e.type=ka):e.type=Do,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,n,r,i){const s=this.renderer,o=s===null?new de:s.getDrawingBufferSize(new de),a={minFilter:Zt,magFilter:Zt,stencilBuffer:n,depthBuffer:e,type:r},l=new vn(o.width,o.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),r===kr&&wc(s)===Hn&&No(l.texture,Hn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const n of this.passes)n.mainScene=e}setMainCamera(e){for(const n of this.passes)n.mainCamera=e}addPass(e,n){const r=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new de),o=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(s.width,s.height),e.initialize(i,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),n!==void 0?r.splice(n,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const n=this.passes,r=n.indexOf(e);if(r!==-1&&n.splice(r,1).length>0){if(this.depthTexture!==null){const o=(l,c)=>l||c.needsDepthTexture;n.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===n.length&&(e.renderToScreen=!1,n.length>0&&(n[n.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const n=this.renderer,r=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,c;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const d of this.passes)d.enabled&&(d.render(n,i,s,e,o),d.needsSwap&&(o&&(r.renderToScreen=d.renderToScreen,a=n.getContext(),l=n.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),r.render(n,i,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),c=i,i=s,s=c),d instanceof UY?o=!0:d instanceof LY&&(o=!1))}setSize(e,n,r){const i=this.renderer,s=i.getSize(new de);(e===void 0||n===void 0)&&(e=s.width,n=s.height),(s.width!==e||s.height!==n)&&i.setSize(e,n,r);const o=i.getDrawingBufferSize(new de);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},WY=class{constructor(){this.shaderParts=new Map([[Xt.FRAGMENT_HEAD,null],[Xt.FRAGMENT_MAIN_UV,null],[Xt.FRAGMENT_MAIN_IMAGE,null],[Xt.VERTEX_HEAD,null],[Xt.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Ga.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Oy}},jY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",XY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",JY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",KY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",YY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",QY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",qY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",ZY="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",eQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",tQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",nQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",rQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",iQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",sQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",oQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",aQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",lQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",cQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",uQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",dQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",fQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",hQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",pQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",mQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",gQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",vQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",yQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",xQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",_Q="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",SQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",wQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",EQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",AQ=new Map([[ct.ADD,jY],[ct.ALPHA,XY],[ct.AVERAGE,JY],[ct.COLOR,KY],[ct.COLOR_BURN,YY],[ct.COLOR_DODGE,QY],[ct.DARKEN,qY],[ct.DIFFERENCE,ZY],[ct.DIVIDE,eQ],[ct.DST,null],[ct.EXCLUSION,tQ],[ct.HARD_LIGHT,nQ],[ct.HARD_MIX,rQ],[ct.HUE,iQ],[ct.INVERT,sQ],[ct.INVERT_RGB,oQ],[ct.LIGHTEN,aQ],[ct.LINEAR_BURN,lQ],[ct.LINEAR_DODGE,cQ],[ct.LINEAR_LIGHT,uQ],[ct.LUMINOSITY,dQ],[ct.MULTIPLY,fQ],[ct.NEGATION,hQ],[ct.NORMAL,pQ],[ct.OVERLAY,mQ],[ct.PIN_LIGHT,gQ],[ct.REFLECT,vQ],[ct.SATURATION,yQ],[ct.SCREEN,xQ],[ct.SOFT_LIGHT,_Q],[ct.SRC,SQ],[ct.SUBTRACT,wQ],[ct.VIVID_LIGHT,EQ]]),bQ=class extends Fi{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new $e(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return AQ.get(this.blendFunction)}},Oi=class extends Fi{constructor(t,e,{attributes:n=Ga.NONE,blendFunction:r=ct.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new bQ(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Oy,this._outputColorSpace=IO}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=al){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof vn||e instanceof Fn||e instanceof dn||e instanceof gi)&&this[t].dispose()}}},MQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,CQ=class extends Oi{constructor({blendFunction:t=ct.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=Nc.LARGE,resolutionScale:l=.5,width:c=$n.AUTO_SIZE,height:d=$n.AUTO_SIZE,resolutionX:f=c,resolutionY:p=d}={}){super("BloomEffect",MQ,{blendFunction:t,uniforms:new Map([["map",new $e(null)],["intensity",new $e(i)]])}),this.renderTarget=new vn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new UO({kernelSize:a}),this.luminancePass=new kO({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new kY,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new $n(this,f,p,l);m.addEventListener("change",v=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,i.renderTarget):this.blurPass.render(t,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,r)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,wc(t)===Hn&&No(this.renderTarget.texture,Hn))}},TQ="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",RQ=class extends Oi{constructor({blendFunction:t=ct.SRC,brightness:e=0,contrast:n=0}={}){super("BrightnessContrastEffect",TQ,{blendFunction:t,uniforms:new Map([["brightness",new $e(e)],["contrast",new $e(n)]])}),this.inputColorSpace=Hn}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(){return this.contrast}setContrast(t){this.contrast=t}},PQ="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",IQ=class extends Oi{constructor({blendFunction:t,bits:e=16}={}){super("ColorDepthEffect",PQ,{blendFunction:t,uniforms:new Map([["factor",new $e(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(t){this.bits=t,this.uniforms.get("factor").value=Math.pow(2,t/3)}getBitDepth(){return this.bitDepth}setBitDepth(t){this.bitDepth=t}},BQ=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,DQ=class extends Oi{constructor({blendFunction:t=ct.SRC,inverted:e=!1}={}){super("DepthEffect",BQ,{blendFunction:t,attributes:Ga.DEPTH}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(t){this.inverted!==t&&(t?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(t){this.inverted=t}},LQ="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",FQ=class extends Oi{constructor({blendFunction:t,angle:e=Math.PI*.5,scale:n=1}={}){super("DotScreenEffect",LQ,{blendFunction:t,uniforms:new Map([["angle",new $e(new de)],["scale",new $e(n)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(t){this.uniforms.get("angle").value.set(Math.sin(t),Math.cos(t))}getAngle(){return this.angle}setAngle(t){this.angle=t}get scale(){return this.uniforms.get("scale").value}set scale(t){this.uniforms.get("scale").value=t}};new F;new Ve;var OQ="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",NQ=class extends Oi{constructor({blendFunction:t=ct.SRC,hue:e=0,saturation:n=0}={}){super("HueSaturationEffect",OQ,{blendFunction:t,uniforms:new Map([["hue",new $e(new F)],["saturation",new $e(n)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){const t=this.uniforms.get("hue").value;return Math.acos((t.x*3-1)/2)}set hue(t){const e=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}};new Ne;var UQ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,kQ=class extends Oi{constructor({blendFunction:t=ct.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",UQ,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},zQ=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,HQ=class extends Oi{constructor({blendFunction:t=ct.OVERLAY,density:e=1.25,scrollSpeed:n=0}={}){super("ScanlineEffect",zQ,{blendFunction:t,uniforms:new Map([["count",new $e(0)],["scrollSpeed",new $e(0)]])}),this.resolution=new de,this.d=e,this.scrollSpeed=n}get density(){return this.d}set density(t){this.d=t,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(t){this.density=t}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(t){this.uniforms.get("scrollSpeed").value=t,t===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(t,e){this.resolution.set(t,e),this.uniforms.get("count").value=Math.round(e*this.density)}},GQ="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",$Q="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",VQ=Math.PI*.5,Jf=new F,MP=new F,WQ=class extends Oi{constructor(t,e=new F,{speed:n=2,maxRadius:r=1,waveSize:i=.2,amplitude:s=.05}={}){super("ShockWaveEffect",GQ,{vertexShader:$Q,uniforms:new Map([["active",new $e(!1)],["center",new $e(new de(.5,.5))],["cameraDistance",new $e(1)],["size",new $e(1)],["radius",new $e(-i)],["maxRadius",new $e(r)],["waveSize",new $e(i)],["amplitude",new $e(s)]])}),this.position=e,this.speed=n,this.camera=t,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}set mainCamera(t){this.camera=t}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(t){this.uniforms.get("amplitude").value=t}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(t){this.uniforms.get("waveSize").value=t}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(t){this.uniforms.get("maxRadius").value=t}get epicenter(){return this.position}set epicenter(t){this.position=t}getPosition(){return this.position}setPosition(t){this.position=t}getSpeed(){return this.speed}setSpeed(t){this.speed=t}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(t,e,n){const r=this.position,i=this.camera,s=this.uniforms,o=s.get("active");if(this.active){const a=s.get("waveSize").value;i.getWorldDirection(Jf),MP.copy(i.position).sub(r),o.value=Jf.angleTo(MP)>VQ,o.value&&(s.get("cameraDistance").value=i.position.distanceTo(r),Jf.copy(r).project(i),this.screenPosition.set((Jf.x+1)*.5,(Jf.y+1)*.5)),this.time+=n*this.speed;const l=this.time-a;s.get("radius").value=l,l>=(s.get("maxRadius").value+a)*2&&(this.active=!1,o.value=!1)}}},jQ="uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",XQ=class extends Oi{constructor({blendFunction:t,intensity:e=1}={}){super("SepiaEffect",jQ,{blendFunction:t,uniforms:new Map([["weightsR",new $e(new F(.393,.769,.189))],["weightsG",new $e(new F(.349,.686,.168))],["weightsB",new $e(new F(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(t){this.blendMode.opacity.value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}},JQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,KQ="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",YQ=class extends Oi{constructor({blendFunction:t,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3,kernelSize:s=Nc.MEDIUM,resolutionScale:o=.5,resolutionX:a=$n.AUTO_SIZE,resolutionY:l=$n.AUTO_SIZE}={}){super("TiltShiftEffect",JQ,{vertexShader:KQ,blendFunction:t,uniforms:new Map([["rotation",new $e(new de)],["maskParams",new $e(new de)],["map",new $e(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new vn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new HY({kernelSize:s,resolutionScale:o,resolutionX:a,resolutionY:l,offset:e,rotation:n,focusArea:r,feather:i});const c=this.resolution=new $n(this,a,l,o);c.addEventListener("change",d=>this.setSize(c.baseWidth,c.baseHeight)),this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);t.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(t){this.uniforms.get("rotation").value.set(Math.cos(t),Math.sin(t)),this.blurPass.blurMaterial.rotation=t}get offset(){return this._offset}set offset(t){this._offset=t,this.blurPass.blurMaterial.offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.blurPass.blurMaterial.focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.blurPass.blurMaterial.feather=t,this.updateParams()}get bias(){return 0}set bias(t){}update(t,e,n){this.blurPass.render(t,e,this.renderTarget)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,wc(t)===Hn&&No(this.renderTarget.texture,Hn))}},QQ=`#include <tonemapping_pars_fragment>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
uniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;
#if TONE_MAPPING_MODE != 2
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 2
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,qQ=class extends Oi{constructor({blendFunction:t=ct.SRC,adaptive:e=!0,mode:n=e?bo.REINHARD2_ADAPTIVE:bo.REINHARD2,resolution:r=256,maxLuminance:i=16,whitePoint:s=i,middleGrey:o=.6,minLuminance:a=.01,averageLuminance:l=1,adaptationRate:c=1}={}){super("ToneMappingEffect",QQ,{blendFunction:t,uniforms:new Map([["luminanceBuffer",new $e(null)],["maxLuminance",new $e(i)],["whitePoint",new $e(s)],["middleGrey",new $e(o)],["averageLuminance",new $e(l)]])}),this.renderTargetLuminance=new vn(1,1,{minFilter:Ds,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new kO({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new DY(this.luminancePass.texture,{minLuminance:a,adaptationRate:c}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=r,this.mode=n}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(t){if(this.mode!==t){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",t.toFixed(0)),t){case bo.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case bo.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case bo.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=t===bo.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(t){this.mode=t}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(t){this.uniforms.get("whitePoint").value=t}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(t){this.uniforms.get("middleGrey").value=t}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(t){this.uniforms.get("averageLuminance").value=t}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(t){const e=Math.max(0,Math.ceil(Math.log2(t))),n=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(n,n),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(t){this.resolution=t}get adaptive(){return this.mode===bo.REINHARD2_ADAPTIVE}set adaptive(t){this.mode=t?bo.REINHARD2_ADAPTIVE:bo.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(t){this.adaptiveLuminanceMaterial.adaptationRate=t}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(t){console.warn(this.name,"distinction was removed.")}update(t,e,n){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(t,e),this.adaptiveLuminancePass.render(t,null,null,n))}initialize(t,e,n){this.adaptiveLuminancePass.initialize(t,e,n)}},ZQ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,eq=class extends Oi{constructor({blendFunction:t,technique:e=mv.DEFAULT,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",ZQ,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new $e(r)],["darkness",new $e(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===mv.ESKIL}set eskil(t){this.technique=t?mv.ESKIL:mv.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}};const Ni=function(t,e){return e===void 0&&(e=ct.NORMAL),E.forwardRef(function(r,i){let{blendFunction:s,opacity:o,...a}=r;const l=an(d=>d.invalidate),c=E.useMemo(()=>new t(a),[a]);return E.useLayoutEffect(()=>{c.blendMode.blendFunction=!s&&s!==0?e:s,o!==void 0&&(c.blendMode.opacity.value=o),l()},[s,c.blendMode,o]),Rt.createElement("primitive",{ref:i,object:c,dispose:null})})},tq=Ni(CQ,ct.ADD);Ni(RQ);Ni(IQ);Ni(DQ);const nq=E.createContext(null),rq=Rt.memo(E.forwardRef((t,e)=>{let{children:n,camera:r,scene:i,resolutionScale:s,enabled:o=!0,renderPriority:a=1,autoClear:l=!0,depthBuffer:c,disableNormalPass:d,stencilBuffer:f,multisampling:p=8,frameBufferType:m=Ya}=t;const{gl:v,scene:y,camera:x,size:g}=an();i=i||y,r=r||x;const[_,w,b]=E.useMemo(()=>{const P=zJ(),B=new VY(v,{depthBuffer:c,stencilBuffer:f,multisampling:p>0&&P?p:0,frameBufferType:m});B.addPass(new NO(i,r));let R=null,D=null;return d||(D=new zY(i,r),D.enabled=!1,B.addPass(D),s!==void 0&&P&&(R=new FY({normalBuffer:D.texture,resolutionScale:s}),R.enabled=!1,B.addPass(R))),[B,D,R]},[r,v,c,f,p,m,i,d,s]);E.useEffect(()=>_==null?void 0:_.setSize(g.width,g.height),[_,g]),Xd((P,B)=>{o&&(v.autoClear=l,_.render(B))},o?a:0);const C=E.useRef(null);E.useLayoutEffect(()=>{let P;return C.current&&C.current.__r3f&&_&&(P=new NY(r,...C.current.__r3f.objects),P.renderToScreen=!0,_.addPass(P),w&&(w.enabled=!0),b&&(b.enabled=!0)),()=>{P&&(_==null||_.removePass(P)),w&&(w.enabled=!1),b&&(b.enabled=!1)}},[_,n,r,w,b]);const T=E.useMemo(()=>({composer:_,normalPass:w,downSamplingPass:b,resolutionScale:s,camera:r,scene:i}),[_,w,b,s,r,i]);return E.useImperativeHandle(e,()=>_,[_]),Rt.createElement(nq.Provider,{value:T},Rt.createElement("group",{ref:C},n))}));Ni(FQ);Ni(NQ);Ni(kQ,ct.COLOR_DODGE);Ni(HQ,ct.OVERLAY);Ni(XQ);Ni(qQ);Ni(eq);Ni(WQ);Ni(YQ,ct.ADD);const iq=t=>[t.url,t.scale],sq=()=>{const[t,e]=$p(iq),n=E.useRef(null);return L.jsx(E.Suspense,{fallback:null,children:t?L.jsx(BK,{renderOrder:-1,ref:n,url:t,scale:[300,150].map(r=>r*e),position:[0,0,-2],transparent:!1}):null})},oq=()=>{const t=an(r=>r.camera),e=Lc(r=>r.is3dModeOn),n=oo(r=>r.boardCenter);return E.useLayoutEffect(()=>{if(console.log(t),!e){t.position.set(0,0,120),t.lookAt(new F(0,0,0));return}},[e,t]),L.jsxs(L.Fragment,{children:[L.jsx(OK,{makeDefault:e,position:[n.x,n.y,170],fov:60}),L.jsx(LK,{makeDefault:!e,zoom:4,position:[0,0,120]})]})},CP=({path:t,color:e,height:n,extrude:r,id:i})=>{const s=Fy(`./${t}.glb`,!1),{color:o,emissive:a,emissiveIntensity:l}=e,c=Lc(p=>p.brightness),d=Object.keys(s.nodes).filter(p=>p!=="Scene").map(p=>s.nodes[p].geometry.clone()),f=Object.keys(s.materials).map(p=>s.materials[p].clone());return L.jsx(L.Fragment,{children:d.map((p,m)=>L.jsxs("mesh",{name:r?"control":i,position:r?[0,0,0]:[0,0,.5],children:[L.jsx("bufferGeometry",{attach:"geometry",...p,onUpdate:v=>{if(!r)return;const y=2,x=v.attributes.position.array,g=v.attributes.normal.array;for(let _=0;_<x.length;_+=3){const w=g[_],b=g[_+1],C=w*y,T=b*y;x[_]+=C,x[_+1]+=T}v.attributes.position.needsUpdate=!0}}),r?L.jsx("meshBasicMaterial",{toneMapped:!0,color:"green",colorWrite:!1}):L.jsx(L.Fragment,{children:f.length>1?L.jsx("meshStandardMaterial",{attach:"material",...f[m],toneMapped:!1}):L.jsx("meshStandardMaterial",{color:o,emissive:a,emissiveIntensity:l*(c/100)+1,toneMapped:!1})})]},p.uuid))})},Ny=E.createContext(null),aq=t=>t&&t.current,n0=(t,e)=>aq(t)?t.current:t||(e?n0(e):void 0),lq=(t,e,n)=>{const r=Math.abs(t.x)>=Math.abs(t.y)&&Math.abs(t.x)>=Math.abs(t.z)?0:Math.abs(t.y)>=Math.abs(t.x)&&Math.abs(t.y)>=Math.abs(t.z)?1:2,i=[0,1,2].sort((v,y)=>Math.abs(e.getComponent(y))-Math.abs(e.getComponent(v))),s=r===i[0]?i[1]:i[0],o=t.getComponent(r),a=t.getComponent(s),l=e.getComponent(r),c=e.getComponent(s),d=n.getComponent(r),p=(n.getComponent(s)-d*(a/o))/(c-l*(a/o));return[(d-p*l)/o,p]},gv=new cl,vv=new F,TP=new Ve,cq=({dir1:t,dir2:e,axis:n,boxSize:r,center:i})=>{const{translation:s,translationLimits:o,annotationsClass:a,depthTest:l,axisColors:c,hoveredColor:d,displayValues:f,onDragStart:p,onDrag:m,onDragEnd:v,userData:y}=E.useContext(Ny),x=an(H=>H.controls),g=E.useRef(null),_=E.useRef(null),w=E.useRef(null),b=E.useRef(null),C=E.useRef(0),T=E.useRef(0),[P,B]=E.useState(!1),R=E.useCallback(H=>{f&&(_.current.innerText=`${s.current[(n+1)%3].toFixed(2)}, ${s.current[(n+2)%3].toFixed(2)}`,_.current.style.display="block"),H.stopPropagation();const ie=H.point.clone(),Z=new F().setFromMatrixPosition(w.current.matrixWorld),U=new F().setFromMatrixColumn(w.current.matrixWorld,0).normalize(),O=new F().setFromMatrixColumn(w.current.matrixWorld,1).normalize(),z=new F().setFromMatrixColumn(w.current.matrixWorld,2).normalize(),ne=new Zs().setFromNormalAndCoplanarPoint(z,Z);b.current={clickPoint:ie,e1:U,e2:O,plane:ne},C.current=s.current[(n+1)%3],T.current=s.current[(n+2)%3],p({component:"Slider",axis:n,origin:Z,directions:[U,O,z]}),x&&(x.enabled=!1),H.target.setPointerCapture(H.pointerId)},[x,p,n]),D=E.useCallback(H=>{if(H.stopPropagation(),P||B(!0),b.current){const{clickPoint:ie,e1:Z,e2:U,plane:O}=b.current,[z,ne]=[void 0,void 0],[J,q]=[void 0,void 0];gv.copy(H.ray),gv.intersectPlane(O,vv),gv.direction.negate(),gv.intersectPlane(O,vv),vv.sub(ie);let[ee,_e]=lq(Z,U,vv);z!==void 0&&(ee=Math.max(ee,z-C.current)),ne!==void 0&&(ee=Math.min(ee,ne-C.current)),J!==void 0&&(_e=Math.max(_e,J-T.current)),q!==void 0&&(_e=Math.min(_e,q-T.current)),s.current[(n+1)%3]=C.current+ee,s.current[(n+2)%3]=T.current+_e,f&&(_.current.innerText=`${s.current[(n+1)%3].toFixed(2)}, ${s.current[(n+2)%3].toFixed(2)}`),TP.makeTranslation(ee*Z.x+_e*U.x,ee*Z.y+_e*U.y,ee*Z.z+_e*U.z),m(TP)}},[m,P,s,o,n]),k=E.useCallback(H=>{f&&(_.current.style.display="none"),H.stopPropagation(),b.current=null,v(),x&&(x.enabled=!0),H.target.releasePointerCapture(H.pointerId)},[x,v]),X=E.useCallback(H=>{H.stopPropagation(),B(!1)},[]),$=E.useMemo(()=>{const H=t.clone().normalize(),ie=e.clone().normalize();return new Ve().makeBasis(H,ie,H.clone().cross(ie))},[t,e]),j=P?d:c[n];return E.useLayoutEffect(()=>{g.current.geometry=new Tc(r[0],r[1])},[r]),L.jsxs("group",{ref:w,matrix:$,matrixAutoUpdate:!1,name:"control",children:[L.jsx(rp,{position:[0,0,0],name:"control",children:L.jsx("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:_})}),L.jsx("group",{children:L.jsxs("mesh",{name:"control",ref:g,visible:!0,onPointerDown:R,onPointerMove:D,onPointerUp:k,onPointerOut:X,userData:y,position:[0,0,0],children:[L.jsx("planeGeometry",{}),L.jsx("meshBasicMaterial",{transparent:!0,depthTest:l,opacity:0,color:j,polygonOffset:!0,polygonOffsetFactor:-10,side:_r})]})})]})},B_=new F,D_=new F,L_=t=>t*180/Math.PI,uq=t=>t*Math.PI/180,dq=(t,e,n,r,i)=>{B_.copy(t).sub(n),D_.copy(e).sub(n);const s=r.dot(r),o=i.dot(i),a=B_.dot(r)/s,l=B_.dot(i)/o,c=D_.dot(r)/s,d=D_.dot(i)/o,f=Math.atan2(l,a);return Math.atan2(d,c)-f},fq=(t,e)=>{let n=Math.floor(t/e);return n=n<0?n+1:n,t-n*e},RP=t=>{let e=fq(t,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},yv=new Ve,PP=new F,xv=new cl,F_=new F,hq=({dir1:t,dir2:e,axis:n,boundb:r,inverseScale:i,center:s})=>{const{rotationLimits:o,annotationsClass:a,scale:l,fixed:c,displayValues:d,onDragStart:f,onDrag:p,onDragEnd:m,userData:v}=E.useContext(Ny),y=an(j=>j.controls),x=E.useRef(null),g=E.useRef(null),_=E.useRef(0),w=E.useRef(0),b=E.useRef(null),[C,T]=E.useState(!1),[P,B]=E.useState(0),R=E.useCallback(j=>{d&&(x.current.innerText=`${L_(w.current).toFixed(0)}º`,x.current.style.display="block"),j.stopPropagation();const H=j.point.clone(),ie=new F().setFromMatrixPosition(g.current.matrixWorld),Z=new F().setFromMatrixColumn(g.current.matrixWorld,0).normalize(),U=new F().setFromMatrixColumn(g.current.matrixWorld,1).normalize(),O=new F().setFromMatrixColumn(g.current.matrixWorld,2).normalize(),z=new Zs().setFromNormalAndCoplanarPoint(O,ie);b.current={clickPoint:H,origin:ie,e1:Z,e2:U,normal:O,plane:z},f({component:"Rotator",axis:n,origin:ie,directions:[Z,U,O]}),y&&(y.enabled=!1),j.target.setPointerCapture(j.pointerId)},[y,f,n]),D=E.useCallback(j=>{if(j.stopPropagation(),C||T(!0),b.current){const{clickPoint:H,origin:ie,e1:Z,e2:U,normal:O,plane:z}=b.current,[ne,J]=(o==null?void 0:o[n])||[void 0,void 0];xv.copy(j.ray),xv.intersectPlane(z,F_),xv.direction.negate(),xv.intersectPlane(z,F_);let q=dq(H,F_,ie,Z,U),ee=L_(q);j.shiftKey&&(ee=Math.round(ee/10)*10,q=uq(ee)),ne!==void 0&&J!==void 0&&J-ne<2*Math.PI?(q=RP(q),q=q>Math.PI?q-2*Math.PI:q,q=PO(q,ne-_.current,J-_.current),w.current=_.current+q):(w.current=RP(_.current+q),w.current=w.current>Math.PI?w.current-2*Math.PI:w.current),d&&(ee=L_(w.current),x.current.innerText=`${ee.toFixed(0)}º`),yv.makeRotationAxis(O,q),PP.copy(ie).applyMatrix4(yv).sub(ie).negate(),yv.setPosition(PP),p(yv)}},[p,C,o,n]),k=E.useCallback(j=>{d&&(x.current.style.display="none"),j.stopPropagation(),_.current=w.current,b.current=null,m(),y&&(y.enabled=!0),j.target.releasePointerCapture(j.pointerId)},[y,m]),X=E.useCallback(j=>{j.stopPropagation(),T(!1)},[]),$=E.useMemo(()=>{const j=t.clone().normalize(),H=e.clone().normalize();return new Ve().makeBasis(j,H,j.clone().cross(H))},[t,e]);return E.useLayoutEffect(()=>{B(r.y)},[r]),Dy(C,"grab"),L.jsxs("group",{name:"control",ref:g,onPointerDown:R,onPointerMove:D,onPointerUp:k,onPointerOut:X,matrix:$,matrixAutoUpdate:!1,children:[L.jsx(rp,{position:[0,0,0],name:"control",children:L.jsx("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:x})}),L.jsxs("mesh",{name:"control",position:[0,P+6*(1/i[0]),0],renderOrder:500,userData:v,children:[L.jsx("circleGeometry",{args:[2*(1/i[0]),12,12],name:"control"}),L.jsx("meshBasicMaterial",{depthTest:!1,transparent:!0,color:[0,1,5],opacity:1,polygonOffset:!0,polygonOffsetFactor:-10})]}),L.jsx(Gl,{name:"control",points:[[0,P+6*(1/i[0]),0],[0,P,0]],position:[0,0,0],color:new Ne("white"),children:L.jsx("meshBasicMaterial",{depthTest:!1})})]})},_v=new F,IP=new F,pq=(t,e,n,r)=>{const i=e.dot(e),s=e.dot(t)-e.dot(n),o=e.dot(r);return o===0?-s/i:(_v.copy(r).multiplyScalar(i/o).sub(e),IP.copy(r).multiplyScalar(s/o).add(n).sub(t),-_v.dot(IP)/_v.dot(_v))},mq=new F(0,1,0),Il=new F,BP=new Ve,gq=({direction:t,axis:e,boundb:n,position:r,inverseScale:i})=>{const{depthTest:s,scale:o,lineWidth:a,fixed:l,opacity:c,onDragStart:d,onDrag:f,onDragEnd:p,userData:m}=E.useContext(Ny),v=an(H=>H.controls),y=E.useRef(null),x=E.useRef(null),g=E.useRef(null),_=E.useRef(i[0]),w=E.useRef(1),b=E.useRef(null),[C,T]=E.useState(!1),P=l?1.2:1.2*o,B=E.useCallback(H=>H/g.current.getWorldScale(Il).y,[]),R=E.useCallback(H=>{H.stopPropagation();const ie=new Ve().extractRotation(x.current.matrixWorld),Z=H.point.clone(),U=new F().setFromMatrixPosition(x.current.matrixWorld),O=n[r].clone().applyMatrix4(ie).normalize(),z=x.current.matrixWorld.clone(),ne=z.clone().invert();b.current={clickPoint:Z,dir:O,mPLG:z,mPLGInv:ne},d({component:"Sphere",axis:e,origin:U,directions:[O]}),v&&(v.enabled=!1),H.target.setPointerCapture(H.pointerId)},[v,t,d,e,n,r]),D=E.useCallback(H=>{if(H.stopPropagation(),C||T(!0),b.current){const{clickPoint:ie,dir:Z,mPLG:U,mPLGInv:O}=b.current,[z,ne]=[1,void 0],J=pq(ie,Z,H.ray.origin,H.ray.direction),q=B(J);let ee=Math.pow(2,q*.05);H.shiftKey&&(ee=Math.round(ee*10)/10),ee=Math.max(ee,z/_.current),ne!==void 0&&(ee=Math.min(ee,ne/_.current)),w.current=_.current*ee,Il.set(1,1,1),Il.setComponent(0,ee),Il.setComponent(1,ee),BP.makeScale(Il.x,Il.y,Il.z).premultiply(U).multiply(O),f(BP)}},[P,B,f,C,e]),k=E.useCallback(H=>{H.stopPropagation(),_.current=w.current,b.current=null,p(),v&&(v.enabled=!0),H.target.releasePointerCapture(H.pointerId)},[v,p,P]),X=E.useCallback(H=>{H.stopPropagation(),T(!1)},[]),{matrixL:$,radius:j}=E.useMemo(()=>{const H=l?a/o*1.8:o/22.5,ie=l?1.2:1.2*o,Z=new Vn().setFromUnitVectors(mq,t.clone().normalize()),U=new Ve().makeRotationFromQuaternion(Z);return{radius:H,position:ie,matrixL:U}},[t,o,a,l]);return Dy(C,"grab"),L.jsx("group",{ref:x,children:L.jsxs("group",{matrix:$,matrixAutoUpdate:!1,onPointerDown:R,onPointerMove:D,onPointerUp:k,onPointerOut:X,children:[L.jsx(rp,{name:"control",position:[0,0,0],children:L.jsx("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},ref:y})}),L.jsxs("mesh",{name:"control",ref:g,position:n[r],renderOrder:500,userData:m,children:[L.jsx("circleGeometry",{args:[2*(1/i[0]),12,12]}),L.jsx("meshBasicMaterial",{transparent:!0,depthTest:s,color:[0,1,5],opacity:1,polygonOffset:!0,polygonOffsetFactor:-10})]})]})})},vq=new F,yq=new F,xq=new F,_q=(t,e,n)=>{const r=n.width/2,i=n.height/2;e.updateMatrixWorld(!1);const s=t.project(e);return s.x=s.x*r+r,s.y=-(s.y*i)+i,s},Sq=(t,e,n,r=1)=>{const i=vq.set(t.x/n.width*2-1,-(t.y/n.height)*2+1,r);return i.unproject(e),i},wq=(t,e,n,r)=>{const i=_q(xq.copy(t),n,r);let s=0;for(let o=0;o<2;++o){const a=yq.copy(i).setComponent(o,i.getComponent(o)+e),l=Sq(a,n,r,a.z);s=Math.max(s,t.distanceTo(l))}return s},DP=new Ve,LP=new Ve,FP=new Ve,Sv=new Ve,ga=new Ve,Bl=new Ve,OP=new Ve,NP=new Ve,UP=new Ve,Mu=new Sn,O_=new Sn,kP=new F,zP=new F,HP=new F,Eq=new F,wv=new F,GP=new F(1,0,0),N_=new F(0,1,0);new F(0,0,1);const zO=E.forwardRef(({worldMatrix:t,boundb:e,box:n,object:r,matrix:i,onDragStart:s,onDrag:o,onDragEnd:a,autoTransform:l=!0,anchor:c,disableSliders:d=!1,disableRotations:f=!1,activeAxes:p=[!0,!0,!0],offset:m=[0,0,0],scale:v=100,lineWidth:y=4,fixed:x=!1,translationLimits:g,rotationLimits:_,depthTest:w=!0,axisColors:b=["#ff2060","#20df80","#2080ff"],hoveredColor:C="#ffff40",displayValues:T=!0,annotationsClass:P,opacity:B=1,visible:R=!0,userData:D,children:k,boxSize:X,disableScale:$,center:j},H)=>{const ie=an(re=>re.invalidate),Z=E.useRef(null),U=E.useRef(null),O=E.useRef(null),z=E.useRef(null),ne=E.useRef([0,0,0]),[J]=Bc(re=>[re.editText]),[q,ee]=E.useState(()=>{if(t){const[re,he,Fe]=[new F,new Vn,new F];return new Ve().copy(t).decompose(re,he,Fe),Fe.toArray()}return[1,1,1]}),_e=oo(re=>re.scaleCurrent),be=E.useRef(!0);E.useLayoutEffect(()=>{Z.current&&be.current&&(Z.current.scale.set(1/_e,1/_e,1),be.current=!1,console.log(Z.current.scale))},[_e]),E.useEffect(()=>{if(r){const re=n0(r);if(re){const he=U.current,Fe=re.matrixAutoUpdate;return re.updateWorldMatrix(!0,!0),re.matrixAutoUpdate=!1,he.matrix=re.matrix.clone(),he.children[0].visible=!0,()=>{Fe&&(re.matrixAutoUpdate=!0,re.matrix.decompose(re.position,re.quaternion,re.scale))}}}},[r,e,X,_e]),E.useLayoutEffect(()=>{if(c){const re=n0(r,z.current);re&&(re.updateWorldMatrix(!0,!0),Sv.copy(re.matrixWorld).invert(),Mu.makeEmpty(),re.traverse(he=>{!he.geometry||he.name==="control"||he.geometry.name==="control"||(he.geometry.boundingBox||he.geometry.computeBoundingBox(),Bl.copy(he.matrixWorld).premultiply(Sv),O_.copy(he.geometry.boundingBox),O_.applyMatrix4(Bl),Mu.union(O_))}),kP.copy(Mu.max).add(Mu.min).multiplyScalar(.5),zP.copy(Mu.max).sub(Mu.min).multiplyScalar(.5),HP.copy(zP).multiply(new F(...c)).add(kP),Eq.set(...m).add(HP),ie())}}),E.useEffect(()=>{Z.current&&t&&(Z.current.matrixAutoUpdate=!1,Z.current.matrix.copy(t))},[]);const K=E.useMemo(()=>({onDragStart:re=>{DP.copy(U.current.matrix),LP.copy(U.current.matrixWorld),s&&s(re),ie()},onDrag:re=>{FP.copy(Z.current.matrixWorld),Sv.copy(FP).invert(),ga.copy(LP).premultiply(re),Bl.copy(ga).premultiply(Sv),OP.copy(DP).invert(),NP.copy(Bl).multiply(OP),l&&(UP.makeRotationFromEuler(O.current.rotation).setPosition(O.current.position).premultiply(ga),U.current.matrix.copy(Bl));const he=n0(r);he&&he.matrix.copy(Bl);const[Fe,Be,ke]=[new F,new Vn,new F];ga.decompose(Fe,Be,ke),ee(ke.toArray()),o&&o(Bl,NP,ga,re),ie()},onDragEnd:()=>{a&&a(),ie(),J(Za.getState().selected,{worldMatrix:new Ve().copy(ga)})},translation:ne,translationLimits:g,rotationLimits:_,axisColors:b,hoveredColor:C,opacity:B,scale:v,lineWidth:y,fixed:x,displayValues:T,depthTest:w,userData:D,annotationsClass:P,object:r}),[r,s,o,a,ne,g,_,w,v,y,x,...b,C,B,T,D,l,P,e,X,t]),je=oo(re=>re.scale),Xe=new F,Ee=E.useRef(null),[Me,ve]=E.useState(new B0);return E.useLayoutEffect(()=>{const re=X?new so(X[0],X[1],0):new so(0,0);re.computeBoundingBox(),re.center();const he=new B0(re);he.name="control",ve(he)},[ie,e,X,i,je]),E.useEffect(()=>{i&&(Z.current.updateWorldMatrix(!0,!0),ga.copy(Z.current.matrixWorld).multiply(i),UP.makeRotationFromEuler(O.current.rotation).setPosition(O.current.position).premultiply(ga))},[i]),Xd(re=>{x&&(wq(O.current.getWorldPosition(Xe),v,re.camera,re.size),O.current&&(O.current.scale.x!==wv.x||O.current.scale.y!==wv.y||O.current.scale.z!==wv.z)&&(O.current.scale.copy(wv),re.invalidate()))}),E.useImperativeHandle(H,()=>U.current,[]),E.useLayoutEffect(()=>{i&&i instanceof Ve&&(i&&i instanceof Ve&&(U.current.matrix=i),U.current.matrix=i)},[i]),L.jsx(Ny.Provider,{value:K,children:L.jsx("group",{name:"transformation",ref:Z,children:L.jsxs("group",{ref:U,matrix:i,matrixAutoUpdate:!1,name:"control",children:[L.jsxs("group",{visible:R,ref:O,position:[j.x,j.y,m[2]],name:"control",children:[!d&&Me&&L.jsxs("mesh",{name:"control",position:[0,0,0],ref:Ee,renderOrder:-1,children:[L.jsx("lineSegments",{args:[Me],name:"control"}),L.jsx("lineBasicMaterial",{color:[5,0,1],depthTest:!1})]}),!d&&p[0]&&p[1]&&L.jsx(cq,{axis:2,dir1:GP,dir2:N_,boxSize:X,center:j}),!d&&p[0]&&p[1]&&L.jsx(hq,{axis:2,dir1:GP,dir2:N_,boundb:e,inverseScale:q,center:j}),L.jsx("group",{position:[0,0,0],children:!$&&n&&[0,1,2,3].map(re=>L.jsx(gq,{inverseScale:q,boundb:n,direction:N_,axis:0,position:re},re))})]}),L.jsx("group",{ref:z,children:k})]})})})}),Nt={c:null,u:[new F,new F,new F],e:[]},Jt={c:null,u:[new F,new F,new F],e:[]},En=[[],[],[]],gt=[[],[],[]],hn=[],Dl=new F,Ll=new F,Fl=new F,er=new F,$P=new F,VP=new F,xs=new Tt,WP=new Sn,Ev=new Ve,jP=new Ve,XP=new cl;class Rb{constructor(e=new F,n=new F,r=new Tt){this.center=e,this.halfSize=n,this.rotation=r}set(e,n,r){return this.center=e,this.halfSize=n,this.rotation=r,this}copy(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}clone(){return new this.constructor().copy(this)}getSize(e){return e.copy(this.halfSize).multiplyScalar(2)}clampPoint(e,n){const r=this.halfSize;er.subVectors(e,this.center),this.rotation.extractBasis(Dl,Ll,Fl),n.copy(this.center);const i=cc.clamp(er.dot(Dl),-r.x,r.x);n.add(Dl.multiplyScalar(i));const s=cc.clamp(er.dot(Ll),-r.y,r.y);n.add(Ll.multiplyScalar(s));const o=cc.clamp(er.dot(Fl),-r.z,r.z);return n.add(Fl.multiplyScalar(o)),n}containsPoint(e){return er.subVectors(e,this.center),this.rotation.extractBasis(Dl,Ll,Fl),Math.abs(er.dot(Dl))<=this.halfSize.x&&Math.abs(er.dot(Ll))<=this.halfSize.y&&Math.abs(er.dot(Fl))<=this.halfSize.z}intersectsBox3(e){return this.intersectsOBB(Aq.fromBox3(e))}intersectsSphere(e){return this.clampPoint(e.center,VP),VP.distanceToSquared(e.center)<=e.radius*e.radius}intersectsOBB(e,n=Number.EPSILON){Nt.c=this.center,Nt.e[0]=this.halfSize.x,Nt.e[1]=this.halfSize.y,Nt.e[2]=this.halfSize.z,this.rotation.extractBasis(Nt.u[0],Nt.u[1],Nt.u[2]),Jt.c=e.center,Jt.e[0]=e.halfSize.x,Jt.e[1]=e.halfSize.y,Jt.e[2]=e.halfSize.z,e.rotation.extractBasis(Jt.u[0],Jt.u[1],Jt.u[2]);for(let s=0;s<3;s++)for(let o=0;o<3;o++)En[s][o]=Nt.u[s].dot(Jt.u[o]);er.subVectors(Jt.c,Nt.c),hn[0]=er.dot(Nt.u[0]),hn[1]=er.dot(Nt.u[1]),hn[2]=er.dot(Nt.u[2]);for(let s=0;s<3;s++)for(let o=0;o<3;o++)gt[s][o]=Math.abs(En[s][o])+n;let r,i;for(let s=0;s<3;s++)if(r=Nt.e[s],i=Jt.e[0]*gt[s][0]+Jt.e[1]*gt[s][1]+Jt.e[2]*gt[s][2],Math.abs(hn[s])>r+i)return!1;for(let s=0;s<3;s++)if(r=Nt.e[0]*gt[0][s]+Nt.e[1]*gt[1][s]+Nt.e[2]*gt[2][s],i=Jt.e[s],Math.abs(hn[0]*En[0][s]+hn[1]*En[1][s]+hn[2]*En[2][s])>r+i)return!1;return r=Nt.e[1]*gt[2][0]+Nt.e[2]*gt[1][0],i=Jt.e[1]*gt[0][2]+Jt.e[2]*gt[0][1],!(Math.abs(hn[2]*En[1][0]-hn[1]*En[2][0])>r+i||(r=Nt.e[1]*gt[2][1]+Nt.e[2]*gt[1][1],i=Jt.e[0]*gt[0][2]+Jt.e[2]*gt[0][0],Math.abs(hn[2]*En[1][1]-hn[1]*En[2][1])>r+i)||(r=Nt.e[1]*gt[2][2]+Nt.e[2]*gt[1][2],i=Jt.e[0]*gt[0][1]+Jt.e[1]*gt[0][0],Math.abs(hn[2]*En[1][2]-hn[1]*En[2][2])>r+i)||(r=Nt.e[0]*gt[2][0]+Nt.e[2]*gt[0][0],i=Jt.e[1]*gt[1][2]+Jt.e[2]*gt[1][1],Math.abs(hn[0]*En[2][0]-hn[2]*En[0][0])>r+i)||(r=Nt.e[0]*gt[2][1]+Nt.e[2]*gt[0][1],i=Jt.e[0]*gt[1][2]+Jt.e[2]*gt[1][0],Math.abs(hn[0]*En[2][1]-hn[2]*En[0][1])>r+i)||(r=Nt.e[0]*gt[2][2]+Nt.e[2]*gt[0][2],i=Jt.e[0]*gt[1][1]+Jt.e[1]*gt[1][0],Math.abs(hn[0]*En[2][2]-hn[2]*En[0][2])>r+i)||(r=Nt.e[0]*gt[1][0]+Nt.e[1]*gt[0][0],i=Jt.e[1]*gt[2][2]+Jt.e[2]*gt[2][1],Math.abs(hn[1]*En[0][0]-hn[0]*En[1][0])>r+i)||(r=Nt.e[0]*gt[1][1]+Nt.e[1]*gt[0][1],i=Jt.e[0]*gt[2][2]+Jt.e[2]*gt[2][0],Math.abs(hn[1]*En[0][1]-hn[0]*En[1][1])>r+i)||(r=Nt.e[0]*gt[1][2]+Nt.e[1]*gt[0][2],i=Jt.e[0]*gt[2][1]+Jt.e[1]*gt[2][0],Math.abs(hn[1]*En[0][2]-hn[0]*En[1][2])>r+i))}intersectsPlane(e){this.rotation.extractBasis(Dl,Ll,Fl);const n=this.halfSize.x*Math.abs(e.normal.dot(Dl))+this.halfSize.y*Math.abs(e.normal.dot(Ll))+this.halfSize.z*Math.abs(e.normal.dot(Fl)),r=e.normal.dot(this.center)-e.constant;return Math.abs(r)<=n}intersectRay(e,n){return this.getSize($P),WP.setFromCenterAndSize(er.set(0,0,0),$P),Ev.setFromMatrix3(this.rotation),Ev.setPosition(this.center),jP.copy(Ev).invert(),XP.copy(e).applyMatrix4(jP),XP.intersectBox(WP,n)?n.applyMatrix4(Ev):null}intersectsRay(e){return this.intersectRay(e,er)!==null}fromBox3(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}applyMatrix4(e){const n=e.elements;let r=er.set(n[0],n[1],n[2]).length();const i=er.set(n[4],n[5],n[6]).length(),s=er.set(n[8],n[9],n[10]).length();e.determinant()<0&&(r=-r),xs.setFromMatrix4(e);const a=1/r,l=1/i,c=1/s;return xs.elements[0]*=a,xs.elements[1]*=a,xs.elements[2]*=a,xs.elements[3]*=l,xs.elements[4]*=l,xs.elements[5]*=l,xs.elements[6]*=c,xs.elements[7]*=c,xs.elements[8]*=c,this.rotation.multiply(xs),this.halfSize.x*=r,this.halfSize.y*=i,this.halfSize.z*=s,er.setFromMatrixPosition(e),this.center.add(er),this}}const Aq=new Rb,bq=({path:t,color:e,base:n,renderOrder:r,id:i,height:s,worldMatrix:o})=>{const a=E.useRef(null),[l,c]=Za(P=>[P.selected,P.setSelected]),[d,f]=E.useState(!1);Dy(d,"pointer","auto");const[p,m]=E.useState([0,0,0]),[v,y]=E.useState(new F),[x,g]=E.useState([new F,new F,new F,new F]),[_,w]=E.useState(new F),b=Lc(P=>P.is3dModeOn),[C,T]=Dc(P=>[P.setIsShown,P.setSelectedSidebar]);return E.useEffect(()=>(c(i),()=>{c("")}),[i,c,T,C]),E.useLayoutEffect(()=>{if(a.current){const P=new Sn,B=new Sn;a.current.traverse(ie=>{!ie.geometry||ie.name==="control"||ie.geometry.name==="control"||(ie.geometry.boundingBox||ie.geometry.computeBoundingBox(),B.copy(ie.geometry.boundingBox),P.union(B))});const R=new Rb().fromBox3(P),{min:D,max:k}=P,X=P.getCenter(new F),$=[new F(X.x-P.min.x,X.y-P.max.y,P.max.z),new F(X.x-P.max.x,X.y-P.max.y,P.max.z),new F(X.x-P.max.x,X.y-P.min.y,P.max.z),new F(X.x-P.min.x,X.y-P.min.y,P.max.z)];w(X),y(R.halfSize),g($);const j=k.x-D.x,H=k.y-D.y;m([j,H,s])}},[t,n,s]),L.jsx(L.Fragment,{children:L.jsx(zO,{center:_,boundb:v,boxSize:p,activeAxes:l||!b?[!0,!0,!1]:[!1,!1,!1],depthTest:!1,scale:2,visible:l===i,disableSliders:l!==i||b,disableAxes:l!==i||b,disableScale:l!==i||b,box:x,worldMatrix:o,offset:[0,0,s],children:L.jsxs("group",{onClick:P=>{P.stopPropagation(),b||c(i)},onPointerMissed:P=>{P.type==="click"&&l===i&&c("")},renderOrder:r,position:[0,0,s],onPointerOver:()=>f(!0),onPointerOut:()=>f(!1),ref:a,children:[L.jsxs("mesh",{name:"control",children:[L.jsx("boxGeometry",{args:[p[0],p[1],.1]}),L.jsx("meshStandardMaterial",{color:"red",opacity:0,transparent:!0})]}),L.jsx(CP,{path:t,color:e,height:s,extrude:!0,id:i},69),L.jsx(CP,{id:i,path:t,color:e,height:s,extrude:!1})]})})})};_b({TextGeometry:xK});const Mq=({text:t,color:e,base:n,height:r,selectedFont:i})=>{const s=Jp(`./fonts/${i}.json`),{color:o,emissive:a,emissiveIntensity:l}=e,c=Lc(f=>f.brightness),d=E.useRef(null);return E.useEffect(()=>{console.log(d.current),d.current.center()},[i,t]),L.jsxs(L.Fragment,{children:[L.jsx("textGeometry",{ref:d,args:[i==="vector"?t.toUpperCase():t,{font:s,size:10,height:1,curveSegments:12,bevelEnabled:!0,bevelThickness:0,bevelSize:0,bevelOffset:0}]}),L.jsx("meshStandardMaterial",{attach:"material-0",color:o,emissive:a,emissiveIntensity:l*(c/100)+1,toneMapped:!1}),L.jsx("meshBasicMaterial",{attach:"material-1",color:"#eeeeee"})]})},Cq=({text:t,_font:e})=>{const n=Jp(`./fonts/${e}.json`);return L.jsxs("mesh",{position:[0,0,0],name:"control",children:[L.jsx("textGeometry",{name:"control",args:[t,{font:n,size:11,height:0,curveSegments:12,bevelEnabled:!0,bevelThickness:1,bevelSize:2,bevelOffset:0}]}),L.jsx("meshBasicMaterial",{color:"BLUE",toneMapped:!1,colorWrite:!1})]})},Tq=({text:t,base:e,height:n,color:r,renderOrder:i,id:s,font:o,worldMatrix:a})=>{const[l,c]=Za(B=>[B.selected,B.setSelected]),[d,f]=E.useState(!1);Dy(d,"pointer","auto");const[p,m]=E.useState([0,0,0]),[v,y]=E.useState(new F),[x,g]=E.useState([new F,new F,new F,new F]);oo(B=>B.scaleCurrent);const[_,w]=E.useState(new F),b=Lc(B=>B.is3dModeOn),C=E.useRef(null),T=E.useRef(null);E.useEffect(()=>(c(s),()=>{c("")}),[s,c]),E.useLayoutEffect(()=>{if(C.current){const B=new Sn,R=new Sn;C.current.traverse(Z=>{!Z.geometry||Z.name==="control"||Z.geometry.name==="control"||(Z.geometry.computeBoundingBox(),R.copy(Z.geometry.boundingBox),B.union(R))});const D=new Rb().fromBox3(B),{min:k,max:X}=B,$=B.getCenter(new F),j=[new F($.x-B.min.x,$.y-B.max.y,B.max.z),new F($.x-B.max.x,$.y-B.max.y,B.max.z),new F($.x-B.max.x,$.y-B.min.y,B.max.z),new F($.x-B.min.x,$.y-B.min.y,B.max.z)];w($),y(D.halfSize),g(j);const H=X.x-k.x,ie=X.y-k.y;m([H,ie,n])}},[t,o,e,b,n]);const P=E.useCallback(B=>{B.stopPropagation(),f(!0)},[]);return L.jsx(L.Fragment,{children:L.jsx(zO,{offset:[0,0,n],boundb:v,boxSize:p,activeAxes:l||!b?[!0,!0,!1]:[!1,!1,!1],depthTest:!1,visible:l===s,disableSliders:l!==s||b,disableAxes:l!==s||b,box:x,worldMatrix:a,disableScale:l!==s||b,center:_,children:L.jsxs("group",{onClick:B=>{B.stopPropagation(),b||c(s)},onPointerMissed:B=>{B.type==="click"&&l===s&&c("")},renderOrder:i,position:[0,0,e?n:0],onPointerOver:P,onPointerOut:B=>{B.stopPropagation(),f(!1)},ref:C,children:[e&&L.jsx(zK,{name:"control",args:[p[0],p[1],p[2]],position:[_.x,_.y,0],material:new ci({transparent:!0,opacity:0})},t),e&&L.jsx(Cq,{_font:o,text:t}),t&&L.jsx("mesh",{position:[0,0,.1],renderOrder:i,ref:T,name:s,children:L.jsx(Mq,{text:t,color:r,base:e,height:n,selectedFont:o})})]})})})},Rq=t=>[t.is3dModeOn,t.isRullerOn],Pq=t=>[t.textsAndModels,t.removeText],Iq=()=>{const[t,e]=Bc(Pq);an(y=>y.invalidate);const[n,r,i,s,o,a,l]=oo(y=>[y.isCustom,y.setBoardSize,y.setSmallestBoardCitizen,y.scaleCoefficient,y.scale,y.setScale,y.setScaleCurrent]),c=E.useRef(null),[d,f]=Lc(Rq),[p]=Za(y=>[y.selected]),[m,v]=oo(y=>[y.boardCenter,y.boardSize]);return E.useEffect(()=>{const y=x=>{(x.key==="Backspace"||x.key==="Delete")&&x.srcElement.tagName!=="INPUT"&&e(Za.getState().selected)};return document.addEventListener("keyup",y),()=>{document.removeEventListener("keyup",y)}},[e]),E.useLayoutEffect(()=>{if(c.current){if(o===0)return;const{x:y,y:x,z:g}=c.current.scale;c.current.scale.set(y*o,x*o,1),c.current.updateWorldMatrix(!0,!0),l(new F().setFromMatrixScale(c.current.matrix).x)}},[o,l]),E.useLayoutEffect(()=>{t.length===0&&l(1)},[t]),E.useLayoutEffect(()=>{if(a(0,300),c.current){const y=new Sn,x=[];c.current.traverse(w=>{if(!w.geometry||w.name==="control"||w.geometry.name==="control")return;const b=new Sn().setFromObject(w);if(w.name!==""){const C=b.getSize(new F),T=Math.min(Math.round(C.x),Math.round(C.y));x.push(T>=10?T:10)}y.union(b)}),i(x);const g=y.getSize(new F),_=y.getCenter(new F);r(_,g.toArray())}},[t,p,r,n,i,a,o]),L.jsxs(L.Fragment,{children:[L.jsx("color",{attach:"background",args:["#000000"]}),L.jsx(rq,{children:L.jsx(tq,{luminanceThreshold:1,opacity:.3,intensity:3,levels:4,radius:.6,kernelSize:Nc.MEDIUM,mipmapBlur:!0,luminanceSmoothing:.1})}),d&&L.jsx(NK,{makeDefault:!0,minAzimuthAngle:-1,maxAzimuthAngle:1,maxDistance:170,minDistance:50,target:m}),!d&&L.jsx(UK,{children:L.jsx(sq,{})}),L.jsx(oq,{}),f&&L.jsxs("group",{children:[L.jsx(Gl,{color:"white",points:[[m.x-v[0]/2-4,m.y+v[1]/2,0],[m.x-v[0]/2-3,m.y+v[1]/2,0]]}),L.jsx(Gl,{color:"white",points:[[m.x-v[0]/2-4,m.y-v[1]/2,0],[m.x-v[0]/2-3,m.y-v[1]/2,0]]}),L.jsx(Gl,{color:"white",points:[[m.x+v[0]/2,m.y-v[1]/2-4,0],[m.x+v[0]/2,m.y-v[1]/2-3,0]]}),L.jsx(Gl,{color:"white",points:[[m.x-v[0]/2,m.y-v[1]/2-4,0],[m.x-v[0]/2,m.y-v[1]/2-3,0]]}),L.jsx(Gl,{color:"white",points:[[m.x-v[0]/2-4,m.y+v[1]/2,0],[m.x-v[0]/2-4,m.y-v[1]/2,0]]}),L.jsx(Gl,{color:"white",points:[[m.x+v[0]/2,m.y-v[1]/2-4,0],[m.x-v[0]/2,m.y-v[1]/2-4,0]]}),L.jsx(rp,{transform:!0,center:!0,position:[m.x-v[0]/2-12,m.y,0],scale:10,className:"text-white",children:L.jsx("div",{children:Math.floor(v[1])+" cm"})}),L.jsx(rp,{transform:!0,center:!0,position:[m.x,m.y-v[1]/2-8,0],scale:10,className:"text-white",children:L.jsx("div",{children:Math.floor(v[0])+" cm"})})]}),L.jsx(E.Suspense,{fallback:null,children:t.length>0&&L.jsx("group",{position:[0,0,0],ref:c,children:L.jsx(L.Fragment,{children:t.map(y=>"text"in y?L.jsx(Tq,{text:y.text,id:y.id,base:!0,height:y.height,color:y.color,renderOrder:y.renderOrder,font:y.font,worldMatrix:y.worldMatrix},y.id):L.jsx(bq,{path:y.path,color:y.color,base:!0,renderOrder:y.renderOrder,id:y.id,height:y.height,worldMatrix:y.worldMatrix},y.id))})})})]})};function Gt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function fl(t,e=[]){let n=[];function r(s,o){const a=E.createContext(o),l=n.length;n=[...n,o];function c(f){const{scope:p,children:m,...v}=f,y=(p==null?void 0:p[t][l])||a,x=E.useMemo(()=>v,Object.values(v));return E.createElement(y.Provider,{value:x},m)}function d(f,p){const m=(p==null?void 0:p[t][l])||a,v=E.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,d]}const i=()=>{const s=n.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Bq(i,...e)]}function Bq(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Dq(t){const e=t+"CollectionProvider",[n,r]=fl(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,x=Rt.useRef(null),g=Rt.useRef(new Map).current;return Rt.createElement(i,{scope:v,itemMap:g,collectionRef:x},y)},a=t+"CollectionSlot",l=Rt.forwardRef((m,v)=>{const{scope:y,children:x}=m,g=s(a,y),_=On(v,g.collectionRef);return Rt.createElement(Sc,{ref:_},x)}),c=t+"CollectionItemSlot",d="data-radix-collection-item",f=Rt.forwardRef((m,v)=>{const{scope:y,children:x,...g}=m,_=Rt.useRef(null),w=On(v,_),b=s(c,y);return Rt.useEffect(()=>(b.itemMap.set(_,{ref:_,...g}),()=>void b.itemMap.delete(_))),Rt.createElement(Sc,{[d]:"",ref:w},x)});function p(m){const v=s(t+"CollectionConsumer",m);return Rt.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const g=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((b,C)=>g.indexOf(b.ref.current)-g.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},p,r]}const Fo=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},Lq=X4["useId".toString()]||(()=>{});let Fq=0;function dd(t){const[e,n]=E.useState(Lq());return Fo(()=>{t||n(r=>r??String(Fq++))},[t]),t||(e?`radix-${e}`:"")}const Oq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Pn=Oq.reduce((t,e)=>{const n=E.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Sc:e;return E.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),E.createElement(a,Re({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Nq(t,e){t&&Cc.flushSync(()=>t.dispatchEvent(e))}function Gn(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Uy({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Uq({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Gn(n),l=E.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else i(c)},[s,t,i,a]);return[o,l]}function Uq({defaultProp:t,onChange:e}){const n=E.useState(t),[r]=n,i=E.useRef(r),s=Gn(e);return E.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const kq=E.createContext(void 0);function Pb(t){const e=E.useContext(kq);return t||e||"ltr"}const U_="rovingFocusGroup.onEntryFocus",zq={bubbles:!1,cancelable:!0},Ib="RovingFocusGroup",[Jw,HO,Hq]=Dq(Ib),[Gq,GO]=fl(Ib,[Hq]),[$q,Vq]=Gq(Ib),Wq=E.forwardRef((t,e)=>E.createElement(Jw.Provider,{scope:t.__scopeRovingFocusGroup},E.createElement(Jw.Slot,{scope:t.__scopeRovingFocusGroup},E.createElement(jq,Re({},t,{ref:e}))))),jq=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...d}=t,f=E.useRef(null),p=On(e,f),m=Pb(s),[v=null,y]=Uy({prop:o,defaultProp:a,onChange:l}),[x,g]=E.useState(!1),_=Gn(c),w=HO(n),b=E.useRef(!1),[C,T]=E.useState(0);return E.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(U_,_),()=>P.removeEventListener(U_,_)},[_]),E.createElement($q,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:v,onItemFocus:E.useCallback(P=>y(P),[y]),onItemShiftTab:E.useCallback(()=>g(!0),[]),onFocusableItemAdd:E.useCallback(()=>T(P=>P+1),[]),onFocusableItemRemove:E.useCallback(()=>T(P=>P-1),[])},E.createElement(Pn.div,Re({tabIndex:x||C===0?-1:0,"data-orientation":r},d,{ref:p,style:{outline:"none",...t.style},onMouseDown:Gt(t.onMouseDown,()=>{b.current=!0}),onFocus:Gt(t.onFocus,P=>{const B=!b.current;if(P.target===P.currentTarget&&B&&!x){const R=new CustomEvent(U_,zq);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const D=w().filter(H=>H.focusable),k=D.find(H=>H.active),X=D.find(H=>H.id===v),j=[k,X,...D].filter(Boolean).map(H=>H.ref.current);$O(j)}}b.current=!1}),onBlur:Gt(t.onBlur,()=>g(!1))})))}),Xq="RovingFocusGroupItem",Jq=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=dd(),l=s||a,c=Vq(Xq,n),d=c.currentTabStopId===l,f=HO(n),{onFocusableItemAdd:p,onFocusableItemRemove:m}=c;return E.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),E.createElement(Jw.ItemSlot,{scope:n,id:l,focusable:r,active:i},E.createElement(Pn.span,Re({tabIndex:d?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:Gt(t.onMouseDown,v=>{r?c.onItemFocus(l):v.preventDefault()}),onFocus:Gt(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Gt(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=Qq(v,c.orientation,c.dir);if(y!==void 0){v.preventDefault();let g=f().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")g.reverse();else if(y==="prev"||y==="next"){y==="prev"&&g.reverse();const _=g.indexOf(v.currentTarget);g=c.loop?qq(g,_+1):g.slice(_+1)}setTimeout(()=>$O(g))}})})))}),Kq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Yq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Qq(t,e,n){const r=Yq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kq[r]}function $O(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function qq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const Zq=Wq,eZ=Jq;function tZ(t,e){return E.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const vi=t=>{const{present:e,children:n}=t,r=nZ(e),i=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),s=On(r.ref,i.ref);return typeof n=="function"||r.isPresent?E.cloneElement(i,{ref:s}):null};vi.displayName="Presence";function nZ(t){const[e,n]=E.useState(),r=E.useRef({}),i=E.useRef(t),s=E.useRef("none"),o=t?"mounted":"unmounted",[a,l]=tZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=Av(r.current);s.current=a==="mounted"?c:"none"},[a]),Fo(()=>{const c=r.current,d=i.current;if(d!==t){const p=s.current,m=Av(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Fo(()=>{if(e){const c=f=>{const m=Av(r.current).includes(f.animationName);f.target===e&&m&&Cc.flushSync(()=>l("ANIMATION_END"))},d=f=>{f.target===e&&(s.current=Av(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Av(t){return(t==null?void 0:t.animationName)||"none"}const VO="Tabs",[rZ,rae]=fl(VO,[GO]),WO=GO(),[iZ,Bb]=rZ(VO),sZ=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=Pb(a),[f,p]=Uy({prop:r,onChange:i,defaultProp:s});return E.createElement(iZ,{scope:n,baseId:dd(),value:f,onValueChange:p,orientation:o,dir:d,activationMode:l},E.createElement(Pn.div,Re({dir:d,"data-orientation":o},c,{ref:e})))}),oZ="TabsList",aZ=E.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=Bb(oZ,n),o=WO(n);return E.createElement(Zq,Re({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),E.createElement(Pn.div,Re({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),lZ="TabsTrigger",cZ=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=Bb(lZ,n),a=WO(n),l=jO(o.baseId,r),c=XO(o.baseId,r),d=r===o.value;return E.createElement(eZ,Re({asChild:!0},a,{focusable:!i,active:d}),E.createElement(Pn.button,Re({type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:Gt(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Gt(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Gt(t.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!i&&f&&o.onValueChange(r)})})))}),uZ="TabsContent",dZ=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=Bb(uZ,n),l=jO(a.baseId,r),c=XO(a.baseId,r),d=r===a.value,f=E.useRef(d);return E.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),E.createElement(vi,{present:i||d},({present:p})=>E.createElement(Pn.div,Re({"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0}}),p&&s))});function jO(t,e){return`${t}-trigger-${e}`}function XO(t,e){return`${t}-content-${e}`}const fZ=sZ,JO=aZ,KO=cZ,YO=dZ,QO=fZ,Db=E.forwardRef(({className:t,...e},n)=>L.jsx(JO,{ref:n,className:Lt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Db.displayName=JO.displayName;const Lb=E.forwardRef(({className:t,...e},n)=>L.jsx(KO,{ref:n,className:Lt('relative inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-bold transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50  data-[state=active]:text-primarypink data-[state=active]:after:bg-primarypink after:absolute after:content-[""] after:left-0 after:right-0 after:h-0.5 after:bg-transparent hover:after:bg-primarypink after:rounded-t-sm after:-bottom-1',t),...e}));Lb.displayName=KO.displayName;const Fb=E.forwardRef(({className:t,...e},n)=>L.jsx(YO,{ref:n,className:Lt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Fb.displayName=YO.displayName;const Kw="horizontal",hZ=["horizontal","vertical"],qO=E.forwardRef((t,e)=>{const{decorative:n,orientation:r=Kw,...i}=t,s=ZO(r)?r:Kw,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return E.createElement(Pn.div,Re({"data-orientation":s},a,i,{ref:e}))});qO.propTypes={orientation(t,e,n){const r=t[e],i=String(r);return r&&!ZO(r)?new Error(pZ(i,n)):null}};function pZ(t,e){return`Invalid prop \`orientation\` of value \`${t}\` supplied to \`${e}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${Kw}\`.`}function ZO(t){return hZ.includes(t)}const eN=qO,Yw=E.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>L.jsx(eN,{ref:i,decorative:n,orientation:e,className:Lt("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Yw.displayName=eN.displayName;const mZ=Rt.createContext({}),tN=!0;function gZ({baseColor:t,highlightColor:e,width:n,height:r,borderRadius:i,circle:s,direction:o,duration:a,enableAnimation:l=tN}){const c={};return o==="rtl"&&(c["--animation-direction"]="reverse"),typeof a=="number"&&(c["--animation-duration"]=`${a}s`),l||(c["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(c.width=n),(typeof r=="string"||typeof r=="number")&&(c.height=r),(typeof i=="string"||typeof i=="number")&&(c.borderRadius=i),s&&(c.borderRadius="50%"),typeof t<"u"&&(c["--base-color"]=t),typeof e<"u"&&(c["--highlight-color"]=e),c}function vZ({count:t=1,wrapper:e,className:n,containerClassName:r,containerTestId:i,circle:s=!1,style:o,...a}){var l,c,d;const f=Rt.useContext(mZ),p={...a};for(const[w,b]of Object.entries(a))typeof b>"u"&&delete p[w];const m={...f,...p,circle:s},v={...o,...gZ(m)};let y="react-loading-skeleton";n&&(y+=` ${n}`);const x=(l=m.inline)!==null&&l!==void 0?l:!1,g=[],_=Math.ceil(t);for(let w=0;w<_;w++){let b=v;if(_>t&&w===_-1){const T=(c=b.width)!==null&&c!==void 0?c:"100%",P=t%1,B=typeof T=="number"?T*P:`calc(${T} * ${P})`;b={...b,width:B}}const C=Rt.createElement("span",{className:y,style:b,key:w},"‌");x?g.push(C):g.push(Rt.createElement(Rt.Fragment,{key:w},C,Rt.createElement("br",null)))}return Rt.createElement("span",{className:r,"data-testid":i,"aria-live":"polite","aria-busy":(d=m.enableAnimation)!==null&&d!==void 0?d:tN},e?g.map((w,b)=>Rt.createElement(e,{key:b},w)):g)}const yZ=t=>t.setUrl,xZ=({photo:t})=>{const e=$p(yZ),[n,r]=E.useState(!1),[i,s]=E.useState(!1),o=E.useCallback(()=>{s(!0),fetch(t+".jpg").then(a=>{r(a.ok)}).catch(()=>{r(!1)}).finally(()=>s(!1))},[t]);return E.useEffect(()=>{o()},[]),L.jsx("button",{className:"overflow-hidden",onClick:()=>{e(n?t+".jpg":t+".png")},children:i?L.jsx("div",{children:L.jsx(vZ,{containerClassName:"flex-1",height:180,width:180})}):L.jsx("img",{className:"w-[180px] h-[180px] object-center object-cover  hover:scale-110 duration-300",src:n?t+".jpg":t+".png"})})};function _Z(t,[e,n]){return Math.min(n,Math.max(e,t))}function SZ(t,e){return E.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const nN="ScrollArea",[rN,iae]=fl(nN),[wZ,os]=rN(nN),EZ=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,l]=E.useState(null),[c,d]=E.useState(null),[f,p]=E.useState(null),[m,v]=E.useState(null),[y,x]=E.useState(null),[g,_]=E.useState(0),[w,b]=E.useState(0),[C,T]=E.useState(!1),[P,B]=E.useState(!1),R=On(e,k=>l(k)),D=Pb(i);return E.createElement(wZ,{scope:n,type:r,dir:D,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:d,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:C,onScrollbarXEnabledChange:T,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:P,onScrollbarYEnabledChange:B,onCornerWidthChange:_,onCornerHeightChange:b},E.createElement(Pn.div,Re({dir:D},o,{ref:R,style:{position:"relative",["--radix-scroll-area-corner-width"]:g+"px",["--radix-scroll-area-corner-height"]:w+"px",...t.style}})))}),AZ="ScrollAreaViewport",bZ=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,...i}=t,s=os(AZ,n),o=E.useRef(null),a=On(e,o,s.onViewportChange);return E.createElement(E.Fragment,null,E.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),E.createElement(Pn.div,Re({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t.style}}),E.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Ko="ScrollAreaScrollbar",iN=E.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=os(Ko,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return E.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?E.createElement(MZ,Re({},r,{ref:e,forceMount:n})):i.type==="scroll"?E.createElement(CZ,Re({},r,{ref:e,forceMount:n})):i.type==="auto"?E.createElement(sN,Re({},r,{ref:e,forceMount:n})):i.type==="always"?E.createElement(Ob,Re({},r,{ref:e})):null}),MZ=E.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=os(Ko,t.__scopeScrollArea),[s,o]=E.useState(!1);return E.useEffect(()=>{const a=i.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),E.createElement(vi,{present:n||s},E.createElement(sN,Re({"data-state":s?"visible":"hidden"},r,{ref:e})))}),CZ=E.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=os(Ko,t.__scopeScrollArea),s=t.orientation==="horizontal",o=zy(()=>l("SCROLL_END"),100),[a,l]=SZ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return E.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),E.useEffect(()=>{const c=i.viewport,d=s?"scrollLeft":"scrollTop";if(c){let f=c[d];const p=()=>{const m=c[d];f!==m&&(l("SCROLL"),o()),f=m};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[i.viewport,s,l,o]),E.createElement(vi,{present:n||a!=="hidden"},E.createElement(Ob,Re({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:e,onPointerEnter:Gt(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Gt(t.onPointerLeave,()=>l("POINTER_LEAVE"))})))}),sN=E.forwardRef((t,e)=>{const n=os(Ko,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=E.useState(!1),a=t.orientation==="horizontal",l=zy(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:d)}},10);return Dd(n.viewport,l),Dd(n.content,l),E.createElement(vi,{present:r||s},E.createElement(Ob,Re({"data-state":s?"visible":"hidden"},i,{ref:e})))}),Ob=E.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=os(Ko,t.__scopeScrollArea),s=E.useRef(null),o=E.useRef(0),[a,l]=E.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=cN(a.viewport,a.content),d={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function f(p,m){return FZ(p,o.current,a,m)}return n==="horizontal"?E.createElement(TZ,Re({},d,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollLeft,m=JP(p,a,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=f(p,i.dir))}})):n==="vertical"?E.createElement(RZ,Re({},d,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollTop,m=JP(p,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=f(p))}})):null}),TZ=E.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=os(Ko,t.__scopeScrollArea),[o,a]=E.useState(),l=E.useRef(null),c=On(e,l,s.onScrollbarXChange);return E.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),E.createElement(aN,Re({"data-orientation":"horizontal"},i,{ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,["--radix-scroll-area-thumb-width"]:ky(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(s.viewport){const p=s.viewport.scrollLeft+d.deltaX;t.onWheelScroll(p),dN(p,f)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:O0(o.paddingLeft),paddingEnd:O0(o.paddingRight)}})}}))}),RZ=E.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=os(Ko,t.__scopeScrollArea),[o,a]=E.useState(),l=E.useRef(null),c=On(e,l,s.onScrollbarYChange);return E.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),E.createElement(aN,Re({"data-orientation":"vertical"},i,{ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)",["--radix-scroll-area-thumb-height"]:ky(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(s.viewport){const p=s.viewport.scrollTop+d.deltaY;t.onWheelScroll(p),dN(p,f)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:O0(o.paddingTop),paddingEnd:O0(o.paddingBottom)}})}}))}),[PZ,oN]=rN(Ko),aN=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:f,...p}=t,m=os(Ko,n),[v,y]=E.useState(null),x=On(e,R=>y(R)),g=E.useRef(null),_=E.useRef(""),w=m.viewport,b=r.content-r.viewport,C=Gn(d),T=Gn(l),P=zy(f,10);function B(R){if(g.current){const D=R.clientX-g.current.left,k=R.clientY-g.current.top;c({x:D,y:k})}}return E.useEffect(()=>{const R=D=>{const k=D.target;(v==null?void 0:v.contains(k))&&C(D,b)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[w,v,b,C]),E.useEffect(T,[r,T]),Dd(v,P),Dd(m.content,P),E.createElement(PZ,{scope:n,scrollbar:v,hasThumb:i,onThumbChange:Gn(s),onThumbPointerUp:Gn(o),onThumbPositionChange:T,onThumbPointerDown:Gn(a)},E.createElement(Pn.div,Re({},p,{ref:x,style:{position:"absolute",...p.style},onPointerDown:Gt(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),g.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",B(R))}),onPointerMove:Gt(t.onPointerMove,B),onPointerUp:Gt(t.onPointerUp,R=>{const D=R.target;D.hasPointerCapture(R.pointerId)&&D.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=_.current,g.current=null})})))}),Qw="ScrollAreaThumb",IZ=E.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=oN(Qw,t.__scopeScrollArea);return E.createElement(vi,{present:n||i.hasThumb},E.createElement(BZ,Re({ref:e},r)))}),BZ=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=os(Qw,n),o=oN(Qw,n),{onThumbPositionChange:a}=o,l=On(e,f=>o.onThumbChange(f)),c=E.useRef(),d=zy(()=>{c.current&&(c.current(),c.current=void 0)},100);return E.useEffect(()=>{const f=s.viewport;if(f){const p=()=>{if(d(),!c.current){const m=OZ(f,a);c.current=m,a()}};return a(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[s.viewport,d,a]),E.createElement(Pn.div,Re({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Gt(t.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),v=f.clientX-m.left,y=f.clientY-m.top;o.onThumbPointerDown({x:v,y})}),onPointerUp:Gt(t.onPointerUp,o.onThumbPointerUp)}))}),lN="ScrollAreaCorner",DZ=E.forwardRef((t,e)=>{const n=os(lN,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?E.createElement(LZ,Re({},t,{ref:e})):null}),LZ=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=os(lN,n),[s,o]=E.useState(0),[a,l]=E.useState(0),c=!!(s&&a);return Dd(i.scrollbarX,()=>{var d;const f=((d=i.scrollbarX)===null||d===void 0?void 0:d.offsetHeight)||0;i.onCornerHeightChange(f),l(f)}),Dd(i.scrollbarY,()=>{var d;const f=((d=i.scrollbarY)===null||d===void 0?void 0:d.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),c?E.createElement(Pn.div,Re({},r,{ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}})):null});function O0(t){return t?parseInt(t,10):0}function cN(t,e){const n=t/e;return isNaN(n)?0:n}function ky(t){const e=cN(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function FZ(t,e,n,r="ltr"){const i=ky(n),s=i/2,o=e||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return uN([l,c],f)(t)}function JP(t,e,n="ltr"){const r=ky(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],c=_Z(t,l);return uN([0,o],[0,a])(c)}function uN(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function dN(t,e){return t>0&&t<e}const OZ=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function zy(t,e){const n=Gn(t),r=E.useRef(0);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),E.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Dd(t,e){const n=Gn(e);Fo(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}const fN=EZ,NZ=bZ,UZ=DZ,Uc=E.forwardRef(({className:t,children:e,...n},r)=>L.jsxs(fN,{ref:r,className:Lt("relative overflow-hidden",t),...n,children:[L.jsx(NZ,{className:"h-full w-full rounded-[inherit]",children:e}),L.jsx(hN,{}),L.jsx(UZ,{})]}));Uc.displayName=fN.displayName;const hN=E.forwardRef(({className:t,orientation:e="vertical",...n},r)=>L.jsx(iN,{ref:r,orientation:e,className:Lt("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 border-t border-t-transparent p-[1px]",t),...n,children:L.jsx(IZ,{className:"relative flex-1 rounded-full bg-border"})}));hN.displayName=iN.displayName;const pN=Array.from(Array(10).keys()).map(t=>`/image-catalog/bussiness-${t+1}`),mN=Array.from(Array(9).keys()).map(t=>`/image-catalog/personal-${t+1}`),kZ=[...pN,...mN],zZ={all:kZ,bussiness:pN,personal:mN},HZ=()=>{const[t,e]=E.useState("all"),n=$p(r=>r.url);return L.jsxs("div",{className:"w-full",children:[L.jsxs("div",{className:"flex justify-between",children:[L.jsx("h1",{children:"Filter:"}),L.jsxs("div",{className:"flex gap-2 text-sm ",children:[L.jsx("button",{onClick:()=>e("all"),className:Lt("hover:underline hover:text-primarypink underline-offset-2",t==="all"&&"underline text-primarypink"),children:"All"}),L.jsx(Yw,{orientation:"vertical"}),L.jsx("button",{onClick:()=>e("bussiness"),className:Lt("hover:underline hover:text-primarypink underline-offset-2",t==="bussiness"&&"underline text-primarypink"),children:"For Business Use"}),L.jsx(Yw,{orientation:"vertical"}),L.jsx("button",{onClick:()=>e("personal"),className:Lt("hover:underline hover:text-primarypink underline-offset-2",t==="personal"&&"underline text-primarypink"),children:"For Personal Use"})]})]}),L.jsx(Uc,{className:Lt("w-full h-[60vh] 2xl:h-[70vh] p-3",n!=="./bg.jpg"&&"h-[50vh] 2xl:h-[60vh]"),children:L.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:zZ[t].map(r=>L.jsx(xZ,{photo:r},r))})})]})};function Jd(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Kd(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function KP(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function YP(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var GZ=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Kp(t,e){var n=$Z(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function $Z(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),i=GZ.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var VZ=[".DS_Store","Thumbs.db"];function WZ(t){return Jd(this,void 0,void 0,function(){return Kd(this,function(e){return N0(t)&&jZ(t.dataTransfer)?[2,YZ(t.dataTransfer,t.type)]:XZ(t)?[2,JZ(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,KZ(t)]:[2,[]]})})}function jZ(t){return N0(t)}function XZ(t){return N0(t)&&N0(t.target)}function N0(t){return typeof t=="object"&&t!==null}function JZ(t){return qw(t.target.files).map(function(e){return Kp(e)})}function KZ(t){return Jd(this,void 0,void 0,function(){var e;return Kd(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return Kp(r)})]}})})}function YZ(t,e){return Jd(this,void 0,void 0,function(){var n,r;return Kd(this,function(i){switch(i.label){case 0:return t.items?(n=qw(t.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(QZ))]):[3,2];case 1:return r=i.sent(),[2,QP(gN(r))];case 2:return[2,QP(qw(t.files).map(function(s){return Kp(s)}))]}})})}function QP(t){return t.filter(function(e){return VZ.indexOf(e.name)===-1})}function qw(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function QZ(t){if(typeof t.webkitGetAsEntry!="function")return qP(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?vN(e):qP(t)}function gN(t){return t.reduce(function(e,n){return YP(YP([],KP(e),!1),KP(Array.isArray(n)?gN(n):[n]),!1)},[])}function qP(t){var e=t.getAsFile();if(!e)return Promise.reject("".concat(t," is not a File"));var n=Kp(e);return Promise.resolve(n)}function qZ(t){return Jd(this,void 0,void 0,function(){return Kd(this,function(e){return[2,t.isDirectory?vN(t):ZZ(t)]})})}function vN(t){var e=t.createReader();return new Promise(function(n,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Jd(o,void 0,void 0,function(){var l,c,d;return Kd(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),n(l),[3,4];case 3:return c=f.sent(),r(c),[3,4];case 4:return[3,6];case 5:d=Promise.all(a.map(qZ)),i.push(d),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function ZZ(t){return Jd(this,void 0,void 0,function(){return Kd(this,function(e){return[2,new Promise(function(n,r){t.file(function(i){var s=Kp(i,t.fullPath);n(s)},function(i){r(i)})})]})})}var eee=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function ZP(t){return ree(t)||nee(t)||xN(t)||tee()}function tee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ree(t){if(Array.isArray(t))return Zw(t)}function eI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eI(Object(n),!0).forEach(function(r){yN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yN(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sp(t,e){return oee(t)||see(t,e)||xN(t,e)||iee()}function iee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xN(t,e){if(t){if(typeof t=="string")return Zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zw(t,e)}}function Zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function see(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function oee(t){if(Array.isArray(t))return t}var aee="file-invalid-type",lee="file-too-large",cee="file-too-small",uee="too-many-files",dee=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:aee,message:"File type must be ".concat(n)}},nI=function(e){return{code:lee,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},rI=function(e){return{code:cee,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},fee={code:uee,message:"Too many files"};function _N(t,e){var n=t.type==="application/x-moz-file"||eee(t,e);return[n,n?null:dee(e)]}function SN(t,e,n){if(Jl(t.size))if(Jl(e)&&Jl(n)){if(t.size>n)return[!1,nI(n)];if(t.size<e)return[!1,rI(e)]}else{if(Jl(e)&&t.size<e)return[!1,rI(e)];if(Jl(n)&&t.size>n)return[!1,nI(n)]}return[!0,null]}function Jl(t){return t!=null}function hee(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,a=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(l){var c=_N(l,n),d=sp(c,1),f=d[0],p=SN(l,r,i),m=sp(p,1),v=m[0],y=a?a(l):null;return f&&v&&!y})}function U0(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function bv(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function iI(t){t.preventDefault()}function pee(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function mee(t){return t.indexOf("Edge/")!==-1}function gee(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return pee(t)||mee(t)}function Ys(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!U0(r)&&a&&a.apply(void 0,[r].concat(s)),U0(r)})}}function vee(){return"showOpenFilePicker"in window}function yee(t){if(Jl(t)){var e=Object.entries(t).filter(function(n){var r=sp(n,2),i=r[0],s=r[1],o=!0;return wN(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(EN))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=sp(r,2),s=i[0],o=i[1];return tI(tI({},n),{},yN({},s,o))},{});return[{description:"Files",accept:e}]}return t}function xee(t){if(Jl(t))return Object.entries(t).reduce(function(e,n){var r=sp(n,2),i=r[0],s=r[1];return[].concat(ZP(e),[i],ZP(s))},[]).filter(function(e){return wN(e)||EN(e)}).join(",")}function _ee(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function See(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function wN(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||/\w+\/[-+.\w]+/g.test(t)}function EN(t){return/^.*\.[\w]+$/.test(t)}var wee=["children"],Eee=["open"],Aee=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],bee=["refKey","onChange","onClick"];function Mee(t){return Ree(t)||Tee(t)||AN(t)||Cee()}function Cee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ree(t){if(Array.isArray(t))return eE(t)}function k_(t,e){return Bee(t)||Iee(t,e)||AN(t,e)||Pee()}function Pee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AN(t,e){if(t){if(typeof t=="string")return eE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eE(t,e)}}function eE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Iee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function Bee(t){if(Array.isArray(t))return t}function sI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sI(Object(n),!0).forEach(function(r){tE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k0(t,e){if(t==null)return{};var n=Dee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dee(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Hy=E.forwardRef(function(t,e){var n=t.children,r=k0(t,wee),i=Fee(r),s=i.open,o=k0(i,Eee);return E.useImperativeHandle(e,function(){return{open:s}},[s]),Rt.createElement(E.Fragment,null,n(An(An({},o),{},{open:s})))});Hy.displayName="Dropzone";var bN={disabled:!1,getFilesFromEvent:WZ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Hy.defaultProps=bN;Hy.propTypes={children:on.func,accept:on.objectOf(on.arrayOf(on.string)),multiple:on.bool,preventDropOnDocument:on.bool,noClick:on.bool,noKeyboard:on.bool,noDrag:on.bool,noDragEventsBubbling:on.bool,minSize:on.number,maxSize:on.number,maxFiles:on.number,disabled:on.bool,getFilesFromEvent:on.func,onFileDialogCancel:on.func,onFileDialogOpen:on.func,useFsAccessApi:on.bool,autoFocus:on.bool,onDragEnter:on.func,onDragLeave:on.func,onDragOver:on.func,onDrop:on.func,onDropAccepted:on.func,onDropRejected:on.func,onError:on.func,validator:on.func};const Lee=Hy;var nE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Fee(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=An(An({},bN),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,d=e.onDragLeave,f=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,y=e.onFileDialogCancel,x=e.onFileDialogOpen,g=e.useFsAccessApi,_=e.autoFocus,w=e.preventDropOnDocument,b=e.noClick,C=e.noKeyboard,T=e.noDrag,P=e.noDragEventsBubbling,B=e.onError,R=e.validator,D=E.useMemo(function(){return xee(n)},[n]),k=E.useMemo(function(){return yee(n)},[n]),X=E.useMemo(function(){return typeof x=="function"?x:oI},[x]),$=E.useMemo(function(){return typeof y=="function"?y:oI},[y]),j=E.useRef(null),H=E.useRef(null),ie=E.useReducer(Oee,nE),Z=k_(ie,2),U=Z[0],O=Z[1],z=U.isFocused,ne=U.isFileDialogActive,J=E.useRef(typeof window<"u"&&window.isSecureContext&&g&&vee()),q=function(){!J.current&&ne&&setTimeout(function(){if(H.current){var ce=H.current.files;ce.length||(O({type:"closeDialog"}),$())}},300)};E.useEffect(function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}},[H,ne,$,J]);var ee=E.useRef([]),_e=function(ce){j.current&&j.current.contains(ce.target)||(ce.preventDefault(),ee.current=[])};E.useEffect(function(){return w&&(document.addEventListener("dragover",iI,!1),document.addEventListener("drop",_e,!1)),function(){w&&(document.removeEventListener("dragover",iI),document.removeEventListener("drop",_e))}},[j,w]),E.useEffect(function(){return!r&&_&&j.current&&j.current.focus(),function(){}},[j,_,r]);var be=E.useCallback(function(Y){B?B(Y):console.error(Y)},[B]),K=E.useCallback(function(Y){Y.preventDefault(),Y.persist(),tt(Y),ee.current=[].concat(Mee(ee.current),[Y.target]),bv(Y)&&Promise.resolve(i(Y)).then(function(ce){if(!(U0(Y)&&!P)){var Se=ce.length,Te=Se>0&&hee({files:ce,accept:D,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:R}),Ke=Se>0&&!Te;O({isDragAccept:Te,isDragReject:Ke,isDragActive:!0,type:"setDraggedFiles"}),c&&c(Y)}}).catch(function(ce){return be(ce)})},[i,c,be,P,D,o,s,a,l,R]),je=E.useCallback(function(Y){Y.preventDefault(),Y.persist(),tt(Y);var ce=bv(Y);if(ce&&Y.dataTransfer)try{Y.dataTransfer.dropEffect="copy"}catch{}return ce&&f&&f(Y),!1},[f,P]),Xe=E.useCallback(function(Y){Y.preventDefault(),Y.persist(),tt(Y);var ce=ee.current.filter(function(Te){return j.current&&j.current.contains(Te)}),Se=ce.indexOf(Y.target);Se!==-1&&ce.splice(Se,1),ee.current=ce,!(ce.length>0)&&(O({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),bv(Y)&&d&&d(Y))},[j,d,P]),Ee=E.useCallback(function(Y,ce){var Se=[],Te=[];Y.forEach(function(Ke){var Ue=_N(Ke,D),ge=k_(Ue,2),Je=ge[0],Q=ge[1],me=SN(Ke,o,s),Ae=k_(me,2),Pe=Ae[0],nt=Ae[1],ut=R?R(Ke):null;if(Je&&Pe&&!ut)Se.push(Ke);else{var $t=[Q,nt];ut&&($t=$t.concat(ut)),Te.push({file:Ke,errors:$t.filter(function(te){return te})})}}),(!a&&Se.length>1||a&&l>=1&&Se.length>l)&&(Se.forEach(function(Ke){Te.push({file:Ke,errors:[fee]})}),Se.splice(0)),O({acceptedFiles:Se,fileRejections:Te,type:"setFiles"}),p&&p(Se,Te,ce),Te.length>0&&v&&v(Te,ce),Se.length>0&&m&&m(Se,ce)},[O,a,D,o,s,l,p,m,v,R]),Me=E.useCallback(function(Y){Y.preventDefault(),Y.persist(),tt(Y),ee.current=[],bv(Y)&&Promise.resolve(i(Y)).then(function(ce){U0(Y)&&!P||Ee(ce,Y)}).catch(function(ce){return be(ce)}),O({type:"reset"})},[i,Ee,be,P]),ve=E.useCallback(function(){if(J.current){O({type:"openDialog"}),X();var Y={multiple:a,types:k};window.showOpenFilePicker(Y).then(function(ce){return i(ce)}).then(function(ce){Ee(ce,null),O({type:"closeDialog"})}).catch(function(ce){_ee(ce)?($(ce),O({type:"closeDialog"})):See(ce)?(J.current=!1,H.current?(H.current.value=null,H.current.click()):be(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):be(ce)});return}H.current&&(O({type:"openDialog"}),X(),H.current.value=null,H.current.click())},[O,X,$,g,Ee,be,k,a]),re=E.useCallback(function(Y){!j.current||!j.current.isEqualNode(Y.target)||(Y.key===" "||Y.key==="Enter"||Y.keyCode===32||Y.keyCode===13)&&(Y.preventDefault(),ve())},[j,ve]),he=E.useCallback(function(){O({type:"focus"})},[]),Fe=E.useCallback(function(){O({type:"blur"})},[]),Be=E.useCallback(function(){b||(gee()?setTimeout(ve,0):ve())},[b,ve]),ke=function(ce){return r?null:ce},Ze=function(ce){return C?null:ke(ce)},ze=function(ce){return T?null:ke(ce)},tt=function(ce){P&&ce.stopPropagation()},ht=E.useMemo(function(){return function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=Y.refKey,Se=ce===void 0?"ref":ce,Te=Y.role,Ke=Y.onKeyDown,Ue=Y.onFocus,ge=Y.onBlur,Je=Y.onClick,Q=Y.onDragEnter,me=Y.onDragOver,Ae=Y.onDragLeave,Pe=Y.onDrop,nt=k0(Y,Aee);return An(An(tE({onKeyDown:Ze(Ys(Ke,re)),onFocus:Ze(Ys(Ue,he)),onBlur:Ze(Ys(ge,Fe)),onClick:ke(Ys(Je,Be)),onDragEnter:ze(Ys(Q,K)),onDragOver:ze(Ys(me,je)),onDragLeave:ze(Ys(Ae,Xe)),onDrop:ze(Ys(Pe,Me)),role:typeof Te=="string"&&Te!==""?Te:"presentation"},Se,j),!r&&!C?{tabIndex:0}:{}),nt)}},[j,re,he,Fe,Be,K,je,Xe,Me,C,T,r]),V=E.useCallback(function(Y){Y.stopPropagation()},[]),N=E.useMemo(function(){return function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=Y.refKey,Se=ce===void 0?"ref":ce,Te=Y.onChange,Ke=Y.onClick,Ue=k0(Y,bee),ge=tE({accept:D,multiple:a,type:"file",style:{display:"none"},onChange:ke(Ys(Te,Me)),onClick:ke(Ys(Ke,V)),tabIndex:-1},Se,H);return An(An({},ge),Ue)}},[H,n,a,Me,r]);return An(An({},U),{},{isFocused:z&&!r,getRootProps:ht,getInputProps:N,rootRef:j,inputRef:H,open:ke(ve)})}function Oee(t,e){switch(e.type){case"focus":return An(An({},t),{},{isFocused:!0});case"blur":return An(An({},t),{},{isFocused:!1});case"openDialog":return An(An({},nE),{},{isFileDialogActive:!0});case"closeDialog":return An(An({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return An(An({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return An(An({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return An({},nE);default:return t}}function oI(){}const Nee=()=>{E.useState(null);const[t,e,n]=$p(i=>[i.setUrl,i.personUploadedImage,i.setPersonUploadedImage]),r=E.useRef(null);return L.jsxs(L.Fragment,{children:[e.length===0&&L.jsx(Lee,{ref:r,maxFiles:1,accept:{"image/*":[".jpeg",".png"]},onDrop:i=>{i.length>0&&(n(URL.createObjectURL(i[0])),t(URL.createObjectURL(i[0])))},children:({getRootProps:i,getInputProps:s})=>L.jsx("section",{children:L.jsxs("div",{className:"flex w-full p-3 h-[200px] flex-col justify-center items-center border-2 border-dashed border-gray-300 bg-gray-200 rounded-md",...i(),children:[L.jsx("input",{...s()}),L.jsx("p",{className:"text-sm text-center text-gray-600",children:"Drag and drop an image from your computer or click here to browse"})]})})}),e&&L.jsxs("div",{className:" flex flex-col justify-center items-center gap-3",children:[L.jsx("div",{children:L.jsx("img",{className:"w-[248px] h-[248px] object-cover",src:e,alt:"uploaded"})}),L.jsx(Or,{onClick:()=>{n(""),t("./bg.jpg")},children:L.jsx("span",{children:"Upload another image"})})]})]})};function MN(t,[e,n]){return Math.min(n,Math.max(e,t))}function ed(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Uee(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function CN(...t){return e=>t.forEach(n=>Uee(n,e))}function el(...t){return E.useCallback(CN(...t),t)}function TN(t,e=[]){let n=[];function r(s,o){const a=E.createContext(o),l=n.length;n=[...n,o];function c(f){const{scope:p,children:m,...v}=f,y=(p==null?void 0:p[t][l])||a,x=E.useMemo(()=>v,Object.values(v));return E.createElement(y.Provider,{value:x},m)}function d(f,p){const m=(p==null?void 0:p[t][l])||a,v=E.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,d]}const i=()=>{const s=n.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,kee(i,...e)]}function kee(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function RN(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function zee({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Hee({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=RN(n),l=E.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else i(c)},[s,t,i,a]);return[o,l]}function Hee({defaultProp:t,onChange:e}){const n=E.useState(t),[r]=n,i=E.useRef(r),s=RN(e);return E.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const Gee=E.createContext(void 0);function $ee(t){const e=E.useContext(Gee);return t||e||"ltr"}function Vee(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const Wee=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{};function jee(t){const[e,n]=E.useState(void 0);return Wee(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const z0=E.forwardRef((t,e)=>{const{children:n,...r}=t,i=E.Children.toArray(n),s=i.find(Jee);if(s){const o=s.props.children,a=i.map(l=>l===s?E.Children.count(o)>1?E.Children.only(null):E.isValidElement(o)?o.props.children:null:l);return E.createElement(rE,Re({},r,{ref:e}),E.isValidElement(o)?E.cloneElement(o,void 0,a):null)}return E.createElement(rE,Re({},r,{ref:e}),n)});z0.displayName="Slot";const rE=E.forwardRef((t,e)=>{const{children:n,...r}=t;return E.isValidElement(n)?E.cloneElement(n,{...Kee(r,n.props),ref:e?CN(e,n.ref):n.ref}):E.Children.count(n)>1?E.Children.only(null):null});rE.displayName="SlotClone";const Xee=({children:t})=>E.createElement(E.Fragment,null,t);function Jee(t){return E.isValidElement(t)&&t.type===Xee}function Kee(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const Yee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gy=Yee.reduce((t,e)=>{const n=E.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?z0:e;return E.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),E.createElement(a,Re({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Qee(t){const e=t+"CollectionProvider",[n,r]=TN(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,x=Rt.useRef(null),g=Rt.useRef(new Map).current;return Rt.createElement(i,{scope:v,itemMap:g,collectionRef:x},y)},a=t+"CollectionSlot",l=Rt.forwardRef((m,v)=>{const{scope:y,children:x}=m,g=s(a,y),_=el(v,g.collectionRef);return Rt.createElement(z0,{ref:_},x)}),c=t+"CollectionItemSlot",d="data-radix-collection-item",f=Rt.forwardRef((m,v)=>{const{scope:y,children:x,...g}=m,_=Rt.useRef(null),w=el(v,_),b=s(c,y);return Rt.useEffect(()=>(b.itemMap.set(_,{ref:_,...g}),()=>void b.itemMap.delete(_))),Rt.createElement(z0,{[d]:"",ref:w},x)});function p(m){const v=s(t+"CollectionConsumer",m);return Rt.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const g=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((b,C)=>g.indexOf(b.ref.current)-g.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},p,r]}const PN=["PageUp","PageDown"],IN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BN={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yp="Slider",[iE,qee,Zee]=Qee(Yp),[DN,sae]=TN(Yp,[Zee]),[ete,$y]=DN(Yp),tte=E.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:m=!1,...v}=t,[y,x]=E.useState(null),g=el(e,j=>x(j)),_=E.useRef(new Set),w=E.useRef(0),b=o==="horizontal",C=y?!!y.closest("form"):!0,T=b?nte:rte,[P=[],B]=zee({prop:d,defaultProp:c,onChange:j=>{var H;(H=[..._.current][w.current])===null||H===void 0||H.focus(),f(j)}}),R=E.useRef(P);function D(j){const H=fte(P,j);$(j,H)}function k(j){$(j,w.current)}function X(){const j=R.current[w.current];P[w.current]!==j&&p(P)}function $(j,H,{commit:ie}={commit:!1}){const Z=gte(s),U=vte(Math.round((j-r)/s)*s+r,Z),O=MN(U,[r,i]);B((z=[])=>{const ne=ute(z,O,H);if(mte(ne,l*s)){w.current=ne.indexOf(O);const J=String(ne)!==String(z);return J&&ie&&p(ne),J?ne:z}else return z})}return E.createElement(ete,{scope:t.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:w,thumbs:_.current,values:P,orientation:o},E.createElement(iE.Provider,{scope:t.__scopeSlider},E.createElement(iE.Slot,{scope:t.__scopeSlider},E.createElement(T,Re({"aria-disabled":a,"data-disabled":a?"":void 0},v,{ref:g,onPointerDown:ed(v.onPointerDown,()=>{a||(R.current=P)}),min:r,max:i,inverted:m,onSlideStart:a?void 0:D,onSlideMove:a?void 0:k,onSlideEnd:a?void 0:X,onHomeKeyDown:()=>!a&&$(r,0,{commit:!0}),onEndKeyDown:()=>!a&&$(i,P.length-1,{commit:!0}),onStepKeyDown:({event:j,direction:H})=>{if(!a){const U=PN.includes(j.key)||j.shiftKey&&IN.includes(j.key)?10:1,O=w.current,z=P[O],ne=s*U*H;$(z+ne,O,{commit:!0})}}})))),C&&P.map((j,H)=>E.createElement(cte,{key:H,name:n?n+(P.length>1?"[]":""):void 0,value:j})))}),[LN,FN]=DN(Yp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),nte=E.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...d}=t,[f,p]=E.useState(null),m=el(e,w=>p(w)),v=E.useRef(),y=$ee(i),x=y==="ltr",g=x&&!s||!x&&s;function _(w){const b=v.current||f.getBoundingClientRect(),C=[0,b.width],P=Nb(C,g?[n,r]:[r,n]);return v.current=b,P(w-b.left)}return E.createElement(LN,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width"},E.createElement(ON,Re({dir:y,"data-orientation":"horizontal"},d,{ref:m,style:{...d.style,["--radix-slider-thumb-transform"]:"translateX(-50%)"},onSlideStart:w=>{const b=_(w.clientX);o==null||o(b)},onSlideMove:w=>{const b=_(w.clientX);a==null||a(b)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:w=>{const C=BN[g?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:C?-1:1})}})))}),rte=E.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,d=E.useRef(null),f=el(e,d),p=E.useRef(),m=!i;function v(y){const x=p.current||d.current.getBoundingClientRect(),g=[0,x.height],w=Nb(g,m?[r,n]:[n,r]);return p.current=x,w(y-x.top)}return E.createElement(LN,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1},E.createElement(ON,Re({"data-orientation":"vertical"},c,{ref:f,style:{...c.style,["--radix-slider-thumb-transform"]:"translateY(50%)"},onSlideStart:y=>{const x=v(y.clientY);s==null||s(x)},onSlideMove:y=>{const x=v(y.clientY);o==null||o(x)},onSlideEnd:()=>{p.current=void 0,a==null||a()},onStepKeyDown:y=>{const g=BN[m?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:g?-1:1})}})))}),ON=E.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,d=$y(Yp,n);return E.createElement(Gy.span,Re({},c,{ref:e,onKeyDown:ed(t.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(a(f),f.preventDefault()):PN.concat(IN).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:ed(t.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(p)?p.focus():r(f)}),onPointerMove:ed(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:ed(t.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),s(f))})}))}),ite="SliderTrack",ste=E.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=$y(ite,n);return E.createElement(Gy.span,Re({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),aI="SliderRange",ote=E.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=$y(aI,n),s=FN(aI,n),o=E.useRef(null),a=el(e,o),l=i.values.length,c=i.values.map(p=>NN(p,i.min,i.max)),d=l>1?Math.min(...c):0,f=100-Math.max(...c);return E.createElement(Gy.span,Re({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:d+"%",[s.endEdge]:f+"%"}}))}),lI="SliderThumb",ate=E.forwardRef((t,e)=>{const n=qee(t.__scopeSlider),[r,i]=E.useState(null),s=el(e,a=>i(a)),o=E.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return E.createElement(lte,Re({},t,{ref:s,index:o}))}),lte=E.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=$y(lI,n),o=FN(lI,n),[a,l]=E.useState(null),c=el(e,x=>l(x)),d=jee(a),f=s.values[r],p=f===void 0?0:NN(f,s.min,s.max),m=dte(r,s.values.length),v=d==null?void 0:d[o.size],y=v?hte(v,p,o.direction):0;return E.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),E.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${p}% + ${y}px)`}},E.createElement(iE.ItemSlot,{scope:t.__scopeSlider},E.createElement(Gy.span,Re({role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":s.min,"aria-valuenow":f,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:c,style:f===void 0?{display:"none"}:t.style,onFocus:ed(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),cte=t=>{const{value:e,...n}=t,r=E.useRef(null),i=Vee(e);return E.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[i,e]),E.createElement("input",Re({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function ute(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function NN(t,e,n){const s=100/(n-e)*(t-e);return MN(s,[0,100])}function dte(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function fte(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function hte(t,e,n){const r=t/2,s=Nb([0,50],[0,r]);return(r-s(e)*n)*n}function pte(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function mte(t,e){if(e>0){const n=pte(t);return Math.min(...n)>=e}return!0}function Nb(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function gte(t){return(String(t).split(".")[1]||"").length}function vte(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const UN=tte,yte=ste,xte=ote,_te=ate,Ub=E.forwardRef(({className:t,...e},n)=>L.jsxs(UN,{ref:n,className:Lt("relative flex w-full touch-none select-none items-center",t),...e,children:[L.jsx(yte,{className:"relative h-2 w-full grow overflow-hidden border border-gray-300 rounded-full bg-secondary",children:L.jsx(xte,{className:"absolute h-full bg-primarypink"})}),L.jsx(_te,{className:"text-center text-xs text-white block h-8 w-8 rounded-full border-2 border-primarypink bg-primarypink ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:L.jsx("p",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 font-bold touch-none select-none",children:e.value})})]}));Ub.displayName=UN.displayName;const Ste=t=>[t.setUrl,t.setScale,t.scale,t.url,t.setPersonUploadedImage],cI=["pick-from-catalog","upload-your-image"],wte=()=>{const[t,e,n,r,i]=$p(Ste);return L.jsxs("div",{className:"flex flex-col gap-3 p-6 justify-center items-center overflow-hidden",children:[L.jsxs("div",{className:"flex self-start justify-around w-full ",children:[L.jsx("div",{className:"flex flex-col",children:L.jsx("h1",{className:"self-start text-2xl font-bold text-primarypink",children:"Background"})}),L.jsxs("button",{className:"flex text-sm items-center self-start mt-2 gap-2 ml-auto",onClick:()=>{t("./bg.jpg"),i("")},children:["Clear background",L.jsx(yb,{height:14,width:14})]})]}),r!=="./bg.jpg"&&L.jsxs("div",{className:"flex flex-col w-full gap-3 mb-3",children:[L.jsx("h1",{className:"text-xl font-bold",children:"Scale:"}),L.jsx(Ub,{min:.1,max:2,step:.1,value:[n],onValueChange:s=>e(s[0])})]}),L.jsxs(QO,{defaultValue:"pick-from-catalog",className:"w-full",children:[L.jsx(Db,{className:"mb-3",children:cI.map(s=>L.jsx(Lb,{className:"capitalize",value:s,children:s.replace(/-/g," ")},s))}),cI.map(s=>L.jsxs(Fb,{className:"flex flex-col w-[calc(100%-8px)]",value:s,children:[s==="pick-from-catalog"&&L.jsx(HZ,{}),s==="upload-your-image"&&L.jsx(Nee,{})]},s))]})]})};var kb=qp(),vt=t=>Qp(t,kb),zb=qp();vt.write=t=>Qp(t,zb);var Vy=qp();vt.onStart=t=>Qp(t,Vy);var Hb=qp();vt.onFrame=t=>Qp(t,Hb);var Gb=qp();vt.onFinish=t=>Qp(t,Gb);var fd=[];vt.setTimeout=(t,e)=>{let n=vt.now()+e,r=()=>{let s=fd.findIndex(o=>o.cancel==r);~s&&fd.splice(s,1),Pa-=~s?1:0},i={time:n,handler:t,cancel:r};return fd.splice(kN(n),0,i),Pa+=1,zN(),i};var kN=t=>~(~fd.findIndex(e=>e.time>t)||~fd.length);vt.cancel=t=>{Vy.delete(t),Hb.delete(t),Gb.delete(t),kb.delete(t),zb.delete(t)};vt.sync=t=>{sE=!0,vt.batchedUpdates(t),sE=!1};vt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,vt.onStart(n)}return r.handler=t,r.cancel=()=>{Vy.delete(n),e=null},r};var $b=typeof window<"u"?window.requestAnimationFrame:()=>{};vt.use=t=>$b=t;vt.now=typeof performance<"u"?()=>performance.now():Date.now;vt.batchedUpdates=t=>t();vt.catch=console.error;vt.frameLoop="always";vt.advance=()=>{vt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):GN()};var Ra=-1,Pa=0,sE=!1;function Qp(t,e){sE?(e.delete(t),t(0)):(e.add(t),zN())}function zN(){Ra<0&&(Ra=0,vt.frameLoop!=="demand"&&$b(HN))}function Ete(){Ra=-1}function HN(){~Ra&&($b(HN),vt.batchedUpdates(GN))}function GN(){let t=Ra;Ra=vt.now();let e=kN(Ra);if(e&&($N(fd.splice(0,e),n=>n.handler()),Pa-=e),!Pa){Ete();return}Vy.flush(),kb.flush(t?Math.min(64,Ra-t):16.667),Hb.flush(),zb.flush(),Gb.flush()}function qp(){let t=new Set,e=t;return{add(n){Pa+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Pa-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Pa-=e.size,$N(e,r=>r(n)&&t.add(r)),Pa+=t.size,e=t)}}}function $N(t,e){t.forEach(n=>{try{e(n)}catch(r){vt.catch(r)}})}var Ate=Object.defineProperty,bte=(t,e)=>{for(var n in e)Ate(t,n,{get:e[n],enumerable:!0})},Fs={};bte(Fs,{assign:()=>Cte,colors:()=>$a,createStringInterpolator:()=>Wb,skipAnimation:()=>WN,to:()=>VN,willAdvance:()=>jb});function oE(){}var Mte=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Le={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Co(t,e){if(Le.arr(t)){if(!Le.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Ot=(t,e)=>t.forEach(e);function ao(t,e,n){if(Le.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Ri=t=>Le.und(t)?[]:Le.arr(t)?t:[t];function Sh(t,e){if(t.size){let n=Array.from(t);t.clear(),Ot(n,e)}}var sh=(t,...e)=>Sh(t,n=>n(...e)),Vb=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Wb,VN,$a=null,WN=!1,jb=oE,Cte=t=>{t.to&&(VN=t.to),t.now&&(vt.now=t.now),t.colors!==void 0&&($a=t.colors),t.skipAnimation!=null&&(WN=t.skipAnimation),t.createStringInterpolator&&(Wb=t.createStringInterpolator),t.requestAnimationFrame&&vt.use(t.requestAnimationFrame),t.batchedUpdates&&(vt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(jb=t.willAdvance),t.frameLoop&&(vt.frameLoop=t.frameLoop)},wh=new Set,ts=[],z_=[],H0=0,Wy={get idle(){return!wh.size&&!ts.length},start(t){H0>t.priority?(wh.add(t),vt.onStart(Tte)):(jN(t),vt(aE))},advance:aE,sort(t){if(H0)vt.onFrame(()=>Wy.sort(t));else{let e=ts.indexOf(t);~e&&(ts.splice(e,1),XN(t))}},clear(){ts=[],wh.clear()}};function Tte(){wh.forEach(jN),wh.clear(),vt(aE)}function jN(t){ts.includes(t)||XN(t)}function XN(t){ts.splice(Rte(ts,e=>e.priority>t.priority),0,t)}function aE(t){let e=z_;for(let n=0;n<ts.length;n++){let r=ts[n];H0=r.priority,r.idle||(jb(r),r.advance(t),r.idle||e.push(r))}return H0=0,z_=ts,z_.length=0,ts=e,ts.length>0}function Rte(t,e){let n=t.findIndex(e);return n<0?t.length:n}var Pte=(t,e,n)=>Math.min(Math.max(n,t),e),Ite={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ms="[-+]?\\d*\\.?\\d+",G0=Ms+"%";function jy(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Bte=new RegExp("rgb"+jy(Ms,Ms,Ms)),Dte=new RegExp("rgba"+jy(Ms,Ms,Ms,Ms)),Lte=new RegExp("hsl"+jy(Ms,G0,G0)),Fte=new RegExp("hsla"+jy(Ms,G0,G0,Ms)),Ote=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Nte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ute=/^#([0-9a-fA-F]{6})$/,kte=/^#([0-9a-fA-F]{8})$/;function zte(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Ute.exec(t))?parseInt(e[1]+"ff",16)>>>0:$a&&$a[t]!==void 0?$a[t]:(e=Bte.exec(t))?(Cu(e[1])<<24|Cu(e[2])<<16|Cu(e[3])<<8|255)>>>0:(e=Dte.exec(t))?(Cu(e[1])<<24|Cu(e[2])<<16|Cu(e[3])<<8|fI(e[4]))>>>0:(e=Ote.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=kte.exec(t))?parseInt(e[1],16)>>>0:(e=Nte.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Lte.exec(t))?(uI(dI(e[1]),Mv(e[2]),Mv(e[3]))|255)>>>0:(e=Fte.exec(t))?(uI(dI(e[1]),Mv(e[2]),Mv(e[3]))|fI(e[4]))>>>0:null}function H_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function uI(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=H_(i,r,t+1/3),o=H_(i,r,t),a=H_(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Cu(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function dI(t){return(parseFloat(t)%360+360)%360/360}function fI(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Mv(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function hI(t){let e=zte(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var op=(t,e,n)=>{if(Le.fun(t))return t;if(Le.arr(t))return op({range:t,output:e,extrapolate:n});if(Le.str(t.output[0]))return Wb(t);let r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{let d=Gte(c,s);return Hte(c,s[d],s[d+1],i[d],i[d+1],l,o,a,r.map)}};function Hte(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function Gte(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var $te=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return Pte(0,1,i/t)},$0=1.70158,Cv=$0*1.525,pI=$0+1,mI=2*Math.PI/3,gI=2*Math.PI/4.5,Tv=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Vte={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>pI*t*t*t-$0*t*t,easeOutBack:t=>1+pI*Math.pow(t-1,3)+$0*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Cv+1)*2*t-Cv)/2:(Math.pow(2*t-2,2)*((Cv+1)*(t*2-2)+Cv)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*mI),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*mI)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*gI))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*gI)/2+1,easeInBounce:t=>1-Tv(1-t),easeOutBounce:Tv,easeInOutBounce:t=>t<.5?(1-Tv(1-2*t))/2:(1+Tv(2*t-1))/2,steps:$te},Ld=Symbol.for("FluidValue.get"),Ec=Symbol.for("FluidValue.observers"),es=t=>!!(t&&t[Ld]),si=t=>t&&t[Ld]?t[Ld]():t,vI=t=>t[Ec]||null;function Wte(t,e){t.eventObserved?t.eventObserved(e):t(e)}function ap(t,e){let n=t[Ec];n&&n.forEach(r=>{Wte(r,e)})}var Woe,joe,gB,JN=(gB=class{constructor(e){Ye(this,Woe);Ye(this,joe);if(!e&&!(e=this.get))throw Error("Unknown getter");jte(this,e)}},Woe=Ld,joe=Ec,gB),jte=(t,e)=>KN(t,Ld,e);function Yd(t,e){if(t[Ld]){let n=t[Ec];n||KN(t,Ec,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function lp(t,e){let n=t[Ec];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[Ec]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var KN=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),r0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Xte=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,yI=new RegExp(`(${r0.source})(%|[a-z]+)`,"i"),Jte=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Xy=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,YN=t=>{let[e,n]=Kte(t);if(!e||Vb())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&Xy.test(n)?YN(n):n||t},Kte=t=>{let e=Xy.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},G_,Yte=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,QN=t=>{G_||(G_=$a?new RegExp(`(${Object.keys($a).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(i=>si(i).replace(Xy,YN).replace(Xte,hI).replace(G_,hI)),n=e.map(i=>i.match(r0).map(Number)),r=n[0].map((i,s)=>n.map(o=>{if(!(s in o))throw Error('The arity of each "output" value must be equal');return o[s]})).map(i=>op({...t,output:i}));return i=>{var a;let s=!yI.test(e[0])&&((a=e.find(l=>yI.test(l)))==null?void 0:a.replace(r0,"")),o=0;return e[0].replace(r0,()=>`${r[o++](i)}${s||""}`).replace(Jte,Yte)}},Xb="react-spring: ",qN=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${Xb}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Qte=qN(console.warn);function qte(){Qte(`${Xb}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Zte=qN(console.warn);function ene(){Zte(`${Xb}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Jy(t){return Le.str(t)&&(t[0]=="#"||/\d/.test(t)||!Vb()&&Xy.test(t)||t in($a||{}))}var Jb=Vb()?E.useEffect:E.useLayoutEffect,tne=()=>{let t=E.useRef(!1);return Jb(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function ZN(){let t=E.useState()[1],e=tne();return()=>{e.current&&t(Math.random())}}function nne(t,e){let[n]=E.useState(()=>({inputs:e,result:t()})),r=E.useRef(),i=r.current,s=i;return s?e&&s.inputs&&rne(e,s.inputs)||(s={inputs:e,result:t()}):s=n,E.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function rne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var eU=t=>E.useEffect(t,ine),ine=[];function xI(t){let e=E.useRef();return E.useEffect(()=>{e.current=t}),e.current}var cp=Symbol.for("Animated:node"),sne=t=>!!t&&t[cp]===t,qs=t=>t&&t[cp],Kb=(t,e)=>Mte(t,cp,e),Ky=t=>t&&t[cp]&&t[cp].getPayload(),tU=class{constructor(){Ye(this,"payload");Kb(this,this)}getPayload(){return this.payload||[]}},Zp=class extends tU{constructor(n){super();Ye(this,"done",!0);Ye(this,"elapsedTime");Ye(this,"lastPosition");Ye(this,"lastVelocity");Ye(this,"v0");Ye(this,"durationProgress",0);this._value=n,Le.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new Zp(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,r){return Le.num(n)&&(this.lastPosition=n,r&&(n=Math.round(n/r)*r,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){let{done:n}=this;this.done=!1,Le.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},up=class extends Zp{constructor(n){super(0);Ye(this,"_string",null);Ye(this,"_toString");this._toString=op({output:[n,n]})}static create(n){return new up(n)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(n){if(Le.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=op({output:[this.getValue(),n]})),this._value=0,super.reset()}},V0={dependencies:null},Yy=class extends tU{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let n={};return ao(this.source,(r,i)=>{sne(r)?n[i]=r.getValue(e):es(r)?n[i]=si(r):e||(n[i]=r)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Ot(this.payload,e=>e.reset())}_makePayload(e){if(e){let n=new Set;return ao(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){V0.dependencies&&es(e)&&V0.dependencies.add(e);let n=Ky(e);n&&Ot(n,r=>this.add(r))}},nU=class extends Yy{constructor(e){super(e)}static create(e){return new nU(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let n=this.getPayload();return e.length==n.length?n.map((r,i)=>r.setValue(e[i])).some(Boolean):(super.setValue(e.map(one)),!0)}};function one(t){return(Jy(t)?up:Zp).create(t)}function lE(t){let e=qs(t);return e?e.constructor:Le.arr(t)?nU:Jy(t)?up:Zp}var _I=(t,e)=>{let n=!Le.fun(t)||t.prototype&&t.prototype.isReactComponent;return E.forwardRef((r,i)=>{let s=E.useRef(null),o=n&&E.useCallback(v=>{s.current=cne(i,v)},[i]),[a,l]=lne(r,e),c=ZN(),d=()=>{let v=s.current;n&&!v||(v?e.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&c()},f=new ane(d,l),p=E.useRef();Jb(()=>(p.current=f,Ot(l,v=>Yd(v,f)),()=>{p.current&&(Ot(p.current.deps,v=>lp(v,p.current)),vt.cancel(p.current.update))})),E.useEffect(d,[]),eU(()=>()=>{let v=p.current;Ot(v.deps,y=>lp(y,v))});let m=e.getComponentProps(a.getValue());return E.createElement(t,{...m,ref:o})})},ane=class{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&vt.write(this.update)}};function lne(t,e){let n=new Set;return V0.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Yy(t),V0.dependencies=null,[t,n]}function cne(t,e){return t&&(Le.fun(t)?t(e):t.current=e),e}var SI=Symbol.for("AnimatedComponent"),une=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new Yy(i),getComponentProps:r=i=>i}={})=>{let i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{let a=wI(o)||"Anonymous";return Le.str(o)?o=s[o]||(s[o]=_I(o,i)):o=o[SI]||(o[SI]=_I(o,i)),o.displayName=`Animated(${a})`,o};return ao(t,(o,a)=>{Le.arr(t)&&(a=wI(o)),s[a]=s(o)}),{animated:s}},wI=t=>Le.str(t)?t:t&&Le.str(t.displayName)?t.displayName:Le.fun(t)&&t.name||null;function Kl(t,...e){return Le.fun(t)?t(...e):t}var Eh=(t,e)=>t===!0||!!(e&&t&&(Le.fun(t)?t(e):Ri(t).includes(e))),rU=(t,e)=>Le.obj(t)?e&&t[e]:t,iU=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,dne=t=>t,Yb=(t,e=dne)=>{let n=fne;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));let r={};for(let i of n){let s=e(t[i],i);Le.und(s)||(r[i]=s)}return r},fne=["config","onProps","onStart","onChange","onPause","onResume","onRest"],hne={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function pne(t){let e={},n=0;if(ao(t,(r,i)=>{hne[i]||(e[i]=r,n++)}),n)return e}function sU(t){let e=pne(t);if(e){let n={to:e};return ao(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function dp(t){return t=si(t),Le.arr(t)?t.map(dp):Jy(t)?Fs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function mne(t){for(let e in t)return!0;return!1}function cE(t){return Le.fun(t)||Le.arr(t)&&Le.obj(t[0])}function gne(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function vne(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var yne={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},uE={...yne.default,mass:1,damping:1,easing:Vte.linear,clamp:!1},xne=class{constructor(){Ye(this,"tension");Ye(this,"friction");Ye(this,"frequency");Ye(this,"damping");Ye(this,"mass");Ye(this,"velocity",0);Ye(this,"restVelocity");Ye(this,"precision");Ye(this,"progress");Ye(this,"duration");Ye(this,"easing");Ye(this,"clamp");Ye(this,"bounce");Ye(this,"decay");Ye(this,"round");Object.assign(this,uE)}};function _ne(t,e,n){n&&(n={...n},EI(n,e),e={...n,...e}),EI(t,e),Object.assign(t,e);for(let o in uE)t[o]==null&&(t[o]=uE[o]);let{frequency:r,damping:i}=t,{mass:s}=t;return Le.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function EI(t,e){if(!Le.und(e.decay))t.duration=void 0;else{let n=!Le.und(e.tension)||!Le.und(e.friction);(n||!Le.und(e.frequency)||!Le.und(e.damping)||!Le.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var AI=[],Sne=class{constructor(){Ye(this,"changed",!1);Ye(this,"values",AI);Ye(this,"toValues",null);Ye(this,"fromValues",AI);Ye(this,"to");Ye(this,"from");Ye(this,"config",new xne);Ye(this,"immediate",!1)}};function oU(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,d=Eh(n.cancel??(r==null?void 0:r.cancel),e);if(d)m();else{Le.und(n.pause)||(i.paused=Eh(n.pause,e));let v=r==null?void 0:r.pause;v!==!0&&(v=i.paused||Eh(v,e)),l=Kl(n.delay||0,e),v?(i.resumeQueue.add(p),s.pause()):(s.resume(),p())}function f(){i.resumeQueue.add(p),i.timeouts.delete(c),c.cancel(),l=c.time-vt.now()}function p(){l>0&&!Fs.skipAnimation?(i.delayed=!0,c=vt.setTimeout(m,l),i.pauseQueue.add(f),i.timeouts.add(c)):m()}function m(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(c),t<=(i.cancelId||0)&&(d=!0);try{s.start({...n,callId:t,cancel:d},o)}catch(v){a(v)}}})}var Qb=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?hd(t.get()):e.every(n=>n.noop)?aU(t.get()):As(t.get(),e.every(n=>n.finished)),aU=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),As=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),hd=t=>({value:t,cancelled:!0,finished:!1});function lU(t,e,n,r){let{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;let c=Yb(e,(x,g)=>g==="onRest"?void 0:x),d,f,p=new Promise((x,g)=>(d=x,f=g)),m=x=>{let g=i<=(n.cancelId||0)&&hd(r)||i!==n.asyncId&&As(r,!1);if(g)throw x.result=g,f(x),x},v=(x,g)=>{let _=new bI,w=new MI;return(async()=>{if(Fs.skipAnimation)throw fp(n),w.result=As(r,!1),f(w),w;m(_);let b=Le.obj(x)?{...x}:{...g,to:x};b.parentId=i,ao(c,(T,P)=>{Le.und(b[P])&&(b[P]=T)});let C=await r.start(b);return m(_),n.paused&&await new Promise(T=>{n.resumeQueue.add(T)}),C})()},y;if(Fs.skipAnimation)return fp(n),As(r,!1);try{let x;Le.arr(t)?x=(async g=>{for(let _ of g)await v(_)})(t):x=Promise.resolve(t(v,r.stop.bind(r))),await Promise.all([x.then(d),p]),y=As(r.get(),!0,!1)}catch(x){if(x instanceof bI)y=x.result;else if(x instanceof MI)y=x.result;else throw x}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Le.fun(o)&&vt.batchedUpdates(()=>{o(y,r,r.item)}),y})()}function fp(t,e){Sh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var bI=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");Ye(this,"result")}},MI=class extends Error{constructor(){super("SkipAnimationSignal");Ye(this,"result")}},dE=t=>t instanceof qb,wne=1,qb=class extends JN{constructor(){super(...arguments);Ye(this,"id",wne++);Ye(this,"_priority",0)}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=qs(this);return e&&e.getValue()}to(...e){return Fs.to(this,e)}interpolate(...e){return qte(),Fs.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){ap(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||Wy.sort(this),ap(this,{type:"priority",parent:this,priority:e})}},Ac=Symbol.for("SpringPhase"),cU=1,fE=2,hE=4,$_=t=>(t[Ac]&cU)>0,va=t=>(t[Ac]&fE)>0,Kf=t=>(t[Ac]&hE)>0,CI=(t,e)=>e?t[Ac]|=fE|cU:t[Ac]&=~fE,TI=(t,e)=>e?t[Ac]|=hE:t[Ac]&=~hE,Ene=class extends qb{constructor(n,r){super();Ye(this,"key");Ye(this,"animation",new Sne);Ye(this,"queue");Ye(this,"defaultProps",{});Ye(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});Ye(this,"_pendingCalls",new Set);Ye(this,"_lastCallId",0);Ye(this,"_lastToId",0);Ye(this,"_memoizedDuration",0);if(!Le.und(n)||!Le.und(r)){let i=Le.obj(n)?{...n}:{...r,from:n};Le.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(va(this)||this._state.asyncTo)||Kf(this)}get goal(){return si(this.animation.to)}get velocity(){let n=qs(this);return n instanceof Zp?n.lastVelocity||0:n.getPayload().map(r=>r.lastVelocity||0)}get hasAnimated(){return $_(this)}get isAnimating(){return va(this)}get isPaused(){return Kf(this)}get isDelayed(){return this._state.delayed}advance(n){let r=!0,i=!1,s=this.animation,{toValues:o}=s,{config:a}=s,l=Ky(s.to);!l&&es(s.to)&&(o=Ri(si(s.to))),s.values.forEach((f,p)=>{if(f.done)return;let m=f.constructor==up?1:l?l[p].lastPosition:o[p],v=s.immediate,y=m;if(!v){if(y=f.lastPosition,a.tension<=0){f.done=!0;return}let x=f.elapsedTime+=n,g=s.fromValues[p],_=f.v0!=null?f.v0:f.v0=Le.arr(a.velocity)?a.velocity[p]:a.velocity,w,b=a.precision||(g==m?.005:Math.min(1,Math.abs(m-g)*.001));if(Le.und(a.duration))if(a.decay){let C=a.decay===!0?.998:a.decay,T=Math.exp(-(1-C)*x);y=g+_/(1-C)*(1-T),v=Math.abs(f.lastPosition-y)<=b,w=_*T}else{w=f.lastVelocity==null?_:f.lastVelocity;let C=a.restVelocity||b/10,T=a.clamp?0:a.bounce,P=!Le.und(T),B=g==m?f.v0>0:g<m,R,D=!1,k=1,X=Math.ceil(n/k);for(let $=0;$<X&&(R=Math.abs(w)>C,!(!R&&(v=Math.abs(m-y)<=b,v)));++$){P&&(D=y==m||y>m==B,D&&(w=-w*T,y=m));let j=-a.tension*1e-6*(y-m),H=-a.friction*.001*w,ie=(j+H)/a.mass;w=w+ie*k,y=y+w*k}}else{let C=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,f.durationProgress>0&&(f.elapsedTime=a.duration*f.durationProgress,x=f.elapsedTime+=n)),C=(a.progress||0)+x/this._memoizedDuration,C=C>1?1:C<0?0:C,f.durationProgress=C),y=g+a.easing(C)*(m-g),w=(y-f.lastPosition)/n,v=C==1}f.lastVelocity=w,Number.isNaN(y)&&(console.warn("Got NaN while animating:",this),v=!0)}l&&!l[p].done&&(v=!1),v?f.done=!0:r=!1,f.setValue(y,a.round)&&(i=!0)});let c=qs(this),d=c.getValue();if(r){let f=si(s.to);(d!==f||i)&&!a.decay?(c.setValue(f),this._onChange(f)):i&&a.decay&&this._onChange(d),this._stop()}else i&&this._onChange(d)}set(n){return vt.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(va(this)){let{to:n,config:r}=this.animation;vt.batchedUpdates(()=>{this._onStart(),r.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,r){let i;return Le.und(n)?(i=this.queue||[],this.queue=[]):i=[Le.obj(n)?n:{...r,to:n}],Promise.all(i.map(s=>this._update(s))).then(s=>Qb(this,s))}stop(n){let{to:r}=this.animation;return this._focus(this.get()),fp(this._state,n&&this._lastCallId),vt.batchedUpdates(()=>this._stop(r,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){let r=this.key||"",{to:i,from:s}=n;i=Le.obj(i)?i[r]:i,(i==null||cE(i))&&(i=void 0),s=Le.obj(s)?s[r]:s,s==null&&(s=void 0);let o={to:i,from:s};return $_(this)||(n.reverse&&([i,s]=[s,i]),s=si(s),Le.und(s)?qs(this)||this._set(i):this._set(s)),o}_update({...n},r){let{key:i,defaultProps:s}=this;n.default&&Object.assign(s,Yb(n,(l,c)=>/^on/.test(c)?rU(l,i):l)),PI(this,n,"onProps"),Qf(this,"onProps",n,this);let o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let a=this._state;return oU(++this._lastCallId,{key:i,props:n,defaultProps:s,state:a,actions:{pause:()=>{Kf(this)||(TI(this,!0),sh(a.pauseQueue),Qf(this,"onPause",As(this,Yf(this,this.animation.to)),this))},resume:()=>{Kf(this)&&(TI(this,!1),va(this)&&this._resume(),sh(a.resumeQueue),Qf(this,"onResume",As(this,Yf(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(n.loop&&l.finished&&!(r&&l.noop)){let c=uU(n);if(c)return this._update(c,!0)}return l})}_merge(n,r,i){if(r.cancel)return this.stop(!0),i(hd(this));let s=!Le.und(n.to),o=!Le.und(n.from);if(s||o)if(r.callId>this._lastToId)this._lastToId=r.callId;else return i(hd(this));let{key:a,defaultProps:l,animation:c}=this,{to:d,from:f}=c,{to:p=d,from:m=f}=n;o&&!s&&(!r.default||Le.und(p))&&(p=m),r.reverse&&([p,m]=[m,p]);let v=!Co(m,f);v&&(c.from=m),m=si(m);let y=!Co(p,d);y&&this._focus(p);let x=cE(r.to),{config:g}=c,{decay:_,velocity:w}=g;(s||o)&&(g.velocity=0),r.config&&!x&&_ne(g,Kl(r.config,a),r.config!==l.config?Kl(l.config,a):void 0);let b=qs(this);if(!b||Le.und(p))return i(As(this,!0));let C=Le.und(r.reset)?o&&!r.default:!Le.und(m)&&Eh(r.reset,a),T=C?m:this.get(),P=dp(p),B=Le.num(P)||Le.arr(P)||Jy(P),R=!x&&(!B||Eh(l.immediate||r.immediate,a));if(y){let $=lE(p);if($!==b.constructor)if(R)b=this._set(P);else throw Error(`Cannot animate between ${b.constructor.name} and ${$.name}, as the "to" prop suggests`)}let D=b.constructor,k=es(p),X=!1;if(!k){let $=C||!$_(this)&&v;(y||$)&&(X=Co(dp(T),P),k=!X),(!Co(c.immediate,R)&&!R||!Co(g.decay,_)||!Co(g.velocity,w))&&(k=!0)}if(X&&va(this)&&(c.changed&&!C?k=!0:k||this._stop(d)),!x&&((k||es(d))&&(c.values=b.getPayload(),c.toValues=es(p)?null:D==up?[1]:Ri(P)),c.immediate!=R&&(c.immediate=R,!R&&!C&&this._set(d)),k)){let{onRest:$}=c;Ot(bne,H=>PI(this,r,H));let j=As(this,Yf(this,d));sh(this._pendingCalls,j),this._pendingCalls.add(i),c.changed&&vt.batchedUpdates(()=>{var H;c.changed=!C,$==null||$(j,this),C?Kl(l.onRest,j):(H=c.onStart)==null||H.call(c,j,this)})}C&&this._set(T),x?i(lU(r.to,r,this._state,this)):k?this._start():va(this)&&!y?this._pendingCalls.add(i):i(aU(T))}_focus(n){let r=this.animation;n!==r.to&&(vI(this)&&this._detach(),r.to=n,vI(this)&&this._attach())}_attach(){let n=0,{to:r}=this.animation;es(r)&&(Yd(r,this),dE(r)&&(n=r.priority+1)),this.priority=n}_detach(){let{to:n}=this.animation;es(n)&&lp(n,this)}_set(n,r=!0){let i=si(n);if(!Le.und(i)){let s=qs(this);if(!s||!Co(i,s.getValue())){let o=lE(i);!s||s.constructor!=o?Kb(this,o.create(i)):s.setValue(i),s&&vt.batchedUpdates(()=>{this._onChange(i,r)})}}return qs(this)}_onStart(){let n=this.animation;n.changed||(n.changed=!0,Qf(this,"onStart",As(this,Yf(this,n.to)),this))}_onChange(n,r){r||(this._onStart(),Kl(this.animation.onChange,n,this)),Kl(this.defaultProps.onChange,n,this),super._onChange(n,r)}_start(){let n=this.animation;qs(this).reset(si(n.to)),n.immediate||(n.fromValues=n.values.map(r=>r.lastPosition)),va(this)||(CI(this,!0),Kf(this)||this._resume())}_resume(){Fs.skipAnimation?this.finish():Wy.start(this)}_stop(n,r){if(va(this)){CI(this,!1);let i=this.animation;Ot(i.values,o=>{o.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),ap(this,{type:"idle",parent:this});let s=r?hd(this.get()):As(this.get(),Yf(this,n??i.to));sh(this._pendingCalls,s),i.changed&&(i.changed=!1,Qf(this,"onRest",s,this))}}};function Yf(t,e){let n=dp(e),r=dp(t.get());return Co(r,n)}function uU(t,e=t.loop,n=t.to){let r=Kl(e);if(r){let i=r!==!0&&sU(r),s=(i||t).reverse,o=!i||i.reset;return hp({...t,loop:e,default:!1,pause:void 0,to:!s||cE(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function hp(t){let{to:e,from:n}=t=sU(t),r=new Set;return Le.obj(e)&&RI(e,r),Le.obj(n)&&RI(n,r),t.keys=r.size?Array.from(r):null,t}function Ane(t){let e=hp(t);return Le.und(e.default)&&(e.default=Yb(e)),e}function RI(t,e){ao(t,(n,r)=>n!=null&&e.add(r))}var bne=["onStart","onRest","onChange","onPause","onResume"];function PI(t,e,n){t.animation[n]=e[n]!==iU(e,n)?rU(e[n],t.key):void 0}function Qf(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var Mne=["onStart","onChange","onRest"],Cne=1,Tne=class{constructor(e,n){Ye(this,"id",Cne++);Ye(this,"springs",{});Ye(this,"queue",[]);Ye(this,"ref");Ye(this,"_flush");Ye(this,"_initialProps");Ye(this,"_lastAsyncId",0);Ye(this,"_active",new Set);Ye(this,"_changed",new Set);Ye(this,"_started",!1);Ye(this,"_item");Ye(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});Ye(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((n,r)=>e[r]=n.get()),e}set(e){for(let n in e){let r=e[n];Le.und(r)||this.springs[n].set(r)}}update(e){return e&&this.queue.push(hp(e)),this}start(e){let{queue:n}=this;return e?n=Ri(e).map(hp):this.queue=[],this._flush?this._flush(this,n):(mU(this,n),pE(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){let r=this.springs;Ot(Ri(n),i=>r[i].stop(!!e))}else fp(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(Le.und(e))this.start({pause:!0});else{let n=this.springs;Ot(Ri(e),r=>n[r].pause())}return this}resume(e){if(Le.und(e))this.start({pause:!1});else{let n=this.springs;Ot(Ri(e),r=>n[r].resume())}return this}each(e){ao(this.springs,e)}_onFrame(){let{onStart:e,onChange:n,onRest:r}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,Sh(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));let o=!i&&this._started,a=s||o&&r.size?this.get():null;s&&n.size&&Sh(n,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,Sh(r,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;vt.onFrame(this._onFrame)}};function pE(t,e){return Promise.all(e.map(n=>dU(t,n))).then(n=>Qb(t,n))}async function dU(t,e,n){let{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,c=Le.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);let d=Le.arr(i)||Le.fun(i)?i:void 0;d?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Ot(Mne,y=>{let x=e[y];if(Le.fun(x)){let g=t._events[y];e[y]=({finished:_,cancelled:w})=>{let b=g.get(x);b?(_||(b.finished=!1),w&&(b.cancelled=!0)):g.set(x,{value:null,finished:_||!1,cancelled:w||!1})},c&&(c[y]=e[y])}});let f=t._state;e.pause===!f.paused?(f.paused=e.pause,sh(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);let p=(r||Object.keys(t.springs)).map(y=>t.springs[y].start(e)),m=e.cancel===!0||iU(e,"cancel")===!0;(d||m&&f.asyncId)&&p.push(oU(++t._lastAsyncId,{props:e,state:f,actions:{pause:oE,resume:oE,start(y,x){m?(fp(f,t._lastAsyncId),x(hd(t))):(y.onRest=a,x(lU(d,y,f,t)))}}})),f.paused&&await new Promise(y=>{f.resumeQueue.add(y)});let v=Qb(t,await Promise.all(p));if(o&&v.finished&&!(n&&v.noop)){let y=uU(e,o,i);if(y)return mU(t,[y]),dU(t,y,!0)}return l&&vt.batchedUpdates(()=>l(v,t,t.item)),v}function II(t,e){let n={...t.springs};return e&&Ot(Ri(e),r=>{Le.und(r.keys)&&(r=hp(r)),Le.obj(r.to)||(r={...r,to:void 0}),pU(n,r,i=>hU(i))}),fU(t,n),n}function fU(t,e){ao(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,Yd(n,t))})}function hU(t,e){let n=new Ene;return n.key=t,e&&Yd(n,e),n}function pU(t,e,n){e.keys&&Ot(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function mU(t,e){Ot(e,n=>{pU(t.springs,n,r=>hU(r,t))})}var Qy=({children:t,...e})=>{let n=E.useContext(W0),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=nne(()=>({pause:r,immediate:i}),[r,i]);let{Provider:s}=W0;return E.createElement(s,{value:e},t)},W0=Rne(Qy,{});Qy.Provider=W0.Provider;Qy.Consumer=W0.Consumer;function Rne(t,e){return Object.assign(t,E.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Pne=()=>{let t=[],e=function(r){ene();let i=[];return Ot(t,(s,o)=>{if(Le.und(r))i.push(s.start());else{let a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){let i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return Ot(t,r=>r.pause(...arguments)),this},e.resume=function(){return Ot(t,r=>r.resume(...arguments)),this},e.set=function(r){Ot(t,(i,s)=>{let o=Le.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){let i=[];return Ot(t,(s,o)=>{if(Le.und(r))i.push(s.start());else{let a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return Ot(t,r=>r.stop(...arguments)),this},e.update=function(r){return Ot(t,(i,s)=>i.update(this._getProps(r,i,s))),this};let n=function(r,i,s){return Le.fun(r)?r(s,i):r};return e._getProps=n,e};function gU(t,e,n){let r=Le.fun(e)&&e;r&&!n&&(n=[]);let i=E.useMemo(()=>r||arguments.length==3?Pne():void 0,[]),s=E.useRef(0),o=ZN(),a=E.useMemo(()=>({ctrls:[],queue:[],flush(g,_){let w=II(g,_);return s.current>0&&!a.queue.length&&!Object.keys(w).some(b=>!g.springs[b])?pE(g,_):new Promise(b=>{fU(g,w),a.queue.push(()=>{b(pE(g,_))}),o()})}}),[]),l=E.useRef([...a.ctrls]),c=[],d=xI(t)||0;E.useMemo(()=>{Ot(l.current.slice(t,d),g=>{gne(g,i),g.stop(!0)}),l.current.length=t,f(d,t)},[t]),E.useMemo(()=>{f(0,Math.min(d,t))},n);function f(g,_){for(let w=g;w<_;w++){let b=l.current[w]||(l.current[w]=new Tne(null,a.flush)),C=r?r(w,b):e[w];C&&(c[w]=Ane(C))}}let p=l.current.map((g,_)=>II(g,c[_])),m=E.useContext(Qy),v=xI(m),y=m!==v&&mne(m);Jb(()=>{s.current++,a.ctrls=l.current;let{queue:g}=a;g.length&&(a.queue=[],Ot(g,_=>_())),Ot(l.current,(_,w)=>{i==null||i.add(_),y&&_.start({default:m});let b=c[w];b&&(vne(_,b.ref),_.ref?_.queue.push(b):_.start(b))})}),eU(()=>()=>{Ot(a.ctrls,g=>g.stop(!0))});let x=p.map(g=>({...g}));return i?[x,i]:x}function Ine(t,e){let n=Le.fun(t),[[r],i]=gU(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}var Bne=class extends qb{constructor(n,r){super();Ye(this,"key");Ye(this,"idle",!0);Ye(this,"calc");Ye(this,"_active",new Set);this.source=n,this.calc=op(...r);let i=this._get(),s=lE(i);Kb(this,s.create(i))}advance(n){let r=this._get(),i=this.get();Co(r,i)||(qs(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&BI(this._active)&&V_(this)}_get(){let n=Le.arr(this.source)?this.source.map(si):Ri(si(this.source));return this.calc(...n)}_start(){this.idle&&!BI(this._active)&&(this.idle=!1,Ot(Ky(this),n=>{n.done=!1}),Fs.skipAnimation?(vt.batchedUpdates(()=>this.advance()),V_(this)):Wy.start(this))}_attach(){let n=1;Ot(Ri(this.source),r=>{es(r)&&Yd(r,this),dE(r)&&(r.idle||this._active.add(r),n=Math.max(n,r.priority+1))}),this.priority=n,this._start()}_detach(){Ot(Ri(this.source),n=>{es(n)&&lp(n,this)}),this._active.clear(),V_(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Ri(this.source).reduce((r,i)=>Math.max(r,(dE(i)?i.priority:0)+1),0))}};function Dne(t){return t.idle!==!1}function BI(t){return!t.size||Array.from(t).every(Dne)}function V_(t){t.idle||(t.idle=!0,Ot(Ky(t),e=>{e.done=!0}),ap(t,{type:"idle",parent:t}))}Fs.assign({createStringInterpolator:QN,to:(t,e)=>new Bne(t,e)});var vU=/^--/;function Lne(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!vU.test(t)&&!(Ah.hasOwnProperty(t)&&Ah[t])?e+"px":(""+e).trim()}var DI={};function Fne(t,e){if(!t.nodeType||!t.setAttribute)return!1;let n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),d=Object.keys(l).map(f=>n||t.hasAttribute(f)?f:DI[f]||(DI[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));i!==void 0&&(t.textContent=i);for(let f in r)if(r.hasOwnProperty(f)){let p=Lne(f,r[f]);vU.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,c[p])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Ah={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},One=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Nne=["Webkit","Ms","Moz","O"];Ah=Object.keys(Ah).reduce((t,e)=>(Nne.forEach(n=>t[One(n,e)]=t[e]),t),Ah);var Une=/^(matrix|translate|scale|rotate|skew)/,kne=/^(translate)/,zne=/^(rotate|skew)/,W_=(t,e)=>Le.num(t)&&t!==0?t+e:t,i0=(t,e)=>Le.arr(t)?t.every(n=>i0(n,e)):Le.num(t)?t===e:parseFloat(t)===e,Hne=class extends Yy{constructor({x:e,y:n,z:r,...i}){let s=[],o=[];(e||n||r)&&(s.push([e||0,n||0,r||0]),o.push(a=>[`translate3d(${a.map(l=>W_(l,"px")).join(",")})`,i0(a,0)])),ao(i,(a,l)=>{if(l==="transform")s.push([a||""]),o.push(c=>[c,c===""]);else if(Une.test(l)){if(delete i[l],Le.und(a))return;let c=kne.test(l)?"px":zne.test(l)?"deg":"";s.push(Ri(a)),o.push(l==="rotate3d"?([d,f,p,m])=>[`rotate3d(${d},${f},${p},${W_(m,c)})`,i0(m,0)]:d=>[`${l}(${d.map(f=>W_(f,c)).join(",")})`,i0(d,l.startsWith("scale")?1:0)])}}),s.length&&(i.transform=new Gne(s,o)),super(i)}},Gne=class extends JN{constructor(n,r){super();Ye(this,"_value",null);this.inputs=n,this.transforms=r}get(){return this._value||(this._value=this._get())}_get(){let n="",r=!0;return Ot(this.inputs,(i,s)=>{let o=si(i[0]),[a,l]=this.transforms[s](Le.arr(o)?o:i.map(si));n+=" "+a,r=r&&l}),r?"none":n}observerAdded(n){n==1&&Ot(this.inputs,r=>Ot(r,i=>es(i)&&Yd(i,this)))}observerRemoved(n){n==0&&Ot(this.inputs,r=>Ot(r,i=>es(i)&&lp(i,this)))}eventObserved(n){n.type=="change"&&(this._value=null),ap(this,n)}},$ne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Fs.assign({batchedUpdates:Cc.unstable_batchedUpdates,createStringInterpolator:QN,colors:Ite});var Vne=une($ne,{applyAnimatedValues:Fne,createAnimatedStyle:t=>new Hne(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),yU=Vne.animated,xU={};Object.defineProperty(xU,"__esModule",{value:!0});var Wne=xU.default=jne;function Tu(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}function jne(t,e,n){var r=t[e],i=t.length,s=e-n;return s>0?[].concat(Tu(t.slice(0,n)),[r],Tu(t.slice(n,e)),Tu(t.slice(e+1,i))):s<0?[].concat(Tu(t.slice(0,e)),Tu(t.slice(e+1,n+1)),[r],Tu(t.slice(n+1,i))):t}const _U=E.forwardRef(({className:t,type:e,...n},r)=>L.jsx("input",{type:e,className:Lt("flex h-7 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));_U.displayName="Input";const Xne={red:"#FF0000","light-pink":"#FD0457",pink:"#FE03E8",yellow:"#E9DE00",orange:"#FF5500",golden:"#FF7E00",green:"#04FA28","ice-blue":"#00AFE6",blue:"#1200FE",purple:"#9200F3","warm-white":"#FBB562","cold-white":"#9BB1D9"},Jne=({colorName:t,color:e,isSelected:n,onButtonClicked:r,selectColor:i})=>L.jsx("button",{onClick:()=>{r(t),i(e)},"aria-label":t.replace("-"," "),style:{backgroundColor:Xne[t]},className:`w-[24px] h-[24px] border rounded-[50%] ${n===t&&"border-black"}`}),Kne=({selectColor:t})=>{const[e,n]=E.useState(""),r=i=>{n(i)};return L.jsx("div",{className:"flex gap-1 flex-shrink-0",children:Object.keys(_h).map(i=>L.jsx(Jne,{onButtonClicked:r,isSelected:e,color:_h[i],colorName:i,selectColor:t},_h[i].emissive))})},Zb=E.forwardRef((t,e)=>{const{children:n,...r}=t,i=E.Children.toArray(n),s=i.find(Qne);if(s){const o=s.props.children,a=i.map(l=>l===s?E.Children.count(o)>1?E.Children.only(null):E.isValidElement(o)?o.props.children:null:l);return E.createElement(mE,Re({},r,{ref:e}),E.isValidElement(o)?E.cloneElement(o,void 0,a):null)}return E.createElement(mE,Re({},r,{ref:e}),n)});Zb.displayName="Slot";const mE=E.forwardRef((t,e)=>{const{children:n,...r}=t;return E.isValidElement(n)?E.cloneElement(n,{...qne(r,n.props),ref:gb(e,n.ref)}):E.Children.count(n)>1?E.Children.only(null):null});mE.displayName="SlotClone";const Yne=({children:t})=>E.createElement(E.Fragment,null,t);function Qne(t){return E.isValidElement(t)&&t.type===Yne}function qne(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const Zne=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],qy=Zne.reduce((t,e)=>{const n=E.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Zb:e;return E.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),E.createElement(a,Re({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function ere(t,e){t&&Cc.flushSync(()=>t.dispatchEvent(e))}function tre(t){const e=Gn(t);E.useEffect(()=>{const n=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e])}const gE="dismissableLayer.update",nre="dismissableLayer.pointerDownOutside",rre="dismissableLayer.focusOutside";let LI;const ire=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sre=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=E.useContext(ire),[d,f]=E.useState(null),[,p]=E.useState({}),m=On(e,T=>f(T)),v=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(y),g=d?v.indexOf(d):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,w=g>=x,b=ore(T=>{const P=T.target,B=[...c.branches].some(R=>R.contains(P));!w||B||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())}),C=are(T=>{const P=T.target;[...c.branches].some(R=>R.contains(P))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())});return tre(T=>{g===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))}),E.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(LI=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),FI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=LI)}},[d,n,c]),E.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),FI())},[d,c]),E.useEffect(()=>{const T=()=>p({});return document.addEventListener(gE,T),()=>document.removeEventListener(gE,T)},[]),E.createElement(qy.div,Re({},l,{ref:m,style:{pointerEvents:_?w?"auto":"none":void 0,...t.style},onFocusCapture:Gt(t.onFocusCapture,C.onFocusCapture),onBlurCapture:Gt(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Gt(t.onPointerDownCapture,b.onPointerDownCapture)}))});function ore(t){const e=Gn(t),n=E.useRef(!1),r=E.useRef(()=>{});return E.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let c=function(){SU(nre,e,l,{discrete:!0})};var a=c;const l={originalEvent:o};o.pointerType==="touch"?(document.removeEventListener("click",r.current),r.current=c,document.addEventListener("click",r.current,{once:!0})):c()}n.current=!1},s=window.setTimeout(()=>{document.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),document.removeEventListener("pointerdown",i),document.removeEventListener("click",r.current)}},[e]),{onPointerDownCapture:()=>n.current=!0}}function are(t){const e=Gn(t),n=E.useRef(!1);return E.useEffect(()=>{const r=i=>{i.target&&!n.current&&SU(rre,e,{originalEvent:i},{discrete:!1})};return document.addEventListener("focusin",r),()=>document.removeEventListener("focusin",r)},[e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function FI(){const t=new CustomEvent(gE);document.dispatchEvent(t)}function SU(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?ere(i,s):i.dispatchEvent(s)}const j_="focusScope.autoFocusOnMount",X_="focusScope.autoFocusOnUnmount",OI={bubbles:!1,cancelable:!0},lre=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=E.useState(null),c=Gn(i),d=Gn(s),f=E.useRef(null),p=On(e,y=>l(y)),m=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let g=function(w){if(m.paused||!a)return;const b=w.target;a.contains(b)?f.current=b:$l(f.current,{select:!0})},_=function(w){m.paused||!a||a.contains(w.relatedTarget)||$l(f.current,{select:!0})};var y=g,x=_;return document.addEventListener("focusin",g),document.addEventListener("focusout",_),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",_)}}},[r,a,m.paused]),E.useEffect(()=>{if(a){UI.add(m);const y=document.activeElement;if(!a.contains(y)){const g=new CustomEvent(j_,OI);a.addEventListener(j_,c),a.dispatchEvent(g),g.defaultPrevented||(cre(pre(wU(a)),{select:!0}),document.activeElement===y&&$l(a))}return()=>{a.removeEventListener(j_,c),setTimeout(()=>{const g=new CustomEvent(X_,OI);a.addEventListener(X_,d),a.dispatchEvent(g),g.defaultPrevented||$l(y??document.body,{select:!0}),a.removeEventListener(X_,d),UI.remove(m)},0)}}},[a,c,d,m]);const v=E.useCallback(y=>{if(!n&&!r||m.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(x&&g){const _=y.currentTarget,[w,b]=ure(_);w&&b?!y.shiftKey&&g===b?(y.preventDefault(),n&&$l(w,{select:!0})):y.shiftKey&&g===w&&(y.preventDefault(),n&&$l(b,{select:!0})):g===_&&y.preventDefault()}},[n,r,m.paused]);return E.createElement(qy.div,Re({tabIndex:-1},o,{ref:p,onKeyDown:v}))});function cre(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if($l(r,{select:e}),document.activeElement!==n)return}function ure(t){const e=wU(t),n=NI(e,t),r=NI(e.reverse(),t);return[n,r]}function wU(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function NI(t,e){for(const n of t)if(!dre(n,{upTo:e}))return n}function dre(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function fre(t){return t instanceof HTMLInputElement&&"select"in t}function $l(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&fre(t)&&e&&t.select()}}const UI=hre();function hre(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=kI(t,e),t.unshift(e)},remove(e){var n;t=kI(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function kI(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function pre(t){return t.filter(e=>e.tagName!=="A")}const mre=E.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?PL.createPortal(E.createElement(qy.div,Re({},i,{ref:e})),r):null});let J_=0;function eM(){E.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:zI()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:zI()),J_++,()=>{J_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),J_--}},[])}function zI(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var ba=function(){return ba=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ba.apply(this,arguments)};function gre(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vre(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var bh="right-scroll-bar-position",Mh="width-before-scroll-bar",yre="with-scroll-bars-hidden",xre="--removed-body-scroll-bar-size";function _re(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Sre(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}function EU(t,e){return Sre(e||null,function(n){return t.forEach(function(r){return _re(r,n)})})}var j0=function(){return j0=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},j0.apply(this,arguments)};function wre(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ere(t){return t}function Are(t,e){e===void 0&&(e=Ere);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return i}function AU(t){t===void 0&&(t={});var e=Are(null);return e.options=j0({async:!0,ssr:!1},t),e}var bU=function(t){var e=t.sideCar,n=wre(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,j0({},n))};bU.isSideCarExport=!0;function MU(t,e){return t.useMedium(e),bU}var CU=AU(),K_=function(){},Zy=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:K_,onWheelCapture:K_,onTouchMoveCapture:K_}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,m=t.noIsolation,v=t.inert,y=t.allowPinchZoom,x=t.as,g=x===void 0?"div":x,_=gre(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=p,b=EU([n,e]),C=ba(ba({},_),i);return E.createElement(E.Fragment,null,d&&E.createElement(w,{sideCar:CU,removeScrollBar:c,shards:f,noIsolation:m,inert:v,setCallbacks:s,allowPinchZoom:!!y,lockRef:n}),o?E.cloneElement(E.Children.only(a),ba(ba({},C),{ref:b})):E.createElement(g,ba({},C,{className:l,ref:b}),a))});Zy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zy.classNames={fullWidth:Mh,zeroRight:bh};var HI,bre=function(){if(HI)return HI;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Mre(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=bre();return e&&t.setAttribute("nonce",e),t}function Cre(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Tre(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Rre=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Mre())&&(Cre(e,n),Tre(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Pre=function(){var t=Rre();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},tM=function(){var t=Pre(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Ire={left:0,top:0,right:0,gap:0},Y_=function(t){return parseInt(t||"",10)||0},Bre=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Y_(n),Y_(r),Y_(i)]},Dre=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Ire;var e=Bre(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Lre=tM(),Fre=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(yre,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Mh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(bh," .").concat(bh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Mh," .").concat(Mh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(xre,": ").concat(a,`px;
  }
`)},TU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=E.useMemo(function(){return Dre(i)},[i]);return E.createElement(Lre,{styles:Fre(s,!e,i,n?"":"!important")})},vE=!1;if(typeof window<"u")try{var Rv=Object.defineProperty({},"passive",{get:function(){return vE=!0,!0}});window.addEventListener("test",Rv,Rv),window.removeEventListener("test",Rv,Rv)}catch{vE=!1}var Ru=vE?{passive:!1}:!1,Ore=function(t){var e=window.getComputedStyle(t);return e.overflowY!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowY==="visible")},Nre=function(t){var e=window.getComputedStyle(t);return e.overflowX!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowX==="visible")},GI=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=RU(t,n);if(r){var i=PU(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Ure=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},kre=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},RU=function(t,e){return t==="v"?Ore(e):Nre(e)},PU=function(t,e){return t==="v"?Ure(e):kre(e)},zre=function(t,e){return t==="h"&&e==="rtl"?-1:1},Hre=function(t,e,n,r,i){var s=zre(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,f=0,p=0;do{var m=PU(t,a),v=m[0],y=m[1],x=m[2],g=y-x-s*v;(v||g)&&RU(t,a)&&(f+=g,p+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(i&&f===0||!i&&o>f)||!d&&(i&&p===0||!i&&-o>p))&&(c=!0),c},Pv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$I=function(t){return[t.deltaX,t.deltaY]},VI=function(t){return t&&"current"in t?t.current:t},Gre=function(t,e){return t[0]===e[0]&&t[1]===e[1]},$re=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Vre=0,Pu=[];function Wre(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),i=E.useState(Vre++)[0],s=E.useState(function(){return tM()})[0],o=E.useRef(t);E.useEffect(function(){o.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=vre([t.lockRef.current],(t.shards||[]).map(VI),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=E.useCallback(function(y,x){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var g=Pv(y),_=n.current,w="deltaX"in y?y.deltaX:_[0]-g[0],b="deltaY"in y?y.deltaY:_[1]-g[1],C,T=y.target,P=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in y&&P==="h"&&T.type==="range")return!1;var B=GI(P,T);if(!B)return!0;if(B?C=P:(C=P==="v"?"h":"v",B=GI(P,T)),!B)return!1;if(!r.current&&"changedTouches"in y&&(w||b)&&(r.current=C),!C)return!0;var R=r.current||C;return Hre(R,x,y,R==="h"?w:b,!0)},[]),l=E.useCallback(function(y){var x=y;if(!(!Pu.length||Pu[Pu.length-1]!==s)){var g="deltaY"in x?$I(x):Pv(x),_=e.current.filter(function(C){return C.name===x.type&&C.target===x.target&&Gre(C.delta,g)})[0];if(_&&_.should){x.preventDefault();return}if(!_){var w=(o.current.shards||[]).map(VI).filter(Boolean).filter(function(C){return C.contains(x.target)}),b=w.length>0?a(x,w[0]):!o.current.noIsolation;b&&x.preventDefault()}}},[]),c=E.useCallback(function(y,x,g,_){var w={name:y,delta:x,target:g,should:_};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(b){return b!==w})},1)},[]),d=E.useCallback(function(y){n.current=Pv(y),r.current=void 0},[]),f=E.useCallback(function(y){c(y.type,$I(y),y.target,a(y,t.lockRef.current))},[]),p=E.useCallback(function(y){c(y.type,Pv(y),y.target,a(y,t.lockRef.current))},[]);E.useEffect(function(){return Pu.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Ru),document.addEventListener("touchmove",l,Ru),document.addEventListener("touchstart",d,Ru),function(){Pu=Pu.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Ru),document.removeEventListener("touchmove",l,Ru),document.removeEventListener("touchstart",d,Ru)}},[]);var m=t.removeScrollBar,v=t.inert;return E.createElement(E.Fragment,null,v?E.createElement(s,{styles:$re(i)}):null,m?E.createElement(TU,{gapMode:"margin"}):null)}const jre=MU(CU,Wre);var IU=E.forwardRef(function(t,e){return E.createElement(Zy,ba({},t,{ref:e,sideCar:jre}))});IU.classNames=Zy.classNames;const Xre=IU;var Jre=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Iu=new WeakMap,Iv=new WeakMap,Bv={},Q_=0,BU=function(t){return t&&(t.host||BU(t.parentNode))},Kre=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=BU(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Yre=function(t,e,n,r){var i=Kre(e,Array.isArray(t)?t:[t]);Bv[n]||(Bv[n]=new WeakMap);var s=Bv[n],o=[],a=new Set,l=new Set(i),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};i.forEach(c);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))d(p);else{var m=p.getAttribute(r),v=m!==null&&m!=="false",y=(Iu.get(p)||0)+1,x=(s.get(p)||0)+1;Iu.set(p,y),s.set(p,x),o.push(p),y===1&&v&&Iv.set(p,!0),x===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}})};return d(e),a.clear(),Q_++,function(){o.forEach(function(f){var p=Iu.get(f)-1,m=s.get(f)-1;Iu.set(f,p),s.set(f,m),p||(Iv.has(f)||f.removeAttribute(r),Iv.delete(f)),m||f.removeAttribute(n)}),Q_--,Q_||(Iu=new WeakMap,Iu=new WeakMap,Iv=new WeakMap,Bv={})}},nM=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||Jre(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Yre(r,i,n,"aria-hidden")):function(){return null}};const DU="Dialog",[LU,xae]=fl(DU),[Qre,kc]=LU(DU),qre=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=E.useRef(null),l=E.useRef(null),[c=!1,d]=Uy({prop:r,defaultProp:i,onChange:s});return E.createElement(Qre,{scope:e,triggerRef:a,contentRef:l,contentId:dd(),titleId:dd(),descriptionId:dd(),open:c,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(f=>!f),[d]),modal:o},n)},FU="DialogPortal",[Zre,OU]=LU(FU,{forceMount:void 0}),eie=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=kc(FU,e);return E.createElement(Zre,{scope:e,forceMount:n},E.Children.map(r,o=>E.createElement(vi,{present:n||s.open},E.createElement(mre,{asChild:!0,container:i},o))))},yE="DialogOverlay",tie=E.forwardRef((t,e)=>{const n=OU(yE,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=kc(yE,t.__scopeDialog);return s.modal?E.createElement(vi,{present:r||s.open},E.createElement(nie,Re({},i,{ref:e}))):null}),nie=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=kc(yE,n);return E.createElement(Xre,{as:Zb,allowPinchZoom:!0,shards:[i.contentRef]},E.createElement(qy.div,Re({"data-state":UU(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),pp="DialogContent",rie=E.forwardRef((t,e)=>{const n=OU(pp,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=kc(pp,t.__scopeDialog);return E.createElement(vi,{present:r||s.open},s.modal?E.createElement(iie,Re({},i,{ref:e})):E.createElement(sie,Re({},i,{ref:e})))}),iie=E.forwardRef((t,e)=>{const n=kc(pp,t.__scopeDialog),r=E.useRef(null),i=On(e,n.contentRef,r);return E.useEffect(()=>{const s=r.current;if(s)return nM(s)},[]),E.createElement(NU,Re({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:Gt(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Gt(t.onFocusOutside,s=>s.preventDefault())}))}),sie=E.forwardRef((t,e)=>{const n=kc(pp,t.__scopeDialog),r=E.useRef(!1);return E.createElement(NU,Re({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s;if((s=t.onCloseAutoFocus)===null||s===void 0||s.call(t,i),!i.defaultPrevented){var o;r.current||(o=n.triggerRef.current)===null||o===void 0||o.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var s,o;(s=t.onInteractOutside)===null||s===void 0||s.call(t,i),i.defaultPrevented||(r.current=!0);const a=i.target;((o=n.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&i.preventDefault()}}))}),NU=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=kc(pp,n),l=E.useRef(null),c=On(e,l);return eM(),E.createElement(E.Fragment,null,E.createElement(lre,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},E.createElement(sre,Re({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":UU(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function UU(t){return t?"open":"closed"}const oie=qre,aie=eie,lie=tie,cie=rie;var WI=1,uie=.9,die=.3,q_=.1,fie=0,Z_=.999,hie=.9999,pie=.99,jI=/[\\\/\-_+.# \t"@\[\(\{&]/,mie=/[\\\/\-_+.# \t"@\[\(\{&]/g;function xE(t,e,n,r,i,s){if(s===e.length)return i===t.length?WI:pie;for(var o=r.charAt(s),a=n.indexOf(o,i),l=0,c,d,f;a>=0;)c=xE(t,e,n,r,a+1,s+1),c>l&&(a===i?c*=WI:jI.test(t.charAt(a-1))?(c*=uie,f=t.slice(i,a-1).match(mie),f&&i>0&&(c*=Math.pow(Z_,f.length))):jI.test(t.slice(i,a-1))?(c*=fie,i>0&&(c*=Math.pow(Z_,a-i))):(c*=die,i>0&&(c*=Math.pow(Z_,a-i))),t.charAt(a)!==e.charAt(s)&&(c*=hie)),c<q_&&n.charAt(a-1)===r.charAt(s+1)&&n.charAt(a-1)!==r.charAt(s)&&(d=xE(t,e,n,r,a+1,s+2),d*q_>c&&(c=d*q_)),c>l&&(l=c),a=n.indexOf(o,a+1);return l}function gie(t,e){return xE(t,e,t.toLowerCase(),e.toLowerCase(),0,0)}var vie=gie;const yie=nl(vie);var xie='[cmdk-list-sizer=""]',qf='[cmdk-group=""]',eS='[cmdk-group-items=""]',_ie='[cmdk-group-heading=""]',kU='[cmdk-item=""]',XI=`${kU}:not([aria-disabled="true"])`,_E="cmdk-item-select",xa="data-value",Sie=(t,e)=>yie(t,e),zU=E.createContext(void 0),em=()=>E.useContext(zU),HU=E.createContext(void 0),rM=()=>E.useContext(HU),GU=E.createContext(void 0),$U=E.forwardRef((t,e)=>{let n=E.useRef(null),r=Ou(()=>({search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}})),i=Ou(()=>new Set),s=Ou(()=>new Map),o=Ou(()=>new Map),a=Ou(()=>new Set),l=VU(t),{label:c,children:d,value:f,onValueChange:p,filter:m,shouldFilter:v,...y}=t,x=E.useId(),g=E.useId(),_=E.useId(),w=Bie();Qd(()=>{if(f!==void 0){let O=f.trim().toLowerCase();r.current.value=O,w(6,D),b.emit()}},[f]);let b=E.useMemo(()=>({subscribe:O=>(a.current.add(O),()=>a.current.delete(O)),snapshot:()=>r.current,setState:(O,z,ne)=>{var J,q,ee;if(!Object.is(r.current[O],z)){if(r.current[O]=z,O==="search")R(),P(),w(1,B);else if(O==="value")if(((J=l.current)==null?void 0:J.value)!==void 0){(ee=(q=l.current).onValueChange)==null||ee.call(q,z);return}else ne||w(5,D);b.emit()}},emit:()=>{a.current.forEach(O=>O())}}),[]),C=E.useMemo(()=>({value:(O,z)=>{z!==o.current.get(O)&&(o.current.set(O,z),r.current.filtered.items.set(O,T(z)),w(2,()=>{P(),b.emit()}))},item:(O,z)=>(i.current.add(O),z&&(s.current.has(z)?s.current.get(z).add(O):s.current.set(z,new Set([O]))),w(3,()=>{R(),P(),r.current.value||B(),b.emit()}),()=>{o.current.delete(O),i.current.delete(O),r.current.filtered.items.delete(O),w(4,()=>{R(),B(),b.emit()})}),group:O=>(s.current.has(O)||s.current.set(O,new Set),()=>{o.current.delete(O),s.current.delete(O)}),filter:()=>l.current.shouldFilter,label:c||t["aria-label"],listId:x,inputId:_,labelId:g}),[]);function T(O){var z;let ne=((z=l.current)==null?void 0:z.filter)??Sie;return O?ne(O,r.current.search):0}function P(){if(!n.current||!r.current.search||l.current.shouldFilter===!1)return;let O=r.current.filtered.items,z=[];r.current.filtered.groups.forEach(J=>{let q=s.current.get(J),ee=0;q.forEach(_e=>{let be=O.get(_e);ee=Math.max(be,ee)}),z.push([J,ee])});let ne=n.current.querySelector(xie);X().sort((J,q)=>{let ee=J.getAttribute(xa),_e=q.getAttribute(xa);return(O.get(_e)??0)-(O.get(ee)??0)}).forEach(J=>{let q=J.closest(eS);q?q.appendChild(J.parentElement===q?J:J.closest(`${eS} > *`)):ne.appendChild(J.parentElement===ne?J:J.closest(`${eS} > *`))}),z.sort((J,q)=>q[1]-J[1]).forEach(J=>{let q=n.current.querySelector(`${qf}[${xa}="${J[0]}"]`);q==null||q.parentElement.appendChild(q)})}function B(){let O=X().find(ne=>!ne.ariaDisabled),z=O==null?void 0:O.getAttribute(xa);b.setState("value",z||void 0)}function R(){if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=i.current.size;return}r.current.filtered.groups=new Set;let O=0;for(let z of i.current){let ne=o.current.get(z),J=T(ne);r.current.filtered.items.set(z,J),J>0&&O++}for(let[z,ne]of s.current)for(let J of ne)if(r.current.filtered.items.get(J)>0){r.current.filtered.groups.add(z);break}r.current.filtered.count=O}function D(){var O,z,ne;let J=k();J&&(((O=J.parentElement)==null?void 0:O.firstChild)===J&&((ne=(z=J.closest(qf))==null?void 0:z.querySelector(_ie))==null||ne.scrollIntoView({block:"nearest"})),J.scrollIntoView({block:"nearest"}))}function k(){return n.current.querySelector(`${kU}[aria-selected="true"]`)}function X(){return Array.from(n.current.querySelectorAll(XI))}function $(O){let z=X()[O];z&&b.setState("value",z.getAttribute(xa))}function j(O){var z;let ne=k(),J=X(),q=J.findIndex(_e=>_e===ne),ee=J[q+O];(z=l.current)!=null&&z.loop&&(ee=q+O<0?J[J.length-1]:q+O===J.length?J[0]:J[q+O]),ee&&b.setState("value",ee.getAttribute(xa))}function H(O){let z=k(),ne=z==null?void 0:z.closest(qf),J;for(;ne&&!J;)ne=O>0?Pie(ne,qf):Iie(ne,qf),J=ne==null?void 0:ne.querySelector(XI);J?b.setState("value",J.getAttribute(xa)):j(O)}let ie=()=>$(X().length-1),Z=O=>{O.preventDefault(),O.metaKey?ie():O.altKey?H(1):j(1)},U=O=>{O.preventDefault(),O.metaKey?$(0):O.altKey?H(-1):j(-1)};return E.createElement("div",{ref:tm([n,e]),...y,"cmdk-root":"",onKeyDown:O=>{var z;if((z=y.onKeyDown)==null||z.call(y,O),!O.defaultPrevented)switch(O.key){case"n":case"j":{O.ctrlKey&&Z(O);break}case"ArrowDown":{Z(O);break}case"p":case"k":{O.ctrlKey&&U(O);break}case"ArrowUp":{U(O);break}case"Home":{O.preventDefault(),$(0);break}case"End":{O.preventDefault(),ie();break}case"Enter":{O.preventDefault();let ne=k();if(ne){let J=new Event(_E);ne.dispatchEvent(J)}}}}},E.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:Die},c),E.createElement(HU.Provider,{value:b},E.createElement(zU.Provider,{value:C},d)))}),wie=E.forwardRef((t,e)=>{let n=E.useId(),r=E.useRef(null),i=E.useContext(GU),s=em(),o=VU(t);Qd(()=>s.item(n,i),[]);let a=WU(n,r,[t.value,t.children,r]),l=rM(),c=Fd(g=>g.value&&g.value===a.current),d=Fd(g=>s.filter()===!1?!0:g.search?g.filtered.items.get(n)>0:!0);E.useEffect(()=>{let g=r.current;if(!(!g||t.disabled))return g.addEventListener(_E,f),()=>g.removeEventListener(_E,f)},[d,t.onSelect,t.disabled]);function f(){var g,_;(_=(g=o.current).onSelect)==null||_.call(g,a.current)}function p(){l.setState("value",a.current,!0)}if(!d)return null;let{disabled:m,value:v,onSelect:y,...x}=t;return E.createElement("div",{ref:tm([r,e]),...x,"cmdk-item":"",role:"option","aria-disabled":m||void 0,"aria-selected":c||void 0,"data-selected":c||void 0,onPointerMove:m?void 0:p,onClick:m?void 0:f},t.children)}),Eie=E.forwardRef((t,e)=>{let{heading:n,children:r,...i}=t,s=E.useId(),o=E.useRef(null),a=E.useRef(null),l=E.useId(),c=em(),d=Fd(p=>c.filter()===!1?!0:p.search?p.filtered.groups.has(s):!0);Qd(()=>c.group(s),[]),WU(s,o,[t.value,t.heading,a]);let f=E.createElement(GU.Provider,{value:s},r);return E.createElement("div",{ref:tm([o,e]),...i,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&E.createElement("div",{ref:a,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),E.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},f))}),Aie=E.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=E.useRef(null),s=Fd(o=>!o.search);return!n&&!s?null:E.createElement("div",{ref:tm([i,e]),...r,"cmdk-separator":"",role:"separator"})}),bie=E.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=rM(),o=Fd(l=>l.search),a=em();return E.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),E.createElement("input",{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.listId,"aria-labelledby":a.labelId,id:a.inputId,type:"text",value:i?t.value:o,onChange:l=>{i||s.setState("search",l.target.value),n==null||n(l.target.value)}})}),Mie=E.forwardRef((t,e)=>{let{children:n,...r}=t,i=E.useRef(null),s=E.useRef(null),o=em();return E.useEffect(()=>{if(s.current&&i.current){let a=s.current,l=i.current,c,d=new ResizeObserver(()=>{c=requestAnimationFrame(()=>{let f=a.getBoundingClientRect().height;l.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(a),()=>{cancelAnimationFrame(c),d.unobserve(a)}}},[]),E.createElement("div",{ref:tm([i,e]),...r,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:o.listId,"aria-labelledby":o.inputId},E.createElement("div",{ref:s,"cmdk-list-sizer":""},n))}),Cie=E.forwardRef((t,e)=>{let{open:n,onOpenChange:r,container:i,...s}=t;return E.createElement(oie,{open:n,onOpenChange:r},E.createElement(aie,{container:i},E.createElement(lie,{"cmdk-overlay":""}),E.createElement(cie,{"aria-label":t.label,"cmdk-dialog":""},E.createElement($U,{ref:e,...s}))))}),Tie=E.forwardRef((t,e)=>{let n=E.useRef(!0),r=Fd(i=>i.filtered.count===0);return E.useEffect(()=>{n.current=!1},[]),n.current||!r?null:E.createElement("div",{ref:e,...t,"cmdk-empty":"",role:"presentation"})}),Rie=E.forwardRef((t,e)=>{let{progress:n,children:r,...i}=t;return E.createElement("div",{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},E.createElement("div",{"aria-hidden":!0},r))}),yi=Object.assign($U,{List:Mie,Item:wie,Input:bie,Group:Eie,Separator:Aie,Dialog:Cie,Empty:Tie,Loading:Rie});function Pie(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function Iie(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function VU(t){let e=E.useRef(t);return Qd(()=>{e.current=t}),e}var Qd=typeof window>"u"?E.useEffect:E.useLayoutEffect;function Ou(t){let e=E.useRef();return e.current===void 0&&(e.current=t()),e}function tm(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Fd(t){let e=rM(),n=()=>t(e.snapshot());return E.useSyncExternalStore(e.subscribe,n,n)}function WU(t,e,n){let r=E.useRef(),i=em();return Qd(()=>{var s;let o=(()=>{var a;for(let l of n){if(typeof l=="string")return l.trim().toLowerCase();if(typeof l=="object"&&"current"in l&&l.current)return(a=l.current.textContent)==null?void 0:a.trim().toLowerCase()}})();i.value(t,o),(s=e.current)==null||s.setAttribute(xa,o),r.current=o}),r}var Bie=()=>{let[t,e]=E.useState(),n=Ou(()=>new Map);return Qd(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}},Die={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Lie(t,e=globalThis==null?void 0:globalThis.document){const n=Gn(t);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const SE="dismissableLayer.update",Fie="dismissableLayer.pointerDownOutside",Oie="dismissableLayer.focusOutside";let JI;const Nie=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jU=E.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,d=E.useContext(Nie),[f,p]=E.useState(null),m=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=E.useState({}),y=On(e,B=>p(B)),x=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(g),w=f?x.indexOf(f):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,C=w>=_,T=Uie(B=>{const R=B.target,D=[...d.branches].some(k=>k.contains(R));!C||D||(s==null||s(B),a==null||a(B),B.defaultPrevented||l==null||l())},m),P=kie(B=>{const R=B.target;[...d.branches].some(k=>k.contains(R))||(o==null||o(B),a==null||a(B),B.defaultPrevented||l==null||l())},m);return Lie(B=>{w===d.layers.size-1&&(i==null||i(B),!B.defaultPrevented&&l&&(B.preventDefault(),l()))},m),E.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(JI=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),KI(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=JI)}},[f,m,r,d]),E.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),KI())},[f,d]),E.useEffect(()=>{const B=()=>v({});return document.addEventListener(SE,B),()=>document.removeEventListener(SE,B)},[]),E.createElement(Pn.div,Re({},c,{ref:y,style:{pointerEvents:b?C?"auto":"none":void 0,...t.style},onFocusCapture:Gt(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Gt(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Gt(t.onPointerDownCapture,T.onPointerDownCapture)}))});function Uie(t,e=globalThis==null?void 0:globalThis.document){const n=Gn(t),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let d=function(){XU(Fie,n,c,{discrete:!0})};var l=d;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function kie(t,e=globalThis==null?void 0:globalThis.document){const n=Gn(t),r=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!r.current&&XU(Oie,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function KI(){const t=new CustomEvent(SE);document.dispatchEvent(t)}function XU(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Nq(i,s):i.dispatchEvent(s)}const tS="focusScope.autoFocusOnMount",nS="focusScope.autoFocusOnUnmount",YI={bubbles:!1,cancelable:!0},JU=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=E.useState(null),c=Gn(i),d=Gn(s),f=E.useRef(null),p=On(e,y=>l(y)),m=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let g=function(w){if(m.paused||!a)return;const b=w.target;a.contains(b)?f.current=b:Vl(f.current,{select:!0})},_=function(w){m.paused||!a||a.contains(w.relatedTarget)||Vl(f.current,{select:!0})};var y=g,x=_;return document.addEventListener("focusin",g),document.addEventListener("focusout",_),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",_)}}},[r,a,m.paused]),E.useEffect(()=>{if(a){qI.add(m);const y=document.activeElement;if(!a.contains(y)){const g=new CustomEvent(tS,YI);a.addEventListener(tS,c),a.dispatchEvent(g),g.defaultPrevented||(zie(Wie(KU(a)),{select:!0}),document.activeElement===y&&Vl(a))}return()=>{a.removeEventListener(tS,c),setTimeout(()=>{const g=new CustomEvent(nS,YI);a.addEventListener(nS,d),a.dispatchEvent(g),g.defaultPrevented||Vl(y??document.body,{select:!0}),a.removeEventListener(nS,d),qI.remove(m)},0)}}},[a,c,d,m]);const v=E.useCallback(y=>{if(!n&&!r||m.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(x&&g){const _=y.currentTarget,[w,b]=Hie(_);w&&b?!y.shiftKey&&g===b?(y.preventDefault(),n&&Vl(w,{select:!0})):y.shiftKey&&g===w&&(y.preventDefault(),n&&Vl(b,{select:!0})):g===_&&y.preventDefault()}},[n,r,m.paused]);return E.createElement(Pn.div,Re({tabIndex:-1},o,{ref:p,onKeyDown:v}))});function zie(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Vl(r,{select:e}),document.activeElement!==n)return}function Hie(t){const e=KU(t),n=QI(e,t),r=QI(e.reverse(),t);return[n,r]}function KU(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function QI(t,e){for(const n of t)if(!Gie(n,{upTo:e}))return n}function Gie(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function $ie(t){return t instanceof HTMLInputElement&&"select"in t}function Vl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&$ie(t)&&e&&t.select()}}const qI=Vie();function Vie(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ZI(t,e),t.unshift(e)},remove(e){var n;t=ZI(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function ZI(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Wie(t){return t.filter(e=>e.tagName!=="A")}const YU=E.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?PL.createPortal(E.createElement(Pn.div,Re({},i,{ref:e})),r):null});var Ma=function(){return Ma=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ma.apply(this,arguments)};function jie(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Xie(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var QU=AU(),rS=function(){},ex=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:rS,onWheelCapture:rS,onTouchMoveCapture:rS}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,m=t.noIsolation,v=t.inert,y=t.allowPinchZoom,x=t.as,g=x===void 0?"div":x,_=jie(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=p,b=EU([n,e]),C=Ma(Ma({},_),i);return E.createElement(E.Fragment,null,d&&E.createElement(w,{sideCar:QU,removeScrollBar:c,shards:f,noIsolation:m,inert:v,setCallbacks:s,allowPinchZoom:!!y,lockRef:n}),o?E.cloneElement(E.Children.only(a),Ma(Ma({},C),{ref:b})):E.createElement(g,Ma({},C,{className:l,ref:b}),a))});ex.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ex.classNames={fullWidth:Mh,zeroRight:bh};var wE=!1;if(typeof window<"u")try{var Dv=Object.defineProperty({},"passive",{get:function(){return wE=!0,!0}});window.addEventListener("test",Dv,Dv),window.removeEventListener("test",Dv,Dv)}catch{wE=!1}var Bu=wE?{passive:!1}:!1,Jie=function(t){return t.tagName==="TEXTAREA"},qU=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Jie(t)&&n[e]==="visible")},Kie=function(t){return qU(t,"overflowY")},Yie=function(t){return qU(t,"overflowX")},eB=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=ZU(t,n);if(r){var i=ek(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Qie=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},qie=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},ZU=function(t,e){return t==="v"?Kie(e):Yie(e)},ek=function(t,e){return t==="v"?Qie(e):qie(e)},Zie=function(t,e){return t==="h"&&e==="rtl"?-1:1},ese=function(t,e,n,r,i){var s=Zie(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,f=0,p=0;do{var m=ek(t,a),v=m[0],y=m[1],x=m[2],g=y-x-s*v;(v||g)&&ZU(t,a)&&(f+=g,p+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(i&&f===0||!i&&o>f)||!d&&(i&&p===0||!i&&-o>p))&&(c=!0),c},Lv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},tB=function(t){return[t.deltaX,t.deltaY]},nB=function(t){return t&&"current"in t?t.current:t},tse=function(t,e){return t[0]===e[0]&&t[1]===e[1]},nse=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},rse=0,Du=[];function ise(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),i=E.useState(rse++)[0],s=E.useState(function(){return tM()})[0],o=E.useRef(t);E.useEffect(function(){o.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Xie([t.lockRef.current],(t.shards||[]).map(nB),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=E.useCallback(function(y,x){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var g=Lv(y),_=n.current,w="deltaX"in y?y.deltaX:_[0]-g[0],b="deltaY"in y?y.deltaY:_[1]-g[1],C,T=y.target,P=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in y&&P==="h"&&T.type==="range")return!1;var B=eB(P,T);if(!B)return!0;if(B?C=P:(C=P==="v"?"h":"v",B=eB(P,T)),!B)return!1;if(!r.current&&"changedTouches"in y&&(w||b)&&(r.current=C),!C)return!0;var R=r.current||C;return ese(R,x,y,R==="h"?w:b,!0)},[]),l=E.useCallback(function(y){var x=y;if(!(!Du.length||Du[Du.length-1]!==s)){var g="deltaY"in x?tB(x):Lv(x),_=e.current.filter(function(C){return C.name===x.type&&C.target===x.target&&tse(C.delta,g)})[0];if(_&&_.should){x.cancelable&&x.preventDefault();return}if(!_){var w=(o.current.shards||[]).map(nB).filter(Boolean).filter(function(C){return C.contains(x.target)}),b=w.length>0?a(x,w[0]):!o.current.noIsolation;b&&x.cancelable&&x.preventDefault()}}},[]),c=E.useCallback(function(y,x,g,_){var w={name:y,delta:x,target:g,should:_};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(b){return b!==w})},1)},[]),d=E.useCallback(function(y){n.current=Lv(y),r.current=void 0},[]),f=E.useCallback(function(y){c(y.type,tB(y),y.target,a(y,t.lockRef.current))},[]),p=E.useCallback(function(y){c(y.type,Lv(y),y.target,a(y,t.lockRef.current))},[]);E.useEffect(function(){return Du.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Bu),document.addEventListener("touchmove",l,Bu),document.addEventListener("touchstart",d,Bu),function(){Du=Du.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Bu),document.removeEventListener("touchmove",l,Bu),document.removeEventListener("touchstart",d,Bu)}},[]);var m=t.removeScrollBar,v=t.inert;return E.createElement(E.Fragment,null,v?E.createElement(s,{styles:nse(i)}):null,m?E.createElement(TU,{gapMode:"margin"}):null)}const sse=MU(QU,ise);var tk=E.forwardRef(function(t,e){return E.createElement(ex,Ma({},t,{ref:e,sideCar:sse}))});tk.classNames=ex.classNames;const nk=tk,rk="Dialog",[ik,_ae]=fl(rk),[Sae,co]=ik(rk),sk="DialogPortal",[ose,ok]=ik(sk,{forceMount:void 0}),ase=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=co(sk,e);return E.createElement(ose,{scope:e,forceMount:n},E.Children.map(r,o=>E.createElement(vi,{present:n||s.open},E.createElement(YU,{asChild:!0,container:i},o))))},EE="DialogOverlay",lse=E.forwardRef((t,e)=>{const n=ok(EE,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=co(EE,t.__scopeDialog);return s.modal?E.createElement(vi,{present:r||s.open},E.createElement(cse,Re({},i,{ref:e}))):null}),cse=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=co(EE,n);return E.createElement(nk,{as:Sc,allowPinchZoom:!0,shards:[i.contentRef]},E.createElement(Pn.div,Re({"data-state":lk(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),mp="DialogContent",use=E.forwardRef((t,e)=>{const n=ok(mp,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=co(mp,t.__scopeDialog);return E.createElement(vi,{present:r||s.open},s.modal?E.createElement(dse,Re({},i,{ref:e})):E.createElement(fse,Re({},i,{ref:e})))}),dse=E.forwardRef((t,e)=>{const n=co(mp,t.__scopeDialog),r=E.useRef(null),i=On(e,n.contentRef,r);return E.useEffect(()=>{const s=r.current;if(s)return nM(s)},[]),E.createElement(ak,Re({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:Gt(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Gt(t.onFocusOutside,s=>s.preventDefault())}))}),fse=E.forwardRef((t,e)=>{const n=co(mp,t.__scopeDialog),r=E.useRef(!1);return E.createElement(ak,Re({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s;if((s=t.onCloseAutoFocus)===null||s===void 0||s.call(t,i),!i.defaultPrevented){var o;r.current||(o=n.triggerRef.current)===null||o===void 0||o.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var s,o;(s=t.onInteractOutside)===null||s===void 0||s.call(t,i),i.defaultPrevented||(r.current=!0);const a=i.target;((o=n.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&i.preventDefault()}}))}),ak=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=co(mp,n),l=E.useRef(null),c=On(e,l);return eM(),E.createElement(E.Fragment,null,E.createElement(JU,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},E.createElement(jU,Re({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":lk(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),hse="DialogTitle",pse=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=co(hse,n);return E.createElement(Pn.h2,Re({id:i.titleId},r,{ref:e}))}),mse="DialogDescription",gse=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=co(mse,n);return E.createElement(Pn.p,Re({id:i.descriptionId},r,{ref:e}))}),vse="DialogClose",yse=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=co(vse,n);return E.createElement(Pn.button,Re({type:"button"},r,{ref:e,onClick:Gt(t.onClick,()=>i.onOpenChange(!1))}))});function lk(t){return t?"open":"closed"}const ck=ase,uk=lse,dk=use,fk=pse,hk=gse,xse=yse,pk=({className:t,children:e,...n})=>L.jsx(ck,{className:Lt(t),...n,children:L.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center sm:items-center",children:e})});pk.displayName=ck.displayName;const mk=E.forwardRef(({className:t,...e},n)=>L.jsx(uk,{ref:n,className:Lt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-all duration-100 data-[state=closed]:animate-out data-[state=closed]:fade-out data-[state=open]:fade-in",t),...e}));mk.displayName=uk.displayName;const _se=E.forwardRef(({className:t,children:e,...n},r)=>L.jsxs(pk,{children:[L.jsx(mk,{}),L.jsxs(dk,{ref:r,className:Lt("fixed z-50 grid w-full gap-4 rounded-b-lg border bg-background p-6 shadow-lg animate-in data-[state=open]:fade-in-90 data-[state=open]:slide-in-from-bottom-10 sm:max-w-lg sm:rounded-lg sm:zoom-in-90 data-[state=open]:sm:slide-in-from-bottom-0",t),...n,children:[e,L.jsxs(xse,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[L.jsx(By,{className:"h-4 w-4"}),L.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_se.displayName=dk.displayName;const Sse=E.forwardRef(({className:t,...e},n)=>L.jsx(fk,{ref:n,className:Lt("text-lg font-semibold leading-none tracking-tight",t),...e}));Sse.displayName=fk.displayName;const wse=E.forwardRef(({className:t,...e},n)=>L.jsx(hk,{ref:n,className:Lt("text-sm text-muted-foreground",t),...e}));wse.displayName=hk.displayName;const iM=E.forwardRef(({className:t,...e},n)=>L.jsx(yi,{ref:n,className:Lt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));iM.displayName=yi.displayName;const Ese=E.forwardRef(({className:t,...e},n)=>L.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[L.jsx(Bj,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),L.jsx(yi.Input,{ref:n,className:Lt("placeholder:text-foreground-muted flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));Ese.displayName=yi.Input.displayName;const Ase=E.forwardRef(({className:t,...e},n)=>L.jsx(yi.List,{ref:n,className:Lt("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));Ase.displayName=yi.List.displayName;const bse=E.forwardRef((t,e)=>L.jsx(yi.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));bse.displayName=yi.Empty.displayName;const sM=E.forwardRef(({className:t,...e},n)=>L.jsx(yi.Group,{ref:n,className:Lt("overflow-hidden text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground ",t),...e}));sM.displayName=yi.Group.displayName;const Mse=E.forwardRef(({className:t,...e},n)=>L.jsx(yi.Separator,{ref:n,className:Lt("-mx-1 h-px bg-border",t),...e}));Mse.displayName=yi.Separator.displayName;const oM=E.forwardRef(({className:t,...e},n)=>L.jsx(yi.Item,{ref:n,className:Lt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...e}));oM.displayName=yi.Item.displayName;function zc(t){return t.split("-")[0]}function nm(t){return t.split("-")[1]}function qd(t){return["top","bottom"].includes(zc(t))?"x":"y"}function aM(t){return t==="y"?"height":"width"}function rB(t,e,n){let{reference:r,floating:i}=t;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=qd(e),l=aM(a),c=r[l]/2-i[l]/2,d=a==="x";let f;switch(zc(e)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(nm(e)){case"start":f[a]-=c*(n&&d?-1:1);break;case"end":f[a]+=c*(n&&d?-1:1)}return f}const Cse=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:d}=rB(l,r,a),f=r,p={},m=0;for(let v=0;v<s.length;v++){const{name:y,fn:x}=s[v],{x:g,y:_,data:w,reset:b}=await x({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:l,platform:o,elements:{reference:t,floating:e}});c=g??c,d=_??d,p={...p,[y]:{...p[y],...w}},b&&m<=50&&(m++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(l=b.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):b.rects),{x:c,y:d}=rB(l,f,a)),v=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:p}};function gk(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function X0(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function gp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=e,v=gk(m),y=a[p?f==="floating"?"reference":"floating":f],x=X0(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),g=X0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:l}):o[f]);return{top:x.top-g.top+v.top,bottom:g.bottom-x.bottom+v.bottom,left:x.left-g.left+v.left,right:g.right-x.right+v.right}}const Tse=Math.min,Wl=Math.max;function AE(t,e,n){return Wl(t,Tse(e,n))}const iB=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:r=0}=t??{},{x:i,y:s,placement:o,rects:a,platform:l}=e;if(n==null)return{};const c=gk(r),d={x:i,y:s},f=qd(o),p=nm(o),m=aM(f),v=await l.getDimensions(n),y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",g=a.reference[m]+a.reference[f]-d[f]-a.floating[m],_=d[f]-a.reference[f],w=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let b=w?f==="y"?w.clientHeight||0:w.clientWidth||0:0;b===0&&(b=a.floating[m]);const C=g/2-_/2,T=c[y],P=b-v[m]-c[x],B=b/2-v[m]/2+C,R=AE(T,B,P),D=(p==="start"?c[y]:c[x])>0&&B!==R&&a.reference[m]<=a.floating[m];return{[f]:d[f]-(D?B<T?T-B:P-B:0),data:{[f]:R,centerOffset:B-R}}}}),Rse={left:"right",right:"left",bottom:"top",top:"bottom"};function J0(t){return t.replace(/left|right|bottom|top/g,e=>Rse[e])}function Pse(t,e,n){n===void 0&&(n=!1);const r=nm(t),i=qd(t),s=aM(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=J0(o)),{main:o,cross:J0(o)}}const Ise={start:"end",end:"start"};function sB(t){return t.replace(/start|end/g,e=>Ise[e])}const vk=["top","right","bottom","left"];vk.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Bse=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",flipAlignment:m=!0,...v}=t,y=zc(r),x=f||(y===o||!m?[J0(o)]:function(B){const R=J0(B);return[sB(B),R,sB(R)]}(o)),g=[o,...x],_=await gp(e,v),w=[];let b=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&w.push(_[y]),d){const{main:B,cross:R}=Pse(r,s,await(a.isRTL==null?void 0:a.isRTL(l.floating)));w.push(_[B],_[R])}if(b=[...b,{placement:r,overflows:w}],!w.every(B=>B<=0)){var C,T;const B=((C=(T=i.flip)==null?void 0:T.index)!=null?C:0)+1,R=g[B];if(R)return{data:{index:B,overflows:b},reset:{placement:R}};let D="bottom";switch(p){case"bestFit":{var P;const k=(P=b.map(X=>[X,X.overflows.filter($=>$>0).reduce(($,j)=>$+j,0)]).sort((X,$)=>X[1]-$[1])[0])==null?void 0:P[0].placement;k&&(D=k);break}case"initialPlacement":D=o}if(r!==D)return{reset:{placement:D}}}return{}}}};function oB(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function aB(t){return vk.some(e=>t[e]>=0)}const Dse=function(t){let{strategy:e="referenceHidden",...n}=t===void 0?{}:t;return{name:"hide",async fn(r){const{rects:i}=r;switch(e){case"referenceHidden":{const s=oB(await gp(r,{...n,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:aB(s)}}}case"escaped":{const s=oB(await gp(r,{...n,altBoundary:!0}),i.floating);return{data:{escapedOffsets:s,escaped:aB(s)}}}default:return{}}}}},Lse=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await async function(s,o){const{placement:a,platform:l,elements:c}=s,d=await(l.isRTL==null?void 0:l.isRTL(c.floating)),f=zc(a),p=nm(a),m=qd(a)==="x",v=["left","top"].includes(f)?-1:1,y=d&&m?-1:1,x=typeof o=="function"?o(s):o;let{mainAxis:g,crossAxis:_,alignmentAxis:w}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...x};return p&&typeof w=="number"&&(_=p==="end"?-1*w:w),m?{x:_*y,y:g*v}:{x:g*v,y:_*y}}(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function yk(t){return t==="x"?"y":"x"}const Fse=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:g,y:_}=x;return{x:g,y:_}}},...l}=t,c={x:n,y:r},d=await gp(e,l),f=qd(zc(i)),p=yk(f);let m=c[f],v=c[p];if(s){const x=f==="y"?"bottom":"right";m=AE(m+d[f==="y"?"top":"left"],m,m-d[x])}if(o){const x=p==="y"?"bottom":"right";v=AE(v+d[p==="y"?"top":"left"],v,v-d[x])}const y=a.fn({...e,[f]:m,[p]:v});return{...y,data:{x:y.x-n,y:y.y-r}}}}},Ose=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=t,d={x:n,y:r},f=qd(i),p=yk(f);let m=d[f],v=d[p];const y=typeof a=="function"?a({...s,placement:i}):a,x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const C=f==="y"?"height":"width",T=s.reference[f]-s.floating[C]+x.mainAxis,P=s.reference[f]+s.reference[C]-x.mainAxis;m<T?m=T:m>P&&(m=P)}if(c){var g,_,w,b;const C=f==="y"?"width":"height",T=["top","left"].includes(zc(i)),P=s.reference[p]-s.floating[C]+(T&&(g=(_=o.offset)==null?void 0:_[p])!=null?g:0)+(T?0:x.crossAxis),B=s.reference[p]+s.reference[C]+(T?0:(w=(b=o.offset)==null?void 0:b[p])!=null?w:0)-(T?x.crossAxis:0);v<P?v=P:v>B&&(v=B)}return{[f]:m,[p]:v}}}},Nse=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o,...a}=t,l=await gp(e,a),c=zc(n),d=nm(n);let f,p;c==="top"||c==="bottom"?(f=c,p=d===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(p=c,f=d==="end"?"top":"bottom");const m=Wl(l.left,0),v=Wl(l.right,0),y=Wl(l.top,0),x=Wl(l.bottom,0),g={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(y!==0||x!==0?y+x:Wl(l.top,l.bottom)):l[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(m!==0||v!==0?m+v:Wl(l.left,l.right)):l[p])},_=await i.getDimensions(s.floating);o==null||o({...e,...g});const w=await i.getDimensions(s.floating);return _.width!==w.width||_.height!==w.height?{reset:{rects:!0}}:{}}}};function xk(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function Yo(t){if(t==null)return window;if(!xk(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function rm(t){return Yo(t).getComputedStyle(t)}function Uo(t){return xk(t)?"":t?(t.nodeName||"").toLowerCase():""}function _k(){const t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function lo(t){return t instanceof Yo(t).HTMLElement}function tl(t){return t instanceof Yo(t).Element}function lM(t){return typeof ShadowRoot>"u"?!1:t instanceof Yo(t).ShadowRoot||t instanceof ShadowRoot}function tx(t){const{overflow:e,overflowX:n,overflowY:r}=rm(t);return/auto|scroll|overlay|hidden/.test(e+r+n)}function Use(t){return["table","td","th"].includes(Uo(t))}function lB(t){const e=/firefox/i.test(_k()),n=rm(t);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"}function Sk(){return!/^((?!chrome|android).)*safari/i.test(_k())}const cB=Math.min,Ch=Math.max,K0=Math.round;function ko(t,e,n){var r,i,s,o;e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect();let l=1,c=1;e&&lo(t)&&(l=t.offsetWidth>0&&K0(a.width)/t.offsetWidth||1,c=t.offsetHeight>0&&K0(a.height)/t.offsetHeight||1);const d=tl(t)?Yo(t):window,f=!Sk()&&n,p=(a.left+(f&&(r=(i=d.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/l,m=(a.top+(f&&(s=(o=d.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/c,v=a.width/l,y=a.height/c;return{width:v,height:y,top:m,right:p+v,bottom:m+y,left:p,x:p,y:m}}function Va(t){return(e=t,(e instanceof Yo(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function nx(t){return tl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function wk(t){return ko(Va(t)).left+nx(t).scrollLeft}function kse(t,e,n){const r=lo(e),i=Va(e),s=ko(t,r&&function(l){const c=ko(l);return K0(c.width)!==l.offsetWidth||K0(c.height)!==l.offsetHeight}(e),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((Uo(e)!=="body"||tx(i))&&(o=nx(e)),lo(e)){const l=ko(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else i&&(a.x=wk(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function Ek(t){return Uo(t)==="html"?t:t.assignedSlot||t.parentNode||(lM(t)?t.host:null)||Va(t)}function uB(t){return lo(t)&&getComputedStyle(t).position!=="fixed"?t.offsetParent:null}function bE(t){const e=Yo(t);let n=uB(t);for(;n&&Use(n)&&getComputedStyle(n).position==="static";)n=uB(n);return n&&(Uo(n)==="html"||Uo(n)==="body"&&getComputedStyle(n).position==="static"&&!lB(n))?e:n||function(r){let i=Ek(r);for(lM(i)&&(i=i.host);lo(i)&&!["html","body"].includes(Uo(i));){if(lB(i))return i;i=i.parentNode}return null}(t)||e}function dB(t){if(lo(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=ko(t);return{width:e.width,height:e.height}}function Ak(t){const e=Ek(t);return["html","body","#document"].includes(Uo(e))?t.ownerDocument.body:lo(e)&&tx(e)?e:Ak(e)}function Y0(t,e){var n;e===void 0&&(e=[]);const r=Ak(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Yo(r),o=i?[s].concat(s.visualViewport||[],tx(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Y0(o))}function fB(t,e,n){return e==="viewport"?X0(function(r,i){const s=Yo(r),o=Va(r),a=s.visualViewport;let l=o.clientWidth,c=o.clientHeight,d=0,f=0;if(a){l=a.width,c=a.height;const p=Sk();(p||!p&&i==="fixed")&&(d=a.offsetLeft,f=a.offsetTop)}return{width:l,height:c,x:d,y:f}}(t,n)):tl(e)?function(r,i){const s=ko(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(e,n):X0(function(r){var i;const s=Va(r),o=nx(r),a=(i=r.ownerDocument)==null?void 0:i.body,l=Ch(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=Ch(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let d=-o.scrollLeft+wk(r);const f=-o.scrollTop;return rm(a||s).direction==="rtl"&&(d+=Ch(s.clientWidth,a?a.clientWidth:0)-l),{width:l,height:c,x:d,y:f}}(Va(t)))}function zse(t){const e=Y0(t),n=["absolute","fixed"].includes(rm(t).position)&&lo(t)?bE(t):t;return tl(n)?e.filter(r=>tl(r)&&function(i,s){const o=s.getRootNode==null?void 0:s.getRootNode();if(i.contains(s))return!0;if(o&&lM(o)){let a=s;do{if(a&&i===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(r,n)&&Uo(r)!=="body"):[]}const Hse={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?zse(e):[].concat(n),r],o=s[0],a=s.reduce((l,c)=>{const d=fB(e,c,i);return l.top=Ch(d.top,l.top),l.right=cB(d.right,l.right),l.bottom=cB(d.bottom,l.bottom),l.left=Ch(d.left,l.left),l},fB(e,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=lo(n),s=Va(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((Uo(n)!=="body"||tx(s))&&(o=nx(n)),lo(n))){const l=ko(n,!0);a.x=l.x+n.clientLeft,a.y=l.y+n.clientTop}return{...e,x:e.x-o.scrollLeft+a.x,y:e.y-o.scrollTop+a.y}},isElement:tl,getDimensions:dB,getOffsetParent:bE,getDocumentElement:Va,getElementRects:t=>{let{reference:e,floating:n,strategy:r}=t;return{reference:kse(e,bE(n),r),floating:{...dB(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>rm(t).direction==="rtl"};function Gse(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,l=i&&!a,c=s&&!a,d=l||c?[...tl(t)?Y0(t):[],...Y0(e)]:[];d.forEach(v=>{l&&v.addEventListener("scroll",n,{passive:!0}),c&&v.addEventListener("resize",n)});let f,p=null;if(o){let v=!0;p=new ResizeObserver(()=>{v||n(),v=!1}),tl(t)&&!a&&p.observe(t),p.observe(e)}let m=a?ko(t):null;return a&&function v(){const y=ko(t);!m||y.x===m.x&&y.y===m.y&&y.width===m.width&&y.height===m.height||n(),m=y,f=requestAnimationFrame(v)}(),n(),()=>{var v;d.forEach(y=>{l&&y.removeEventListener("scroll",n),c&&y.removeEventListener("resize",n)}),(v=p)==null||v.disconnect(),p=null,a&&cancelAnimationFrame(f)}}const $se=(t,e,n)=>Cse(t,e,{platform:Hse,...n});var ME=typeof document<"u"?E.useLayoutEffect:E.useEffect;function CE(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!CE(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!CE(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Vse(t){const e=E.useRef(t);return ME(()=>{e.current=t}),e}function Wse(t){let{middleware:e,placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=t===void 0?{}:t;const s=E.useRef(null),o=E.useRef(null),a=Vse(i),l=E.useRef(null),[c,d]=E.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[f,p]=E.useState(e);CE(f==null?void 0:f.map(w=>{let{options:b}=w;return b}),e==null?void 0:e.map(w=>{let{options:b}=w;return b}))||p(e);const m=E.useCallback(()=>{!s.current||!o.current||$se(s.current,o.current,{middleware:f,placement:n,strategy:r}).then(w=>{v.current&&Cc.flushSync(()=>{d(w)})})},[f,n,r]);ME(()=>{v.current&&m()},[m]);const v=E.useRef(!1);ME(()=>(v.current=!0,()=>{v.current=!1}),[]);const y=E.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),s.current&&o.current)if(a.current){const w=a.current(s.current,o.current,m);l.current=w}else m()},[m,a]),x=E.useCallback(w=>{s.current=w,y()},[y]),g=E.useCallback(w=>{o.current=w,y()},[y]),_=E.useMemo(()=>({reference:s,floating:o}),[]);return E.useMemo(()=>({...c,update:m,refs:_,reference:x,floating:g}),[c,m,_,x,g])}const jse=t=>{const{element:e,padding:n}=t;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:t,fn(i){return r(e)?e.current!=null?iB({element:e.current,padding:n}).fn(i):{}:e?iB({element:e,padding:n}).fn(i):{}}}};function Xse(t){const[e,n]=E.useState(void 0);return Fo(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const bk="Popper",[cM,Mk]=fl(bk),[Jse,Ck]=cM(bk),Kse=t=>{const{__scopePopper:e,children:n}=t,[r,i]=E.useState(null);return E.createElement(Jse,{scope:e,anchor:r,onAnchorChange:i},n)},Yse="PopperAnchor",Qse=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=Ck(Yse,n),o=E.useRef(null),a=On(e,o);return E.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:E.createElement(Pn.div,Re({},i,{ref:a}))}),Q0="PopperContent",[qse,wae]=cM(Q0),[Zse,eoe]=cM(Q0,{hasParent:!1,positionUpdateFns:new Set}),toe=E.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:d,side:f="bottom",sideOffset:p=0,align:m="center",alignOffset:v=0,arrowPadding:y=0,collisionBoundary:x=[],collisionPadding:g=0,sticky:_="partial",hideWhenDetached:w=!1,avoidCollisions:b=!0,onPlaced:C,...T}=t,P=Ck(Q0,d),[B,R]=E.useState(null),D=On(e,V=>R(V)),[k,X]=E.useState(null),$=Xse(k),j=(n=$==null?void 0:$.width)!==null&&n!==void 0?n:0,H=(r=$==null?void 0:$.height)!==null&&r!==void 0?r:0,ie=f+(m!=="center"?"-"+m:""),Z=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},U=Array.isArray(x)?x:[x],O=U.length>0,z={padding:Z,boundary:U.filter(roe),altBoundary:O},{reference:ne,floating:J,strategy:q,x:ee,y:_e,placement:be,middlewareData:K,update:je}=Wse({strategy:"fixed",placement:ie,whileElementsMounted:Gse,middleware:[ioe(),Lse({mainAxis:p+H,alignmentAxis:v}),b?Fse({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?Ose():void 0,...z}):void 0,k?jse({element:k,padding:y}):void 0,b?Bse({...z}):void 0,Nse({...z,apply:({elements:V,availableWidth:N,availableHeight:Y})=>{V.floating.style.setProperty("--radix-popper-available-width",`${N}px`),V.floating.style.setProperty("--radix-popper-available-height",`${Y}px`)}}),soe({arrowWidth:j,arrowHeight:H}),w?Dse({strategy:"referenceHidden"}):void 0].filter(noe)});Fo(()=>{ne(P.anchor)},[ne,P.anchor]);const Xe=ee!==null&&_e!==null,[Ee,Me]=Tk(be),ve=Gn(C);Fo(()=>{Xe&&(ve==null||ve())},[Xe,ve]);const re=(i=K.arrow)===null||i===void 0?void 0:i.x,he=(s=K.arrow)===null||s===void 0?void 0:s.y,Fe=((o=K.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Be,ke]=E.useState();Fo(()=>{B&&ke(window.getComputedStyle(B).zIndex)},[B]);const{hasParent:Ze,positionUpdateFns:ze}=eoe(Q0,d),tt=!Ze;E.useLayoutEffect(()=>{if(!tt)return ze.add(je),()=>{ze.delete(je)}},[tt,ze,je]),Fo(()=>{tt&&Xe&&Array.from(ze).reverse().forEach(V=>requestAnimationFrame(V))},[tt,Xe,ze]);const ht={"data-side":Ee,"data-align":Me,...T,ref:D,style:{...T.style,animation:Xe?void 0:"none",opacity:(a=K.hide)!==null&&a!==void 0&&a.referenceHidden?0:void 0}};return E.createElement("div",{ref:J,"data-radix-popper-content-wrapper":"",style:{position:q,left:0,top:0,transform:Xe?`translate3d(${Math.round(ee)}px, ${Math.round(_e)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Be,["--radix-popper-transform-origin"]:[(l=K.transformOrigin)===null||l===void 0?void 0:l.x,(c=K.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:t.dir},E.createElement(qse,{scope:d,placedSide:Ee,onArrowChange:X,arrowX:re,arrowY:he,shouldHideArrow:Fe},tt?E.createElement(Zse,{scope:d,hasParent:!0,positionUpdateFns:ze},E.createElement(Pn.div,ht)):E.createElement(Pn.div,ht)))});function noe(t){return t!==void 0}function roe(t){return t!==null}const ioe=()=>({name:"anchorCssProperties",fn(t){const{rects:e,elements:n}=t,{width:r,height:i}=e.reference;return n.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),n.floating.style.setProperty("--radix-popper-anchor-height",`${i}px`),{}}}),soe=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,f=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,p=f?0:t.arrowWidth,m=f?0:t.arrowHeight,[v,y]=Tk(a),x={start:"0%",center:"50%",end:"100%"}[y],g=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+p/2,_=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let w="",b="";return v==="bottom"?(w=f?x:`${g}px`,b=`${-m}px`):v==="top"?(w=f?x:`${g}px`,b=`${l.floating.height+m}px`):v==="right"?(w=`${-m}px`,b=f?x:`${_}px`):v==="left"&&(w=`${l.floating.width+m}px`,b=f?x:`${_}px`),{data:{x:w,y:b}}}});function Tk(t){const[e,n="center"]=t.split("-");return[e,n]}const ooe=Kse,aoe=Qse,loe=toe,Rk="Popover",[Pk,Eae]=fl(Rk,[Mk]),uM=Mk(),[coe,Zd]=Pk(Rk),uoe=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=uM(e),l=E.useRef(null),[c,d]=E.useState(!1),[f=!1,p]=Uy({prop:r,defaultProp:i,onChange:s});return E.createElement(ooe,a,E.createElement(coe,{scope:e,contentId:dd(),triggerRef:l,open:f,onOpenChange:p,onOpenToggle:E.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:c,onCustomAnchorAdd:E.useCallback(()=>d(!0),[]),onCustomAnchorRemove:E.useCallback(()=>d(!1),[]),modal:o},n))},doe="PopoverTrigger",foe=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Zd(doe,n),s=uM(n),o=On(e,i.triggerRef),a=E.createElement(Pn.button,Re({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Dk(i.open)},r,{ref:o,onClick:Gt(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:E.createElement(aoe,Re({asChild:!0},s),a)}),Ik="PopoverPortal",[hoe,poe]=Pk(Ik,{forceMount:void 0}),moe=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Zd(Ik,e);return E.createElement(hoe,{scope:e,forceMount:n},E.createElement(vi,{present:n||s.open},E.createElement(YU,{asChild:!0,container:i},r)))},vp="PopoverContent",goe=E.forwardRef((t,e)=>{const n=poe(vp,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Zd(vp,t.__scopePopover);return E.createElement(vi,{present:r||s.open},s.modal?E.createElement(voe,Re({},i,{ref:e})):E.createElement(yoe,Re({},i,{ref:e})))}),voe=E.forwardRef((t,e)=>{const n=Zd(vp,t.__scopePopover),r=E.useRef(null),i=On(e,r),s=E.useRef(!1);return E.useEffect(()=>{const o=r.current;if(o)return nM(o)},[]),E.createElement(nk,{as:Sc,allowPinchZoom:!0},E.createElement(Bk,Re({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:Gt(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Gt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),yoe=E.forwardRef((t,e)=>{const n=Zd(vp,t.__scopePopover),r=E.useRef(!1);return E.createElement(Bk,Re({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s;if((s=t.onCloseAutoFocus)===null||s===void 0||s.call(t,i),!i.defaultPrevented){var o;r.current||(o=n.triggerRef.current)===null||o===void 0||o.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var s,o;(s=t.onInteractOutside)===null||s===void 0||s.call(t,i),i.defaultPrevented||(r.current=!0);const a=i.target;((o=n.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&i.preventDefault()}}))}),Bk=E.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...f}=t,p=Zd(vp,n),m=uM(n);return eM(),E.createElement(JU,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},E.createElement(jU,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1)},E.createElement(loe,Re({"data-state":Dk(p.open),role:"dialog",id:p.contentId},m,f,{ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function Dk(t){return t?"open":"closed"}const xoe=uoe,_oe=foe,Soe=moe,Lk=goe,Fk=xoe,Ok=_oe,dM=E.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>L.jsx(Soe,{children:L.jsx(Lk,{ref:i,align:e,sideOffset:n,className:Lt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));dM.displayName=Lk.displayName;const TE=[{value:"helvetica",label:"Helvetica"},{value:"hastron",label:"Hastron"},{value:"sunset-club",label:"Sunset-Club"},{value:"rocket-clouds",label:"Rocket-Clouds"},{value:"anton",label:"Anton"},{value:"avageri",label:"Avageri"},{value:"avaner",label:"Avaner"},{value:"bettina",label:"Bettina"},{value:"bourton",label:"Bourton"},{value:"brooklyn",label:"Brooklyn"},{value:"cherly",label:"Cherly"},{value:"cherrybomb",label:"Cherrybomb"},{value:"collegiate",label:"Collegiate"},{value:"comforta",label:"Comforta"},{value:"daddy",label:"Daddy"},{value:"dancingscript",label:"DancingScript"},{value:"devalencia",label:"DeValencia"},{value:"fathia",label:"Fathia"},{value:"garment",label:"Garment"},{value:"grisly",label:"Grisly"},{value:"himalaya",label:"Himalaya"},{value:"judge",label:"Judge"},{value:"maytra",label:"Maytra"},{value:"mistercartoon",label:"MisterCartoon"},{value:"neogothis",label:"Neogothis"},{value:"nixie",label:"Nixie"},{value:"pacifico",label:"Pacifico"},{value:"parisiente",label:"Parisiente"},{value:"poiret",label:"Poiret"},{value:"radith",label:"Radith"},{value:"retro",label:"Retro"},{value:"roboto",label:"Roboto"},{value:"rochester",label:"Rochester"},{value:"rubik",label:"Rubik"},{value:"secretsoul",label:"SecretSoul"},{value:"vector",label:"VECTOR"},{value:"vivita",label:"Vivita"}];TE.map(t=>Jp.preload(`./fonts/${t.value}.json`));const woe=({value:t,setValue:e})=>{var i;const[n,r]=E.useState(!1);return L.jsxs(Fk,{open:n,onOpenChange:r,children:[L.jsx(Ok,{asChild:!0,children:L.jsxs(Or,{role:"combobox","aria-expanded":n,className:"justify-between bg-white text-black border rounded-md border-gray-300 h-full w-full m-0 px-1 py-0 ",children:[L.jsx("span",{children:t?(i=TE.find(s=>s.value===t))==null?void 0:i.label:"Select font..."}),L.jsx(OF,{className:"ml-5 h-4 w-4 shrink-0 opacity-50"})]})}),L.jsx(dM,{className:"w-[24vw] py-3 px-1",align:"end",children:L.jsx(iM,{className:"w-full border-transparent",children:L.jsx(sM,{className:Lt("h-[300px]  border-transparent"),children:L.jsx(Uc,{className:"h-[300px]",children:L.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-x-1 gap-y-1 p-1",children:TE.map(s=>L.jsx(oM,{className:Lt("w-full border flex flex-col justify-center items-center shadow-md"),value:s.value,onSelect:o=>{e(o),r(!1)},children:L.jsx("p",{className:"text-l p-1",style:{fontFamily:s.label},children:s.label})}))})})})})})]})},RE={heart:L.jsx(bj,{size:24}),diamond:L.jsx(Sj,{size:24}),smile:L.jsx(Lj,{size:24}),star:L.jsx(NF,{size:24}),music:L.jsx(Pj,{size:24}),hash:L.jsx(Aj,{size:24}),circle:L.jsx(vj,{size:24}),triangle:L.jsx(Nj,{size:24}),square:L.jsx(Fj,{size:24}),x:L.jsx(By,{size:24}),popcorn:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-popcorn",children:[L.jsx("path",{d:"M18 8a2 2 0 0 0 0-4 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0 0 4"}),L.jsx("path",{d:"M10 22 9 8"}),L.jsx("path",{d:"m14 22 1-14"}),L.jsx("path",{d:"M20 8c.5 0 .9.4.8 1l-2.6 12c-.1.5-.7 1-1.2 1H7c-.6 0-1.1-.4-1.2-1L3.2 9c-.1-.6.3-1 .8-1Z"})]}),spade:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-spade",children:[L.jsx("path",{d:"M5 9c-1.5 1.5-3 3.2-3 5.5A5.5 5.5 0 0 0 7.5 20c1.8 0 3-.5 4.5-2 1.5 1.5 2.7 2 4.5 2a5.5 5.5 0 0 0 5.5-5.5c0-2.3-1.5-4-3-5.5l-7-7-7 7Z"}),L.jsx("path",{d:"M12 18v4"})]}),club:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-club",children:[L.jsx("path",{d:"M17.28 9.05a5.5 5.5 0 1 0-10.56 0A5.5 5.5 0 1 0 12 17.66a5.5 5.5 0 1 0 5.28-8.6Z"}),L.jsx("path",{d:"M12 17.66L12 22"})]}),coffee:L.jsx(yj,{size:24}),croissant:L.jsx(xj,{size:24}),sun:L.jsx(Oj,{size:24}),paw:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-paw-print",children:[L.jsx("circle",{cx:"11",cy:"4",r:"2"}),L.jsx("circle",{cx:"18",cy:"8",r:"2"}),L.jsx("circle",{cx:"20",cy:"16",r:"2"}),L.jsx("path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"})]}),cat:L.jsx(gj,{size:24})},Nk=Object.keys(RE);Nk.forEach(t=>Fy.preload(`./${t}.glb`));const Eoe=({value:t,setValue:e})=>{const[n,r]=Rt.useState(!1);return L.jsxs(Fk,{open:n,onOpenChange:r,children:[L.jsx(Ok,{asChild:!0,children:L.jsxs(Or,{role:"combobox","aria-expanded":n,className:"justify-between bg-white text-black border rounded-md border-gray-300 h-full w-full m-0 px-1 py-0 ",children:[RE[t],L.jsx("span",{className:"capitalized ml-2 mr-auto",children:t||"Select symbol"}),L.jsx(OF,{className:"ml-5 h-4 w-4 shrink-0 opacity-50"})]})}),L.jsx(dM,{className:"w-[25vw] py-3 px-1",align:"end",children:L.jsx(iM,{className:"w-full border-transparent",children:L.jsx(sM,{className:Lt("h-[260px] border-transparent"),children:L.jsx(Uc,{className:"h-[260px]",children:L.jsx("div",{className:"w-full h-full grid grid-cols-5 gap-x-2 gap-y-2 p-1",children:Nk.map(i=>L.jsx(oM,{className:Lt("h-[60px] w-[60px] border flex flex-col justify-center items-center shadow-md"),onSelect:s=>{console.log(s),e(s),r(!1)},value:i,children:RE[i]},i))})})})})})]})},Aoe=({item:t})=>{const{id:e}=t,[n,r,i]=Bc(p=>[p.textsAndModels,p.editText,p.removeText]),[s,o]=Za(p=>[p.selected,p.setSelected]),a=n.find(p=>p.id===e),l=Ine({background:s===e?"rgb(209, 213, 219, 0.5)":"rgb(255, 255, 255)"}),c=p=>{r(e,{color:p})},d=p=>{r(e,{font:p})},f=p=>{r(e,{path:p})};return L.jsxs(yU.div,{onClick:()=>o(e),style:l,className:Lt("flex flex-col gap-3 p-3 justify-center items-center relative w-full hover:cursor-pointer"),children:[L.jsx("button",{className:"absolute top-0 right-0 bg-red-600 p-1 rounded-bl-lg ",onClick:()=>i(e),children:L.jsx(yb,{width:14,height:14,className:"text-white"})}),"text"in a?L.jsxs("div",{className:"flex gap-3 justify-between w-full flex-shrink-0",children:[L.jsxs("div",{className:"flex flex-col w-1/2 ",children:[L.jsx("h1",{children:"Text"}),L.jsx(_U,{className:"bg-white",value:a.text,onChange:p=>{r(e,{text:p.target.value})}})]}),L.jsxs("div",{className:"flex flex-col w-1/2",children:[L.jsx("h1",{children:"Font"}),L.jsx(woe,{value:a?a.font:"helvetica",setValue:d})]})]}):L.jsx("div",{className:"flex gap-3 justify-between w-full flex-shrink-0",children:L.jsx(Eoe,{value:a?a.path:"star",setValue:f})}),L.jsx(Kne,{selectColor:c})]})},hB=(t,e=!1,n=0,r=0,i=0)=>s=>e&&s===n?{y:r*130+i,scale:1.01,zIndex:20,shadow:15,immediate:o=>o==="y"||o==="zIndex"}:{y:t.indexOf(s)*130,scale:1,zIndex:0,shadow:1,immediate:!1};function boe({items:t}){const[e]=Bc(o=>[o.editText]),n=E.useRef(t.map((o,a)=>a)),[r,i]=gU(t.length,hB(n.current)),s=NJ(({args:[o],active:a,movement:[,l]})=>{const c=n.current.indexOf(o),d=c>-1?c:t.length-1,f=PO(Math.round((d*130+l)/100),0,t.length-1),p=Wne(n.current,c,f);i.start(hB(p,a,o,c,l));let m=(p.length-1)*.8,v=99-p.length;a||[...p].forEach(y=>{e(t[y].id,{height:Number(m.toFixed(2)),renderOrder:v}),m-=.8,v+=1}),a||(n.current=p)});return L.jsx("div",{className:"relative w-[calc(100%-8px)] shadow-inner border rounded-md bg-gray-100",style:{height:t.length*120},children:r.map(({zIndex:o,shadow:a,y:l,scale:c},d)=>L.jsxs(yU.div,{className:"absolute w-full h-[120px] origin-center capitalize touch-none text-sm select-non bg-white flex rounded-sm overflow-hidden",style:{zIndex:o,boxShadow:a.to(f=>`rgba(0, 0, 0, 0.15) 0px ${f}px ${2*f}px 0px`),y:l,scale:c},children:[L.jsx("div",{className:"w-[12px] h-full bg-gray-200 py-[5px] px-[2px] grid grid-cols-2 items-center justify-center touch-none cursor-grabbing",...s(d),children:[...Array(40)].map((f,p)=>L.jsx("div",{className:"w-[2px] h-[2px] bg-gray-500 rounded-[50%]"},p))}),L.jsx(Aoe,{item:t[d]})]},t[d].id))})}const Moe=()=>{const[t,e]=Bc(n=>[n.addText,n.addModel]);return L.jsxs("div",{className:"flex w-full justify-center gap-12 mb-5",children:[L.jsx(Or,{size:"sm",onClick:()=>t("hello",!0,"helvetica",FR()),children:"Add text"}),L.jsx(Or,{size:"sm",onClick:()=>e("star",!0,FR()),children:"Add Symbol"})]})},Coe=()=>{const[t,e,n]=Bc(r=>[r.textsAndModels,r.height,r.clearBoard]);return L.jsxs("div",{className:"flex flex-col gap-3 px-6 pt-6 pb-0 justify-center relative items-center",children:[L.jsxs("div",{className:"flex self-start justify-around w-full ",children:[L.jsxs("div",{className:"flex flex-col",children:[L.jsx("h1",{className:"self-start text-2xl font-bold text-primarypink",children:"Layers"}),L.jsx("p",{className:"text-sm self-start font-thin tracking-wide text-gray-500 mb-3",children:"(Drag to move behind each other)"})]}),L.jsxs("button",{className:"flex text-sm items-center self-start mt-2 gap-2 ml-auto",onClick:()=>n(),children:["Clear board",L.jsx(yb,{height:14,width:14})]})]}),L.jsx(Moe,{}),L.jsx("div",{className:"w-full flex justify-center ",children:L.jsx(Uc,{className:"w-full h-[60vh] 2xl:h-[70vh]",children:t.length>0?L.jsx("div",{children:L.jsx(boe,{items:t},e)}):L.jsx("div",{className:"h-[120px] w-full rounded-md border bg-gray-100 shadow-inner flex justify-center items-center",children:L.jsx("p",{className:"text-sm font-light text-center text-gray-500",children:"No layers yet. Add some by clicking the buttons on the top!"})})})})]})},Toe=["S","M","L","XL","Custom"],Roe=()=>{const[t]=oo(o=>[o.setScale]),e=Za(o=>o.setSelected),[n,r]=E.useState(0),[i,s]=E.useState(!1);return E.useEffect(()=>{n!==0&&t(2,n)},[n,t]),L.jsxs("div",{className:"flex flex-col w-full",children:[L.jsx("div",{className:"flex flex-wrap w-full gap-3 mb-5",children:Toe.map(o=>L.jsx("button",{onClick:()=>{o==="S"&&(e(""),t(1,300),s(!1)),o==="M"&&(e(""),t(1.25,300),s(!1)),o==="L"&&(e(""),t(1.5,300),s(!1)),o==="XL"&&(e(""),t(2,300),s(!1)),o==="Custom"&&(e(""),s(!0))},className:Lt("text-xs border bg-white hover:bg-gray-300 transition-all duration-300 px-2 py-3 min-w-[80px]"),children:o},o))}),i&&L.jsxs("div",{className:"p-3 ",children:[L.jsx("h2",{className:"mb-3 font-semibold",children:"Custom width:"}),L.jsx(Ub,{min:1,max:299,step:1,onValueChange:([o])=>{e(""),r(o)},value:[n]})]}),L.jsxs("div",{className:"flex gap-1 justify-center items-center w-full mb-6",children:[L.jsx(mj,{className:"w-3 h-3 text-orange-500"}),L.jsx("p",{className:"text-xs font-light text-gray-500",children:"Note: sum of width and height combined can not exceed 200cm."})]})]})},Poe=[["black","#000"],["transparent","#EFEFEF"],["gray","#A6A6A6"],["gold","#D1C271"]],Ioe=()=>{const[t,e]=oo(n=>[n.boardColor,n.setBoardColor]);return L.jsx("div",{className:"flex gap-2",children:Poe.map(n=>L.jsx("button",{onClick:()=>e(n[0]),className:Lt("w-8 h-8 bg-white border rounded-[50%] flex items-center justify-center",t===n[0]?"border-gray-500":"border-gray-200"),children:L.jsx("div",{style:{backgroundColor:n[1]},className:"w-6 h-6 rounded-[50%]"})},n[0]))})},pB=["full-board","to-shape","hollowed-out","no-board"],Boe=()=>{const[t,e,n]=oo(r=>[r.setIsCustom,r.setBoardStyle,r.boardStyle]);return L.jsxs("div",{className:"p-6 flex flex-col justify-center items-center gap-3",children:[L.jsx("h1",{className:"text-2xl font-bold text-primarypink place-self-start",children:"Board"}),L.jsxs(QO,{defaultValue:"full-board",className:"w-full",children:[L.jsx(Db,{className:"mb-3",children:pB.map(r=>L.jsx(Lb,{onClick:()=>{e(r),r!=="full-board"&&t(!0,"Auto-fit")},className:"capitalize",value:r,children:r.replace("-"," ")}))}),L.jsx(Uc,{className:"w-full h-[65vh] 2xl:h-[70vh]",children:pB.map(r=>L.jsxs(Fb,{className:"flex flex-col w-[calc(100%-8px)]",value:r,children:[L.jsxs("article",{className:"flex flex-col gap-3 mb-5",children:[L.jsx("p",{className:"text-sm font-light text-gray-500",children:"Example:"}),L.jsx("div",{className:"p-3 h-[250px] relative overflow-hidden ",children:L.jsx("img",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 object-cover",src:`/${r}.png`,alt:"neon sign"})})]}),r==="full-board"&&L.jsxs("article",{className:"flex flex-col gap-3",children:[L.jsx("h1",{className:"font-bold",children:"Board width:"}),L.jsx(Roe,{})]}),L.jsxs("article",{className:"flex flex-col mb-3",children:[L.jsx("h1",{className:"font-bold mb-2",children:"Board color:"}),L.jsx(Ioe,{})]})]}))})]})]})},Doe=t=>t.selectedSidebar,Loe=[L.jsx(L.Fragment,{}),L.jsx(L.Fragment,{}),L.jsx(L.Fragment,{}),L.jsx(wte,{}),L.jsx(L.Fragment,{}),L.jsx(Coe,{}),L.jsx(Boe,{})],Foe=()=>{const t=Dc(Doe);return L.jsx("div",{className:"absolute -left-1 top-20 bottom-5 w-[30vw] z-50 bg-secondary rounded-md ",children:Loe[t]})},Ooe=t=>[t.switch,t.is3dModeOn,t.isRullerOn,t.setRuller,t.brightness,t.setBrightness],Noe=()=>{const[t,e,n,r,i,s]=Lc(Ooe),o=Za(c=>c.setSelected),[a,l]=Dc(c=>[c.setIsShown,c.setSelectedSidebar]);return L.jsxs("div",{className:"flex gap-3 justify-center items-center",children:[L.jsx("div",{className:"flex rounded-[200px]  border border-primarypink ",children:L.jsx(Or,{variant:"ghost",className:"p-2 hover:bg-transparent rounded-[50%]",onClick:()=>{s(i!==0?0:100)},children:i!==0?L.jsx(Rj,{size:24,className:"text-primarypink"}):L.jsx(Tj,{size:24,className:"text-primarypink"})})}),L.jsx(Or,{onClick:()=>{r(!n)},className:Lt("border-primarypink px-2 py-4",n?"bg-[linear-gradient(277deg,_#f50cf5_-3%,#f50cf5_28%,#f5002e_123%)] text-white":"bg-transparent text-primarypink"),variant:"outline",children:L.jsx(Ij,{size:24})}),L.jsx(Or,{className:"border-primarypink py-2 px-4",variant:"outline",onClick:()=>{if(e){t(!1),a(!0),l(5);return}o(""),a(!1),l(-1),r(!1),t(!0)},children:e?"Switch to 2D":"Switch to 3D"})]})},Uoe=({template:t})=>{const e=Bc(n=>n.loadTemplate);return L.jsxs("div",{className:"w-[270px] h-[341px] flex flex-col border rounded-md overflow-hidden",children:[L.jsx("div",{className:"w-[270px] h-[270px] bg-accent "}),L.jsxs("div",{className:"flex justify-between items-center p-3",children:[L.jsx("h1",{className:"py-2 px-4",children:"Name"}),L.jsx(Or,{onClick:()=>e(t),children:"Upload"})]})]})},koe=()=>{const[t,e]=mb(i=>[i.setIsOpen,i.templates]),[n,r]=Dc(i=>[i.setSelectedSidebar,i.setIsShown]);return L.jsxs("div",{className:"absolute left-[2vw] right-[2vw] top-[15vh] bottom-[10vh] z-[99] bg-white rounded-md p-14 overflow-hidden",children:[L.jsx("button",{className:"absolute top-3 right-3",onClick:()=>{n(5),t(!1),r(!0)},children:L.jsx(By,{width:24,height:24})}),L.jsxs("div",{className:"flex flex-col justify-between items-center gap-3",children:[L.jsx("h1",{className:"text-2xl font-bold text-primarypink",children:"Template gallery"}),L.jsx("p",{children:"Select a template to load it into and customize to your liking."}),L.jsx(Uc,{className:"w-full h-[370px] ",children:L.jsx("div",{className:"grid grid-cols-4 gap-10  w-full",children:e.length>0&&e.map(i=>L.jsx(Uoe,{template:i}))})})]})]})},mB=({colors:t,currentColor:e,setColor:n})=>L.jsx("div",{className:"flex gap-2",children:t.map(r=>L.jsx("button",{onClick:()=>n(r[0]),className:Lt("w-8 h-8 bg-white border rounded-[50%] flex items-center justify-center",e===r[0]?"border-gray-500":"border-gray-200"),children:L.jsx("div",{style:{backgroundColor:r[1]},className:"w-6 h-6 rounded-[50%]"})},r[0]))}),zoe=({title:t})=>{const[e,n,r,i,s,o]=Gp(a=>[a.placement,a.cableColor,a.mountingKit,a.setPlacement,a.setCableColor,a.setMountingKit]);return L.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 w-[300px]",children:[L.jsx("h1",{className:"text-xl font-bold capitalize",children:t}),L.jsx("div",{children:L.jsx("img",{className:"object-cover h-[200px]",src:"./"+t.replace(" ","-")+".jpg",alt:t})}),L.jsxs("p",{className:"text-xs text-gray-500",children:[t==="mounting kit"&&"Wall mounting kit will let you place your sign on a wall but you’ll have to drill some holes.",t==="remote control"&&"Free remote control and dimmer are included with each package.",t==="placement"&&"P65 rating means that the enclosure can only provide protection against low pressure (6.3mm) water jets. Protected from total dust ingress. Protected from low-pressure water jets from any direction. ",t==="cable color"&&"We include 2m cable of chosen color with each sign."]}),t==="placement"&&L.jsx("div",{className:"flex flex-col gap-3",children:L.jsxs("div",{className:"flex gap-3",children:[L.jsx(Or,{className:e==="outdoor"&&"bg-gray-300",onClick:()=>i("indoor"),size:"sm",children:"Indoors"}),L.jsxs("div",{className:"flex flex-col justify-center items-center gap-1",children:[L.jsx(Or,{className:e!=="outdoor"&&"bg-gray-300",onClick:()=>i("outdoor"),size:"sm",children:"Outdoors"}),e==="outdoor"&&L.jsx("p",{className:"text-primarypink font-bold",children:"+10$"})]})]})}),t==="cable color"&&L.jsx("div",{className:"self-start",children:L.jsx(mB,{colors:[["black","#000"],["white","#fff"],["gray","#ccc"]],currentColor:n,setColor:s})}),t==="mounting kit"&&L.jsxs("div",{className:"flex flex-col gap-3",children:[L.jsxs("div",{className:"flex gap-3",children:[L.jsx(Or,{className:r.type==="wall"&&"bg-gray-300",onClick:()=>o({type:"hanging",color:"black"}),size:"sm",children:"Hanging"}),L.jsx(Or,{className:r.type==="hanging"&&"bg-gray-300",onClick:()=>o({type:"wall",color:"black"}),size:"sm",children:"Wall mount"})]}),L.jsxs("div",{className:"flex justify-between items-center",children:[r.type==="wall"&&L.jsx(mB,{colors:[["black","#000"],["gold","#D1C271"],["gray","#A6A6A6"]],currentColor:r.color,setColor:a=>o({type:"wall",color:a})}),L.jsx("p",{className:"font-bold text-primarypink",children:r.type==="wall"&&"+10$"})]})]})]})},Hoe=["placement","cable color","mounting kit","remote control"],Goe=()=>{const[t]=Gp(r=>[r.setIsOpen]),[e,n]=Dc(r=>[r.setSelectedSidebar,r.setIsShown]);return L.jsxs("div",{className:"absolute left-[2vw] right-[2vw] top-[15vh] bottom-[5vh] z-[99] bg-white rounded-md p-14 flex flex-col gap-5 items-center overflow-hidden",children:[L.jsx("button",{className:"absolute top-3 right-3",onClick:()=>{t(!1),e(5),n(!0)},children:L.jsx(By,{width:24,height:24})}),L.jsx("h1",{className:"text-2xl text-primarypink font-bold",children:"Sign settings"}),L.jsx("div",{className:"flex gap-12",children:Hoe.map(r=>L.jsx(zoe,{title:r},r))})]})},$oe=({children:t})=>L.jsxs("div",{className:" w-[100%] h-[calc(100vh-65px)] overflow-hidden relative",children:[L.jsx(RX,{className:"z-10 h-full w-full",onCreated:e=>console.log(e),gl:{logarithmicDepthBuffer:!0,preserveDrawingBuffer:!0},children:t}),L.jsx(VX,{})]});function Voe(){const t=Dc(r=>r.isShown),e=mb(r=>r.isOpen),n=Gp(r=>r.isOpen);return L.jsxs("main",{className:"overflow-hidden",children:[L.jsx(zj,{}),L.jsx($oe,{children:L.jsx(Iq,{})}),n&&L.jsx(Goe,{}),e&&L.jsx(koe,{}),t&&L.jsx(Foe,{}),L.jsx("div",{className:"absolute bottom-10 right-10 z-30",children:L.jsx(Noe,{})})]})}iS.createRoot(document.getElementById("root")).render(L.jsx(Rt.StrictMode,{children:L.jsx(Voe,{})}));
