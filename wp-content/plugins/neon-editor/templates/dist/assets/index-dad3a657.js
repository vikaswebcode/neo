var k5=Object.defineProperty;var z5=(t,e,n)=>e in t?k5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var qe=(t,e,n)=>(z5(t,typeof e!="symbol"?e+"":e,n),n);function H5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function yl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qD={exports:{}},ky={},ZD={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=Symbol.for("react.element"),G5=Symbol.for("react.portal"),$5=Symbol.for("react.fragment"),V5=Symbol.for("react.strict_mode"),W5=Symbol.for("react.profiler"),j5=Symbol.for("react.provider"),X5=Symbol.for("react.context"),J5=Symbol.for("react.forward_ref"),K5=Symbol.for("react.suspense"),Y5=Symbol.for("react.memo"),Q5=Symbol.for("react.lazy"),f2=Symbol.iterator;function q5(t){return t===null||typeof t!="object"?null:(t=f2&&t[f2]||t["@@iterator"],typeof t=="function"?t:null)}var eL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tL=Object.assign,nL={};function rf(t,e,n){this.props=t,this.context=e,this.refs=nL,this.updater=n||eL}rf.prototype.isReactComponent={};rf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rL(){}rL.prototype=rf.prototype;function HA(t,e,n){this.props=t,this.context=e,this.refs=nL,this.updater=n||eL}var GA=HA.prototype=new rL;GA.constructor=HA;tL(GA,rf.prototype);GA.isPureReactComponent=!0;var h2=Array.isArray,iL=Object.prototype.hasOwnProperty,$A={current:null},sL={key:!0,ref:!0,__self:!0,__source:!0};function oL(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)iL.call(e,r)&&!sL.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:jp,type:t,key:s,ref:o,props:i,_owner:$A.current}}function Z5(t,e){return{$$typeof:jp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function VA(t){return typeof t=="object"&&t!==null&&t.$$typeof===jp}function eH(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var p2=/\/+/g;function c_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eH(""+t.key):e.toString(36)}function h0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jp:case G5:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+c_(o,0):r,h2(i)?(n="",t!=null&&(n=t.replace(p2,"$&/")+"/"),h0(i,e,n,"",function(c){return c})):i!=null&&(VA(i)&&(i=Z5(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(p2,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",h2(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+c_(s,a);o+=h0(s,e,n,l,i)}else if(l=q5(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+c_(s,a++),o+=h0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pg(t,e,n){if(t==null)return t;var r=[],i=0;return h0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function tH(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qr={current:null},p0={transition:null},nH={ReactCurrentDispatcher:qr,ReactCurrentBatchConfig:p0,ReactCurrentOwner:$A};Ot.Children={map:Pg,forEach:function(t,e,n){Pg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pg(t,function(){e++}),e},toArray:function(t){return Pg(t,function(e){return e})||[]},only:function(t){if(!VA(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ot.Component=rf;Ot.Fragment=$5;Ot.Profiler=W5;Ot.PureComponent=HA;Ot.StrictMode=V5;Ot.Suspense=K5;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nH;Ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tL({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$A.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)iL.call(e,l)&&!sL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:jp,type:t.type,key:i,ref:s,props:r,_owner:o}};Ot.createContext=function(t){return t={$$typeof:X5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:j5,_context:t},t.Consumer=t};Ot.createElement=oL;Ot.createFactory=function(t){var e=oL.bind(null,t);return e.type=t,e};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(t){return{$$typeof:J5,render:t}};Ot.isValidElement=VA;Ot.lazy=function(t){return{$$typeof:Q5,_payload:{_status:-1,_result:t},_init:tH}};Ot.memo=function(t,e){return{$$typeof:Y5,type:t,compare:e===void 0?null:e}};Ot.startTransition=function(t){var e=p0.transition;p0.transition={};try{t()}finally{p0.transition=e}};Ot.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ot.useCallback=function(t,e){return qr.current.useCallback(t,e)};Ot.useContext=function(t){return qr.current.useContext(t)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(t){return qr.current.useDeferredValue(t)};Ot.useEffect=function(t,e){return qr.current.useEffect(t,e)};Ot.useId=function(){return qr.current.useId()};Ot.useImperativeHandle=function(t,e,n){return qr.current.useImperativeHandle(t,e,n)};Ot.useInsertionEffect=function(t,e){return qr.current.useInsertionEffect(t,e)};Ot.useLayoutEffect=function(t,e){return qr.current.useLayoutEffect(t,e)};Ot.useMemo=function(t,e){return qr.current.useMemo(t,e)};Ot.useReducer=function(t,e,n){return qr.current.useReducer(t,e,n)};Ot.useRef=function(t){return qr.current.useRef(t)};Ot.useState=function(t){return qr.current.useState(t)};Ot.useSyncExternalStore=function(t,e,n){return qr.current.useSyncExternalStore(t,e,n)};Ot.useTransition=function(){return qr.current.useTransition()};Ot.version="18.2.0";ZD.exports=Ot;var S=ZD.exports;const vt=yl(S),rH=H5({__proto__:null,default:vt},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iH=S,sH=Symbol.for("react.element"),oH=Symbol.for("react.fragment"),aH=Object.prototype.hasOwnProperty,lH=iH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cH={key:!0,ref:!0,__self:!0,__source:!0};function aL(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)aH.call(e,r)&&!cH.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:sH,type:t,key:s,ref:o,props:i,_owner:lH.current}}ky.Fragment=oH;ky.jsx=aL;ky.jsxs=aL;qD.exports=ky;var L=qD.exports,cw={},lL={exports:{}},Ni={},cL={exports:{}},uL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,N){var G=U.length;U.push(N);e:for(;0<G;){var ne=G-1>>>1,J=U[ne];if(0<i(J,N))U[ne]=N,U[G]=J,G=ne;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var N=U[0],G=U.pop();if(G!==N){U[0]=G;e:for(var ne=0,J=U.length,ee=J>>>1;ne<ee;){var te=2*(ne+1)-1,ye=U[te],Ae=te+1,K=U[Ae];if(0>i(ye,G))Ae<J&&0>i(K,ye)?(U[ne]=K,U[Ae]=G,ne=Ae):(U[ne]=ye,U[te]=G,ne=te);else if(Ae<J&&0>i(K,G))U[ne]=K,U[Ae]=G,ne=Ae;else break e}}return N}function i(U,N){var G=U.sortIndex-N.sortIndex;return G!==0?G:U.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=U)r(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function A(U){if(y=!1,E(U),!v)if(n(l)!==null)v=!0,Q(M);else{var N=n(c);N!==null&&Z(A,N.startTime-U)}}function M(U,N){v=!1,y&&(y=!1,g(I),I=-1),m=!0;var G=p;try{for(E(N),d=n(l);d!==null&&(!(d.expirationTime>N)||U&&!F());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var J=ne(d.expirationTime<=N);N=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&r(l),E(N)}else r(l);d=n(l)}if(d!==null)var ee=!0;else{var te=n(c);te!==null&&Z(A,te.startTime-N),ee=!1}return ee}finally{d=null,p=G,m=!1}}var T=!1,P=null,I=-1,R=5,D=-1;function F(){return!(t.unstable_now()-D<R)}function X(){if(P!==null){var U=t.unstable_now();D=U;var N=!0;try{N=P(!0,U)}finally{N?z():(T=!1,P=null)}}else T=!1}var z;if(typeof _=="function")z=function(){_(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,H=V.port2;V.port1.onmessage=X,z=function(){H.postMessage(null)}}else z=function(){x(X,0)};function Q(U){P=U,T||(T=!0,z())}function Z(U,N){I=x(function(){U(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,Q(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var N=3;break;default:N=p}var G=p;p=N;try{return U()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,N){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=p;p=U;try{return N()}finally{p=G}},t.unstable_scheduleCallback=function(U,N,G){var ne=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ne+G:ne):G=ne,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=G+J,U={id:u++,callback:N,priorityLevel:U,startTime:G,expirationTime:J,sortIndex:-1},G>ne?(U.sortIndex=G,e(c,U),n(l)===null&&U===n(c)&&(y?(g(I),I=-1):y=!0,Z(A,G-ne))):(U.sortIndex=J,e(l,U),v||m||(v=!0,Q(M))),U},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(U){var N=p;return function(){var G=p;p=N;try{return U.apply(this,arguments)}finally{p=G}}}})(uL);cL.exports=uL;var uH=cL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dL=S,Oi=uH;function Ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fL=new Set,ep={};function $c(t,e){Dd(t,e),Dd(t+"Capture",e)}function Dd(t,e){for(ep[t]=e,t=0;t<e.length;t++)fL.add(e[t])}var Jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uw=Object.prototype.hasOwnProperty,dH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m2={},g2={};function fH(t){return uw.call(g2,t)?!0:uw.call(m2,t)?!1:dH.test(t)?g2[t]=!0:(m2[t]=!0,!1)}function hH(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pH(t,e,n,r){if(e===null||typeof e>"u"||hH(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mr[t]=new Zr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mr[e]=new Zr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mr[t]=new Zr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mr[t]=new Zr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mr[t]=new Zr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mr[t]=new Zr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mr[t]=new Zr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mr[t]=new Zr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mr[t]=new Zr(t,5,!1,t.toLowerCase(),null,!1,!1)});var WA=/[\-:]([a-z])/g;function jA(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(WA,jA);Mr[e]=new Zr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(WA,jA);Mr[e]=new Zr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(WA,jA);Mr[e]=new Zr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mr[t]=new Zr(t,1,!1,t.toLowerCase(),null,!1,!1)});Mr.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mr[t]=new Zr(t,1,!1,t.toLowerCase(),null,!0,!0)});function XA(t,e,n,r){var i=Mr.hasOwnProperty(e)?Mr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pH(e,n,i,r)&&(n=null),r||i===null?fH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ra=dL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ig=Symbol.for("react.element"),td=Symbol.for("react.portal"),nd=Symbol.for("react.fragment"),JA=Symbol.for("react.strict_mode"),dw=Symbol.for("react.profiler"),hL=Symbol.for("react.provider"),pL=Symbol.for("react.context"),KA=Symbol.for("react.forward_ref"),fw=Symbol.for("react.suspense"),hw=Symbol.for("react.suspense_list"),YA=Symbol.for("react.memo"),Da=Symbol.for("react.lazy"),mL=Symbol.for("react.offscreen"),v2=Symbol.iterator;function jf(t){return t===null||typeof t!="object"?null:(t=v2&&t[v2]||t["@@iterator"],typeof t=="function"?t:null)}var Pn=Object.assign,u_;function bh(t){if(u_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);u_=e&&e[1]||""}return`
`+u_+t}var d_=!1;function f_(t,e){if(!t||d_)return"";d_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{d_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bh(t):""}function mH(t){switch(t.tag){case 5:return bh(t.type);case 16:return bh("Lazy");case 13:return bh("Suspense");case 19:return bh("SuspenseList");case 0:case 2:case 15:return t=f_(t.type,!1),t;case 11:return t=f_(t.type.render,!1),t;case 1:return t=f_(t.type,!0),t;default:return""}}function pw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nd:return"Fragment";case td:return"Portal";case dw:return"Profiler";case JA:return"StrictMode";case fw:return"Suspense";case hw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pL:return(t.displayName||"Context")+".Consumer";case hL:return(t._context.displayName||"Context")+".Provider";case KA:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case YA:return e=t.displayName||null,e!==null?e:pw(t.type)||"Memo";case Da:e=t._payload,t=t._init;try{return pw(t(e))}catch{}}return null}function gH(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pw(e);case 8:return e===JA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vH(t){var e=gL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bg(t){t._valueTracker||(t._valueTracker=vH(t))}function vL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function U0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mw(t,e){var n=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function y2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yL(t,e){e=e.checked,e!=null&&XA(t,"checked",e,!1)}function gw(t,e){yL(t,e);var n=sl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vw(t,e.type,n):e.hasOwnProperty("defaultValue")&&vw(t,e.type,sl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vw(t,e,n){(e!=="number"||U0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mh=Array.isArray;function xd(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ie(92));if(Mh(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sl(n)}}function xL(t,e){var n=sl(e.value),r=sl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function S2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _L(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_L(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dg,SL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dg=Dg||document.createElement("div"),Dg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yH=["Webkit","ms","Moz","O"];Object.keys(Bh).forEach(function(t){yH.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bh[e]=Bh[t]})});function wL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bh.hasOwnProperty(t)&&Bh[t]?(""+e).trim():e+"px"}function EL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xH=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _w(t,e){if(e){if(xH[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function Sw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ww=null;function QA(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ew=null,_d=null,Sd=null;function w2(t){if(t=Kp(t)){if(typeof Ew!="function")throw Error(Ie(280));var e=t.stateNode;e&&(e=Vy(e),Ew(t.stateNode,t.type,e))}}function AL(t){_d?Sd?Sd.push(t):Sd=[t]:_d=t}function bL(){if(_d){var t=_d,e=Sd;if(Sd=_d=null,w2(t),e)for(t=0;t<e.length;t++)w2(e[t])}}function ML(t,e){return t(e)}function CL(){}var h_=!1;function TL(t,e,n){if(h_)return t(e,n);h_=!0;try{return ML(t,e,n)}finally{h_=!1,(_d!==null||Sd!==null)&&(CL(),bL())}}function np(t,e){var n=t.stateNode;if(n===null)return null;var r=Vy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ie(231,e,typeof n));return n}var Aw=!1;if(Jo)try{var Xf={};Object.defineProperty(Xf,"passive",{get:function(){Aw=!0}}),window.addEventListener("test",Xf,Xf),window.removeEventListener("test",Xf,Xf)}catch{Aw=!1}function _H(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Dh=!1,k0=null,z0=!1,bw=null,SH={onError:function(t){Dh=!0,k0=t}};function wH(t,e,n,r,i,s,o,a,l){Dh=!1,k0=null,_H.apply(SH,arguments)}function EH(t,e,n,r,i,s,o,a,l){if(wH.apply(this,arguments),Dh){if(Dh){var c=k0;Dh=!1,k0=null}else throw Error(Ie(198));z0||(z0=!0,bw=c)}}function Vc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function E2(t){if(Vc(t)!==t)throw Error(Ie(188))}function AH(t){var e=t.alternate;if(!e){if(e=Vc(t),e===null)throw Error(Ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return E2(i),t;if(s===r)return E2(i),e;s=s.sibling}throw Error(Ie(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ie(189))}}if(n.alternate!==r)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?t:e}function PL(t){return t=AH(t),t!==null?IL(t):null}function IL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=IL(t);if(e!==null)return e;t=t.sibling}return null}var BL=Oi.unstable_scheduleCallback,A2=Oi.unstable_cancelCallback,bH=Oi.unstable_shouldYield,MH=Oi.unstable_requestPaint,Hn=Oi.unstable_now,CH=Oi.unstable_getCurrentPriorityLevel,qA=Oi.unstable_ImmediatePriority,DL=Oi.unstable_UserBlockingPriority,H0=Oi.unstable_NormalPriority,TH=Oi.unstable_LowPriority,LL=Oi.unstable_IdlePriority,zy=null,lo=null;function RH(t){if(lo&&typeof lo.onCommitFiberRoot=="function")try{lo.onCommitFiberRoot(zy,t,void 0,(t.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:BH,PH=Math.log,IH=Math.LN2;function BH(t){return t>>>=0,t===0?32:31-(PH(t)/IH|0)|0}var Lg=64,Og=4194304;function Ch(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function G0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ch(a):(s&=o,s!==0&&(r=Ch(s)))}else o=n&~i,o!==0?r=Ch(o):s!==0&&(r=Ch(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ds(e),i=1<<n,r|=t[n],e&=~i;return r}function DH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LH(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ds(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=DH(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Mw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OL(){var t=Lg;return Lg<<=1,!(Lg&4194240)&&(Lg=64),t}function p_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ds(e),t[e]=n}function OH(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ds(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ZA(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ds(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var en=0;function NL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FL,eb,UL,kL,zL,Cw=!1,Ng=[],Wa=null,ja=null,Xa=null,rp=new Map,ip=new Map,Na=[],NH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b2(t,e){switch(t){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":rp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ip.delete(e.pointerId)}}function Jf(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Kp(e),e!==null&&eb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function FH(t,e,n,r,i){switch(e){case"focusin":return Wa=Jf(Wa,t,e,n,r,i),!0;case"dragenter":return ja=Jf(ja,t,e,n,r,i),!0;case"mouseover":return Xa=Jf(Xa,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return rp.set(s,Jf(rp.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ip.set(s,Jf(ip.get(s)||null,t,e,n,r,i)),!0}return!1}function HL(t){var e=fc(t.target);if(e!==null){var n=Vc(e);if(n!==null){if(e=n.tag,e===13){if(e=RL(n),e!==null){t.blockedOn=e,zL(t.priority,function(){UL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function m0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ww=r,n.target.dispatchEvent(r),ww=null}else return e=Kp(n),e!==null&&eb(e),t.blockedOn=n,!1;e.shift()}return!0}function M2(t,e,n){m0(t)&&n.delete(e)}function UH(){Cw=!1,Wa!==null&&m0(Wa)&&(Wa=null),ja!==null&&m0(ja)&&(ja=null),Xa!==null&&m0(Xa)&&(Xa=null),rp.forEach(M2),ip.forEach(M2)}function Kf(t,e){t.blockedOn===e&&(t.blockedOn=null,Cw||(Cw=!0,Oi.unstable_scheduleCallback(Oi.unstable_NormalPriority,UH)))}function sp(t){function e(i){return Kf(i,t)}if(0<Ng.length){Kf(Ng[0],t);for(var n=1;n<Ng.length;n++){var r=Ng[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wa!==null&&Kf(Wa,t),ja!==null&&Kf(ja,t),Xa!==null&&Kf(Xa,t),rp.forEach(e),ip.forEach(e),n=0;n<Na.length;n++)r=Na[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Na.length&&(n=Na[0],n.blockedOn===null);)HL(n),n.blockedOn===null&&Na.shift()}var wd=ra.ReactCurrentBatchConfig,$0=!0;function kH(t,e,n,r){var i=en,s=wd.transition;wd.transition=null;try{en=1,tb(t,e,n,r)}finally{en=i,wd.transition=s}}function zH(t,e,n,r){var i=en,s=wd.transition;wd.transition=null;try{en=4,tb(t,e,n,r)}finally{en=i,wd.transition=s}}function tb(t,e,n,r){if($0){var i=Tw(t,e,n,r);if(i===null)A_(t,e,r,V0,n),b2(t,r);else if(FH(i,t,e,n,r))r.stopPropagation();else if(b2(t,r),e&4&&-1<NH.indexOf(t)){for(;i!==null;){var s=Kp(i);if(s!==null&&FL(s),s=Tw(t,e,n,r),s===null&&A_(t,e,r,V0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else A_(t,e,r,null,n)}}var V0=null;function Tw(t,e,n,r){if(V0=null,t=QA(r),t=fc(t),t!==null)if(e=Vc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return V0=t,null}function GL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CH()){case qA:return 1;case DL:return 4;case H0:case TH:return 16;case LL:return 536870912;default:return 16}default:return 16}}var za=null,nb=null,g0=null;function $L(){if(g0)return g0;var t,e=nb,n=e.length,r,i="value"in za?za.value:za.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return g0=i.slice(t,1<r?1-r:void 0)}function v0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fg(){return!0}function C2(){return!1}function Fi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fg:C2,this.isPropagationStopped=C2,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fg)},persist:function(){},isPersistent:Fg}),e}var sf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rb=Fi(sf),Jp=Pn({},sf,{view:0,detail:0}),HH=Fi(Jp),m_,g_,Yf,Hy=Pn({},Jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ib,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yf&&(Yf&&t.type==="mousemove"?(m_=t.screenX-Yf.screenX,g_=t.screenY-Yf.screenY):g_=m_=0,Yf=t),m_)},movementY:function(t){return"movementY"in t?t.movementY:g_}}),T2=Fi(Hy),GH=Pn({},Hy,{dataTransfer:0}),$H=Fi(GH),VH=Pn({},Jp,{relatedTarget:0}),v_=Fi(VH),WH=Pn({},sf,{animationName:0,elapsedTime:0,pseudoElement:0}),jH=Fi(WH),XH=Pn({},sf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JH=Fi(XH),KH=Pn({},sf,{data:0}),R2=Fi(KH),YH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qH[t])?!!e[t]:!1}function ib(){return ZH}var eG=Pn({},Jp,{key:function(t){if(t.key){var e=YH[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=v0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ib,charCode:function(t){return t.type==="keypress"?v0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?v0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tG=Fi(eG),nG=Pn({},Hy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P2=Fi(nG),rG=Pn({},Jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ib}),iG=Fi(rG),sG=Pn({},sf,{propertyName:0,elapsedTime:0,pseudoElement:0}),oG=Fi(sG),aG=Pn({},Hy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lG=Fi(aG),cG=[9,13,27,32],sb=Jo&&"CompositionEvent"in window,Lh=null;Jo&&"documentMode"in document&&(Lh=document.documentMode);var uG=Jo&&"TextEvent"in window&&!Lh,VL=Jo&&(!sb||Lh&&8<Lh&&11>=Lh),I2=String.fromCharCode(32),B2=!1;function WL(t,e){switch(t){case"keyup":return cG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rd=!1;function dG(t,e){switch(t){case"compositionend":return jL(e);case"keypress":return e.which!==32?null:(B2=!0,I2);case"textInput":return t=e.data,t===I2&&B2?null:t;default:return null}}function fG(t,e){if(rd)return t==="compositionend"||!sb&&WL(t,e)?(t=$L(),g0=nb=za=null,rd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VL&&e.locale!=="ko"?null:e.data;default:return null}}var hG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hG[t.type]:e==="textarea"}function XL(t,e,n,r){AL(r),e=W0(e,"onChange"),0<e.length&&(n=new rb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oh=null,op=null;function pG(t){i3(t,0)}function Gy(t){var e=od(t);if(vL(e))return t}function mG(t,e){if(t==="change")return e}var JL=!1;if(Jo){var y_;if(Jo){var x_="oninput"in document;if(!x_){var L2=document.createElement("div");L2.setAttribute("oninput","return;"),x_=typeof L2.oninput=="function"}y_=x_}else y_=!1;JL=y_&&(!document.documentMode||9<document.documentMode)}function O2(){Oh&&(Oh.detachEvent("onpropertychange",KL),op=Oh=null)}function KL(t){if(t.propertyName==="value"&&Gy(op)){var e=[];XL(e,op,t,QA(t)),TL(pG,e)}}function gG(t,e,n){t==="focusin"?(O2(),Oh=e,op=n,Oh.attachEvent("onpropertychange",KL)):t==="focusout"&&O2()}function vG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gy(op)}function yG(t,e){if(t==="click")return Gy(e)}function xG(t,e){if(t==="input"||t==="change")return Gy(e)}function _G(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fs=typeof Object.is=="function"?Object.is:_G;function ap(t,e){if(Fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!uw.call(e,i)||!Fs(t[i],e[i]))return!1}return!0}function N2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F2(t,e){var n=N2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N2(n)}}function YL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function QL(){for(var t=window,e=U0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=U0(t.document)}return e}function ob(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SG(t){var e=QL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YL(n.ownerDocument.documentElement,n)){if(r!==null&&ob(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=F2(n,s);var o=F2(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wG=Jo&&"documentMode"in document&&11>=document.documentMode,id=null,Rw=null,Nh=null,Pw=!1;function U2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pw||id==null||id!==U0(r)||(r=id,"selectionStart"in r&&ob(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nh&&ap(Nh,r)||(Nh=r,r=W0(Rw,"onSelect"),0<r.length&&(e=new rb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=id)))}function Ug(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sd={animationend:Ug("Animation","AnimationEnd"),animationiteration:Ug("Animation","AnimationIteration"),animationstart:Ug("Animation","AnimationStart"),transitionend:Ug("Transition","TransitionEnd")},__={},qL={};Jo&&(qL=document.createElement("div").style,"AnimationEvent"in window||(delete sd.animationend.animation,delete sd.animationiteration.animation,delete sd.animationstart.animation),"TransitionEvent"in window||delete sd.transitionend.transition);function $y(t){if(__[t])return __[t];if(!sd[t])return t;var e=sd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qL)return __[t]=e[n];return t}var ZL=$y("animationend"),e3=$y("animationiteration"),t3=$y("animationstart"),n3=$y("transitionend"),r3=new Map,k2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xl(t,e){r3.set(t,e),$c(e,[t])}for(var S_=0;S_<k2.length;S_++){var w_=k2[S_],EG=w_.toLowerCase(),AG=w_[0].toUpperCase()+w_.slice(1);xl(EG,"on"+AG)}xl(ZL,"onAnimationEnd");xl(e3,"onAnimationIteration");xl(t3,"onAnimationStart");xl("dblclick","onDoubleClick");xl("focusin","onFocus");xl("focusout","onBlur");xl(n3,"onTransitionEnd");Dd("onMouseEnter",["mouseout","mouseover"]);Dd("onMouseLeave",["mouseout","mouseover"]);Dd("onPointerEnter",["pointerout","pointerover"]);Dd("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Th));function z2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EH(r,e,void 0,t),t.currentTarget=null}function i3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;z2(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;z2(i,a,c),s=l}}}if(z0)throw t=bw,z0=!1,bw=null,t}function mn(t,e){var n=e[Ow];n===void 0&&(n=e[Ow]=new Set);var r=t+"__bubble";n.has(r)||(s3(e,t,2,!1),n.add(r))}function E_(t,e,n){var r=0;e&&(r|=4),s3(n,t,r,e)}var kg="_reactListening"+Math.random().toString(36).slice(2);function lp(t){if(!t[kg]){t[kg]=!0,fL.forEach(function(n){n!=="selectionchange"&&(bG.has(n)||E_(n,!1,t),E_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kg]||(e[kg]=!0,E_("selectionchange",!1,e))}}function s3(t,e,n,r){switch(GL(e)){case 1:var i=kH;break;case 4:i=zH;break;default:i=tb}n=i.bind(null,e,n,t),i=void 0,!Aw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function A_(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}TL(function(){var c=s,u=QA(n),d=[];e:{var p=r3.get(t);if(p!==void 0){var m=rb,v=t;switch(t){case"keypress":if(v0(n)===0)break e;case"keydown":case"keyup":m=tG;break;case"focusin":v="focus",m=v_;break;case"focusout":v="blur",m=v_;break;case"beforeblur":case"afterblur":m=v_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=T2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$H;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=iG;break;case ZL:case e3:case t3:m=jH;break;case n3:m=oG;break;case"scroll":m=HH;break;case"wheel":m=lG;break;case"copy":case"cut":case"paste":m=JH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=P2}var y=(e&4)!==0,x=!y&&t==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var _=c,E;_!==null;){E=_;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,g!==null&&(A=np(_,g),A!=null&&y.push(cp(_,A,E)))),x)break;_=_.return}0<y.length&&(p=new m(p,v,null,n,u),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==ww&&(v=n.relatedTarget||n.fromElement)&&(fc(v)||v[Ko]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?fc(v):null,v!==null&&(x=Vc(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=T2,A="onMouseLeave",g="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=P2,A="onPointerLeave",g="onPointerEnter",_="pointer"),x=m==null?p:od(m),E=v==null?p:od(v),p=new y(A,_+"leave",m,n,u),p.target=x,p.relatedTarget=E,A=null,fc(u)===c&&(y=new y(g,_+"enter",v,n,u),y.target=E,y.relatedTarget=x,A=y),x=A,m&&v)t:{for(y=m,g=v,_=0,E=y;E;E=vu(E))_++;for(E=0,A=g;A;A=vu(A))E++;for(;0<_-E;)y=vu(y),_--;for(;0<E-_;)g=vu(g),E--;for(;_--;){if(y===g||g!==null&&y===g.alternate)break t;y=vu(y),g=vu(g)}y=null}else y=null;m!==null&&H2(d,p,m,y,!1),v!==null&&x!==null&&H2(d,x,v,y,!0)}}e:{if(p=c?od(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var M=mG;else if(D2(p))if(JL)M=xG;else{M=vG;var T=gG}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=yG);if(M&&(M=M(t,c))){XL(d,M,n,u);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&vw(p,"number",p.value)}switch(T=c?od(c):window,t){case"focusin":(D2(T)||T.contentEditable==="true")&&(id=T,Rw=c,Nh=null);break;case"focusout":Nh=Rw=id=null;break;case"mousedown":Pw=!0;break;case"contextmenu":case"mouseup":case"dragend":Pw=!1,U2(d,n,u);break;case"selectionchange":if(wG)break;case"keydown":case"keyup":U2(d,n,u)}var P;if(sb)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else rd?WL(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(VL&&n.locale!=="ko"&&(rd||I!=="onCompositionStart"?I==="onCompositionEnd"&&rd&&(P=$L()):(za=u,nb="value"in za?za.value:za.textContent,rd=!0)),T=W0(c,I),0<T.length&&(I=new R2(I,t,null,n,u),d.push({event:I,listeners:T}),P?I.data=P:(P=jL(n),P!==null&&(I.data=P)))),(P=uG?dG(t,n):fG(t,n))&&(c=W0(c,"onBeforeInput"),0<c.length&&(u=new R2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=P))}i3(d,e)})}function cp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function W0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=np(t,n),s!=null&&r.unshift(cp(t,s,i)),s=np(t,e),s!=null&&r.push(cp(t,s,i))),t=t.return}return r}function vu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function H2(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=np(n,s),l!=null&&o.unshift(cp(n,l,a))):i||(l=np(n,s),l!=null&&o.push(cp(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MG=/\r\n?/g,CG=/\u0000|\uFFFD/g;function G2(t){return(typeof t=="string"?t:""+t).replace(MG,`
`).replace(CG,"")}function zg(t,e,n){if(e=G2(e),G2(t)!==e&&n)throw Error(Ie(425))}function j0(){}var Iw=null,Bw=null;function Dw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lw=typeof setTimeout=="function"?setTimeout:void 0,TG=typeof clearTimeout=="function"?clearTimeout:void 0,$2=typeof Promise=="function"?Promise:void 0,RG=typeof queueMicrotask=="function"?queueMicrotask:typeof $2<"u"?function(t){return $2.resolve(null).then(t).catch(PG)}:Lw;function PG(t){setTimeout(function(){throw t})}function b_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),sp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sp(e)}function Ja(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var of=Math.random().toString(36).slice(2),oo="__reactFiber$"+of,up="__reactProps$"+of,Ko="__reactContainer$"+of,Ow="__reactEvents$"+of,IG="__reactListeners$"+of,BG="__reactHandles$"+of;function fc(t){var e=t[oo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ko]||n[oo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=V2(t);t!==null;){if(n=t[oo])return n;t=V2(t)}return e}t=n,n=t.parentNode}return null}function Kp(t){return t=t[oo]||t[Ko],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function od(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function Vy(t){return t[up]||null}var Nw=[],ad=-1;function _l(t){return{current:t}}function vn(t){0>ad||(t.current=Nw[ad],Nw[ad]=null,ad--)}function dn(t,e){ad++,Nw[ad]=t.current,t.current=e}var ol={},kr=_l(ol),fi=_l(!1),Rc=ol;function Ld(t,e){var n=t.type.contextTypes;if(!n)return ol;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hi(t){return t=t.childContextTypes,t!=null}function X0(){vn(fi),vn(kr)}function W2(t,e,n){if(kr.current!==ol)throw Error(Ie(168));dn(kr,e),dn(fi,n)}function o3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ie(108,gH(t)||"Unknown",i));return Pn({},n,r)}function J0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ol,Rc=kr.current,dn(kr,t),dn(fi,fi.current),!0}function j2(t,e,n){var r=t.stateNode;if(!r)throw Error(Ie(169));n?(t=o3(t,e,Rc),r.__reactInternalMemoizedMergedChildContext=t,vn(fi),vn(kr),dn(kr,t)):vn(fi),dn(fi,n)}var No=null,Wy=!1,M_=!1;function a3(t){No===null?No=[t]:No.push(t)}function DG(t){Wy=!0,a3(t)}function Sl(){if(!M_&&No!==null){M_=!0;var t=0,e=en;try{var n=No;for(en=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}No=null,Wy=!1}catch(i){throw No!==null&&(No=No.slice(t+1)),BL(qA,Sl),i}finally{en=e,M_=!1}}return null}var ld=[],cd=0,K0=null,Y0=0,es=[],ts=0,Pc=null,ko=1,zo="";function ql(t,e){ld[cd++]=Y0,ld[cd++]=K0,K0=t,Y0=e}function l3(t,e,n){es[ts++]=ko,es[ts++]=zo,es[ts++]=Pc,Pc=t;var r=ko;t=zo;var i=32-Ds(r)-1;r&=~(1<<i),n+=1;var s=32-Ds(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ko=1<<32-Ds(e)+i|n<<i|r,zo=s+t}else ko=1<<s|n<<i|r,zo=t}function ab(t){t.return!==null&&(ql(t,1),l3(t,1,0))}function lb(t){for(;t===K0;)K0=ld[--cd],ld[cd]=null,Y0=ld[--cd],ld[cd]=null;for(;t===Pc;)Pc=es[--ts],es[ts]=null,zo=es[--ts],es[ts]=null,ko=es[--ts],es[ts]=null}var Bi=null,Ri=null,Sn=!1,Rs=null;function c3(t,e){var n=os(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bi=t,Ri=Ja(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bi=t,Ri=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pc!==null?{id:ko,overflow:zo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=os(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bi=t,Ri=null,!0):!1;default:return!1}}function Fw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uw(t){if(Sn){var e=Ri;if(e){var n=e;if(!X2(t,e)){if(Fw(t))throw Error(Ie(418));e=Ja(n.nextSibling);var r=Bi;e&&X2(t,e)?c3(r,n):(t.flags=t.flags&-4097|2,Sn=!1,Bi=t)}}else{if(Fw(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,Sn=!1,Bi=t}}}function J2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bi=t}function Hg(t){if(t!==Bi)return!1;if(!Sn)return J2(t),Sn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dw(t.type,t.memoizedProps)),e&&(e=Ri)){if(Fw(t))throw u3(),Error(Ie(418));for(;e;)c3(t,e),e=Ja(e.nextSibling)}if(J2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ri=Ja(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ri=null}}else Ri=Bi?Ja(t.stateNode.nextSibling):null;return!0}function u3(){for(var t=Ri;t;)t=Ja(t.nextSibling)}function Od(){Ri=Bi=null,Sn=!1}function cb(t){Rs===null?Rs=[t]:Rs.push(t)}var LG=ra.ReactCurrentBatchConfig;function Ms(t,e){if(t&&t.defaultProps){e=Pn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Q0=_l(null),q0=null,ud=null,ub=null;function db(){ub=ud=q0=null}function fb(t){var e=Q0.current;vn(Q0),t._currentValue=e}function kw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ed(t,e){q0=t,ub=ud=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ci=!0),t.firstContext=null)}function ls(t){var e=t._currentValue;if(ub!==t)if(t={context:t,memoizedValue:e,next:null},ud===null){if(q0===null)throw Error(Ie(308));ud=t,q0.dependencies={lanes:0,firstContext:t}}else ud=ud.next=t;return e}var hc=null;function hb(t){hc===null?hc=[t]:hc.push(t)}function d3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hb(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yo(t,r)}function Yo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var La=!1;function pb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ka(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yo(t,n)}return i=r.interleaved,i===null?(e.next=e,hb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yo(t,n)}function y0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ZA(t,n)}}function K2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Z0(t,e,n,r){var i=t.updateQueue;La=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(p=e,m=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(m,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(m,d,p):v,p==null)break e;d=Pn({},d,p);break e;case 2:La=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Bc|=o,t.lanes=o,t.memoizedState=d}}function Y2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ie(191,i));i.call(r)}}}var h3=new dL.Component().refs;function zw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jy={isMounted:function(t){return(t=t._reactInternals)?Vc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yr(),i=Qa(t),s=Vo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ka(t,s,i),e!==null&&(Ls(e,t,i,r),y0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yr(),i=Qa(t),s=Vo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ka(t,s,i),e!==null&&(Ls(e,t,i,r),y0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yr(),r=Qa(t),i=Vo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ka(t,i,r),e!==null&&(Ls(e,t,r,n),y0(e,t,r))}};function Q2(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ap(n,r)||!ap(i,s):!0}function p3(t,e,n){var r=!1,i=ol,s=e.contextType;return typeof s=="object"&&s!==null?s=ls(s):(i=hi(e)?Rc:kr.current,r=e.contextTypes,s=(r=r!=null)?Ld(t,i):ol),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function q2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jy.enqueueReplaceState(e,e.state,null)}function Hw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=h3,pb(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ls(s):(s=hi(e)?Rc:kr.current,i.context=Ld(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(zw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jy.enqueueReplaceState(i,i.state,null),Z0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var r=n.stateNode}if(!r)throw Error(Ie(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===h3&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,t))}return t}function Gg(t,e){throw t=Object.prototype.toString.call(e),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Z2(t){var e=t._init;return e(t._payload)}function m3(t){function e(g,_){if(t){var E=g.deletions;E===null?(g.deletions=[_],g.flags|=16):E.push(_)}}function n(g,_){if(!t)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function r(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=qa(g,_),g.index=0,g.sibling=null,g}function s(g,_,E){return g.index=E,t?(E=g.alternate,E!==null?(E=E.index,E<_?(g.flags|=2,_):E):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,_,E,A){return _===null||_.tag!==6?(_=D_(E,g.mode,A),_.return=g,_):(_=i(_,E),_.return=g,_)}function l(g,_,E,A){var M=E.type;return M===nd?u(g,_,E.props.children,A,E.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Da&&Z2(M)===_.type)?(A=i(_,E.props),A.ref=Qf(g,_,E),A.return=g,A):(A=A0(E.type,E.key,E.props,null,g.mode,A),A.ref=Qf(g,_,E),A.return=g,A)}function c(g,_,E,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=L_(E,g.mode,A),_.return=g,_):(_=i(_,E.children||[]),_.return=g,_)}function u(g,_,E,A,M){return _===null||_.tag!==7?(_=wc(E,g.mode,A,M),_.return=g,_):(_=i(_,E),_.return=g,_)}function d(g,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=D_(""+_,g.mode,E),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ig:return E=A0(_.type,_.key,_.props,null,g.mode,E),E.ref=Qf(g,null,_),E.return=g,E;case td:return _=L_(_,g.mode,E),_.return=g,_;case Da:var A=_._init;return d(g,A(_._payload),E)}if(Mh(_)||jf(_))return _=wc(_,g.mode,E,null),_.return=g,_;Gg(g,_)}return null}function p(g,_,E,A){var M=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:a(g,_,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ig:return E.key===M?l(g,_,E,A):null;case td:return E.key===M?c(g,_,E,A):null;case Da:return M=E._init,p(g,_,M(E._payload),A)}if(Mh(E)||jf(E))return M!==null?null:u(g,_,E,A,null);Gg(g,E)}return null}function m(g,_,E,A,M){if(typeof A=="string"&&A!==""||typeof A=="number")return g=g.get(E)||null,a(_,g,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ig:return g=g.get(A.key===null?E:A.key)||null,l(_,g,A,M);case td:return g=g.get(A.key===null?E:A.key)||null,c(_,g,A,M);case Da:var T=A._init;return m(g,_,E,T(A._payload),M)}if(Mh(A)||jf(A))return g=g.get(E)||null,u(_,g,A,M,null);Gg(_,A)}return null}function v(g,_,E,A){for(var M=null,T=null,P=_,I=_=0,R=null;P!==null&&I<E.length;I++){P.index>I?(R=P,P=null):R=P.sibling;var D=p(g,P,E[I],A);if(D===null){P===null&&(P=R);break}t&&P&&D.alternate===null&&e(g,P),_=s(D,_,I),T===null?M=D:T.sibling=D,T=D,P=R}if(I===E.length)return n(g,P),Sn&&ql(g,I),M;if(P===null){for(;I<E.length;I++)P=d(g,E[I],A),P!==null&&(_=s(P,_,I),T===null?M=P:T.sibling=P,T=P);return Sn&&ql(g,I),M}for(P=r(g,P);I<E.length;I++)R=m(P,g,I,E[I],A),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?I:R.key),_=s(R,_,I),T===null?M=R:T.sibling=R,T=R);return t&&P.forEach(function(F){return e(g,F)}),Sn&&ql(g,I),M}function y(g,_,E,A){var M=jf(E);if(typeof M!="function")throw Error(Ie(150));if(E=M.call(E),E==null)throw Error(Ie(151));for(var T=M=null,P=_,I=_=0,R=null,D=E.next();P!==null&&!D.done;I++,D=E.next()){P.index>I?(R=P,P=null):R=P.sibling;var F=p(g,P,D.value,A);if(F===null){P===null&&(P=R);break}t&&P&&F.alternate===null&&e(g,P),_=s(F,_,I),T===null?M=F:T.sibling=F,T=F,P=R}if(D.done)return n(g,P),Sn&&ql(g,I),M;if(P===null){for(;!D.done;I++,D=E.next())D=d(g,D.value,A),D!==null&&(_=s(D,_,I),T===null?M=D:T.sibling=D,T=D);return Sn&&ql(g,I),M}for(P=r(g,P);!D.done;I++,D=E.next())D=m(P,g,I,D.value,A),D!==null&&(t&&D.alternate!==null&&P.delete(D.key===null?I:D.key),_=s(D,_,I),T===null?M=D:T.sibling=D,T=D);return t&&P.forEach(function(X){return e(g,X)}),Sn&&ql(g,I),M}function x(g,_,E,A){if(typeof E=="object"&&E!==null&&E.type===nd&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ig:e:{for(var M=E.key,T=_;T!==null;){if(T.key===M){if(M=E.type,M===nd){if(T.tag===7){n(g,T.sibling),_=i(T,E.props.children),_.return=g,g=_;break e}}else if(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Da&&Z2(M)===T.type){n(g,T.sibling),_=i(T,E.props),_.ref=Qf(g,T,E),_.return=g,g=_;break e}n(g,T);break}else e(g,T);T=T.sibling}E.type===nd?(_=wc(E.props.children,g.mode,A,E.key),_.return=g,g=_):(A=A0(E.type,E.key,E.props,null,g.mode,A),A.ref=Qf(g,_,E),A.return=g,g=A)}return o(g);case td:e:{for(T=E.key;_!==null;){if(_.key===T)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(g,_.sibling),_=i(_,E.children||[]),_.return=g,g=_;break e}else{n(g,_);break}else e(g,_);_=_.sibling}_=L_(E,g.mode,A),_.return=g,g=_}return o(g);case Da:return T=E._init,x(g,_,T(E._payload),A)}if(Mh(E))return v(g,_,E,A);if(jf(E))return y(g,_,E,A);Gg(g,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(g,_.sibling),_=i(_,E),_.return=g,g=_):(n(g,_),_=D_(E,g.mode,A),_.return=g,g=_),o(g)):n(g,_)}return x}var Nd=m3(!0),g3=m3(!1),Yp={},co=_l(Yp),dp=_l(Yp),fp=_l(Yp);function pc(t){if(t===Yp)throw Error(Ie(174));return t}function mb(t,e){switch(dn(fp,e),dn(dp,t),dn(co,Yp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xw(e,t)}vn(co),dn(co,e)}function Fd(){vn(co),vn(dp),vn(fp)}function v3(t){pc(fp.current);var e=pc(co.current),n=xw(e,t.type);e!==n&&(dn(dp,t),dn(co,n))}function gb(t){dp.current===t&&(vn(co),vn(dp))}var Mn=_l(0);function ey(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C_=[];function vb(){for(var t=0;t<C_.length;t++)C_[t]._workInProgressVersionPrimary=null;C_.length=0}var x0=ra.ReactCurrentDispatcher,T_=ra.ReactCurrentBatchConfig,Ic=0,Rn=null,nr=null,fr=null,ty=!1,Fh=!1,hp=0,OG=0;function Br(){throw Error(Ie(321))}function yb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fs(t[n],e[n]))return!1;return!0}function xb(t,e,n,r,i,s){if(Ic=s,Rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,x0.current=t===null||t.memoizedState===null?kG:zG,t=n(r,i),Fh){s=0;do{if(Fh=!1,hp=0,25<=s)throw Error(Ie(301));s+=1,fr=nr=null,e.updateQueue=null,x0.current=HG,t=n(r,i)}while(Fh)}if(x0.current=ny,e=nr!==null&&nr.next!==null,Ic=0,fr=nr=Rn=null,ty=!1,e)throw Error(Ie(300));return t}function _b(){var t=hp!==0;return hp=0,t}function ro(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Rn.memoizedState=fr=t:fr=fr.next=t,fr}function cs(){if(nr===null){var t=Rn.alternate;t=t!==null?t.memoizedState:null}else t=nr.next;var e=fr===null?Rn.memoizedState:fr.next;if(e!==null)fr=e,nr=t;else{if(t===null)throw Error(Ie(310));nr=t,t={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},fr===null?Rn.memoizedState=fr=t:fr=fr.next=t}return fr}function pp(t,e){return typeof e=="function"?e(t):e}function R_(t){var e=cs(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=nr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ic&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Rn.lanes|=u,Bc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Fs(r,e.memoizedState)||(ci=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Rn.lanes|=s,Bc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function P_(t){var e=cs(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Fs(s,e.memoizedState)||(ci=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function y3(){}function x3(t,e){var n=Rn,r=cs(),i=e(),s=!Fs(r.memoizedState,i);if(s&&(r.memoizedState=i,ci=!0),r=r.queue,Sb(w3.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,mp(9,S3.bind(null,n,r,i,e),void 0,null),pr===null)throw Error(Ie(349));Ic&30||_3(n,e,i)}return i}function _3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function S3(t,e,n,r){e.value=n,e.getSnapshot=r,E3(e)&&A3(t)}function w3(t,e,n){return n(function(){E3(e)&&A3(t)})}function E3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fs(t,n)}catch{return!0}}function A3(t){var e=Yo(t,1);e!==null&&Ls(e,t,1,-1)}function eR(t){var e=ro();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pp,lastRenderedState:t},e.queue=t,t=t.dispatch=UG.bind(null,Rn,t),[e.memoizedState,t]}function mp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function b3(){return cs().memoizedState}function _0(t,e,n,r){var i=ro();Rn.flags|=t,i.memoizedState=mp(1|e,n,void 0,r===void 0?null:r)}function Xy(t,e,n,r){var i=cs();r=r===void 0?null:r;var s=void 0;if(nr!==null){var o=nr.memoizedState;if(s=o.destroy,r!==null&&yb(r,o.deps)){i.memoizedState=mp(e,n,s,r);return}}Rn.flags|=t,i.memoizedState=mp(1|e,n,s,r)}function tR(t,e){return _0(8390656,8,t,e)}function Sb(t,e){return Xy(2048,8,t,e)}function M3(t,e){return Xy(4,2,t,e)}function C3(t,e){return Xy(4,4,t,e)}function T3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function R3(t,e,n){return n=n!=null?n.concat([t]):null,Xy(4,4,T3.bind(null,e,t),n)}function wb(){}function P3(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function I3(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function B3(t,e,n){return Ic&21?(Fs(n,e)||(n=OL(),Rn.lanes|=n,Bc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ci=!0),t.memoizedState=n)}function NG(t,e){var n=en;en=n!==0&&4>n?n:4,t(!0);var r=T_.transition;T_.transition={};try{t(!1),e()}finally{en=n,T_.transition=r}}function D3(){return cs().memoizedState}function FG(t,e,n){var r=Qa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},L3(t))O3(e,n);else if(n=d3(t,e,n,r),n!==null){var i=Yr();Ls(n,t,r,i),N3(n,e,r)}}function UG(t,e,n){var r=Qa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(L3(t))O3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Fs(a,o)){var l=e.interleaved;l===null?(i.next=i,hb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=d3(t,e,i,r),n!==null&&(i=Yr(),Ls(n,t,r,i),N3(n,e,r))}}function L3(t){var e=t.alternate;return t===Rn||e!==null&&e===Rn}function O3(t,e){Fh=ty=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function N3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ZA(t,n)}}var ny={readContext:ls,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},kG={readContext:ls,useCallback:function(t,e){return ro().memoizedState=[t,e===void 0?null:e],t},useContext:ls,useEffect:tR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_0(4194308,4,T3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _0(4194308,4,t,e)},useInsertionEffect:function(t,e){return _0(4,2,t,e)},useMemo:function(t,e){var n=ro();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ro();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FG.bind(null,Rn,t),[r.memoizedState,t]},useRef:function(t){var e=ro();return t={current:t},e.memoizedState=t},useState:eR,useDebugValue:wb,useDeferredValue:function(t){return ro().memoizedState=t},useTransition:function(){var t=eR(!1),e=t[0];return t=NG.bind(null,t[1]),ro().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Rn,i=ro();if(Sn){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=e(),pr===null)throw Error(Ie(349));Ic&30||_3(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,tR(w3.bind(null,r,s,t),[t]),r.flags|=2048,mp(9,S3.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ro(),e=pr.identifierPrefix;if(Sn){var n=zo,r=ko;n=(r&~(1<<32-Ds(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zG={readContext:ls,useCallback:P3,useContext:ls,useEffect:Sb,useImperativeHandle:R3,useInsertionEffect:M3,useLayoutEffect:C3,useMemo:I3,useReducer:R_,useRef:b3,useState:function(){return R_(pp)},useDebugValue:wb,useDeferredValue:function(t){var e=cs();return B3(e,nr.memoizedState,t)},useTransition:function(){var t=R_(pp)[0],e=cs().memoizedState;return[t,e]},useMutableSource:y3,useSyncExternalStore:x3,useId:D3,unstable_isNewReconciler:!1},HG={readContext:ls,useCallback:P3,useContext:ls,useEffect:Sb,useImperativeHandle:R3,useInsertionEffect:M3,useLayoutEffect:C3,useMemo:I3,useReducer:P_,useRef:b3,useState:function(){return P_(pp)},useDebugValue:wb,useDeferredValue:function(t){var e=cs();return nr===null?e.memoizedState=t:B3(e,nr.memoizedState,t)},useTransition:function(){var t=P_(pp)[0],e=cs().memoizedState;return[t,e]},useMutableSource:y3,useSyncExternalStore:x3,useId:D3,unstable_isNewReconciler:!1};function Ud(t,e){try{var n="",r=e;do n+=mH(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function I_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GG=typeof WeakMap=="function"?WeakMap:Map;function F3(t,e,n){n=Vo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){iy||(iy=!0,qw=r),Gw(t,e)},n}function U3(t,e,n){n=Vo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gw(t,e),typeof r!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function nR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GG;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=n8.bind(null,t,e,n),e.then(t,t))}function rR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iR(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vo(-1,1),e.tag=2,Ka(n,e,1))),n.lanes|=1),t)}var $G=ra.ReactCurrentOwner,ci=!1;function Jr(t,e,n,r){e.child=t===null?g3(e,null,n,r):Nd(e,t.child,n,r)}function sR(t,e,n,r,i){n=n.render;var s=e.ref;return Ed(e,i),r=xb(t,e,n,r,s,i),n=_b(),t!==null&&!ci?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qo(t,e,i)):(Sn&&n&&ab(e),e.flags|=1,Jr(t,e,r,i),e.child)}function oR(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,k3(t,e,s,r,i)):(t=A0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ap,n(o,r)&&t.ref===e.ref)return Qo(t,e,i)}return e.flags|=1,t=qa(s,r),t.ref=e.ref,t.return=e,e.child=t}function k3(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ap(s,r)&&t.ref===e.ref)if(ci=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ci=!0);else return e.lanes=t.lanes,Qo(t,e,i)}return $w(t,e,n,r,i)}function z3(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(fd,Ci),Ci|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dn(fd,Ci),Ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,dn(fd,Ci),Ci|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,dn(fd,Ci),Ci|=r;return Jr(t,e,i,n),e.child}function H3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $w(t,e,n,r,i){var s=hi(n)?Rc:kr.current;return s=Ld(e,s),Ed(e,i),n=xb(t,e,n,r,s,i),r=_b(),t!==null&&!ci?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qo(t,e,i)):(Sn&&r&&ab(e),e.flags|=1,Jr(t,e,n,i),e.child)}function aR(t,e,n,r,i){if(hi(n)){var s=!0;J0(e)}else s=!1;if(Ed(e,i),e.stateNode===null)S0(t,e),p3(e,n,r),Hw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ls(c):(c=hi(n)?Rc:kr.current,c=Ld(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&q2(e,o,r,c),La=!1;var p=e.memoizedState;o.state=p,Z0(e,r,o,i),l=e.memoizedState,a!==r||p!==l||fi.current||La?(typeof u=="function"&&(zw(e,n,u,r),l=e.memoizedState),(a=La||Q2(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,f3(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ms(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ls(l):(l=hi(n)?Rc:kr.current,l=Ld(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&q2(e,o,r,l),La=!1,p=e.memoizedState,o.state=p,Z0(e,r,o,i);var v=e.memoizedState;a!==d||p!==v||fi.current||La?(typeof m=="function"&&(zw(e,n,m,r),v=e.memoizedState),(c=La||Q2(e,n,c,r,p,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Vw(t,e,n,r,s,i)}function Vw(t,e,n,r,i,s){H3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&j2(e,n,!1),Qo(t,e,s);r=e.stateNode,$G.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Nd(e,t.child,null,s),e.child=Nd(e,null,a,s)):Jr(t,e,a,s),e.memoizedState=r.state,i&&j2(e,n,!0),e.child}function G3(t){var e=t.stateNode;e.pendingContext?W2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&W2(t,e.context,!1),mb(t,e.containerInfo)}function lR(t,e,n,r,i){return Od(),cb(i),e.flags|=256,Jr(t,e,n,r),e.child}var Ww={dehydrated:null,treeContext:null,retryLane:0};function jw(t){return{baseLanes:t,cachePool:null,transitions:null}}function $3(t,e,n){var r=e.pendingProps,i=Mn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),dn(Mn,i&1),t===null)return Uw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yy(o,r,0,null),t=wc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=jw(n),e.memoizedState=Ww,t):Eb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return VG(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qa(a,s):(s=wc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?jw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ww,r}return s=t.child,t=s.sibling,r=qa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Eb(t,e){return e=Yy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $g(t,e,n,r){return r!==null&&cb(r),Nd(e,t.child,null,n),t=Eb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VG(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=I_(Error(Ie(422))),$g(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yy({mode:"visible",children:r.children},i,0,null),s=wc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Nd(e,t.child,null,o),e.child.memoizedState=jw(o),e.memoizedState=Ww,s);if(!(e.mode&1))return $g(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ie(419)),r=I_(s,r,void 0),$g(t,e,o,r)}if(a=(o&t.childLanes)!==0,ci||a){if(r=pr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yo(t,i),Ls(r,t,i,-1))}return Rb(),r=I_(Error(Ie(421))),$g(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=r8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ri=Ja(i.nextSibling),Bi=e,Sn=!0,Rs=null,t!==null&&(es[ts++]=ko,es[ts++]=zo,es[ts++]=Pc,ko=t.id,zo=t.overflow,Pc=e),e=Eb(e,r.children),e.flags|=4096,e)}function cR(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kw(t.return,e,n)}function B_(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function V3(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jr(t,e,r.children,n),r=Mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cR(t,n,e);else if(t.tag===19)cR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(dn(Mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ey(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),B_(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ey(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}B_(e,!0,n,null,s);break;case"together":B_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function S0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ie(153));if(e.child!==null){for(t=e.child,n=qa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WG(t,e,n){switch(e.tag){case 3:G3(e),Od();break;case 5:v3(e);break;case 1:hi(e.type)&&J0(e);break;case 4:mb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;dn(Q0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(dn(Mn,Mn.current&1),e.flags|=128,null):n&e.child.childLanes?$3(t,e,n):(dn(Mn,Mn.current&1),t=Qo(t,e,n),t!==null?t.sibling:null);dn(Mn,Mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return V3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),dn(Mn,Mn.current),r)break;return null;case 22:case 23:return e.lanes=0,z3(t,e,n)}return Qo(t,e,n)}var W3,Xw,j3,X3;W3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xw=function(){};j3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pc(co.current);var s=null;switch(n){case"input":i=mw(t,i),r=mw(t,r),s=[];break;case"select":i=Pn({},i,{value:void 0}),r=Pn({},r,{value:void 0}),s=[];break;case"textarea":i=yw(t,i),r=yw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=j0)}_w(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ep.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ep.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&mn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};X3=function(t,e,n,r){n!==r&&(e.flags|=4)};function qf(t,e){if(!Sn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jG(t,e,n){var r=e.pendingProps;switch(lb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(e),null;case 1:return hi(e.type)&&X0(),Dr(e),null;case 3:return r=e.stateNode,Fd(),vn(fi),vn(kr),vb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rs!==null&&(tE(Rs),Rs=null))),Xw(t,e),Dr(e),null;case 5:gb(e);var i=pc(fp.current);if(n=e.type,t!==null&&e.stateNode!=null)j3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return Dr(e),null}if(t=pc(co.current),Hg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[oo]=e,r[up]=s,t=(e.mode&1)!==0,n){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(i=0;i<Th.length;i++)mn(Th[i],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":y2(r,s),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},mn("invalid",r);break;case"textarea":_2(r,s),mn("invalid",r)}_w(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&zg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zg(r.textContent,a,t),i=["children",""+a]):ep.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mn("scroll",r)}switch(n){case"input":Bg(r),x2(r,s,!0);break;case"textarea":Bg(r),S2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=j0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_L(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[oo]=e,t[up]=r,W3(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sw(n,r),n){case"dialog":mn("cancel",t),mn("close",t),i=r;break;case"iframe":case"object":case"embed":mn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Th.length;i++)mn(Th[i],t);i=r;break;case"source":mn("error",t),i=r;break;case"img":case"image":case"link":mn("error",t),mn("load",t),i=r;break;case"details":mn("toggle",t),i=r;break;case"input":y2(t,r),i=mw(t,r),mn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pn({},r,{value:void 0}),mn("invalid",t);break;case"textarea":_2(t,r),i=yw(t,r),mn("invalid",t);break;default:i=r}_w(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?EL(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&SL(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tp(t,l):typeof l=="number"&&tp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ep.hasOwnProperty(s)?l!=null&&s==="onScroll"&&mn("scroll",t):l!=null&&XA(t,s,l,o))}switch(n){case"input":Bg(t),x2(t,r,!1);break;case"textarea":Bg(t),S2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?xd(t,!!r.multiple,s,!1):r.defaultValue!=null&&xd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=j0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dr(e),null;case 6:if(t&&e.stateNode!=null)X3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(n=pc(fp.current),pc(co.current),Hg(e)){if(r=e.stateNode,n=e.memoizedProps,r[oo]=e,(s=r.nodeValue!==n)&&(t=Bi,t!==null))switch(t.tag){case 3:zg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[oo]=e,e.stateNode=r}return Dr(e),null;case 13:if(vn(Mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Sn&&Ri!==null&&e.mode&1&&!(e.flags&128))u3(),Od(),e.flags|=98560,s=!1;else if(s=Hg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ie(317));s[oo]=e}else Od(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dr(e),s=!1}else Rs!==null&&(tE(Rs),Rs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Mn.current&1?rr===0&&(rr=3):Rb())),e.updateQueue!==null&&(e.flags|=4),Dr(e),null);case 4:return Fd(),Xw(t,e),t===null&&lp(e.stateNode.containerInfo),Dr(e),null;case 10:return fb(e.type._context),Dr(e),null;case 17:return hi(e.type)&&X0(),Dr(e),null;case 19:if(vn(Mn),s=e.memoizedState,s===null)return Dr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qf(s,!1);else{if(rr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ey(t),o!==null){for(e.flags|=128,qf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dn(Mn,Mn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Hn()>kd&&(e.flags|=128,r=!0,qf(s,!1),e.lanes=4194304)}else{if(!r)if(t=ey(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Sn)return Dr(e),null}else 2*Hn()-s.renderingStartTime>kd&&n!==1073741824&&(e.flags|=128,r=!0,qf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Hn(),e.sibling=null,n=Mn.current,dn(Mn,r?n&1|2:n&1),e):(Dr(e),null);case 22:case 23:return Tb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ci&1073741824&&(Dr(e),e.subtreeFlags&6&&(e.flags|=8192)):Dr(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function XG(t,e){switch(lb(e),e.tag){case 1:return hi(e.type)&&X0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fd(),vn(fi),vn(kr),vb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gb(e),null;case 13:if(vn(Mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));Od()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vn(Mn),null;case 4:return Fd(),null;case 10:return fb(e.type._context),null;case 22:case 23:return Tb(),null;case 24:return null;default:return null}}var Vg=!1,Fr=!1,JG=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function dd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ln(t,e,r)}else n.current=null}function Jw(t,e,n){try{n()}catch(r){Ln(t,e,r)}}var uR=!1;function KG(t,e){if(Iw=$0,t=QL(),ob(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bw={focusedElem:t,selectionRange:n},$0=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){e=Ze;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ms(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(A){Ln(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}return v=uR,uR=!1,v}function Uh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Jw(e,n,s)}i=i.next}while(i!==r)}}function Jy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function J3(t){var e=t.alternate;e!==null&&(t.alternate=null,J3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[oo],delete e[up],delete e[Ow],delete e[IG],delete e[BG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function K3(t){return t.tag===5||t.tag===3||t.tag===4}function dR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||K3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=j0));else if(r!==4&&(t=t.child,t!==null))for(Yw(t,e,n),t=t.sibling;t!==null;)Yw(t,e,n),t=t.sibling}function Qw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qw(t,e,n),t=t.sibling;t!==null;)Qw(t,e,n),t=t.sibling}var Sr=null,Ts=!1;function xa(t,e,n){for(n=n.child;n!==null;)Y3(t,e,n),n=n.sibling}function Y3(t,e,n){if(lo&&typeof lo.onCommitFiberUnmount=="function")try{lo.onCommitFiberUnmount(zy,n)}catch{}switch(n.tag){case 5:Fr||dd(n,e);case 6:var r=Sr,i=Ts;Sr=null,xa(t,e,n),Sr=r,Ts=i,Sr!==null&&(Ts?(t=Sr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Sr.removeChild(n.stateNode));break;case 18:Sr!==null&&(Ts?(t=Sr,n=n.stateNode,t.nodeType===8?b_(t.parentNode,n):t.nodeType===1&&b_(t,n),sp(t)):b_(Sr,n.stateNode));break;case 4:r=Sr,i=Ts,Sr=n.stateNode.containerInfo,Ts=!0,xa(t,e,n),Sr=r,Ts=i;break;case 0:case 11:case 14:case 15:if(!Fr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Jw(n,e,o),i=i.next}while(i!==r)}xa(t,e,n);break;case 1:if(!Fr&&(dd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ln(n,e,a)}xa(t,e,n);break;case 21:xa(t,e,n);break;case 22:n.mode&1?(Fr=(r=Fr)||n.memoizedState!==null,xa(t,e,n),Fr=r):xa(t,e,n);break;default:xa(t,e,n)}}function fR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JG),e.forEach(function(r){var i=i8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _s(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Sr=a.stateNode,Ts=!1;break e;case 3:Sr=a.stateNode.containerInfo,Ts=!0;break e;case 4:Sr=a.stateNode.containerInfo,Ts=!0;break e}a=a.return}if(Sr===null)throw Error(Ie(160));Y3(s,o,i),Sr=null,Ts=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ln(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Q3(e,t),e=e.sibling}function Q3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_s(e,t),qs(t),r&4){try{Uh(3,t,t.return),Jy(3,t)}catch(y){Ln(t,t.return,y)}try{Uh(5,t,t.return)}catch(y){Ln(t,t.return,y)}}break;case 1:_s(e,t),qs(t),r&512&&n!==null&&dd(n,n.return);break;case 5:if(_s(e,t),qs(t),r&512&&n!==null&&dd(n,n.return),t.flags&32){var i=t.stateNode;try{tp(i,"")}catch(y){Ln(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yL(i,s),Sw(a,o);var c=Sw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?EL(i,d):u==="dangerouslySetInnerHTML"?SL(i,d):u==="children"?tp(i,d):XA(i,u,d,c)}switch(a){case"input":gw(i,s);break;case"textarea":xL(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?xd(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?xd(i,!!s.multiple,s.defaultValue,!0):xd(i,!!s.multiple,s.multiple?[]:"",!1))}i[up]=s}catch(y){Ln(t,t.return,y)}}break;case 6:if(_s(e,t),qs(t),r&4){if(t.stateNode===null)throw Error(Ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Ln(t,t.return,y)}}break;case 3:if(_s(e,t),qs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sp(e.containerInfo)}catch(y){Ln(t,t.return,y)}break;case 4:_s(e,t),qs(t);break;case 13:_s(e,t),qs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Mb=Hn())),r&4&&fR(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Fr=(c=Fr)||u,_s(e,t),Fr=c):_s(e,t),qs(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ze=t,u=t.child;u!==null;){for(d=Ze=u;Ze!==null;){switch(p=Ze,m=p.child,p.tag){case 0:case 11:case 14:case 15:Uh(4,p,p.return);break;case 1:dd(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Ln(r,n,y)}}break;case 5:dd(p,p.return);break;case 22:if(p.memoizedState!==null){pR(d);continue}}m!==null?(m.return=p,Ze=m):pR(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wL("display",o))}catch(y){Ln(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Ln(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_s(e,t),qs(t),r&4&&fR(t);break;case 21:break;default:_s(e,t),qs(t)}}function qs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(K3(n)){var r=n;break e}n=n.return}throw Error(Ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tp(i,""),r.flags&=-33);var s=dR(t);Qw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dR(t);Yw(t,a,o);break;default:throw Error(Ie(161))}}catch(l){Ln(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YG(t,e,n){Ze=t,q3(t)}function q3(t,e,n){for(var r=(t.mode&1)!==0;Ze!==null;){var i=Ze,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Fr;a=Vg;var c=Fr;if(Vg=o,(Fr=l)&&!c)for(Ze=i;Ze!==null;)o=Ze,l=o.child,o.tag===22&&o.memoizedState!==null?mR(i):l!==null?(l.return=o,Ze=l):mR(i);for(;s!==null;)Ze=s,q3(s),s=s.sibling;Ze=i,Vg=a,Fr=c}hR(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ze=s):hR(t)}}function hR(t){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fr||Jy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ms(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Y2(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Y2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&sp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}Fr||e.flags&512&&Kw(e)}catch(p){Ln(e,e.return,p)}}if(e===t){Ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function pR(t){for(;Ze!==null;){var e=Ze;if(e===t){Ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function mR(t){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jy(4,e)}catch(l){Ln(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ln(e,i,l)}}var s=e.return;try{Kw(e)}catch(l){Ln(e,s,l)}break;case 5:var o=e.return;try{Kw(e)}catch(l){Ln(e,o,l)}}}catch(l){Ln(e,e.return,l)}if(e===t){Ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ze=a;break}Ze=e.return}}var QG=Math.ceil,ry=ra.ReactCurrentDispatcher,Ab=ra.ReactCurrentOwner,as=ra.ReactCurrentBatchConfig,Ht=0,pr=null,qn=null,Ar=0,Ci=0,fd=_l(0),rr=0,gp=null,Bc=0,Ky=0,bb=0,kh=null,ai=null,Mb=0,kd=1/0,Lo=null,iy=!1,qw=null,Ya=null,Wg=!1,Ha=null,sy=0,zh=0,Zw=null,w0=-1,E0=0;function Yr(){return Ht&6?Hn():w0!==-1?w0:w0=Hn()}function Qa(t){return t.mode&1?Ht&2&&Ar!==0?Ar&-Ar:LG.transition!==null?(E0===0&&(E0=OL()),E0):(t=en,t!==0||(t=window.event,t=t===void 0?16:GL(t.type)),t):1}function Ls(t,e,n,r){if(50<zh)throw zh=0,Zw=null,Error(Ie(185));Xp(t,n,r),(!(Ht&2)||t!==pr)&&(t===pr&&(!(Ht&2)&&(Ky|=n),rr===4&&Fa(t,Ar)),pi(t,r),n===1&&Ht===0&&!(e.mode&1)&&(kd=Hn()+500,Wy&&Sl()))}function pi(t,e){var n=t.callbackNode;LH(t,e);var r=G0(t,t===pr?Ar:0);if(r===0)n!==null&&A2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&A2(n),e===1)t.tag===0?DG(gR.bind(null,t)):a3(gR.bind(null,t)),RG(function(){!(Ht&6)&&Sl()}),n=null;else{switch(NL(r)){case 1:n=qA;break;case 4:n=DL;break;case 16:n=H0;break;case 536870912:n=LL;break;default:n=H0}n=oO(n,Z3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Z3(t,e){if(w0=-1,E0=0,Ht&6)throw Error(Ie(327));var n=t.callbackNode;if(Ad()&&t.callbackNode!==n)return null;var r=G0(t,t===pr?Ar:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=oy(t,r);else{e=r;var i=Ht;Ht|=2;var s=tO();(pr!==t||Ar!==e)&&(Lo=null,kd=Hn()+500,Sc(t,e));do try{e8();break}catch(a){eO(t,a)}while(1);db(),ry.current=s,Ht=i,qn!==null?e=0:(pr=null,Ar=0,e=rr)}if(e!==0){if(e===2&&(i=Mw(t),i!==0&&(r=i,e=eE(t,i))),e===1)throw n=gp,Sc(t,0),Fa(t,r),pi(t,Hn()),n;if(e===6)Fa(t,r);else{if(i=t.current.alternate,!(r&30)&&!qG(i)&&(e=oy(t,r),e===2&&(s=Mw(t),s!==0&&(r=s,e=eE(t,s))),e===1))throw n=gp,Sc(t,0),Fa(t,r),pi(t,Hn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:Zl(t,ai,Lo);break;case 3:if(Fa(t,r),(r&130023424)===r&&(e=Mb+500-Hn(),10<e)){if(G0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lw(Zl.bind(null,t,ai,Lo),e);break}Zl(t,ai,Lo);break;case 4:if(Fa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ds(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QG(r/1960))-r,10<r){t.timeoutHandle=Lw(Zl.bind(null,t,ai,Lo),r);break}Zl(t,ai,Lo);break;case 5:Zl(t,ai,Lo);break;default:throw Error(Ie(329))}}}return pi(t,Hn()),t.callbackNode===n?Z3.bind(null,t):null}function eE(t,e){var n=kh;return t.current.memoizedState.isDehydrated&&(Sc(t,e).flags|=256),t=oy(t,e),t!==2&&(e=ai,ai=n,e!==null&&tE(e)),t}function tE(t){ai===null?ai=t:ai.push.apply(ai,t)}function qG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Fs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fa(t,e){for(e&=~bb,e&=~Ky,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ds(e),r=1<<n;t[n]=-1,e&=~r}}function gR(t){if(Ht&6)throw Error(Ie(327));Ad();var e=G0(t,0);if(!(e&1))return pi(t,Hn()),null;var n=oy(t,e);if(t.tag!==0&&n===2){var r=Mw(t);r!==0&&(e=r,n=eE(t,r))}if(n===1)throw n=gp,Sc(t,0),Fa(t,e),pi(t,Hn()),n;if(n===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zl(t,ai,Lo),pi(t,Hn()),null}function Cb(t,e){var n=Ht;Ht|=1;try{return t(e)}finally{Ht=n,Ht===0&&(kd=Hn()+500,Wy&&Sl())}}function Dc(t){Ha!==null&&Ha.tag===0&&!(Ht&6)&&Ad();var e=Ht;Ht|=1;var n=as.transition,r=en;try{if(as.transition=null,en=1,t)return t()}finally{en=r,as.transition=n,Ht=e,!(Ht&6)&&Sl()}}function Tb(){Ci=fd.current,vn(fd)}function Sc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TG(n)),qn!==null)for(n=qn.return;n!==null;){var r=n;switch(lb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&X0();break;case 3:Fd(),vn(fi),vn(kr),vb();break;case 5:gb(r);break;case 4:Fd();break;case 13:vn(Mn);break;case 19:vn(Mn);break;case 10:fb(r.type._context);break;case 22:case 23:Tb()}n=n.return}if(pr=t,qn=t=qa(t.current,null),Ar=Ci=e,rr=0,gp=null,bb=Ky=Bc=0,ai=kh=null,hc!==null){for(e=0;e<hc.length;e++)if(n=hc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}hc=null}return t}function eO(t,e){do{var n=qn;try{if(db(),x0.current=ny,ty){for(var r=Rn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ty=!1}if(Ic=0,fr=nr=Rn=null,Fh=!1,hp=0,Ab.current=null,n===null||n.return===null){rr=1,gp=e,qn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ar,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=rR(o);if(m!==null){m.flags&=-257,iR(m,o,a,s,e),m.mode&1&&nR(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){nR(s,c,e),Rb();break e}l=Error(Ie(426))}}else if(Sn&&a.mode&1){var x=rR(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),iR(x,o,a,s,e),cb(Ud(l,a));break e}}s=l=Ud(l,a),rr!==4&&(rr=2),kh===null?kh=[s]:kh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=F3(s,l,e);K2(s,g);break e;case 1:a=l;var _=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ya===null||!Ya.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=U3(s,a,e);K2(s,A);break e}}s=s.return}while(s!==null)}rO(n)}catch(M){e=M,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(1)}function tO(){var t=ry.current;return ry.current=ny,t===null?ny:t}function Rb(){(rr===0||rr===3||rr===2)&&(rr=4),pr===null||!(Bc&268435455)&&!(Ky&268435455)||Fa(pr,Ar)}function oy(t,e){var n=Ht;Ht|=2;var r=tO();(pr!==t||Ar!==e)&&(Lo=null,Sc(t,e));do try{ZG();break}catch(i){eO(t,i)}while(1);if(db(),Ht=n,ry.current=r,qn!==null)throw Error(Ie(261));return pr=null,Ar=0,rr}function ZG(){for(;qn!==null;)nO(qn)}function e8(){for(;qn!==null&&!bH();)nO(qn)}function nO(t){var e=sO(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,e===null?rO(t):qn=e,Ab.current=null}function rO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XG(n,e),n!==null){n.flags&=32767,qn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rr=6,qn=null;return}}else if(n=jG(n,e,Ci),n!==null){qn=n;return}if(e=e.sibling,e!==null){qn=e;return}qn=e=t}while(e!==null);rr===0&&(rr=5)}function Zl(t,e,n){var r=en,i=as.transition;try{as.transition=null,en=1,t8(t,e,n,r)}finally{as.transition=i,en=r}return null}function t8(t,e,n,r){do Ad();while(Ha!==null);if(Ht&6)throw Error(Ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(OH(t,s),t===pr&&(qn=pr=null,Ar=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wg||(Wg=!0,oO(H0,function(){return Ad(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=as.transition,as.transition=null;var o=en;en=1;var a=Ht;Ht|=4,Ab.current=null,KG(t,n),Q3(n,t),SG(Bw),$0=!!Iw,Bw=Iw=null,t.current=n,YG(n),MH(),Ht=a,en=o,as.transition=s}else t.current=n;if(Wg&&(Wg=!1,Ha=t,sy=i),s=t.pendingLanes,s===0&&(Ya=null),RH(n.stateNode),pi(t,Hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(iy)throw iy=!1,t=qw,qw=null,t;return sy&1&&t.tag!==0&&Ad(),s=t.pendingLanes,s&1?t===Zw?zh++:(zh=0,Zw=t):zh=0,Sl(),null}function Ad(){if(Ha!==null){var t=NL(sy),e=as.transition,n=en;try{if(as.transition=null,en=16>t?16:t,Ha===null)var r=!1;else{if(t=Ha,Ha=null,sy=0,Ht&6)throw Error(Ie(331));var i=Ht;for(Ht|=4,Ze=t.current;Ze!==null;){var s=Ze,o=s.child;if(Ze.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ze=c;Ze!==null;){var u=Ze;switch(u.tag){case 0:case 11:case 15:Uh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ze=d;else for(;Ze!==null;){u=Ze;var p=u.sibling,m=u.return;if(J3(u),u===c){Ze=null;break}if(p!==null){p.return=m,Ze=p;break}Ze=m}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Ze=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ze=o;else e:for(;Ze!==null;){if(s=Ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Uh(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ze=g;break e}Ze=s.return}}var _=t.current;for(Ze=_;Ze!==null;){o=Ze;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Ze=E;else e:for(o=_;Ze!==null;){if(a=Ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jy(9,a)}}catch(M){Ln(a,a.return,M)}if(a===o){Ze=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ze=A;break e}Ze=a.return}}if(Ht=i,Sl(),lo&&typeof lo.onPostCommitFiberRoot=="function")try{lo.onPostCommitFiberRoot(zy,t)}catch{}r=!0}return r}finally{en=n,as.transition=e}}return!1}function vR(t,e,n){e=Ud(n,e),e=F3(t,e,1),t=Ka(t,e,1),e=Yr(),t!==null&&(Xp(t,1,e),pi(t,e))}function Ln(t,e,n){if(t.tag===3)vR(t,t,n);else for(;e!==null;){if(e.tag===3){vR(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ya===null||!Ya.has(r))){t=Ud(n,t),t=U3(e,t,1),e=Ka(e,t,1),t=Yr(),e!==null&&(Xp(e,1,t),pi(e,t));break}}e=e.return}}function n8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yr(),t.pingedLanes|=t.suspendedLanes&n,pr===t&&(Ar&n)===n&&(rr===4||rr===3&&(Ar&130023424)===Ar&&500>Hn()-Mb?Sc(t,0):bb|=n),pi(t,e)}function iO(t,e){e===0&&(t.mode&1?(e=Og,Og<<=1,!(Og&130023424)&&(Og=4194304)):e=1);var n=Yr();t=Yo(t,e),t!==null&&(Xp(t,e,n),pi(t,n))}function r8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iO(t,n)}function i8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),iO(t,n)}var sO;sO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fi.current)ci=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ci=!1,WG(t,e,n);ci=!!(t.flags&131072)}else ci=!1,Sn&&e.flags&1048576&&l3(e,Y0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;S0(t,e),t=e.pendingProps;var i=Ld(e,kr.current);Ed(e,n),i=xb(null,e,r,t,i,n);var s=_b();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hi(r)?(s=!0,J0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pb(e),i.updater=jy,e.stateNode=i,i._reactInternals=e,Hw(e,r,t,n),e=Vw(null,e,r,!0,s,n)):(e.tag=0,Sn&&s&&ab(e),Jr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(S0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=o8(r),t=Ms(r,t),i){case 0:e=$w(null,e,r,t,n);break e;case 1:e=aR(null,e,r,t,n);break e;case 11:e=sR(null,e,r,t,n);break e;case 14:e=oR(null,e,r,Ms(r.type,t),n);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),$w(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),aR(t,e,r,i,n);case 3:e:{if(G3(e),t===null)throw Error(Ie(387));r=e.pendingProps,s=e.memoizedState,i=s.element,f3(t,e),Z0(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ud(Error(Ie(423)),e),e=lR(t,e,r,n,i);break e}else if(r!==i){i=Ud(Error(Ie(424)),e),e=lR(t,e,r,n,i);break e}else for(Ri=Ja(e.stateNode.containerInfo.firstChild),Bi=e,Sn=!0,Rs=null,n=g3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Od(),r===i){e=Qo(t,e,n);break e}Jr(t,e,r,n)}e=e.child}return e;case 5:return v3(e),t===null&&Uw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Dw(r,i)?o=null:s!==null&&Dw(r,s)&&(e.flags|=32),H3(t,e),Jr(t,e,o,n),e.child;case 6:return t===null&&Uw(e),null;case 13:return $3(t,e,n);case 4:return mb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Nd(e,null,r,n):Jr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),sR(t,e,r,i,n);case 7:return Jr(t,e,e.pendingProps,n),e.child;case 8:return Jr(t,e,e.pendingProps.children,n),e.child;case 12:return Jr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,dn(Q0,r._currentValue),r._currentValue=o,s!==null)if(Fs(s.value,o)){if(s.children===i.children&&!fi.current){e=Qo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Vo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),kw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ie(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),kw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ed(e,n),i=ls(i),r=r(i),e.flags|=1,Jr(t,e,r,n),e.child;case 14:return r=e.type,i=Ms(r,e.pendingProps),i=Ms(r.type,i),oR(t,e,r,i,n);case 15:return k3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),S0(t,e),e.tag=1,hi(r)?(t=!0,J0(e)):t=!1,Ed(e,n),p3(e,r,i),Hw(e,r,i,n),Vw(null,e,r,!0,t,n);case 19:return V3(t,e,n);case 22:return z3(t,e,n)}throw Error(Ie(156,e.tag))};function oO(t,e){return BL(t,e)}function s8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(t,e,n,r){return new s8(t,e,n,r)}function Pb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function o8(t){if(typeof t=="function")return Pb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===KA)return 11;if(t===YA)return 14}return 2}function qa(t,e){var n=t.alternate;return n===null?(n=os(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function A0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case nd:return wc(n.children,i,s,e);case JA:o=8,i|=8;break;case dw:return t=os(12,n,e,i|2),t.elementType=dw,t.lanes=s,t;case fw:return t=os(13,n,e,i),t.elementType=fw,t.lanes=s,t;case hw:return t=os(19,n,e,i),t.elementType=hw,t.lanes=s,t;case mL:return Yy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hL:o=10;break e;case pL:o=9;break e;case KA:o=11;break e;case YA:o=14;break e;case Da:o=16,r=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return e=os(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function wc(t,e,n,r){return t=os(7,t,r,e),t.lanes=n,t}function Yy(t,e,n,r){return t=os(22,t,r,e),t.elementType=mL,t.lanes=n,t.stateNode={isHidden:!1},t}function D_(t,e,n){return t=os(6,t,null,e),t.lanes=n,t}function L_(t,e,n){return e=os(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function a8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p_(0),this.expirationTimes=p_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ib(t,e,n,r,i,s,o,a,l){return t=new a8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=os(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pb(s),t}function l8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:td,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aO(t){if(!t)return ol;t=t._reactInternals;e:{if(Vc(t)!==t||t.tag!==1)throw Error(Ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(t.tag===1){var n=t.type;if(hi(n))return o3(t,n,e)}return e}function lO(t,e,n,r,i,s,o,a,l){return t=Ib(n,r,!0,t,i,s,o,a,l),t.context=aO(null),n=t.current,r=Yr(),i=Qa(n),s=Vo(r,i),s.callback=e??null,Ka(n,s,i),t.current.lanes=i,Xp(t,i,r),pi(t,r),t}function Qy(t,e,n,r){var i=e.current,s=Yr(),o=Qa(i);return n=aO(n),e.context===null?e.context=n:e.pendingContext=n,e=Vo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ka(i,e,o),t!==null&&(Ls(t,i,o,s),y0(t,i,o)),o}function ay(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bb(t,e){yR(t,e),(t=t.alternate)&&yR(t,e)}function c8(){return null}var cO=typeof reportError=="function"?reportError:function(t){console.error(t)};function Db(t){this._internalRoot=t}qy.prototype.render=Db.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ie(409));Qy(t,e,null,null)};qy.prototype.unmount=Db.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dc(function(){Qy(null,t,null,null)}),e[Ko]=null}};function qy(t){this._internalRoot=t}qy.prototype.unstable_scheduleHydration=function(t){if(t){var e=kL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Na.length&&e!==0&&e<Na[n].priority;n++);Na.splice(n,0,t),n===0&&HL(t)}};function Lb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xR(){}function u8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ay(o);s.call(c)}}var o=lO(e,r,t,0,null,!1,!1,"",xR);return t._reactRootContainer=o,t[Ko]=o.current,lp(t.nodeType===8?t.parentNode:t),Dc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ay(l);a.call(c)}}var l=Ib(t,0,!1,null,null,!1,!1,"",xR);return t._reactRootContainer=l,t[Ko]=l.current,lp(t.nodeType===8?t.parentNode:t),Dc(function(){Qy(e,l,n,r)}),l}function ex(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ay(o);a.call(l)}}Qy(e,o,t,i)}else o=u8(n,e,t,i,r);return ay(o)}FL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ch(e.pendingLanes);n!==0&&(ZA(e,n|1),pi(e,Hn()),!(Ht&6)&&(kd=Hn()+500,Sl()))}break;case 13:Dc(function(){var r=Yo(t,1);if(r!==null){var i=Yr();Ls(r,t,1,i)}}),Bb(t,1)}};eb=function(t){if(t.tag===13){var e=Yo(t,134217728);if(e!==null){var n=Yr();Ls(e,t,134217728,n)}Bb(t,134217728)}};UL=function(t){if(t.tag===13){var e=Qa(t),n=Yo(t,e);if(n!==null){var r=Yr();Ls(n,t,e,r)}Bb(t,e)}};kL=function(){return en};zL=function(t,e){var n=en;try{return en=t,e()}finally{en=n}};Ew=function(t,e,n){switch(e){case"input":if(gw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Vy(r);if(!i)throw Error(Ie(90));vL(r),gw(r,i)}}}break;case"textarea":xL(t,n);break;case"select":e=n.value,e!=null&&xd(t,!!n.multiple,e,!1)}};ML=Cb;CL=Dc;var d8={usingClientEntryPoint:!1,Events:[Kp,od,Vy,AL,bL,Cb]},Zf={findFiberByHostInstance:fc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},f8={bundleType:Zf.bundleType,version:Zf.version,rendererPackageName:Zf.rendererPackageName,rendererConfig:Zf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PL(t),t===null?null:t.stateNode},findFiberByHostInstance:Zf.findFiberByHostInstance||c8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jg.isDisabled&&jg.supportsFiber)try{zy=jg.inject(f8),lo=jg}catch{}}Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d8;Ni.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lb(e))throw Error(Ie(200));return l8(t,e,null,n)};Ni.createRoot=function(t,e){if(!Lb(t))throw Error(Ie(299));var n=!1,r="",i=cO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ib(t,1,!1,null,null,n,!1,r,i),t[Ko]=e.current,lp(t.nodeType===8?t.parentNode:t),new Db(e)};Ni.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=PL(e),t=t===null?null:t.stateNode,t};Ni.flushSync=function(t){return Dc(t)};Ni.hydrate=function(t,e,n){if(!Zy(e))throw Error(Ie(200));return ex(null,t,e,!0,n)};Ni.hydrateRoot=function(t,e,n){if(!Lb(t))throw Error(Ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=cO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lO(e,null,t,1,n??null,i,!1,s,o),t[Ko]=e.current,lp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qy(e)};Ni.render=function(t,e,n){if(!Zy(e))throw Error(Ie(200));return ex(null,t,e,!1,n)};Ni.unmountComponentAtNode=function(t){if(!Zy(t))throw Error(Ie(40));return t._reactRootContainer?(Dc(function(){ex(null,null,t,!1,function(){t._reactRootContainer=null,t[Ko]=null})}),!0):!1};Ni.unstable_batchedUpdates=Cb;Ni.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zy(n))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return ex(t,e,n,!1,r)};Ni.version="18.2.0-next-9e3b772b8-20220608";function uO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uO)}catch(t){console.error(t)}}uO(),lL.exports=Ni;var vo=lL.exports;const dO=yl(vo);var fO,_R=vo;fO=cw.createRoot=_R.createRoot,cw.hydrateRoot=_R.hydrateRoot;const SR=t=>{let e;const n=new Set,r=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const d=e;e=c??typeof u!="object"?u:Object.assign({},e,u),n.forEach(p=>p(e,d))}},i=()=>e,a={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(r,i,a),a},h8=t=>t?SR(t):SR;var hO={exports:{}},pO={},mO={exports:{}},gO={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd=S;function p8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var m8=typeof Object.is=="function"?Object.is:p8,g8=zd.useState,v8=zd.useEffect,y8=zd.useLayoutEffect,x8=zd.useDebugValue;function _8(t,e){var n=e(),r=g8({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return y8(function(){i.value=n,i.getSnapshot=e,O_(i)&&s({inst:i})},[t,n,e]),v8(function(){return O_(i)&&s({inst:i}),t(function(){O_(i)&&s({inst:i})})},[t]),x8(n),n}function O_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!m8(t,n)}catch{return!0}}function S8(t,e){return e()}var w8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S8:_8;gO.useSyncExternalStore=zd.useSyncExternalStore!==void 0?zd.useSyncExternalStore:w8;mO.exports=gO;var E8=mO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx=S,A8=E8;function b8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var M8=typeof Object.is=="function"?Object.is:b8,C8=A8.useSyncExternalStore,T8=tx.useRef,R8=tx.useEffect,P8=tx.useMemo,I8=tx.useDebugValue;pO.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=T8(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=P8(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&o.hasValue){var v=o.value;if(i(v,m))return d=v}return d=m}if(v=d,M8(u,m))return v;var y=r(m);return i!==void 0&&i(v,y)?v:(u=m,d=y)}var c=!1,u,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=C8(t,s[0],s[1]);return R8(function(){o.hasValue=!0,o.value=a},[a]),I8(a),a};hO.exports=pO;var B8=hO.exports;const D8=yl(B8),{useSyncExternalStoreWithSelector:L8}=D8;function O8(t,e=t.getState,n){const r=L8(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return S.useDebugValue(r),r}const wR=t=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?h8(t):t,n=(r,i)=>O8(e,r,i);return Object.assign(n,e),n},ia=t=>t?wR(t):wR;let Xg;const N8=new Uint8Array(16);function F8(){if(!Xg&&(Xg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xg(N8)}const _r=[];for(let t=0;t<256;++t)_r.push((t+256).toString(16).slice(1));function U8(t,e=0){return(_r[t[e+0]]+_r[t[e+1]]+_r[t[e+2]]+_r[t[e+3]]+"-"+_r[t[e+4]]+_r[t[e+5]]+"-"+_r[t[e+6]]+_r[t[e+7]]+"-"+_r[t[e+8]]+_r[t[e+9]]+"-"+_r[t[e+10]]+_r[t[e+11]]+_r[t[e+12]]+_r[t[e+13]]+_r[t[e+14]]+_r[t[e+15]]).toLowerCase()}const k8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ER={randomUUID:k8};function AR(t,e,n){if(ER.randomUUID&&!e&&!t)return ER.randomUUID();t=t||{};const r=t.random||(t.rng||F8)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return U8(r)}const z8=(t,e,n)=>{const r=t.findIndex(i=>i.id===e);if(r!==-1){const i=[...t.map(s=>structuredClone(s))];return i[r]={...i[r],...n},i}return t};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const wl="152",ec={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},vO=0,nE=1,yO=2,H8=3,xO=0,nx=1,Hh=2,Cs=3,Us=0,ir=1,wr=2,G8=2,br=0,Ec=1,rE=2,iE=3,sE=4,_O=5,lc=100,SO=101,wO=102,oE=103,aE=104,EO=200,AO=201,bO=202,MO=203,Ob=204,Nb=205,CO=206,TO=207,RO=208,PO=209,IO=210,BO=0,DO=1,LO=2,ly=3,OO=4,NO=5,FO=6,UO=7,Qp=0,kO=1,zO=2,Os=0,HO=1,GO=2,$O=3,Fb=4,VO=5,rx=300,al=301,ll=302,vp=303,yp=304,af=306,cl=1e3,Er=1001,Hd=1002,rn=1003,xp=1004,$8=1004,bd=1005,V8=1005,Zt=1006,ix=1007,W8=1007,ks=1008,j8=1008,zr=1009,WO=1010,jO=1011,Ub=1012,XO=1013,Ho=1014,Is=1015,ul=1016,JO=1017,KO=1018,Za=1020,YO=1021,li=1023,QO=1024,qO=1025,el=1026,dl=1027,ZO=1028,eN=1029,tN=1030,nN=1031,rN=1033,b0=33776,M0=33777,C0=33778,T0=33779,lE=35840,cE=35841,uE=35842,dE=35843,iN=36196,fE=37492,hE=37496,pE=37808,mE=37809,gE=37810,vE=37811,yE=37812,xE=37813,_E=37814,SE=37815,wE=37816,EE=37817,AE=37818,bE=37819,ME=37820,CE=37821,R0=36492,sN=36283,TE=36284,RE=36285,PE=36286,oN=2200,aN=2201,lN=2202,Gd=2300,Lc=2301,P0=2302,mc=2400,gc=2401,_p=2402,sx=2500,kb=2501,cN=0,zb=1,cy=2,qp=3e3,Qr=3001,El=3200,uN=3201,Al=0,dN=1,tl="",wt="srgb",zs="srgb-linear",Hb="display-p3",X8=0,I0=7680,J8=7681,K8=7682,Y8=7683,Q8=34055,q8=34056,Z8=5386,e6=512,t6=513,n6=514,r6=515,i6=516,s6=517,o6=518,fN=519,Sp=35044,a6=35048,l6=35040,c6=35045,u6=35049,d6=35041,f6=35046,h6=35050,p6=35042,m6="100",IE="300 es",uy=1035;class Ui{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Lr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bR=1234567;const Ac=Math.PI/180,$d=180/Math.PI;function Di(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Lr[t&255]+Lr[t>>8&255]+Lr[t>>16&255]+Lr[t>>24&255]+"-"+Lr[e&255]+Lr[e>>8&255]+"-"+Lr[e>>16&15|64]+Lr[e>>24&255]+"-"+Lr[n&63|128]+Lr[n>>8&255]+"-"+Lr[n>>16&255]+Lr[n>>24&255]+Lr[r&255]+Lr[r>>8&255]+Lr[r>>16&255]+Lr[r>>24&255]).toLowerCase()}function On(t,e,n){return Math.max(e,Math.min(n,t))}function Gb(t,e){return(t%e+e)%e}function g6(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function v6(t,e,n){return t!==e?(n-t)/(e-t):0}function Gh(t,e,n){return(1-n)*t+n*e}function y6(t,e,n,r){return Gh(t,e,1-Math.exp(-n*r))}function x6(t,e=1){return e-Math.abs(Gb(t,e*2)-e)}function _6(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function S6(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function w6(t,e){return t+Math.floor(Math.random()*(e-t+1))}function E6(t,e){return t+Math.random()*(e-t)}function A6(t){return t*(.5-Math.random())}function b6(t){t!==void 0&&(bR=t);let e=bR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function M6(t){return t*Ac}function C6(t){return t*$d}function BE(t){return(t&t-1)===0&&t!==0}function hN(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function pN(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function T6(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*d,l*p,a*c);break;case"YZY":t.set(l*p,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*p,a*u,a*c);break;case"XZX":t.set(a*u,l*v,l*m,a*c);break;case"YXY":t.set(l*m,a*u,l*v,a*c);break;case"ZYZ":t.set(l*v,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Pi(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function bt(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const bc={DEG2RAD:Ac,RAD2DEG:$d,generateUUID:Di,clamp:On,euclideanModulo:Gb,mapLinear:g6,inverseLerp:v6,lerp:Gh,damp:y6,pingpong:x6,smoothstep:_6,smootherstep:S6,randInt:w6,randFloat:E6,randFloatSpread:A6,seededRandom:b6,degToRad:M6,radToDeg:C6,isPowerOfTwo:BE,ceilPowerOfTwo:hN,floorPowerOfTwo:pN,setQuaternionFromProperEuler:T6,normalize:bt,denormalize:Pi};class de{constructor(e=0,n=0){de.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(On(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],p=r[2],m=r[5],v=r[8],y=i[0],x=i[3],g=i[6],_=i[1],E=i[4],A=i[7],M=i[2],T=i[5],P=i[8];return s[0]=o*y+a*_+l*M,s[3]=o*x+a*E+l*T,s[6]=o*g+a*A+l*P,s[1]=c*y+u*_+d*M,s[4]=c*x+u*E+d*T,s[7]=c*g+u*A+d*P,s[2]=p*y+m*_+v*M,s[5]=p*x+m*E+v*T,s[8]=p*g+m*A+v*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,p=a*l-u*s,m=c*s-o*l,v=n*d+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=d*y,e[1]=(i*c-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=p*y,e[4]=(u*n-i*l)*y,e[5]=(i*s-a*n)*y,e[6]=m*y,e[7]=(r*l-c*n)*y,e[8]=(o*n-r*s)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(N_.makeScale(e,n)),this}rotate(e){return this.premultiply(N_.makeRotation(-e)),this}translate(e,n){return this.premultiply(N_.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const N_=new Rt;function mN(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const R6={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hd(t,e){return new R6[t](e)}function wp(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const MR={};function $h(t){t in MR||(MR[t]=!0,console.warn(t))}function Md(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function F_(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const P6=new Rt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),I6=new Rt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function B6(t){return t.convertSRGBToLinear().applyMatrix3(I6)}function D6(t){return t.applyMatrix3(P6).convertLinearToSRGB()}const L6={[zs]:t=>t,[wt]:t=>t.convertSRGBToLinear(),[Hb]:B6},O6={[zs]:t=>t,[wt]:t=>t.convertLinearToSRGB(),[Hb]:D6},Qi={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return zs},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=L6[e],i=O6[n];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let yu;class $b{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{yu===void 0&&(yu=wp("canvas")),yu.width=e.width,yu.height=e.height;const r=yu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=yu}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=wp("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Md(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Md(n[r]/255)*255):n[r]=Md(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class vc{constructor(e=null){this.isSource=!0,this.uuid=Di(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(U_(i[o].image)):s.push(U_(i[o]))}else s=U_(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function U_(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?$b.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let N6=0;class fn extends Ui{constructor(e=fn.DEFAULT_IMAGE,n=fn.DEFAULT_MAPPING,r=Er,i=Er,s=Zt,o=ks,a=li,l=zr,c=fn.DEFAULT_ANISOTROPY,u=tl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:N6++}),this.uuid=Di(),this.name="",this.source=new vc(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:($h("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Qr?wt:tl),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==rx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case cl:e.x=e.x-Math.floor(e.x);break;case Er:e.x=e.x<0?0:1;break;case Hd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case cl:e.y=e.y-Math.floor(e.y);break;case Er:e.y=e.y<0?0:1;break;case Hd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return $h("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===wt?Qr:qp}set encoding(e){$h("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Qr?wt:tl}}fn.DEFAULT_IMAGE=null;fn.DEFAULT_MAPPING=rx;fn.DEFAULT_ANISOTROPY=1;class Dt{constructor(e=0,n=0,r=0,i=1){Dt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],m=l[5],v=l[9],y=l[2],x=l[6],g=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-y)<.01&&Math.abs(v-x)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+y)<.1&&Math.abs(v+x)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const E=(c+1)/2,A=(m+1)/2,M=(g+1)/2,T=(u+p)/4,P=(d+y)/4,I=(v+x)/4;return E>A&&E>M?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=T/r,s=P/r):A>M?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=T/i,s=I/i):M<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(M),r=P/s,i=I/s),this.set(r,i,s,n),this}let _=Math.sqrt((x-v)*(x-v)+(d-y)*(d-y)+(p-u)*(p-u));return Math.abs(_)<.001&&(_=1),this.x=(x-v)/_,this.y=(d-y)/_,this.z=(p-u)/_,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class yn extends Ui{constructor(e=1,n=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Dt(0,0,e,n),this.scissorTest=!1,this.viewport=new Dt(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&($h("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Qr?wt:tl),this.texture=new fn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Zt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new vc(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ox extends fn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=rn,this.minFilter=rn,this.wrapR=Er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class F6 extends yn{constructor(e=1,n=1,r=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ox(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Vb extends fn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=rn,this.minFilter=rn,this.wrapR=Er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class U6 extends yn{constructor(e=1,n=1,r=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Vb(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class k6 extends yn{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Wn{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],y=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=v,e[n+3]=y;return}if(d!==y||l!==p||c!==m||u!==v){let x=1-a;const g=l*p+c*m+u*v+d*y,_=g>=0?1:-1,E=1-g*g;if(E>Number.EPSILON){const M=Math.sqrt(E),T=Math.atan2(M,g*_);x=Math.sin(x*T)/M,a=Math.sin(a*T)/M}const A=a*_;if(l=l*x+p*A,c=c*x+m*A,u=u*x+v*A,d=d*x+y*A,x===1-a){const M=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=M,c*=M,u*=M,d*=M}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[n]=a*v+u*d+l*m-c*p,e[n+1]=l*v+u*p+c*d-a*m,e[n+2]=c*v+u*m+a*p-l*d,e[n+3]=u*v-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*u*d+c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d-p*m*v;break;case"YXZ":this._x=p*u*d+c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d+p*m*v;break;case"ZXY":this._x=p*u*d-c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d-p*m*v;break;case"ZYX":this._x=p*u*d-c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d+p*m*v;break;case"YZX":this._x=p*u*d+c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d-p*m*v;break;case"XZY":this._x=p*u*d-c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(On(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,p=Math.sin(n*u)/c;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class O{constructor(e=0,n=0,r=0){O.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(CR.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(CR.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*i-a*r,u=l*r+a*n-s*i,d=l*i+s*r-o*n,p=-s*n-o*r-a*i;return this.x=c*l+p*-s+u*-a-d*-o,this.y=u*l+p*-o+d*-s-c*-a,this.z=d*l+p*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return k_.copy(this).projectOnVector(e),this.sub(k_)}reflect(e){return this.sub(k_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(On(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const k_=new O,CR=new Wn;class wn{constructor(e=new O(1/0,1/0,1/0),n=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Co.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Co.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Co.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),xu.copy(e.boundingBox),xu.applyMatrix4(e.matrixWorld),this.union(xu);else{const i=e.geometry;if(i!==void 0)if(n&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Co.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Co)}else i.boundingBox===null&&i.computeBoundingBox(),xu.copy(i.boundingBox),xu.applyMatrix4(e.matrixWorld),this.union(xu)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Co),Co.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(eh),Jg.subVectors(this.max,eh),_u.subVectors(e.a,eh),Su.subVectors(e.b,eh),wu.subVectors(e.c,eh),_a.subVectors(Su,_u),Sa.subVectors(wu,Su),kl.subVectors(_u,wu);let n=[0,-_a.z,_a.y,0,-Sa.z,Sa.y,0,-kl.z,kl.y,_a.z,0,-_a.x,Sa.z,0,-Sa.x,kl.z,0,-kl.x,-_a.y,_a.x,0,-Sa.y,Sa.x,0,-kl.y,kl.x,0];return!z_(n,_u,Su,wu,Jg)||(n=[1,0,0,0,1,0,0,0,1],!z_(n,_u,Su,wu,Jg))?!1:(Kg.crossVectors(_a,Sa),n=[Kg.x,Kg.y,Kg.z],z_(n,_u,Su,wu,Jg))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Co).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Co).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Mo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Mo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Mo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Mo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Mo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Mo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Mo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Mo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Mo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Mo=[new O,new O,new O,new O,new O,new O,new O,new O],Co=new O,xu=new wn,_u=new O,Su=new O,wu=new O,_a=new O,Sa=new O,kl=new O,eh=new O,Jg=new O,Kg=new O,zl=new O;function z_(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){zl.fromArray(t,s);const a=i.x*Math.abs(zl.x)+i.y*Math.abs(zl.y)+i.z*Math.abs(zl.z),l=e.dot(zl),c=n.dot(zl),u=r.dot(zl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const z6=new wn,th=new O,H_=new O;class gi{constructor(e=new O,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):z6.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;th.subVectors(e,this.center);const n=th.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(th,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(H_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(th.copy(e.center).add(H_)),this.expandByPoint(th.copy(e.center).sub(H_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const To=new O,G_=new O,Yg=new O,wa=new O,$_=new O,Qg=new O,V_=new O;class bl{constructor(e=new O,n=new O(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,To)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=To.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(To.copy(this.origin).addScaledVector(this.direction,n),To.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){G_.copy(e).add(n).multiplyScalar(.5),Yg.copy(n).sub(e).normalize(),wa.copy(this.origin).sub(G_);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Yg),a=wa.dot(this.direction),l=-wa.dot(Yg),c=wa.lengthSq(),u=Math.abs(1-o*o);let d,p,m,v;if(u>0)if(d=o*l-a,p=o*a-l,v=s*u,d>=0)if(p>=-v)if(p<=v){const y=1/u;d*=y,p*=y,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=v?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(G_).addScaledVector(Yg,p),m}intersectSphere(e,n){To.subVectors(e.center,this.origin);const r=To.dot(this.direction),i=To.dot(To)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,To)!==null}intersectTriangle(e,n,r,i,s){$_.subVectors(n,e),Qg.subVectors(r,e),V_.crossVectors($_,Qg);let o=this.direction.dot(V_),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;wa.subVectors(this.origin,e);const l=a*this.direction.dot(Qg.crossVectors(wa,Qg));if(l<0)return null;const c=a*this.direction.dot($_.cross(wa));if(c<0||l+c>o)return null;const u=-a*wa.dot(V_);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class je{constructor(){je.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,r,i,s,o,a,l,c,u,d,p,m,v,y,x){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=p,g[3]=m,g[7]=v,g[11]=y,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new je().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Eu.setFromMatrixColumn(e,0).length(),s=1/Eu.setFromMatrixColumn(e,1).length(),o=1/Eu.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*d,v=a*u,y=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=m+v*c,n[5]=p-y*c,n[9]=-a*l,n[2]=y-p*c,n[6]=v+m*c,n[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*d,v=c*u,y=c*d;n[0]=p+y*a,n[4]=v*a-m,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=m*a-v,n[6]=y+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*d,v=c*u,y=c*d;n[0]=p-y*a,n[4]=-o*d,n[8]=v+m*a,n[1]=m+v*a,n[5]=o*u,n[9]=y-p*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*d,v=a*u,y=a*d;n[0]=l*u,n[4]=v*c-m,n[8]=p*c+y,n[1]=l*d,n[5]=y*c+p,n[9]=m*c-v,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,y=a*c;n[0]=l*u,n[4]=y-p*d,n[8]=v*d+m,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=m*d+v,n[10]=p-y*d}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,y=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=p*d+y,n[5]=o*u,n[9]=m*d-v,n[2]=v*d-m,n[6]=a*u,n[10]=y*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(H6,e,G6)}lookAt(e,n,r){const i=this.elements;return bi.subVectors(e,n),bi.lengthSq()===0&&(bi.z=1),bi.normalize(),Ea.crossVectors(r,bi),Ea.lengthSq()===0&&(Math.abs(r.z)===1?bi.x+=1e-4:bi.z+=1e-4,bi.normalize(),Ea.crossVectors(r,bi)),Ea.normalize(),qg.crossVectors(bi,Ea),i[0]=Ea.x,i[4]=qg.x,i[8]=bi.x,i[1]=Ea.y,i[5]=qg.y,i[9]=bi.y,i[2]=Ea.z,i[6]=qg.z,i[10]=bi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],p=r[9],m=r[13],v=r[2],y=r[6],x=r[10],g=r[14],_=r[3],E=r[7],A=r[11],M=r[15],T=i[0],P=i[4],I=i[8],R=i[12],D=i[1],F=i[5],X=i[9],z=i[13],V=i[2],H=i[6],Q=i[10],Z=i[14],U=i[3],N=i[7],G=i[11],ne=i[15];return s[0]=o*T+a*D+l*V+c*U,s[4]=o*P+a*F+l*H+c*N,s[8]=o*I+a*X+l*Q+c*G,s[12]=o*R+a*z+l*Z+c*ne,s[1]=u*T+d*D+p*V+m*U,s[5]=u*P+d*F+p*H+m*N,s[9]=u*I+d*X+p*Q+m*G,s[13]=u*R+d*z+p*Z+m*ne,s[2]=v*T+y*D+x*V+g*U,s[6]=v*P+y*F+x*H+g*N,s[10]=v*I+y*X+x*Q+g*G,s[14]=v*R+y*z+x*Z+g*ne,s[3]=_*T+E*D+A*V+M*U,s[7]=_*P+E*F+A*H+M*N,s[11]=_*I+E*X+A*Q+M*G,s[15]=_*R+E*z+A*Z+M*ne,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],m=e[14],v=e[3],y=e[7],x=e[11],g=e[15];return v*(+s*l*d-i*c*d-s*a*p+r*c*p+i*a*m-r*l*m)+y*(+n*l*m-n*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+x*(+n*c*d-n*a*m-s*o*d+r*o*m+s*a*u-r*c*u)+g*(-i*a*u-n*l*d+n*a*p+i*o*d-r*o*p+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],v=e[12],y=e[13],x=e[14],g=e[15],_=d*x*c-y*p*c+y*l*m-a*x*m-d*l*g+a*p*g,E=v*p*c-u*x*c-v*l*m+o*x*m+u*l*g-o*p*g,A=u*y*c-v*d*c+v*a*m-o*y*m-u*a*g+o*d*g,M=v*d*l-u*y*l-v*a*p+o*y*p+u*a*x-o*d*x,T=n*_+r*E+i*A+s*M;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return e[0]=_*P,e[1]=(y*p*s-d*x*s-y*i*m+r*x*m+d*i*g-r*p*g)*P,e[2]=(a*x*s-y*l*s+y*i*c-r*x*c-a*i*g+r*l*g)*P,e[3]=(d*l*s-a*p*s-d*i*c+r*p*c+a*i*m-r*l*m)*P,e[4]=E*P,e[5]=(u*x*s-v*p*s+v*i*m-n*x*m-u*i*g+n*p*g)*P,e[6]=(v*l*s-o*x*s-v*i*c+n*x*c+o*i*g-n*l*g)*P,e[7]=(o*p*s-u*l*s+u*i*c-n*p*c-o*i*m+n*l*m)*P,e[8]=A*P,e[9]=(v*d*s-u*y*s-v*r*m+n*y*m+u*r*g-n*d*g)*P,e[10]=(o*y*s-v*a*s+v*r*c-n*y*c-o*r*g+n*a*g)*P,e[11]=(u*a*s-o*d*s-u*r*c+n*d*c+o*r*m-n*a*m)*P,e[12]=M*P,e[13]=(u*y*i-v*d*i+v*r*p-n*y*p-u*r*x+n*d*x)*P,e[14]=(v*a*i-o*y*i-v*r*l+n*y*l+o*r*x-n*a*x)*P,e[15]=(o*d*i-u*a*i+u*r*l-n*d*l-o*r*p+n*a*p)*P,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,d=a+a,p=s*c,m=s*u,v=s*d,y=o*u,x=o*d,g=a*d,_=l*c,E=l*u,A=l*d,M=r.x,T=r.y,P=r.z;return i[0]=(1-(y+g))*M,i[1]=(m+A)*M,i[2]=(v-E)*M,i[3]=0,i[4]=(m-A)*T,i[5]=(1-(p+g))*T,i[6]=(x+_)*T,i[7]=0,i[8]=(v+E)*P,i[9]=(x-_)*P,i[10]=(1-(p+y))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Eu.set(i[0],i[1],i[2]).length();const o=Eu.set(i[4],i[5],i[6]).length(),a=Eu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ss.copy(this);const c=1/s,u=1/o,d=1/a;return Ss.elements[0]*=c,Ss.elements[1]*=c,Ss.elements[2]*=c,Ss.elements[4]*=u,Ss.elements[5]*=u,Ss.elements[6]*=u,Ss.elements[8]*=d,Ss.elements[9]*=d,Ss.elements[10]*=d,n.setFromRotationMatrix(Ss),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o){const a=this.elements,l=2*s/(n-e),c=2*s/(r-i),u=(n+e)/(n-e),d=(r+i)/(r-i),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,r,i,s,o){const a=this.elements,l=1/(n-e),c=1/(r-i),u=1/(o-s),d=(n+e)*l,p=(r+i)*c,m=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Eu=new O,Ss=new je,H6=new O(0,0,0),G6=new O(1,1,1),Ea=new O,qg=new O,bi=new O,TR=new je,RR=new Wn;class Zp{constructor(e=0,n=0,r=0,i=Zp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(On(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-On(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(On(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-On(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(On(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-On(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return TR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(TR,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return RR.setFromEuler(this),this.setFromQuaternion(RR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Zp.DEFAULT_ORDER="XYZ";let Mc=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},$6=0;const PR=new O,Au=new Wn,Ro=new je,Zg=new O,nh=new O,V6=new O,W6=new Wn,IR=new O(1,0,0),BR=new O(0,1,0),DR=new O(0,0,1),j6={type:"added"},LR={type:"removed"};class zt extends Ui{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$6++}),this.uuid=Di(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zt.DEFAULT_UP.clone();const e=new O,n=new Zp,r=new Wn,i=new O(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new je},normalMatrix:{value:new Rt}}),this.matrix=new je,this.matrixWorld=new je,this.matrixAutoUpdate=zt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Mc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Au.setFromAxisAngle(e,n),this.quaternion.multiply(Au),this}rotateOnWorldAxis(e,n){return Au.setFromAxisAngle(e,n),this.quaternion.premultiply(Au),this}rotateX(e){return this.rotateOnAxis(IR,e)}rotateY(e){return this.rotateOnAxis(BR,e)}rotateZ(e){return this.rotateOnAxis(DR,e)}translateOnAxis(e,n){return PR.copy(e).applyQuaternion(this.quaternion),this.position.add(PR.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(IR,e)}translateY(e){return this.translateOnAxis(BR,e)}translateZ(e){return this.translateOnAxis(DR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ro.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Zg.copy(e):Zg.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),nh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ro.lookAt(nh,Zg,this.up):Ro.lookAt(Zg,nh,this.up),this.quaternion.setFromRotationMatrix(Ro),i&&(Ro.extractRotation(i.matrixWorld),Au.setFromRotationMatrix(Ro),this.quaternion.premultiply(Au.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(j6)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(LR)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(LR)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ro.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ro.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ro),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,n);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nh,e,V6),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nh,W6,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}zt.DEFAULT_UP=new O(0,1,0);zt.DEFAULT_MATRIX_AUTO_UPDATE=!0;zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ws=new O,Po=new O,W_=new O,Io=new O,bu=new O,Mu=new O,OR=new O,j_=new O,X_=new O,J_=new O;let ev=!1,yc=class nc{constructor(e=new O,n=new O,r=new O){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),ws.subVectors(e,n),i.cross(ws);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){ws.subVectors(i,n),Po.subVectors(r,n),W_.subVectors(e,n);const o=ws.dot(ws),a=ws.dot(Po),l=ws.dot(W_),c=Po.dot(Po),u=Po.dot(W_),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(c*l-a*u)*p,v=(o*u-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Io),Io.x>=0&&Io.y>=0&&Io.x+Io.y<=1}static getUV(e,n,r,i,s,o,a,l){return ev===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ev=!0),this.getInterpolation(e,n,r,i,s,o,a,l)}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Io),l.setScalar(0),l.addScaledVector(s,Io.x),l.addScaledVector(o,Io.y),l.addScaledVector(a,Io.z),l}static isFrontFacing(e,n,r,i){return ws.subVectors(r,n),Po.subVectors(e,n),ws.cross(Po).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ws.subVectors(this.c,this.b),Po.subVectors(this.a,this.b),ws.cross(Po).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return nc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return nc.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return ev===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ev=!0),nc.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return nc.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return nc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return nc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;bu.subVectors(i,r),Mu.subVectors(s,r),j_.subVectors(e,r);const l=bu.dot(j_),c=Mu.dot(j_);if(l<=0&&c<=0)return n.copy(r);X_.subVectors(e,i);const u=bu.dot(X_),d=Mu.dot(X_);if(u>=0&&d<=u)return n.copy(i);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(bu,o);J_.subVectors(e,s);const m=bu.dot(J_),v=Mu.dot(J_);if(v>=0&&m<=v)return n.copy(s);const y=m*c-l*v;if(y<=0&&c>=0&&v<=0)return a=c/(c-v),n.copy(r).addScaledVector(Mu,a);const x=u*v-m*d;if(x<=0&&d-u>=0&&m-v>=0)return OR.subVectors(s,i),a=(d-u)/(d-u+(m-v)),n.copy(i).addScaledVector(OR,a);const g=1/(x+y+p);return o=y*g,a=p*g,n.copy(r).addScaledVector(bu,o).addScaledVector(Mu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},X6=0;class Nn extends Ui{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:X6++}),this.uuid=Di(),this.name="",this.type="Material",this.blending=Ec,this.side=Us,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ob,this.blendDst=Nb,this.blendEquation=lc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ly,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fN,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=I0,this.stencilZFail=I0,this.stencilZPass=I0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ec&&(r.blending=this.blending),this.side!==Us&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const gN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Es={h:0,s:0,l:0},tv={h:0,s:0,l:0};function K_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Fe{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=wt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qi.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Qi.workingColorSpace){return this.r=e,this.g=n,this.b=r,Qi.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Qi.workingColorSpace){if(e=Gb(e,1),n=On(n,0,1),r=On(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=K_(o,s,e+1/3),this.g=K_(o,s,e),this.b=K_(o,s,e-1/3)}return Qi.toWorkingColorSpace(this,i),this}setStyle(e,n=wt){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=wt){const r=gN[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Md(e.r),this.g=Md(e.g),this.b=Md(e.b),this}copyLinearToSRGB(e){return this.r=F_(e.r),this.g=F_(e.g),this.b=F_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=wt){return Qi.fromWorkingColorSpace(Or.copy(this),e),Math.round(On(Or.r*255,0,255))*65536+Math.round(On(Or.g*255,0,255))*256+Math.round(On(Or.b*255,0,255))}getHexString(e=wt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Qi.workingColorSpace){Qi.fromWorkingColorSpace(Or.copy(this),n);const r=Or.r,i=Or.g,s=Or.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Qi.workingColorSpace){return Qi.fromWorkingColorSpace(Or.copy(this),n),e.r=Or.r,e.g=Or.g,e.b=Or.b,e}getStyle(e=wt){Qi.fromWorkingColorSpace(Or.copy(this),e);const n=Or.r,r=Or.g,i=Or.b;return e!==wt?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Es),Es.h+=e,Es.s+=n,Es.l+=r,this.setHSL(Es.h,Es.s,Es.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Es),e.getHSL(tv);const r=Gh(Es.h,tv.h,n),i=Gh(Es.s,tv.s,n),s=Gh(Es.l,tv.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Or=new Fe;Fe.NAMES=gN;class ui extends Nn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fo=J6();function J6(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function ii(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=On(t,-65504,65504),Fo.floatView[0]=t;const e=Fo.uint32View[0],n=e>>23&511;return Fo.baseTable[n]+((e&8388607)>>Fo.shiftTable[n])}function Rh(t){const e=t>>10;return Fo.uint32View[0]=Fo.mantissaTable[Fo.offsetTable[e]+(t&1023)]+Fo.exponentTable[e],Fo.floatView[0]}const K6={toHalfFloat:ii,fromHalfFloat:Rh},Qn=new O,nv=new de;class Lt{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Sp,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)nv.fromBufferAttribute(this,n),nv.applyMatrix3(e),this.setXY(n,nv.x,nv.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Qn.fromBufferAttribute(this,n),Qn.applyMatrix3(e),this.setXYZ(n,Qn.x,Qn.y,Qn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Qn.fromBufferAttribute(this,n),Qn.applyMatrix4(e),this.setXYZ(n,Qn.x,Qn.y,Qn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Qn.fromBufferAttribute(this,n),Qn.applyNormalMatrix(e),this.setXYZ(n,Qn.x,Qn.y,Qn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Qn.fromBufferAttribute(this,n),Qn.transformDirection(e),this.setXYZ(n,Qn.x,Qn.y,Qn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Pi(n,this.array)),n}setX(e,n){return this.normalized&&(n=bt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Pi(n,this.array)),n}setY(e,n){return this.normalized&&(n=bt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Pi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=bt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Pi(n,this.array)),n}setW(e,n){return this.normalized&&(n=bt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array),i=bt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array),i=bt(i,this.array),s=bt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Sp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Y6 extends Lt{constructor(e,n,r){super(new Int8Array(e),n,r)}}class Q6 extends Lt{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class q6 extends Lt{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class Z6 extends Lt{constructor(e,n,r){super(new Int16Array(e),n,r)}}class Wb extends Lt{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class e$ extends Lt{constructor(e,n,r){super(new Int32Array(e),n,r)}}class jb extends Lt{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class t$ extends Lt{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Rh(this.array[e*this.itemSize]);return this.normalized&&(n=Pi(n,this.array)),n}setX(e,n){return this.normalized&&(n=bt(n,this.array)),this.array[e*this.itemSize]=ii(n),this}getY(e){let n=Rh(this.array[e*this.itemSize+1]);return this.normalized&&(n=Pi(n,this.array)),n}setY(e,n){return this.normalized&&(n=bt(n,this.array)),this.array[e*this.itemSize+1]=ii(n),this}getZ(e){let n=Rh(this.array[e*this.itemSize+2]);return this.normalized&&(n=Pi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=bt(n,this.array)),this.array[e*this.itemSize+2]=ii(n),this}getW(e){let n=Rh(this.array[e*this.itemSize+3]);return this.normalized&&(n=Pi(n,this.array)),n}setW(e,n){return this.normalized&&(n=bt(n,this.array)),this.array[e*this.itemSize+3]=ii(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array)),this.array[e+0]=ii(n),this.array[e+1]=ii(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array),i=bt(i,this.array)),this.array[e+0]=ii(n),this.array[e+1]=ii(r),this.array[e+2]=ii(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array),i=bt(i,this.array),s=bt(s,this.array)),this.array[e+0]=ii(n),this.array[e+1]=ii(r),this.array[e+2]=ii(i),this.array[e+3]=ii(s),this}}class tt extends Lt{constructor(e,n,r){super(new Float32Array(e),n,r)}}class n$ extends Lt{constructor(e,n,r){super(new Float64Array(e),n,r)}}let r$=0;const Yi=new je,Y_=new zt,Cu=new O,Mi=new wn,rh=new wn,dr=new O;class xt extends Ui{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:r$++}),this.uuid=Di(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(mN(e)?jb:Wb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Rt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Yi.makeRotationFromQuaternion(e),this.applyMatrix4(Yi),this}rotateX(e){return Yi.makeRotationX(e),this.applyMatrix4(Yi),this}rotateY(e){return Yi.makeRotationY(e),this.applyMatrix4(Yi),this}rotateZ(e){return Yi.makeRotationZ(e),this.applyMatrix4(Yi),this}translate(e,n,r){return Yi.makeTranslation(e,n,r),this.applyMatrix4(Yi),this}scale(e,n,r){return Yi.makeScale(e,n,r),this.applyMatrix4(Yi),this}lookAt(e){return Y_.lookAt(e),Y_.updateMatrix(),this.applyMatrix4(Y_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cu).negate(),this.translate(Cu.x,Cu.y,Cu.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new tt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new wn);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Mi.setFromBufferAttribute(s),this.morphTargetsRelative?(dr.addVectors(this.boundingBox.min,Mi.min),this.boundingBox.expandByPoint(dr),dr.addVectors(this.boundingBox.max,Mi.max),this.boundingBox.expandByPoint(dr)):(this.boundingBox.expandByPoint(Mi.min),this.boundingBox.expandByPoint(Mi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new O,1/0);return}if(e){const r=this.boundingSphere.center;if(Mi.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];rh.setFromBufferAttribute(a),this.morphTargetsRelative?(dr.addVectors(Mi.min,rh.min),Mi.expandByPoint(dr),dr.addVectors(Mi.max,rh.max),Mi.expandByPoint(dr)):(Mi.expandByPoint(rh.min),Mi.expandByPoint(rh.max))}Mi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)dr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(dr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)dr.fromBufferAttribute(a,c),l&&(Cu.fromBufferAttribute(e,c),dr.add(Cu)),i=Math.max(i,r.distanceToSquared(dr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Lt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let D=0;D<a;D++)c[D]=new O,u[D]=new O;const d=new O,p=new O,m=new O,v=new de,y=new de,x=new de,g=new O,_=new O;function E(D,F,X){d.fromArray(i,D*3),p.fromArray(i,F*3),m.fromArray(i,X*3),v.fromArray(o,D*2),y.fromArray(o,F*2),x.fromArray(o,X*2),p.sub(d),m.sub(d),y.sub(v),x.sub(v);const z=1/(y.x*x.y-x.x*y.y);isFinite(z)&&(g.copy(p).multiplyScalar(x.y).addScaledVector(m,-y.y).multiplyScalar(z),_.copy(m).multiplyScalar(y.x).addScaledVector(p,-x.x).multiplyScalar(z),c[D].add(g),c[F].add(g),c[X].add(g),u[D].add(_),u[F].add(_),u[X].add(_))}let A=this.groups;A.length===0&&(A=[{start:0,count:r.length}]);for(let D=0,F=A.length;D<F;++D){const X=A[D],z=X.start,V=X.count;for(let H=z,Q=z+V;H<Q;H+=3)E(r[H+0],r[H+1],r[H+2])}const M=new O,T=new O,P=new O,I=new O;function R(D){P.fromArray(s,D*3),I.copy(P);const F=c[D];M.copy(F),M.sub(P.multiplyScalar(P.dot(F))).normalize(),T.crossVectors(I,F);const z=T.dot(u[D])<0?-1:1;l[D*4]=M.x,l[D*4+1]=M.y,l[D*4+2]=M.z,l[D*4+3]=z}for(let D=0,F=A.length;D<F;++D){const X=A[D],z=X.start,V=X.count;for(let H=z,Q=z+V;H<Q;H+=3)R(r[H+0]),R(r[H+1]),R(r[H+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Lt(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new O,s=new O,o=new O,a=new O,l=new O,c=new O,u=new O,d=new O;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),y=e.getX(p+1),x=e.getX(p+2);i.fromBufferAttribute(n,v),s.fromBufferAttribute(n,y),o.fromBufferAttribute(n,x),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,x),a.add(u),l.add(u),c.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(x,c.x,c.y,c.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)dr.fromBufferAttribute(e,n),dr.normalize(),e.setXYZ(n,dr.x,dr.y,dr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,p=new c.constructor(l.length*u);let m=0,v=0;for(let y=0,x=l.length;y<x;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*u;for(let g=0;g<u;g++)p[v++]=c[m++]}return new Lt(p,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new xt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const p=c[u],m=e(p,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let p=0,m=d.length;p<m;p++)u.push(d[p].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const NR=new je,Zs=new bl,rv=new gi,FR=new O,Tu=new O,Ru=new O,Pu=new O,Q_=new O,iv=new O,sv=new de,ov=new de,av=new de,UR=new O,kR=new O,zR=new O,lv=new O,cv=new O;class Zn extends zt{constructor(e=new xt,n=new ui){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){iv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(Q_.fromBufferAttribute(d,e),o?iv.addScaledVector(Q_,u):iv.addScaledVector(Q_.sub(n),u))}n.add(iv)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),rv.copy(r.boundingSphere),rv.applyMatrix4(s),Zs.copy(e.ray).recast(e.near),!(rv.containsPoint(Zs.origin)===!1&&(Zs.intersectSphere(rv,FR)===null||Zs.origin.distanceToSquared(FR)>(e.far-e.near)**2))&&(NR.copy(s).invert(),Zs.copy(e.ray).applyMatrix4(NR),!(r.boundingBox!==null&&Zs.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n)))}_computeIntersections(e,n){let r;const i=this.geometry,s=this.material,o=i.index,a=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,d=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(s))for(let m=0,v=d.length;m<v;m++){const y=d[m],x=s[y.materialIndex],g=Math.max(y.start,p.start),_=Math.min(o.count,Math.min(y.start+y.count,p.start+p.count));for(let E=g,A=_;E<A;E+=3){const M=o.getX(E),T=o.getX(E+1),P=o.getX(E+2);r=uv(this,x,e,Zs,l,c,u,M,T,P),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=y.materialIndex,n.push(r))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let y=m,x=v;y<x;y+=3){const g=o.getX(y),_=o.getX(y+1),E=o.getX(y+2);r=uv(this,s,e,Zs,l,c,u,g,_,E),r&&(r.faceIndex=Math.floor(y/3),n.push(r))}}else if(a!==void 0)if(Array.isArray(s))for(let m=0,v=d.length;m<v;m++){const y=d[m],x=s[y.materialIndex],g=Math.max(y.start,p.start),_=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));for(let E=g,A=_;E<A;E+=3){const M=E,T=E+1,P=E+2;r=uv(this,x,e,Zs,l,c,u,M,T,P),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=y.materialIndex,n.push(r))}}else{const m=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let y=m,x=v;y<x;y+=3){const g=y,_=y+1,E=y+2;r=uv(this,s,e,Zs,l,c,u,g,_,E),r&&(r.faceIndex=Math.floor(y/3),n.push(r))}}}}function i$(t,e,n,r,i,s,o,a){let l;if(e.side===ir?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Us,a),l===null)return null;cv.copy(a),cv.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(cv);return c<n.near||c>n.far?null:{distance:c,point:cv.clone(),object:t}}function uv(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,Tu),t.getVertexPosition(l,Ru),t.getVertexPosition(c,Pu);const u=i$(t,e,n,r,Tu,Ru,Pu,lv);if(u){i&&(sv.fromBufferAttribute(i,a),ov.fromBufferAttribute(i,l),av.fromBufferAttribute(i,c),u.uv=yc.getInterpolation(lv,Tu,Ru,Pu,sv,ov,av,new de)),s&&(sv.fromBufferAttribute(s,a),ov.fromBufferAttribute(s,l),av.fromBufferAttribute(s,c),u.uv1=yc.getInterpolation(lv,Tu,Ru,Pu,sv,ov,av,new de),u.uv2=u.uv1),o&&(UR.fromBufferAttribute(o,a),kR.fromBufferAttribute(o,l),zR.fromBufferAttribute(o,c),u.normal=yc.getInterpolation(lv,Tu,Ru,Pu,UR,kR,zR,new O),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new O,materialIndex:0};yc.getNormal(Tu,Ru,Pu,d.normal),u.face=d}return u}class fo extends xt{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let p=0,m=0;v("z","y","x",-1,-1,r,n,e,o,s,0),v("z","y","x",1,-1,r,n,-e,o,s,1),v("x","z","y",1,1,e,r,n,i,o,2),v("x","z","y",1,-1,e,r,-n,i,o,3),v("x","y","z",1,-1,e,n,r,i,s,4),v("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new tt(c,3)),this.setAttribute("normal",new tt(u,3)),this.setAttribute("uv",new tt(d,2));function v(y,x,g,_,E,A,M,T,P,I,R){const D=A/P,F=M/I,X=A/2,z=M/2,V=T/2,H=P+1,Q=I+1;let Z=0,U=0;const N=new O;for(let G=0;G<Q;G++){const ne=G*F-z;for(let J=0;J<H;J++){const ee=J*D-X;N[y]=ee*_,N[x]=ne*E,N[g]=V,c.push(N.x,N.y,N.z),N[y]=0,N[x]=0,N[g]=T>0?1:-1,u.push(N.x,N.y,N.z),d.push(J/P),d.push(1-G/I),Z+=1}}for(let G=0;G<I;G++)for(let ne=0;ne<P;ne++){const J=p+ne+H*G,ee=p+ne+H*(G+1),te=p+(ne+1)+H*(G+1),ye=p+(ne+1)+H*G;l.push(J,ee,ye),l.push(ee,te,ye),U+=6}a.addGroup(m,U,R),m+=U,p+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Vd(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Xr(t){const e={};for(let n=0;n<t.length;n++){const r=Vd(t[n]);for(const i in r)e[i]=r[i]}return e}function s$(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function vN(t){return t.getRenderTarget()===null?t.outputColorSpace:zs}const em={clone:Vd,merge:Xr};var o$=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,a$=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jn extends Nn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=o$,this.fragmentShader=a$,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Vd(e.uniforms),this.uniformsGroups=s$(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class lf extends zt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new je,this.projectionMatrix=new je,this.projectionMatrixInverse=new je}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let sn=class extends lf{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=$d*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ac*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $d*2*Math.atan(Math.tan(Ac*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Ac*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const Iu=-90,Bu=1;class yN extends zt{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new sn(Iu,Bu,e,n);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new sn(Iu,Bu,e,n);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new sn(Iu,Bu,e,n);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new sn(Iu,Bu,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new sn(Iu,Bu,e,n);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new sn(Iu,Bu,e,n);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,p=e.xr.enabled;e.toneMapping=Os,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,s),e.setRenderTarget(r,2),e.render(n,o),e.setRenderTarget(r,3),e.render(n,a),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(n,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class tm extends fn{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:al,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class xN extends yn{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&($h("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Qr?wt:tl),this.texture=new tm(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Zt}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fo(5,5,5),s=new jn({name:"CubemapFromEquirect",uniforms:Vd(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ir,blending:br});s.uniforms.tEquirect.value=n;const o=new Zn(i,s),a=n.minFilter;return n.minFilter===ks&&(n.minFilter=Zt),new yN(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const q_=new O,l$=new O,c$=new Rt;class so{constructor(e=new O(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=q_.subVectors(r,n).cross(l$.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(q_),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||c$.getNormalMatrix(e),i=this.coplanarPoint(q_).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hl=new gi,dv=new O;class ax{constructor(e=new so,n=new so,r=new so,i=new so,s=new so,o=new so){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],p=r[8],m=r[9],v=r[10],y=r[11],x=r[12],g=r[13],_=r[14],E=r[15];return n[0].setComponents(a-i,d-l,y-p,E-x).normalize(),n[1].setComponents(a+i,d+l,y+p,E+x).normalize(),n[2].setComponents(a+s,d+c,y+m,E+g).normalize(),n[3].setComponents(a-s,d-c,y-m,E-g).normalize(),n[4].setComponents(a-o,d-u,y-v,E-_).normalize(),n[5].setComponents(a+o,d+u,y+v,E+_).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Hl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Hl.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hl)}intersectsSprite(e){return Hl.center.set(0,0,0),Hl.radius=.7071067811865476,Hl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hl)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(dv.x=i.normal.x>0?e.max.x:e.min.x,dv.y=i.normal.y>0?e.max.y:e.min.y,dv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(dv)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _N(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function u$(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,p=c.usage,m=t.createBuffer();t.bindBuffer(u,m),t.bufferData(u,d,p),c.onUploadCallback();let v;if(d instanceof Float32Array)v=t.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)v=t.SHORT;else if(d instanceof Uint32Array)v=t.UNSIGNED_INT;else if(d instanceof Int32Array)v=t.INT;else if(d instanceof Int8Array)v=t.BYTE;else if(d instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:v,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,d){const p=u.array,m=u.updateRange;t.bindBuffer(d,c),m.count===-1?t.bufferSubData(d,0,p):(n?t.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):t.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d===void 0?r.set(c,i(c,u)):d.version<c.version&&(s(d.buffer,c,u),d.version=c.version)}return{get:o,remove:a,update:l}}class Wc extends xt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,p=n/l,m=[],v=[],y=[],x=[];for(let g=0;g<u;g++){const _=g*p-o;for(let E=0;E<c;E++){const A=E*d-s;v.push(A,-_,0),y.push(0,0,1),x.push(E/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const E=_+c*g,A=_+c*(g+1),M=_+1+c*(g+1),T=_+1+c*g;m.push(E,A,T),m.push(A,M,T)}this.setIndex(m),this.setAttribute("position",new tt(v,3)),this.setAttribute("normal",new tt(y,3)),this.setAttribute("uv",new tt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wc(e.width,e.height,e.widthSegments,e.heightSegments)}}var d$=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,f$=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,h$=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,p$=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,m$=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,g$=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,v$="vec3 transformed = vec3( position );",y$=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,x$=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,_$=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,S$=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,w$=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,E$=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,A$=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,b$=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,M$=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,C$=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,T$=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,R$=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,P$=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,I$=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,B$=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,D$=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,L$=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,O$=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,N$=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,F$="gl_FragColor = linearToOutputTexel( gl_FragColor );",U$=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,k$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,z$=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,H$=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,G$=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,V$=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,W$=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,j$=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,X$=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,J$=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,K$=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Y$=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Q$=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,q$=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Z$=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,e9=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,t9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,n9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,r9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,i9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,s9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,o9=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,a9=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,l9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,c9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,u9=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,d9=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,f9=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,h9=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,p9=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,m9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,g9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,v9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,y9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,x9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_9=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,S9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,w9=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,E9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,A9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,b9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,M9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,C9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,T9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,R9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,P9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,I9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,B9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,D9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,L9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,O9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,N9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,F9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,U9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,k9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,z9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,H9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,G9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,$9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,V9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,W9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,j9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,X9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,J9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,K9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Y9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Q9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,q9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Z9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,eV=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,tV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,nV=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rV=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iV=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,sV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const oV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,aV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,lV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,uV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fV=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,hV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,pV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,mV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,vV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,yV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_V=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,SV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,EV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,bV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,CV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,TV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,IV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,OV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NV=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,UV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,At={alphamap_fragment:d$,alphamap_pars_fragment:f$,alphatest_fragment:h$,alphatest_pars_fragment:p$,aomap_fragment:m$,aomap_pars_fragment:g$,begin_vertex:v$,beginnormal_vertex:y$,bsdfs:x$,iridescence_fragment:_$,bumpmap_pars_fragment:S$,clipping_planes_fragment:w$,clipping_planes_pars_fragment:E$,clipping_planes_pars_vertex:A$,clipping_planes_vertex:b$,color_fragment:M$,color_pars_fragment:C$,color_pars_vertex:T$,color_vertex:R$,common:P$,cube_uv_reflection_fragment:I$,defaultnormal_vertex:B$,displacementmap_pars_vertex:D$,displacementmap_vertex:L$,emissivemap_fragment:O$,emissivemap_pars_fragment:N$,encodings_fragment:F$,encodings_pars_fragment:U$,envmap_fragment:k$,envmap_common_pars_fragment:z$,envmap_pars_fragment:H$,envmap_pars_vertex:G$,envmap_physical_pars_fragment:e9,envmap_vertex:$$,fog_vertex:V$,fog_pars_vertex:W$,fog_fragment:j$,fog_pars_fragment:X$,gradientmap_pars_fragment:J$,lightmap_fragment:K$,lightmap_pars_fragment:Y$,lights_lambert_fragment:Q$,lights_lambert_pars_fragment:q$,lights_pars_begin:Z$,lights_toon_fragment:t9,lights_toon_pars_fragment:n9,lights_phong_fragment:r9,lights_phong_pars_fragment:i9,lights_physical_fragment:s9,lights_physical_pars_fragment:o9,lights_fragment_begin:a9,lights_fragment_maps:l9,lights_fragment_end:c9,logdepthbuf_fragment:u9,logdepthbuf_pars_fragment:d9,logdepthbuf_pars_vertex:f9,logdepthbuf_vertex:h9,map_fragment:p9,map_pars_fragment:m9,map_particle_fragment:g9,map_particle_pars_fragment:v9,metalnessmap_fragment:y9,metalnessmap_pars_fragment:x9,morphcolor_vertex:_9,morphnormal_vertex:S9,morphtarget_pars_vertex:w9,morphtarget_vertex:E9,normal_fragment_begin:A9,normal_fragment_maps:b9,normal_pars_fragment:M9,normal_pars_vertex:C9,normal_vertex:T9,normalmap_pars_fragment:R9,clearcoat_normal_fragment_begin:P9,clearcoat_normal_fragment_maps:I9,clearcoat_pars_fragment:B9,iridescence_pars_fragment:D9,output_fragment:L9,packing:O9,premultiplied_alpha_fragment:N9,project_vertex:F9,dithering_fragment:U9,dithering_pars_fragment:k9,roughnessmap_fragment:z9,roughnessmap_pars_fragment:H9,shadowmap_pars_fragment:G9,shadowmap_pars_vertex:$9,shadowmap_vertex:V9,shadowmask_pars_fragment:W9,skinbase_vertex:j9,skinning_pars_vertex:X9,skinning_vertex:J9,skinnormal_vertex:K9,specularmap_fragment:Y9,specularmap_pars_fragment:Q9,tonemapping_fragment:q9,tonemapping_pars_fragment:Z9,transmission_fragment:eV,transmission_pars_fragment:tV,uv_pars_fragment:nV,uv_pars_vertex:rV,uv_vertex:iV,worldpos_vertex:sV,background_vert:oV,background_frag:aV,backgroundCube_vert:lV,backgroundCube_frag:cV,cube_vert:uV,cube_frag:dV,depth_vert:fV,depth_frag:hV,distanceRGBA_vert:pV,distanceRGBA_frag:mV,equirect_vert:gV,equirect_frag:vV,linedashed_vert:yV,linedashed_frag:xV,meshbasic_vert:_V,meshbasic_frag:SV,meshlambert_vert:wV,meshlambert_frag:EV,meshmatcap_vert:AV,meshmatcap_frag:bV,meshnormal_vert:MV,meshnormal_frag:CV,meshphong_vert:TV,meshphong_frag:RV,meshphysical_vert:PV,meshphysical_frag:IV,meshtoon_vert:BV,meshtoon_frag:DV,points_vert:LV,points_frag:OV,shadow_vert:NV,shadow_frag:FV,sprite_vert:UV,sprite_frag:kV},Ne={common:{diffuse:{value:new Fe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new Fe(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaTest:{value:0}}},Kr={basic:{uniforms:Xr([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:At.meshbasic_vert,fragmentShader:At.meshbasic_frag},lambert:{uniforms:Xr([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new Fe(0)}}]),vertexShader:At.meshlambert_vert,fragmentShader:At.meshlambert_frag},phong:{uniforms:Xr([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new Fe(0)},specular:{value:new Fe(1118481)},shininess:{value:30}}]),vertexShader:At.meshphong_vert,fragmentShader:At.meshphong_frag},standard:{uniforms:Xr([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new Fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag},toon:{uniforms:Xr([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new Fe(0)}}]),vertexShader:At.meshtoon_vert,fragmentShader:At.meshtoon_frag},matcap:{uniforms:Xr([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:At.meshmatcap_vert,fragmentShader:At.meshmatcap_frag},points:{uniforms:Xr([Ne.points,Ne.fog]),vertexShader:At.points_vert,fragmentShader:At.points_frag},dashed:{uniforms:Xr([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:At.linedashed_vert,fragmentShader:At.linedashed_frag},depth:{uniforms:Xr([Ne.common,Ne.displacementmap]),vertexShader:At.depth_vert,fragmentShader:At.depth_frag},normal:{uniforms:Xr([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:At.meshnormal_vert,fragmentShader:At.meshnormal_frag},sprite:{uniforms:Xr([Ne.sprite,Ne.fog]),vertexShader:At.sprite_vert,fragmentShader:At.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:At.background_vert,fragmentShader:At.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:At.backgroundCube_vert,fragmentShader:At.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:At.cube_vert,fragmentShader:At.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:At.equirect_vert,fragmentShader:At.equirect_frag},distanceRGBA:{uniforms:Xr([Ne.common,Ne.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:At.distanceRGBA_vert,fragmentShader:At.distanceRGBA_frag},shadow:{uniforms:Xr([Ne.lights,Ne.fog,{color:{value:new Fe(0)},opacity:{value:1}}]),vertexShader:At.shadow_vert,fragmentShader:At.shadow_frag}};Kr.physical={uniforms:Xr([Kr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new de(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new Fe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new Fe(0)},specularColor:{value:new Fe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag};const fv={r:0,b:0,g:0};function zV(t,e,n,r,i,s,o){const a=new Fe(0);let l=s===!0?0:1,c,u,d=null,p=0,m=null;function v(x,g){let _=!1,E=g.isScene===!0?g.background:null;switch(E&&E.isTexture&&(E=(g.backgroundBlurriness>0?n:e).get(E)),E===null?y(a,l):E&&E.isColor&&(y(E,1),_=!0),t.xr.getEnvironmentBlendMode()){case"opaque":_=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),_=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),_=!0;break}(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),E&&(E.isCubeTexture||E.mapping===af)?(u===void 0&&(u=new Zn(new fo(1,1,1),new jn({name:"BackgroundCubeMaterial",uniforms:Vd(Kr.backgroundCube.uniforms),vertexShader:Kr.backgroundCube.vertexShader,fragmentShader:Kr.backgroundCube.fragmentShader,side:ir,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,P,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=E,u.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=E.colorSpace!==wt,(d!==E||p!==E.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,d=E,p=E.version,m=t.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new Zn(new Wc(2,2),new jn({name:"BackgroundMaterial",uniforms:Vd(Kr.background.uniforms),vertexShader:Kr.background.vertexShader,fragmentShader:Kr.background.fragmentShader,side:Us,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=E.colorSpace!==wt,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(d!==E||p!==E.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,d=E,p=E.version,m=t.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function y(x,g){x.getRGB(fv,vN(t)),r.buffers.color.setClear(fv.r,fv.g,fv.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(x,g=1){a.set(x),l=g,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,y(a,l)},render:v}}function HV(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=x(null);let c=l,u=!1;function d(V,H,Q,Z,U){let N=!1;if(o){const G=y(Z,Q,H);c!==G&&(c=G,m(c.object)),N=g(V,Z,Q,U),N&&_(V,Z,Q,U)}else{const G=H.wireframe===!0;(c.geometry!==Z.id||c.program!==Q.id||c.wireframe!==G)&&(c.geometry=Z.id,c.program=Q.id,c.wireframe=G,N=!0)}U!==null&&n.update(U,t.ELEMENT_ARRAY_BUFFER),(N||u)&&(u=!1,I(V,H,Q,Z),U!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(U).buffer))}function p(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(V){return r.isWebGL2?t.bindVertexArray(V):s.bindVertexArrayOES(V)}function v(V){return r.isWebGL2?t.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function y(V,H,Q){const Z=Q.wireframe===!0;let U=a[V.id];U===void 0&&(U={},a[V.id]=U);let N=U[H.id];N===void 0&&(N={},U[H.id]=N);let G=N[Z];return G===void 0&&(G=x(p()),N[Z]=G),G}function x(V){const H=[],Q=[],Z=[];for(let U=0;U<i;U++)H[U]=0,Q[U]=0,Z[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:Q,attributeDivisors:Z,object:V,attributes:{},index:null}}function g(V,H,Q,Z){const U=c.attributes,N=H.attributes;let G=0;const ne=Q.getAttributes();for(const J in ne)if(ne[J].location>=0){const te=U[J];let ye=N[J];if(ye===void 0&&(J==="instanceMatrix"&&V.instanceMatrix&&(ye=V.instanceMatrix),J==="instanceColor"&&V.instanceColor&&(ye=V.instanceColor)),te===void 0||te.attribute!==ye||ye&&te.data!==ye.data)return!0;G++}return c.attributesNum!==G||c.index!==Z}function _(V,H,Q,Z){const U={},N=H.attributes;let G=0;const ne=Q.getAttributes();for(const J in ne)if(ne[J].location>=0){let te=N[J];te===void 0&&(J==="instanceMatrix"&&V.instanceMatrix&&(te=V.instanceMatrix),J==="instanceColor"&&V.instanceColor&&(te=V.instanceColor));const ye={};ye.attribute=te,te&&te.data&&(ye.data=te.data),U[J]=ye,G++}c.attributes=U,c.attributesNum=G,c.index=Z}function E(){const V=c.newAttributes;for(let H=0,Q=V.length;H<Q;H++)V[H]=0}function A(V){M(V,0)}function M(V,H){const Q=c.newAttributes,Z=c.enabledAttributes,U=c.attributeDivisors;Q[V]=1,Z[V]===0&&(t.enableVertexAttribArray(V),Z[V]=1),U[V]!==H&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,H),U[V]=H)}function T(){const V=c.newAttributes,H=c.enabledAttributes;for(let Q=0,Z=H.length;Q<Z;Q++)H[Q]!==V[Q]&&(t.disableVertexAttribArray(Q),H[Q]=0)}function P(V,H,Q,Z,U,N){r.isWebGL2===!0&&(Q===t.INT||Q===t.UNSIGNED_INT)?t.vertexAttribIPointer(V,H,Q,U,N):t.vertexAttribPointer(V,H,Q,Z,U,N)}function I(V,H,Q,Z){if(r.isWebGL2===!1&&(V.isInstancedMesh||Z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const U=Z.attributes,N=Q.getAttributes(),G=H.defaultAttributeValues;for(const ne in N){const J=N[ne];if(J.location>=0){let ee=U[ne];if(ee===void 0&&(ne==="instanceMatrix"&&V.instanceMatrix&&(ee=V.instanceMatrix),ne==="instanceColor"&&V.instanceColor&&(ee=V.instanceColor)),ee!==void 0){const te=ee.normalized,ye=ee.itemSize,Ae=n.get(ee);if(Ae===void 0)continue;const K=Ae.buffer,Ge=Ae.type,We=Ae.bytesPerElement;if(ee.isInterleavedBufferAttribute){const Se=ee.data,Me=Se.stride,me=ee.offset;if(Se.isInstancedInterleavedBuffer){for(let re=0;re<J.locationSize;re++)M(J.location+re,Se.meshPerAttribute);V.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let re=0;re<J.locationSize;re++)A(J.location+re);t.bindBuffer(t.ARRAY_BUFFER,K);for(let re=0;re<J.locationSize;re++)P(J.location+re,ye/J.locationSize,Ge,te,Me*We,(me+ye/J.locationSize*re)*We)}else{if(ee.isInstancedBufferAttribute){for(let Se=0;Se<J.locationSize;Se++)M(J.location+Se,ee.meshPerAttribute);V.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let Se=0;Se<J.locationSize;Se++)A(J.location+Se);t.bindBuffer(t.ARRAY_BUFFER,K);for(let Se=0;Se<J.locationSize;Se++)P(J.location+Se,ye/J.locationSize,Ge,te,ye*We,ye/J.locationSize*Se*We)}}else if(G!==void 0){const te=G[ne];if(te!==void 0)switch(te.length){case 2:t.vertexAttrib2fv(J.location,te);break;case 3:t.vertexAttrib3fv(J.location,te);break;case 4:t.vertexAttrib4fv(J.location,te);break;default:t.vertexAttrib1fv(J.location,te)}}}}T()}function R(){X();for(const V in a){const H=a[V];for(const Q in H){const Z=H[Q];for(const U in Z)v(Z[U].object),delete Z[U];delete H[Q]}delete a[V]}}function D(V){if(a[V.id]===void 0)return;const H=a[V.id];for(const Q in H){const Z=H[Q];for(const U in Z)v(Z[U].object),delete Z[U];delete H[Q]}delete a[V.id]}function F(V){for(const H in a){const Q=a[H];if(Q[V.id]===void 0)continue;const Z=Q[V.id];for(const U in Z)v(Z[U].object),delete Z[U];delete Q[V.id]}}function X(){z(),u=!0,c!==l&&(c=l,m(c.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:X,resetDefaultState:z,dispose:R,releaseStatesOfGeometry:D,releaseStatesOfProgram:F,initAttributes:E,enableAttribute:A,disableUnusedAttributes:T}}function GV(t,e,n,r){const i=r.isWebGL2;let s;function o(c){s=c}function a(c,u){t.drawArrays(s,c,u),n.update(u,s,1)}function l(c,u,d){if(d===0)return;let p,m;if(i)p=t,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,c,u,d),n.update(u,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function $V(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){if(P==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),_=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),E=p>0,A=o||e.has("OES_texture_float"),M=E&&A,T=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:x,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:E,floatFragmentTextures:A,floatVertexTextures:M,maxSamples:T}}function VV(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new so,a=new Rt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){n=u(d,p,0)},this.setState=function(d,p,m){const v=d.clippingPlanes,y=d.clipIntersection,x=d.clipShadows,g=t.get(d);if(!i||v===null||v.length===0||s&&!x)s?u(null):c();else{const _=s?0:r,E=_*4;let A=g.clippingState||null;l.value=A,A=u(v,p,E,m);for(let M=0;M!==E;++M)A[M]=n[M];g.clippingState=A,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,p,m,v){const y=d!==null?d.length:0;let x=null;if(y!==0){if(x=l.value,v!==!0||x===null){const g=m+y*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<g)&&(x=new Float32Array(g));for(let E=0,A=m;E!==y;++E,A+=4)o.copy(d[E]).applyMatrix4(_,a),o.normal.toArray(x,A),x[A+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function WV(t){let e=new WeakMap;function n(o,a){return a===vp?o.mapping=al:a===yp&&(o.mapping=ll),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===vp||a===yp)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new xN(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let Ns=class extends lf{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}};const pd=4,HR=[.125,.215,.35,.446,.526,.582],cc=20,Z_=new Ns,GR=new Fe;let eS=null;const rc=(1+Math.sqrt(5))/2,Du=1/rc,$R=[new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,rc,Du),new O(0,rc,-Du),new O(Du,0,rc),new O(-Du,0,rc),new O(rc,Du,0),new O(-rc,Du,0)];class DE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){eS=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=jR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=WR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(eS),e.scissorTest=!1,hv(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===al||e.mapping===ll?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),eS=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Zt,minFilter:Zt,generateMipmaps:!1,type:ul,format:li,colorSpace:zs,depthBuffer:!1},i=VR(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=VR(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=jV(s)),this._blurMaterial=XV(s,e,n)}return i}_compileMaterial(e){const n=new Zn(this._lodPlanes[0],e);this._renderer.compile(n,Z_)}_sceneToCubeUV(e,n,r,i){const a=new sn(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,p=u.toneMapping;u.getClearColor(GR),u.toneMapping=Os,u.autoClear=!1;const m=new ui({name:"PMREM.Background",side:ir,depthWrite:!1,depthTest:!1}),v=new Zn(new fo,m);let y=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,y=!0):(m.color.copy(GR),y=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):_===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const E=this._cubeSize;hv(i,_*E,g>2?E:0,E,E),u.setRenderTarget(i),y&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=p,u.autoClear=d,e.background=x}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===al||e.mapping===ll;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=jR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=WR());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Zn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;hv(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,Z_)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=$R[(i-1)%$R.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Zn(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*cc-1),y=s/v,x=isFinite(s)?1+Math.floor(u*y):cc;x>cc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${cc}`);const g=[];let _=0;for(let P=0;P<cc;++P){const I=P/y,R=Math.exp(-I*I/2);g.push(R),P===0?_+=R:P<x&&(_+=2*R)}for(let P=0;P<g.length;P++)g[P]=g[P]/_;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:E}=this;p.dTheta.value=v,p.mipInt.value=E-r;const A=this._sizeLods[i],M=3*A*(i>E-pd?i-E+pd:0),T=4*(this._cubeSize-A);hv(n,M,T,3*A,2*A),l.setRenderTarget(n),l.render(d,Z_)}}function jV(t){const e=[],n=[],r=[];let i=t;const s=t-pd+1+HR.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-pd?l=HR[o-t+pd-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,v=6,y=3,x=2,g=1,_=new Float32Array(y*v*m),E=new Float32Array(x*v*m),A=new Float32Array(g*v*m);for(let T=0;T<m;T++){const P=T%3*2/3-1,I=T>2?0:-1,R=[P,I,0,P+2/3,I,0,P+2/3,I+1,0,P,I,0,P+2/3,I+1,0,P,I+1,0];_.set(R,y*v*T),E.set(p,x*v*T);const D=[T,T,T,T,T,T];A.set(D,g*v*T)}const M=new xt;M.setAttribute("position",new Lt(_,y)),M.setAttribute("uv",new Lt(E,x)),M.setAttribute("faceIndex",new Lt(A,g)),e.push(M),i>pd&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function VR(t,e,n){const r=new yn(t,e,n);return r.texture.mapping=af,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function hv(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function XV(t,e,n){const r=new Float32Array(cc),i=new O(0,1,0);return new jn({name:"SphericalGaussianBlur",defines:{n:cc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:br,depthTest:!1,depthWrite:!1})}function WR(){return new jn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:br,depthTest:!1,depthWrite:!1})}function jR(){return new jn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:br,depthTest:!1,depthWrite:!1})}function Xb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function JV(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===vp||l===yp,u=l===al||l===ll;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return n===null&&(n=new DE(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&i(d)){n===null&&(n=new DE(t));const p=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function KV(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function YV(t,e,n,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,n.memory.geometries++),p}function l(d){const p=d.attributes;for(const v in p)e.update(p[v],t.ARRAY_BUFFER);const m=d.morphAttributes;for(const v in m){const y=m[v];for(let x=0,g=y.length;x<g;x++)e.update(y[x],t.ARRAY_BUFFER)}}function c(d){const p=[],m=d.index,v=d.attributes.position;let y=0;if(m!==null){const _=m.array;y=m.version;for(let E=0,A=_.length;E<A;E+=3){const M=_[E+0],T=_[E+1],P=_[E+2];p.push(M,T,T,P,P,M)}}else{const _=v.array;y=v.version;for(let E=0,A=_.length/3-1;E<A;E+=3){const M=E+0,T=E+1,P=E+2;p.push(M,T,T,P,P,M)}}const x=new(mN(p)?jb:Wb)(p,1);x.version=y;const g=s.get(d);g&&e.remove(g),s.set(d,x)}function u(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function QV(t,e,n,r){const i=r.isWebGL2;let s;function o(p){s=p}let a,l;function c(p){a=p.type,l=p.bytesPerElement}function u(p,m){t.drawElements(s,m,a,p*l),n.update(m,s,1)}function d(p,m,v){if(v===0)return;let y,x;if(i)y=t,x="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[x](s,m,a,p*l,v),n.update(m,s,v)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d}function qV(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function ZV(t,e){return t[0]-e[0]}function e7(t,e){return Math.abs(e[1])-Math.abs(t[1])}function t7(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new Dt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=v!==void 0?v.length:0;let x=s.get(u);if(x===void 0||x.count!==y){let H=function(){z.dispose(),s.delete(u),u.removeEventListener("dispose",H)};var m=H;x!==void 0&&x.texture.dispose();const E=u.morphAttributes.position!==void 0,A=u.morphAttributes.normal!==void 0,M=u.morphAttributes.color!==void 0,T=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],I=u.morphAttributes.color||[];let R=0;E===!0&&(R=1),A===!0&&(R=2),M===!0&&(R=3);let D=u.attributes.position.count*R,F=1;D>e.maxTextureSize&&(F=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const X=new Float32Array(D*F*4*y),z=new ox(X,D,F,y);z.type=Is,z.needsUpdate=!0;const V=R*4;for(let Q=0;Q<y;Q++){const Z=T[Q],U=P[Q],N=I[Q],G=D*F*4*Q;for(let ne=0;ne<Z.count;ne++){const J=ne*V;E===!0&&(o.fromBufferAttribute(Z,ne),X[G+J+0]=o.x,X[G+J+1]=o.y,X[G+J+2]=o.z,X[G+J+3]=0),A===!0&&(o.fromBufferAttribute(U,ne),X[G+J+4]=o.x,X[G+J+5]=o.y,X[G+J+6]=o.z,X[G+J+7]=0),M===!0&&(o.fromBufferAttribute(N,ne),X[G+J+8]=o.x,X[G+J+9]=o.y,X[G+J+10]=o.z,X[G+J+11]=N.itemSize===4?o.w:1)}}x={count:y,texture:z,size:new de(D,F)},s.set(u,x),u.addEventListener("dispose",H)}let g=0;for(let E=0;E<p.length;E++)g+=p[E];const _=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(t,"morphTargetBaseInfluence",_),d.getUniforms().setValue(t,"morphTargetInfluences",p),d.getUniforms().setValue(t,"morphTargetsTexture",x.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",x.size)}else{const v=p===void 0?0:p.length;let y=r[u.id];if(y===void 0||y.length!==v){y=[];for(let A=0;A<v;A++)y[A]=[A,0];r[u.id]=y}for(let A=0;A<v;A++){const M=y[A];M[0]=A,M[1]=p[A]}y.sort(e7);for(let A=0;A<8;A++)A<v&&y[A][1]?(a[A][0]=y[A][0],a[A][1]=y[A][1]):(a[A][0]=Number.MAX_SAFE_INTEGER,a[A][1]=0);a.sort(ZV);const x=u.morphAttributes.position,g=u.morphAttributes.normal;let _=0;for(let A=0;A<8;A++){const M=a[A],T=M[0],P=M[1];T!==Number.MAX_SAFE_INTEGER&&P?(x&&u.getAttribute("morphTarget"+A)!==x[T]&&u.setAttribute("morphTarget"+A,x[T]),g&&u.getAttribute("morphNormal"+A)!==g[T]&&u.setAttribute("morphNormal"+A,g[T]),i[A]=P,_+=P):(x&&u.hasAttribute("morphTarget"+A)===!0&&u.deleteAttribute("morphTarget"+A),g&&u.hasAttribute("morphNormal"+A)===!0&&u.deleteAttribute("morphNormal"+A),i[A]=0)}const E=u.morphTargetsRelative?1:1-_;d.getUniforms().setValue(t,"morphTargetBaseInfluence",E),d.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function n7(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER)),d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const SN=new fn,wN=new ox,EN=new Vb,AN=new tm,XR=[],JR=[],KR=new Float32Array(16),YR=new Float32Array(9),QR=new Float32Array(4);function cf(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=XR[i];if(s===void 0&&(s=new Float32Array(i),XR[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function sr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function or(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function lx(t,e){let n=JR[e];n===void 0&&(n=new Int32Array(e),JR[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function r7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function i7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(sr(n,e))return;t.uniform2fv(this.addr,e),or(n,e)}}function s7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(sr(n,e))return;t.uniform3fv(this.addr,e),or(n,e)}}function o7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(sr(n,e))return;t.uniform4fv(this.addr,e),or(n,e)}}function a7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(sr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),or(n,e)}else{if(sr(n,r))return;QR.set(r),t.uniformMatrix2fv(this.addr,!1,QR),or(n,r)}}function l7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(sr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),or(n,e)}else{if(sr(n,r))return;YR.set(r),t.uniformMatrix3fv(this.addr,!1,YR),or(n,r)}}function c7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(sr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),or(n,e)}else{if(sr(n,r))return;KR.set(r),t.uniformMatrix4fv(this.addr,!1,KR),or(n,r)}}function u7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function d7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(sr(n,e))return;t.uniform2iv(this.addr,e),or(n,e)}}function f7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(sr(n,e))return;t.uniform3iv(this.addr,e),or(n,e)}}function h7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(sr(n,e))return;t.uniform4iv(this.addr,e),or(n,e)}}function p7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function m7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(sr(n,e))return;t.uniform2uiv(this.addr,e),or(n,e)}}function g7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(sr(n,e))return;t.uniform3uiv(this.addr,e),or(n,e)}}function v7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(sr(n,e))return;t.uniform4uiv(this.addr,e),or(n,e)}}function y7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||SN,i)}function x7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||EN,i)}function _7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||AN,i)}function S7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||wN,i)}function w7(t){switch(t){case 5126:return r7;case 35664:return i7;case 35665:return s7;case 35666:return o7;case 35674:return a7;case 35675:return l7;case 35676:return c7;case 5124:case 35670:return u7;case 35667:case 35671:return d7;case 35668:case 35672:return f7;case 35669:case 35673:return h7;case 5125:return p7;case 36294:return m7;case 36295:return g7;case 36296:return v7;case 35678:case 36198:case 36298:case 36306:case 35682:return y7;case 35679:case 36299:case 36307:return x7;case 35680:case 36300:case 36308:case 36293:return _7;case 36289:case 36303:case 36311:case 36292:return S7}}function E7(t,e){t.uniform1fv(this.addr,e)}function A7(t,e){const n=cf(e,this.size,2);t.uniform2fv(this.addr,n)}function b7(t,e){const n=cf(e,this.size,3);t.uniform3fv(this.addr,n)}function M7(t,e){const n=cf(e,this.size,4);t.uniform4fv(this.addr,n)}function C7(t,e){const n=cf(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function T7(t,e){const n=cf(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function R7(t,e){const n=cf(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function P7(t,e){t.uniform1iv(this.addr,e)}function I7(t,e){t.uniform2iv(this.addr,e)}function B7(t,e){t.uniform3iv(this.addr,e)}function D7(t,e){t.uniform4iv(this.addr,e)}function L7(t,e){t.uniform1uiv(this.addr,e)}function O7(t,e){t.uniform2uiv(this.addr,e)}function N7(t,e){t.uniform3uiv(this.addr,e)}function F7(t,e){t.uniform4uiv(this.addr,e)}function U7(t,e,n){const r=this.cache,i=e.length,s=lx(n,i);sr(r,s)||(t.uniform1iv(this.addr,s),or(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||SN,s[o])}function k7(t,e,n){const r=this.cache,i=e.length,s=lx(n,i);sr(r,s)||(t.uniform1iv(this.addr,s),or(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||EN,s[o])}function z7(t,e,n){const r=this.cache,i=e.length,s=lx(n,i);sr(r,s)||(t.uniform1iv(this.addr,s),or(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||AN,s[o])}function H7(t,e,n){const r=this.cache,i=e.length,s=lx(n,i);sr(r,s)||(t.uniform1iv(this.addr,s),or(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||wN,s[o])}function G7(t){switch(t){case 5126:return E7;case 35664:return A7;case 35665:return b7;case 35666:return M7;case 35674:return C7;case 35675:return T7;case 35676:return R7;case 5124:case 35670:return P7;case 35667:case 35671:return I7;case 35668:case 35672:return B7;case 35669:case 35673:return D7;case 5125:return L7;case 36294:return O7;case 36295:return N7;case 36296:return F7;case 35678:case 36198:case 36298:case 36306:case 35682:return U7;case 35679:case 36299:case 36307:return k7;case 35680:case 36300:case 36308:case 36293:return z7;case 36289:case 36303:case 36311:case 36292:return H7}}class $7{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=w7(n.type)}}class V7{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=G7(n.type)}}class W7{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const tS=/(\w+)(\])?(\[|\.)?/g;function qR(t,e){t.seq.push(e),t.map[e.id]=e}function j7(t,e,n){const r=t.name,i=r.length;for(tS.lastIndex=0;;){const s=tS.exec(r),o=tS.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){qR(n,c===void 0?new $7(a,t,e):new V7(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new W7(a),qR(n,d)),n=d}}}class B0{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);j7(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function ZR(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let X7=0;function J7(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function K7(t){switch(t){case zs:return["Linear","( value )"];case wt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function eP(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+J7(t.getShaderSource(e),o)}else return i}function Y7(t,e){const n=K7(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Q7(t,e){let n;switch(e){case HO:n="Linear";break;case GO:n="Reinhard";break;case $O:n="OptimizedCineon";break;case Fb:n="ACESFilmic";break;case VO:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function q7(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ph).join(`
`)}function Z7(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function eW(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Ph(t){return t!==""}function tP(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function nP(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tW=/^[ \t]*#include +<([\w\d./]+)>/gm;function LE(t){return t.replace(tW,nW)}function nW(t,e){const n=At[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return LE(n)}const rW=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rP(t){return t.replace(rW,iW)}function iW(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function iP(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function sW(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===nx?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Hh?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Cs&&(e="SHADOWMAP_TYPE_VSM"),e}function oW(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case al:case ll:e="ENVMAP_TYPE_CUBE";break;case af:e="ENVMAP_TYPE_CUBE_UV";break}return e}function aW(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case ll:e="ENVMAP_MODE_REFRACTION";break}return e}function lW(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Qp:e="ENVMAP_BLENDING_MULTIPLY";break;case kO:e="ENVMAP_BLENDING_MIX";break;case zO:e="ENVMAP_BLENDING_ADD";break}return e}function cW(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function uW(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=sW(n),c=oW(n),u=aW(n),d=lW(n),p=cW(n),m=n.isWebGL2?"":q7(n),v=Z7(s),y=i.createProgram();let x,g,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=[v].filter(Ph).join(`
`),x.length>0&&(x+=`
`),g=[m,v].filter(Ph).join(`
`),g.length>0&&(g+=`
`)):(x=[iP(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ph).join(`
`),g=[m,iP(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Os?"#define TONE_MAPPING":"",n.toneMapping!==Os?At.tonemapping_pars_fragment:"",n.toneMapping!==Os?Q7("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",At.encodings_pars_fragment,Y7("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Ph).join(`
`)),o=LE(o),o=tP(o,n),o=nP(o,n),a=LE(a),a=tP(a,n),a=nP(a,n),o=rP(o),a=rP(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",n.glslVersion===IE?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===IE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const E=_+x+o,A=_+g+a,M=ZR(i,i.VERTEX_SHADER,E),T=ZR(i,i.FRAGMENT_SHADER,A);if(i.attachShader(y,M),i.attachShader(y,T),n.index0AttributeName!==void 0?i.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),t.debug.checkShaderErrors){const R=i.getProgramInfoLog(y).trim(),D=i.getShaderInfoLog(M).trim(),F=i.getShaderInfoLog(T).trim();let X=!0,z=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(X=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,y,M,T);else{const V=eP(i,M,"vertex"),H=eP(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+V+`
`+H)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(D===""||F==="")&&(z=!1);z&&(this.diagnostics={runnable:X,programLog:R,vertexShader:{log:D,prefix:x},fragmentShader:{log:F,prefix:g}})}i.deleteShader(M),i.deleteShader(T);let P;this.getUniforms=function(){return P===void 0&&(P=new B0(i,y)),P};let I;return this.getAttributes=function(){return I===void 0&&(I=eW(i,y)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=X7++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=M,this.fragmentShader=T,this}let dW=0;class fW{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new hW(e),n.set(e,r)),r}}class hW{constructor(e){this.id=dW++,this.code=e,this.usedTimes=0}}function pW(t,e,n,r,i,s,o){const a=new Mc,l=new fW,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(R){return R===1?"uv1":R===2?"uv2":R===3?"uv3":"uv"}function x(R,D,F,X,z){const V=X.fog,H=z.geometry,Q=R.isMeshStandardMaterial?X.environment:null,Z=(R.isMeshStandardMaterial?n:e).get(R.envMap||Q),U=Z&&Z.mapping===af?Z.image.height:null,N=v[R.type];R.precision!==null&&(m=i.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const G=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,ne=G!==void 0?G.length:0;let J=0;H.morphAttributes.position!==void 0&&(J=1),H.morphAttributes.normal!==void 0&&(J=2),H.morphAttributes.color!==void 0&&(J=3);let ee,te,ye,Ae;if(N){const Kt=Kr[N];ee=Kt.vertexShader,te=Kt.fragmentShader}else ee=R.vertexShader,te=R.fragmentShader,l.update(R),ye=l.getVertexShaderID(R),Ae=l.getFragmentShaderID(R);const K=t.getRenderTarget(),Ge=z.isInstancedMesh===!0,We=!!R.map,Se=!!R.matcap,Me=!!Z,me=!!R.aoMap,re=!!R.lightMap,fe=!!R.bumpMap,Le=!!R.normalMap,Be=!!R.displacementMap,Ue=!!R.emissiveMap,Ke=!!R.metalnessMap,ke=!!R.roughnessMap,Ye=R.clearcoat>0,ht=R.iridescence>0,W=R.sheen>0,k=R.transmission>0,Y=Ye&&!!R.clearcoatMap,ce=Ye&&!!R.clearcoatNormalMap,we=Ye&&!!R.clearcoatRoughnessMap,Te=ht&&!!R.iridescenceMap,Qe=ht&&!!R.iridescenceThicknessMap,ze=W&&!!R.sheenColorMap,ve=W&&!!R.sheenRoughnessMap,Je=!!R.specularMap,q=!!R.specularColorMap,ge=!!R.specularIntensityMap,be=k&&!!R.transmissionMap,Pe=k&&!!R.thicknessMap,nt=!!R.gradientMap,ut=!!R.alphaMap,$t=R.alphaTest>0,ie=!!R.extensions,pe=!!H.attributes.uv1,Ce=!!H.attributes.uv2,Xe=!!H.attributes.uv3;return{isWebGL2:u,shaderID:N,shaderName:R.type,vertexShader:ee,fragmentShader:te,defines:R.defines,customVertexShaderID:ye,customFragmentShaderID:Ae,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,instancing:Ge,instancingColor:Ge&&z.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:K===null?t.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:zs,map:We,matcap:Se,envMap:Me,envMapMode:Me&&Z.mapping,envMapCubeUVHeight:U,aoMap:me,lightMap:re,bumpMap:fe,normalMap:Le,displacementMap:p&&Be,emissiveMap:Ue,normalMapObjectSpace:Le&&R.normalMapType===dN,normalMapTangentSpace:Le&&R.normalMapType===Al,metalnessMap:Ke,roughnessMap:ke,clearcoat:Ye,clearcoatMap:Y,clearcoatNormalMap:ce,clearcoatRoughnessMap:we,iridescence:ht,iridescenceMap:Te,iridescenceThicknessMap:Qe,sheen:W,sheenColorMap:ze,sheenRoughnessMap:ve,specularMap:Je,specularColorMap:q,specularIntensityMap:ge,transmission:k,transmissionMap:be,thicknessMap:Pe,gradientMap:nt,opaque:R.transparent===!1&&R.blending===Ec,alphaMap:ut,alphaTest:$t,combine:R.combine,mapUv:We&&y(R.map.channel),aoMapUv:me&&y(R.aoMap.channel),lightMapUv:re&&y(R.lightMap.channel),bumpMapUv:fe&&y(R.bumpMap.channel),normalMapUv:Le&&y(R.normalMap.channel),displacementMapUv:Be&&y(R.displacementMap.channel),emissiveMapUv:Ue&&y(R.emissiveMap.channel),metalnessMapUv:Ke&&y(R.metalnessMap.channel),roughnessMapUv:ke&&y(R.roughnessMap.channel),clearcoatMapUv:Y&&y(R.clearcoatMap.channel),clearcoatNormalMapUv:ce&&y(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:we&&y(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Te&&y(R.iridescenceMap.channel),iridescenceThicknessMapUv:Qe&&y(R.iridescenceThicknessMap.channel),sheenColorMapUv:ze&&y(R.sheenColorMap.channel),sheenRoughnessMapUv:ve&&y(R.sheenRoughnessMap.channel),specularMapUv:Je&&y(R.specularMap.channel),specularColorMapUv:q&&y(R.specularColorMap.channel),specularIntensityMapUv:ge&&y(R.specularIntensityMap.channel),transmissionMapUv:be&&y(R.transmissionMap.channel),thicknessMapUv:Pe&&y(R.thicknessMap.channel),alphaMapUv:ut&&y(R.alphaMap.channel),vertexTangents:Le&&!!H.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,vertexUv1s:pe,vertexUv2s:Ce,vertexUv3s:Xe,pointsUvs:z.isPoints===!0&&!!H.attributes.uv&&(We||ut),fog:!!V,useFog:R.fog===!0,fogExp2:V&&V.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:z.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:J,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:t.shadowMap.enabled&&F.length>0,shadowMapType:t.shadowMap.type,toneMapping:R.toneMapped?t.toneMapping:Os,useLegacyLights:t.useLegacyLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===wr,flipSided:R.side===ir,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:ie&&R.extensions.derivatives===!0,extensionFragDepth:ie&&R.extensions.fragDepth===!0,extensionDrawBuffers:ie&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:ie&&R.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function g(R){const D=[];if(R.shaderID?D.push(R.shaderID):(D.push(R.customVertexShaderID),D.push(R.customFragmentShaderID)),R.defines!==void 0)for(const F in R.defines)D.push(F),D.push(R.defines[F]);return R.isRawShaderMaterial===!1&&(_(D,R),E(D,R),D.push(t.outputColorSpace)),D.push(R.customProgramCacheKey),D.join()}function _(R,D){R.push(D.precision),R.push(D.outputColorSpace),R.push(D.envMapMode),R.push(D.envMapCubeUVHeight),R.push(D.mapUv),R.push(D.alphaMapUv),R.push(D.lightMapUv),R.push(D.aoMapUv),R.push(D.bumpMapUv),R.push(D.normalMapUv),R.push(D.displacementMapUv),R.push(D.emissiveMapUv),R.push(D.metalnessMapUv),R.push(D.roughnessMapUv),R.push(D.clearcoatMapUv),R.push(D.clearcoatNormalMapUv),R.push(D.clearcoatRoughnessMapUv),R.push(D.iridescenceMapUv),R.push(D.iridescenceThicknessMapUv),R.push(D.sheenColorMapUv),R.push(D.sheenRoughnessMapUv),R.push(D.specularMapUv),R.push(D.specularColorMapUv),R.push(D.specularIntensityMapUv),R.push(D.transmissionMapUv),R.push(D.thicknessMapUv),R.push(D.combine),R.push(D.fogExp2),R.push(D.sizeAttenuation),R.push(D.morphTargetsCount),R.push(D.morphAttributeCount),R.push(D.numDirLights),R.push(D.numPointLights),R.push(D.numSpotLights),R.push(D.numSpotLightMaps),R.push(D.numHemiLights),R.push(D.numRectAreaLights),R.push(D.numDirLightShadows),R.push(D.numPointLightShadows),R.push(D.numSpotLightShadows),R.push(D.numSpotLightShadowsWithMaps),R.push(D.shadowMapType),R.push(D.toneMapping),R.push(D.numClippingPlanes),R.push(D.numClipIntersection),R.push(D.depthPacking)}function E(R,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),R.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),R.push(a.mask)}function A(R){const D=v[R.type];let F;if(D){const X=Kr[D];F=em.clone(X.uniforms)}else F=R.uniforms;return F}function M(R,D){let F;for(let X=0,z=c.length;X<z;X++){const V=c[X];if(V.cacheKey===D){F=V,++F.usedTimes;break}}return F===void 0&&(F=new uW(t,D,R,s),c.push(F)),F}function T(R){if(--R.usedTimes===0){const D=c.indexOf(R);c[D]=c[c.length-1],c.pop(),R.destroy()}}function P(R){l.remove(R)}function I(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:A,acquireProgram:M,releaseProgram:T,releaseShaderCache:P,programs:c,dispose:I}}function mW(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function gW(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function sP(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function oP(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(d,p,m,v,y,x){let g=t[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:v,renderOrder:d.renderOrder,z:y,group:x},t[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=d.renderOrder,g.z=y,g.group=x),e++,g}function a(d,p,m,v,y,x){const g=o(d,p,m,v,y,x);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):n.push(g)}function l(d,p,m,v,y,x){const g=o(d,p,m,v,y,x);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):n.unshift(g)}function c(d,p){n.length>1&&n.sort(d||gW),r.length>1&&r.sort(p||sP),i.length>1&&i.sort(p||sP)}function u(){for(let d=e,p=t.length;d<p;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function vW(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new oP,t.set(r,[o])):i>=s.length?(o=new oP,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function yW(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new O,color:new Fe};break;case"SpotLight":n={position:new O,direction:new O,color:new Fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new O,color:new Fe,distance:0,decay:0};break;case"HemisphereLight":n={direction:new O,skyColor:new Fe,groundColor:new Fe};break;case"RectAreaLight":n={color:new Fe,position:new O,halfWidth:new O,halfHeight:new O};break}return t[e.id]=n,n}}}function xW(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let _W=0;function SW(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function wW(t,e){const n=new yW,r=xW(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new O);const s=new O,o=new je,a=new je;function l(u,d){let p=0,m=0,v=0;for(let F=0;F<9;F++)i.probe[F].set(0,0,0);let y=0,x=0,g=0,_=0,E=0,A=0,M=0,T=0,P=0,I=0;u.sort(SW);const R=d===!0?Math.PI:1;for(let F=0,X=u.length;F<X;F++){const z=u[F],V=z.color,H=z.intensity,Q=z.distance,Z=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)p+=V.r*H*R,m+=V.g*H*R,v+=V.b*H*R;else if(z.isLightProbe)for(let U=0;U<9;U++)i.probe[U].addScaledVector(z.sh.coefficients[U],H);else if(z.isDirectionalLight){const U=n.get(z);if(U.color.copy(z.color).multiplyScalar(z.intensity*R),z.castShadow){const N=z.shadow,G=r.get(z);G.shadowBias=N.bias,G.shadowNormalBias=N.normalBias,G.shadowRadius=N.radius,G.shadowMapSize=N.mapSize,i.directionalShadow[y]=G,i.directionalShadowMap[y]=Z,i.directionalShadowMatrix[y]=z.shadow.matrix,A++}i.directional[y]=U,y++}else if(z.isSpotLight){const U=n.get(z);U.position.setFromMatrixPosition(z.matrixWorld),U.color.copy(V).multiplyScalar(H*R),U.distance=Q,U.coneCos=Math.cos(z.angle),U.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),U.decay=z.decay,i.spot[g]=U;const N=z.shadow;if(z.map&&(i.spotLightMap[P]=z.map,P++,N.updateMatrices(z),z.castShadow&&I++),i.spotLightMatrix[g]=N.matrix,z.castShadow){const G=r.get(z);G.shadowBias=N.bias,G.shadowNormalBias=N.normalBias,G.shadowRadius=N.radius,G.shadowMapSize=N.mapSize,i.spotShadow[g]=G,i.spotShadowMap[g]=Z,T++}g++}else if(z.isRectAreaLight){const U=n.get(z);U.color.copy(V).multiplyScalar(H),U.halfWidth.set(z.width*.5,0,0),U.halfHeight.set(0,z.height*.5,0),i.rectArea[_]=U,_++}else if(z.isPointLight){const U=n.get(z);if(U.color.copy(z.color).multiplyScalar(z.intensity*R),U.distance=z.distance,U.decay=z.decay,z.castShadow){const N=z.shadow,G=r.get(z);G.shadowBias=N.bias,G.shadowNormalBias=N.normalBias,G.shadowRadius=N.radius,G.shadowMapSize=N.mapSize,G.shadowCameraNear=N.camera.near,G.shadowCameraFar=N.camera.far,i.pointShadow[x]=G,i.pointShadowMap[x]=Z,i.pointShadowMatrix[x]=z.shadow.matrix,M++}i.point[x]=U,x++}else if(z.isHemisphereLight){const U=n.get(z);U.skyColor.copy(z.color).multiplyScalar(H*R),U.groundColor.copy(z.groundColor).multiplyScalar(H*R),i.hemi[E]=U,E++}}_>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ne.LTC_FLOAT_1,i.rectAreaLTC2=Ne.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ne.LTC_HALF_1,i.rectAreaLTC2=Ne.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const D=i.hash;(D.directionalLength!==y||D.pointLength!==x||D.spotLength!==g||D.rectAreaLength!==_||D.hemiLength!==E||D.numDirectionalShadows!==A||D.numPointShadows!==M||D.numSpotShadows!==T||D.numSpotMaps!==P)&&(i.directional.length=y,i.spot.length=g,i.rectArea.length=_,i.point.length=x,i.hemi.length=E,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=T+P-I,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=I,D.directionalLength=y,D.pointLength=x,D.spotLength=g,D.rectAreaLength=_,D.hemiLength=E,D.numDirectionalShadows=A,D.numPointShadows=M,D.numSpotShadows=T,D.numSpotMaps=P,i.version=_W++)}function c(u,d){let p=0,m=0,v=0,y=0,x=0;const g=d.matrixWorldInverse;for(let _=0,E=u.length;_<E;_++){const A=u[_];if(A.isDirectionalLight){const M=i.directional[p];M.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(g),p++}else if(A.isSpotLight){const M=i.spot[v];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(g),M.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(g),v++}else if(A.isRectAreaLight){const M=i.rectArea[y];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(g),a.identity(),o.copy(A.matrixWorld),o.premultiply(g),a.extractRotation(o),M.halfWidth.set(A.width*.5,0,0),M.halfHeight.set(0,A.height*.5,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),y++}else if(A.isPointLight){const M=i.point[m];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(g),m++}else if(A.isHemisphereLight){const M=i.hemi[x];M.direction.setFromMatrixPosition(A.matrixWorld),M.direction.transformDirection(g),x++}}}return{setup:l,setupView:c,state:i}}function aP(t,e){const n=new wW(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){n.setup(r,d)}function c(d){n.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function EW(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new aP(t,e),n.set(s,[l])):o>=a.length?(l=new aP(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class Jb extends Nn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=El,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Kb extends Nn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const AW=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,bW=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function MW(t,e,n){let r=new ax;const i=new de,s=new de,o=new Dt,a=new Jb({depthPacking:uN}),l=new Kb,c={},u=n.maxTextureSize,d={[Us]:ir,[ir]:Us,[wr]:wr},p=new jn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:AW,fragmentShader:bW}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new xt;v.setAttribute("position",new Lt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Zn(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=nx;let g=this.type;this.render=function(M,T,P){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||M.length===0)return;const I=t.getRenderTarget(),R=t.getActiveCubeFace(),D=t.getActiveMipmapLevel(),F=t.state;F.setBlending(br),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const X=g!==Cs&&this.type===Cs,z=g===Cs&&this.type!==Cs;for(let V=0,H=M.length;V<H;V++){const Q=M[V],Z=Q.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;i.copy(Z.mapSize);const U=Z.getFrameExtents();if(i.multiply(U),s.copy(Z.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/U.x),i.x=s.x*U.x,Z.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/U.y),i.y=s.y*U.y,Z.mapSize.y=s.y)),Z.map===null||X===!0||z===!0){const G=this.type!==Cs?{minFilter:rn,magFilter:rn}:{};Z.map!==null&&Z.map.dispose(),Z.map=new yn(i.x,i.y,G),Z.map.texture.name=Q.name+".shadowMap",Z.camera.updateProjectionMatrix()}t.setRenderTarget(Z.map),t.clear();const N=Z.getViewportCount();for(let G=0;G<N;G++){const ne=Z.getViewport(G);o.set(s.x*ne.x,s.y*ne.y,s.x*ne.z,s.y*ne.w),F.viewport(o),Z.updateMatrices(Q,G),r=Z.getFrustum(),A(T,P,Z.camera,Q,this.type)}Z.isPointLightShadow!==!0&&this.type===Cs&&_(Z,P),Z.needsUpdate=!1}g=this.type,x.needsUpdate=!1,t.setRenderTarget(I,R,D)};function _(M,T){const P=e.update(y);p.defines.VSM_SAMPLES!==M.blurSamples&&(p.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new yn(i.x,i.y)),p.uniforms.shadow_pass.value=M.map.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,t.setRenderTarget(M.mapPass),t.clear(),t.renderBufferDirect(T,null,P,p,y,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,t.setRenderTarget(M.map),t.clear(),t.renderBufferDirect(T,null,P,m,y,null)}function E(M,T,P,I){let R=null;const D=P.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(D!==void 0)R=D;else if(R=P.isPointLight===!0?l:a,t.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const F=R.uuid,X=T.uuid;let z=c[F];z===void 0&&(z={},c[F]=z);let V=z[X];V===void 0&&(V=R.clone(),z[X]=V),R=V}if(R.visible=T.visible,R.wireframe=T.wireframe,I===Cs?R.side=T.shadowSide!==null?T.shadowSide:T.side:R.side=T.shadowSide!==null?T.shadowSide:d[T.side],R.alphaMap=T.alphaMap,R.alphaTest=T.alphaTest,R.map=T.map,R.clipShadows=T.clipShadows,R.clippingPlanes=T.clippingPlanes,R.clipIntersection=T.clipIntersection,R.displacementMap=T.displacementMap,R.displacementScale=T.displacementScale,R.displacementBias=T.displacementBias,R.wireframeLinewidth=T.wireframeLinewidth,R.linewidth=T.linewidth,P.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const F=t.properties.get(R);F.light=P}return R}function A(M,T,P,I,R){if(M.visible===!1)return;if(M.layers.test(T.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&R===Cs)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,M.matrixWorld);const X=e.update(M),z=M.material;if(Array.isArray(z)){const V=X.groups;for(let H=0,Q=V.length;H<Q;H++){const Z=V[H],U=z[Z.materialIndex];if(U&&U.visible){const N=E(M,U,I,R);t.renderBufferDirect(P,null,X,N,M,Z)}}}else if(z.visible){const V=E(M,z,I,R);t.renderBufferDirect(P,null,X,V,M,null)}}const F=M.children;for(let X=0,z=F.length;X<z;X++)A(F[X],T,P,I,R)}}function CW(t,e,n){const r=n.isWebGL2;function i(){let ie=!1;const pe=new Dt;let Ce=null;const Xe=new Dt(0,0,0,0);return{setMask:function(rt){Ce!==rt&&!ie&&(t.colorMask(rt,rt,rt,rt),Ce=rt)},setLocked:function(rt){ie=rt},setClear:function(rt,Kt,Yt,ar,hs){hs===!0&&(rt*=ar,Kt*=ar,Yt*=ar),pe.set(rt,Kt,Yt,ar),Xe.equals(pe)===!1&&(t.clearColor(rt,Kt,Yt,ar),Xe.copy(pe))},reset:function(){ie=!1,Ce=null,Xe.set(-1,0,0,0)}}}function s(){let ie=!1,pe=null,Ce=null,Xe=null;return{setTest:function(rt){rt?K(t.DEPTH_TEST):Ge(t.DEPTH_TEST)},setMask:function(rt){pe!==rt&&!ie&&(t.depthMask(rt),pe=rt)},setFunc:function(rt){if(Ce!==rt){switch(rt){case BO:t.depthFunc(t.NEVER);break;case DO:t.depthFunc(t.ALWAYS);break;case LO:t.depthFunc(t.LESS);break;case ly:t.depthFunc(t.LEQUAL);break;case OO:t.depthFunc(t.EQUAL);break;case NO:t.depthFunc(t.GEQUAL);break;case FO:t.depthFunc(t.GREATER);break;case UO:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ce=rt}},setLocked:function(rt){ie=rt},setClear:function(rt){Xe!==rt&&(t.clearDepth(rt),Xe=rt)},reset:function(){ie=!1,pe=null,Ce=null,Xe=null}}}function o(){let ie=!1,pe=null,Ce=null,Xe=null,rt=null,Kt=null,Yt=null,ar=null,hs=null;return{setTest:function(xn){ie||(xn?K(t.STENCIL_TEST):Ge(t.STENCIL_TEST))},setMask:function(xn){pe!==xn&&!ie&&(t.stencilMask(xn),pe=xn)},setFunc:function(xn,$r,Hi){(Ce!==xn||Xe!==$r||rt!==Hi)&&(t.stencilFunc(xn,$r,Hi),Ce=xn,Xe=$r,rt=Hi)},setOp:function(xn,$r,Hi){(Kt!==xn||Yt!==$r||ar!==Hi)&&(t.stencilOp(xn,$r,Hi),Kt=xn,Yt=$r,ar=Hi)},setLocked:function(xn){ie=xn},setClear:function(xn){hs!==xn&&(t.clearStencil(xn),hs=xn)},reset:function(){ie=!1,pe=null,Ce=null,Xe=null,rt=null,Kt=null,Yt=null,ar=null,hs=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let p={},m={},v=new WeakMap,y=[],x=null,g=!1,_=null,E=null,A=null,M=null,T=null,P=null,I=null,R=!1,D=null,F=null,X=null,z=null,V=null;const H=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,Z=0;const U=t.getParameter(t.VERSION);U.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(U)[1]),Q=Z>=1):U.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),Q=Z>=2);let N=null,G={};const ne=t.getParameter(t.SCISSOR_BOX),J=t.getParameter(t.VIEWPORT),ee=new Dt().fromArray(ne),te=new Dt().fromArray(J);function ye(ie,pe,Ce,Xe){const rt=new Uint8Array(4),Kt=t.createTexture();t.bindTexture(ie,Kt),t.texParameteri(ie,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ie,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Yt=0;Yt<Ce;Yt++)r&&(ie===t.TEXTURE_3D||ie===t.TEXTURE_2D_ARRAY)?t.texImage3D(pe,0,t.RGBA,1,1,Xe,0,t.RGBA,t.UNSIGNED_BYTE,rt):t.texImage2D(pe+Yt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,rt);return Kt}const Ae={};Ae[t.TEXTURE_2D]=ye(t.TEXTURE_2D,t.TEXTURE_2D,1),Ae[t.TEXTURE_CUBE_MAP]=ye(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Ae[t.TEXTURE_2D_ARRAY]=ye(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Ae[t.TEXTURE_3D]=ye(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),K(t.DEPTH_TEST),l.setFunc(ly),Be(!1),Ue(nE),K(t.CULL_FACE),fe(br);function K(ie){p[ie]!==!0&&(t.enable(ie),p[ie]=!0)}function Ge(ie){p[ie]!==!1&&(t.disable(ie),p[ie]=!1)}function We(ie,pe){return m[ie]!==pe?(t.bindFramebuffer(ie,pe),m[ie]=pe,r&&(ie===t.DRAW_FRAMEBUFFER&&(m[t.FRAMEBUFFER]=pe),ie===t.FRAMEBUFFER&&(m[t.DRAW_FRAMEBUFFER]=pe)),!0):!1}function Se(ie,pe){let Ce=y,Xe=!1;if(ie)if(Ce=v.get(pe),Ce===void 0&&(Ce=[],v.set(pe,Ce)),ie.isWebGLMultipleRenderTargets){const rt=ie.texture;if(Ce.length!==rt.length||Ce[0]!==t.COLOR_ATTACHMENT0){for(let Kt=0,Yt=rt.length;Kt<Yt;Kt++)Ce[Kt]=t.COLOR_ATTACHMENT0+Kt;Ce.length=rt.length,Xe=!0}}else Ce[0]!==t.COLOR_ATTACHMENT0&&(Ce[0]=t.COLOR_ATTACHMENT0,Xe=!0);else Ce[0]!==t.BACK&&(Ce[0]=t.BACK,Xe=!0);Xe&&(n.isWebGL2?t.drawBuffers(Ce):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ce))}function Me(ie){return x!==ie?(t.useProgram(ie),x=ie,!0):!1}const me={[lc]:t.FUNC_ADD,[SO]:t.FUNC_SUBTRACT,[wO]:t.FUNC_REVERSE_SUBTRACT};if(r)me[oE]=t.MIN,me[aE]=t.MAX;else{const ie=e.get("EXT_blend_minmax");ie!==null&&(me[oE]=ie.MIN_EXT,me[aE]=ie.MAX_EXT)}const re={[EO]:t.ZERO,[AO]:t.ONE,[bO]:t.SRC_COLOR,[Ob]:t.SRC_ALPHA,[IO]:t.SRC_ALPHA_SATURATE,[RO]:t.DST_COLOR,[CO]:t.DST_ALPHA,[MO]:t.ONE_MINUS_SRC_COLOR,[Nb]:t.ONE_MINUS_SRC_ALPHA,[PO]:t.ONE_MINUS_DST_COLOR,[TO]:t.ONE_MINUS_DST_ALPHA};function fe(ie,pe,Ce,Xe,rt,Kt,Yt,ar){if(ie===br){g===!0&&(Ge(t.BLEND),g=!1);return}if(g===!1&&(K(t.BLEND),g=!0),ie!==_O){if(ie!==_||ar!==R){if((E!==lc||T!==lc)&&(t.blendEquation(t.FUNC_ADD),E=lc,T=lc),ar)switch(ie){case Ec:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case rE:t.blendFunc(t.ONE,t.ONE);break;case iE:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case sE:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case Ec:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case rE:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case iE:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case sE:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}A=null,M=null,P=null,I=null,_=ie,R=ar}return}rt=rt||pe,Kt=Kt||Ce,Yt=Yt||Xe,(pe!==E||rt!==T)&&(t.blendEquationSeparate(me[pe],me[rt]),E=pe,T=rt),(Ce!==A||Xe!==M||Kt!==P||Yt!==I)&&(t.blendFuncSeparate(re[Ce],re[Xe],re[Kt],re[Yt]),A=Ce,M=Xe,P=Kt,I=Yt),_=ie,R=!1}function Le(ie,pe){ie.side===wr?Ge(t.CULL_FACE):K(t.CULL_FACE);let Ce=ie.side===ir;pe&&(Ce=!Ce),Be(Ce),ie.blending===Ec&&ie.transparent===!1?fe(br):fe(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),l.setFunc(ie.depthFunc),l.setTest(ie.depthTest),l.setMask(ie.depthWrite),a.setMask(ie.colorWrite);const Xe=ie.stencilWrite;c.setTest(Xe),Xe&&(c.setMask(ie.stencilWriteMask),c.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),c.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),ke(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?K(t.SAMPLE_ALPHA_TO_COVERAGE):Ge(t.SAMPLE_ALPHA_TO_COVERAGE)}function Be(ie){D!==ie&&(ie?t.frontFace(t.CW):t.frontFace(t.CCW),D=ie)}function Ue(ie){ie!==vO?(K(t.CULL_FACE),ie!==F&&(ie===nE?t.cullFace(t.BACK):ie===yO?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ge(t.CULL_FACE),F=ie}function Ke(ie){ie!==X&&(Q&&t.lineWidth(ie),X=ie)}function ke(ie,pe,Ce){ie?(K(t.POLYGON_OFFSET_FILL),(z!==pe||V!==Ce)&&(t.polygonOffset(pe,Ce),z=pe,V=Ce)):Ge(t.POLYGON_OFFSET_FILL)}function Ye(ie){ie?K(t.SCISSOR_TEST):Ge(t.SCISSOR_TEST)}function ht(ie){ie===void 0&&(ie=t.TEXTURE0+H-1),N!==ie&&(t.activeTexture(ie),N=ie)}function W(ie,pe,Ce){Ce===void 0&&(N===null?Ce=t.TEXTURE0+H-1:Ce=N);let Xe=G[Ce];Xe===void 0&&(Xe={type:void 0,texture:void 0},G[Ce]=Xe),(Xe.type!==ie||Xe.texture!==pe)&&(N!==Ce&&(t.activeTexture(Ce),N=Ce),t.bindTexture(ie,pe||Ae[ie]),Xe.type=ie,Xe.texture=pe)}function k(){const ie=G[N];ie!==void 0&&ie.type!==void 0&&(t.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function Y(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function ce(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function we(){try{t.texSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Te(){try{t.texSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Qe(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function ze(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function ve(){try{t.texStorage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Je(){try{t.texStorage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function q(){try{t.texImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function ge(){try{t.texImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function be(ie){ee.equals(ie)===!1&&(t.scissor(ie.x,ie.y,ie.z,ie.w),ee.copy(ie))}function Pe(ie){te.equals(ie)===!1&&(t.viewport(ie.x,ie.y,ie.z,ie.w),te.copy(ie))}function nt(ie,pe){let Ce=d.get(pe);Ce===void 0&&(Ce=new WeakMap,d.set(pe,Ce));let Xe=Ce.get(ie);Xe===void 0&&(Xe=t.getUniformBlockIndex(pe,ie.name),Ce.set(ie,Xe))}function ut(ie,pe){const Xe=d.get(pe).get(ie);u.get(pe)!==Xe&&(t.uniformBlockBinding(pe,Xe,ie.__bindingPointIndex),u.set(pe,Xe))}function $t(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},N=null,G={},m={},v=new WeakMap,y=[],x=null,g=!1,_=null,E=null,A=null,M=null,T=null,P=null,I=null,R=!1,D=null,F=null,X=null,z=null,V=null,ee.set(0,0,t.canvas.width,t.canvas.height),te.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:K,disable:Ge,bindFramebuffer:We,drawBuffers:Se,useProgram:Me,setBlending:fe,setMaterial:Le,setFlipSided:Be,setCullFace:Ue,setLineWidth:Ke,setPolygonOffset:ke,setScissorTest:Ye,activeTexture:ht,bindTexture:W,unbindTexture:k,compressedTexImage2D:Y,compressedTexImage3D:ce,texImage2D:q,texImage3D:ge,updateUBOMapping:nt,uniformBlockBinding:ut,texStorage2D:ve,texStorage3D:Je,texSubImage2D:we,texSubImage3D:Te,compressedTexSubImage2D:Qe,compressedTexSubImage3D:ze,scissor:be,viewport:Pe,reset:$t}}function TW(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const x=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(W,k){return g?new OffscreenCanvas(W,k):wp("canvas")}function E(W,k,Y,ce){let we=1;if((W.width>ce||W.height>ce)&&(we=ce/Math.max(W.width,W.height)),we<1||k===!0)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const Te=k?pN:Math.floor,Qe=Te(we*W.width),ze=Te(we*W.height);y===void 0&&(y=_(Qe,ze));const ve=Y?_(Qe,ze):y;return ve.width=Qe,ve.height=ze,ve.getContext("2d").drawImage(W,0,0,Qe,ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+Qe+"x"+ze+")."),ve}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W;return W}function A(W){return BE(W.width)&&BE(W.height)}function M(W){return a?!1:W.wrapS!==Er||W.wrapT!==Er||W.minFilter!==rn&&W.minFilter!==Zt}function T(W,k){return W.generateMipmaps&&k&&W.minFilter!==rn&&W.minFilter!==Zt}function P(W){t.generateMipmap(W)}function I(W,k,Y,ce,we=!1){if(a===!1)return k;if(W!==null){if(t[W]!==void 0)return t[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Te=k;return k===t.RED&&(Y===t.FLOAT&&(Te=t.R32F),Y===t.HALF_FLOAT&&(Te=t.R16F),Y===t.UNSIGNED_BYTE&&(Te=t.R8)),k===t.RG&&(Y===t.FLOAT&&(Te=t.RG32F),Y===t.HALF_FLOAT&&(Te=t.RG16F),Y===t.UNSIGNED_BYTE&&(Te=t.RG8)),k===t.RGBA&&(Y===t.FLOAT&&(Te=t.RGBA32F),Y===t.HALF_FLOAT&&(Te=t.RGBA16F),Y===t.UNSIGNED_BYTE&&(Te=ce===wt&&we===!1?t.SRGB8_ALPHA8:t.RGBA8),Y===t.UNSIGNED_SHORT_4_4_4_4&&(Te=t.RGBA4),Y===t.UNSIGNED_SHORT_5_5_5_1&&(Te=t.RGB5_A1)),(Te===t.R16F||Te===t.R32F||Te===t.RG16F||Te===t.RG32F||Te===t.RGBA16F||Te===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function R(W,k,Y){return T(W,Y)===!0||W.isFramebufferTexture&&W.minFilter!==rn&&W.minFilter!==Zt?Math.log2(Math.max(k.width,k.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?k.mipmaps.length:1}function D(W){return W===rn||W===xp||W===bd?t.NEAREST:t.LINEAR}function F(W){const k=W.target;k.removeEventListener("dispose",F),z(k),k.isVideoTexture&&v.delete(k)}function X(W){const k=W.target;k.removeEventListener("dispose",X),H(k)}function z(W){const k=r.get(W);if(k.__webglInit===void 0)return;const Y=W.source,ce=x.get(Y);if(ce){const we=ce[k.__cacheKey];we.usedTimes--,we.usedTimes===0&&V(W),Object.keys(ce).length===0&&x.delete(Y)}r.remove(W)}function V(W){const k=r.get(W);t.deleteTexture(k.__webglTexture);const Y=W.source,ce=x.get(Y);delete ce[k.__cacheKey],o.memory.textures--}function H(W){const k=W.texture,Y=r.get(W),ce=r.get(k);if(ce.__webglTexture!==void 0&&(t.deleteTexture(ce.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let we=0;we<6;we++)t.deleteFramebuffer(Y.__webglFramebuffer[we]),Y.__webglDepthbuffer&&t.deleteRenderbuffer(Y.__webglDepthbuffer[we]);else{if(t.deleteFramebuffer(Y.__webglFramebuffer),Y.__webglDepthbuffer&&t.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let we=0;we<Y.__webglColorRenderbuffer.length;we++)Y.__webglColorRenderbuffer[we]&&t.deleteRenderbuffer(Y.__webglColorRenderbuffer[we]);Y.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let we=0,Te=k.length;we<Te;we++){const Qe=r.get(k[we]);Qe.__webglTexture&&(t.deleteTexture(Qe.__webglTexture),o.memory.textures--),r.remove(k[we])}r.remove(k),r.remove(W)}let Q=0;function Z(){Q=0}function U(){const W=Q;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),Q+=1,W}function N(W){const k=[];return k.push(W.wrapS),k.push(W.wrapT),k.push(W.wrapR||0),k.push(W.magFilter),k.push(W.minFilter),k.push(W.anisotropy),k.push(W.internalFormat),k.push(W.format),k.push(W.type),k.push(W.generateMipmaps),k.push(W.premultiplyAlpha),k.push(W.flipY),k.push(W.unpackAlignment),k.push(W.colorSpace),k.join()}function G(W,k){const Y=r.get(W);if(W.isVideoTexture&&Ye(W),W.isRenderTargetTexture===!1&&W.version>0&&Y.__version!==W.version){const ce=W.image;if(ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ge(Y,W,k);return}}n.bindTexture(t.TEXTURE_2D,Y.__webglTexture,t.TEXTURE0+k)}function ne(W,k){const Y=r.get(W);if(W.version>0&&Y.__version!==W.version){Ge(Y,W,k);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Y.__webglTexture,t.TEXTURE0+k)}function J(W,k){const Y=r.get(W);if(W.version>0&&Y.__version!==W.version){Ge(Y,W,k);return}n.bindTexture(t.TEXTURE_3D,Y.__webglTexture,t.TEXTURE0+k)}function ee(W,k){const Y=r.get(W);if(W.version>0&&Y.__version!==W.version){We(Y,W,k);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Y.__webglTexture,t.TEXTURE0+k)}const te={[cl]:t.REPEAT,[Er]:t.CLAMP_TO_EDGE,[Hd]:t.MIRRORED_REPEAT},ye={[rn]:t.NEAREST,[xp]:t.NEAREST_MIPMAP_NEAREST,[bd]:t.NEAREST_MIPMAP_LINEAR,[Zt]:t.LINEAR,[ix]:t.LINEAR_MIPMAP_NEAREST,[ks]:t.LINEAR_MIPMAP_LINEAR};function Ae(W,k,Y){if(Y?(t.texParameteri(W,t.TEXTURE_WRAP_S,te[k.wrapS]),t.texParameteri(W,t.TEXTURE_WRAP_T,te[k.wrapT]),(W===t.TEXTURE_3D||W===t.TEXTURE_2D_ARRAY)&&t.texParameteri(W,t.TEXTURE_WRAP_R,te[k.wrapR]),t.texParameteri(W,t.TEXTURE_MAG_FILTER,ye[k.magFilter]),t.texParameteri(W,t.TEXTURE_MIN_FILTER,ye[k.minFilter])):(t.texParameteri(W,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(W,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(W===t.TEXTURE_3D||W===t.TEXTURE_2D_ARRAY)&&t.texParameteri(W,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(k.wrapS!==Er||k.wrapT!==Er)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(W,t.TEXTURE_MAG_FILTER,D(k.magFilter)),t.texParameteri(W,t.TEXTURE_MIN_FILTER,D(k.minFilter)),k.minFilter!==rn&&k.minFilter!==Zt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ce=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===rn||k.minFilter!==bd&&k.minFilter!==ks||k.type===Is&&e.has("OES_texture_float_linear")===!1||a===!1&&k.type===ul&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||r.get(k).__currentAnisotropy)&&(t.texParameterf(W,ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,i.getMaxAnisotropy())),r.get(k).__currentAnisotropy=k.anisotropy)}}function K(W,k){let Y=!1;W.__webglInit===void 0&&(W.__webglInit=!0,k.addEventListener("dispose",F));const ce=k.source;let we=x.get(ce);we===void 0&&(we={},x.set(ce,we));const Te=N(k);if(Te!==W.__cacheKey){we[Te]===void 0&&(we[Te]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,Y=!0),we[Te].usedTimes++;const Qe=we[W.__cacheKey];Qe!==void 0&&(we[W.__cacheKey].usedTimes--,Qe.usedTimes===0&&V(k)),W.__cacheKey=Te,W.__webglTexture=we[Te].texture}return Y}function Ge(W,k,Y){let ce=t.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ce=t.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ce=t.TEXTURE_3D);const we=K(W,k),Te=k.source;n.bindTexture(ce,W.__webglTexture,t.TEXTURE0+Y);const Qe=r.get(Te);if(Te.version!==Qe.__version||we===!0){n.activeTexture(t.TEXTURE0+Y),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const ze=M(k)&&A(k.image)===!1;let ve=E(k.image,ze,!1,u);ve=ht(k,ve);const Je=A(ve)||a,q=s.convert(k.format,k.colorSpace);let ge=s.convert(k.type),be=I(k.internalFormat,q,ge,k.colorSpace);Ae(ce,k,Je);let Pe;const nt=k.mipmaps,ut=a&&k.isVideoTexture!==!0,$t=Qe.__version===void 0||we===!0,ie=R(k,ve,Je);if(k.isDepthTexture)be=t.DEPTH_COMPONENT,a?k.type===Is?be=t.DEPTH_COMPONENT32F:k.type===Ho?be=t.DEPTH_COMPONENT24:k.type===Za?be=t.DEPTH24_STENCIL8:be=t.DEPTH_COMPONENT16:k.type===Is&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===el&&be===t.DEPTH_COMPONENT&&k.type!==Ub&&k.type!==Ho&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=Ho,ge=s.convert(k.type)),k.format===dl&&be===t.DEPTH_COMPONENT&&(be=t.DEPTH_STENCIL,k.type!==Za&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=Za,ge=s.convert(k.type))),$t&&(ut?n.texStorage2D(t.TEXTURE_2D,1,be,ve.width,ve.height):n.texImage2D(t.TEXTURE_2D,0,be,ve.width,ve.height,0,q,ge,null));else if(k.isDataTexture)if(nt.length>0&&Je){ut&&$t&&n.texStorage2D(t.TEXTURE_2D,ie,be,nt[0].width,nt[0].height);for(let pe=0,Ce=nt.length;pe<Ce;pe++)Pe=nt[pe],ut?n.texSubImage2D(t.TEXTURE_2D,pe,0,0,Pe.width,Pe.height,q,ge,Pe.data):n.texImage2D(t.TEXTURE_2D,pe,be,Pe.width,Pe.height,0,q,ge,Pe.data);k.generateMipmaps=!1}else ut?($t&&n.texStorage2D(t.TEXTURE_2D,ie,be,ve.width,ve.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,ve.width,ve.height,q,ge,ve.data)):n.texImage2D(t.TEXTURE_2D,0,be,ve.width,ve.height,0,q,ge,ve.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){ut&&$t&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ie,be,nt[0].width,nt[0].height,ve.depth);for(let pe=0,Ce=nt.length;pe<Ce;pe++)Pe=nt[pe],k.format!==li?q!==null?ut?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,pe,0,0,0,Pe.width,Pe.height,ve.depth,q,Pe.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,pe,be,Pe.width,Pe.height,ve.depth,0,Pe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ut?n.texSubImage3D(t.TEXTURE_2D_ARRAY,pe,0,0,0,Pe.width,Pe.height,ve.depth,q,ge,Pe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,pe,be,Pe.width,Pe.height,ve.depth,0,q,ge,Pe.data)}else{ut&&$t&&n.texStorage2D(t.TEXTURE_2D,ie,be,nt[0].width,nt[0].height);for(let pe=0,Ce=nt.length;pe<Ce;pe++)Pe=nt[pe],k.format!==li?q!==null?ut?n.compressedTexSubImage2D(t.TEXTURE_2D,pe,0,0,Pe.width,Pe.height,q,Pe.data):n.compressedTexImage2D(t.TEXTURE_2D,pe,be,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ut?n.texSubImage2D(t.TEXTURE_2D,pe,0,0,Pe.width,Pe.height,q,ge,Pe.data):n.texImage2D(t.TEXTURE_2D,pe,be,Pe.width,Pe.height,0,q,ge,Pe.data)}else if(k.isDataArrayTexture)ut?($t&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ie,be,ve.width,ve.height,ve.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,ve.width,ve.height,ve.depth,q,ge,ve.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,be,ve.width,ve.height,ve.depth,0,q,ge,ve.data);else if(k.isData3DTexture)ut?($t&&n.texStorage3D(t.TEXTURE_3D,ie,be,ve.width,ve.height,ve.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,ve.width,ve.height,ve.depth,q,ge,ve.data)):n.texImage3D(t.TEXTURE_3D,0,be,ve.width,ve.height,ve.depth,0,q,ge,ve.data);else if(k.isFramebufferTexture){if($t)if(ut)n.texStorage2D(t.TEXTURE_2D,ie,be,ve.width,ve.height);else{let pe=ve.width,Ce=ve.height;for(let Xe=0;Xe<ie;Xe++)n.texImage2D(t.TEXTURE_2D,Xe,be,pe,Ce,0,q,ge,null),pe>>=1,Ce>>=1}}else if(nt.length>0&&Je){ut&&$t&&n.texStorage2D(t.TEXTURE_2D,ie,be,nt[0].width,nt[0].height);for(let pe=0,Ce=nt.length;pe<Ce;pe++)Pe=nt[pe],ut?n.texSubImage2D(t.TEXTURE_2D,pe,0,0,q,ge,Pe):n.texImage2D(t.TEXTURE_2D,pe,be,q,ge,Pe);k.generateMipmaps=!1}else ut?($t&&n.texStorage2D(t.TEXTURE_2D,ie,be,ve.width,ve.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,q,ge,ve)):n.texImage2D(t.TEXTURE_2D,0,be,q,ge,ve);T(k,Je)&&P(ce),Qe.__version=Te.version,k.onUpdate&&k.onUpdate(k)}W.__version=k.version}function We(W,k,Y){if(k.image.length!==6)return;const ce=K(W,k),we=k.source;n.bindTexture(t.TEXTURE_CUBE_MAP,W.__webglTexture,t.TEXTURE0+Y);const Te=r.get(we);if(we.version!==Te.__version||ce===!0){n.activeTexture(t.TEXTURE0+Y),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Qe=k.isCompressedTexture||k.image[0].isCompressedTexture,ze=k.image[0]&&k.image[0].isDataTexture,ve=[];for(let pe=0;pe<6;pe++)!Qe&&!ze?ve[pe]=E(k.image[pe],!1,!0,c):ve[pe]=ze?k.image[pe].image:k.image[pe],ve[pe]=ht(k,ve[pe]);const Je=ve[0],q=A(Je)||a,ge=s.convert(k.format,k.colorSpace),be=s.convert(k.type),Pe=I(k.internalFormat,ge,be,k.colorSpace),nt=a&&k.isVideoTexture!==!0,ut=Te.__version===void 0||ce===!0;let $t=R(k,Je,q);Ae(t.TEXTURE_CUBE_MAP,k,q);let ie;if(Qe){nt&&ut&&n.texStorage2D(t.TEXTURE_CUBE_MAP,$t,Pe,Je.width,Je.height);for(let pe=0;pe<6;pe++){ie=ve[pe].mipmaps;for(let Ce=0;Ce<ie.length;Ce++){const Xe=ie[Ce];k.format!==li?ge!==null?nt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce,0,0,Xe.width,Xe.height,ge,Xe.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce,Pe,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce,0,0,Xe.width,Xe.height,ge,be,Xe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce,Pe,Xe.width,Xe.height,0,ge,be,Xe.data)}}}else{ie=k.mipmaps,nt&&ut&&(ie.length>0&&$t++,n.texStorage2D(t.TEXTURE_CUBE_MAP,$t,Pe,ve[0].width,ve[0].height));for(let pe=0;pe<6;pe++)if(ze){nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,ve[pe].width,ve[pe].height,ge,be,ve[pe].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Pe,ve[pe].width,ve[pe].height,0,ge,be,ve[pe].data);for(let Ce=0;Ce<ie.length;Ce++){const rt=ie[Ce].image[pe].image;nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce+1,0,0,rt.width,rt.height,ge,be,rt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce+1,Pe,rt.width,rt.height,0,ge,be,rt.data)}}else{nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,ge,be,ve[pe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Pe,ge,be,ve[pe]);for(let Ce=0;Ce<ie.length;Ce++){const Xe=ie[Ce];nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce+1,0,0,ge,be,Xe.image[pe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ce+1,Pe,ge,be,Xe.image[pe])}}}T(k,q)&&P(t.TEXTURE_CUBE_MAP),Te.__version=we.version,k.onUpdate&&k.onUpdate(k)}W.__version=k.version}function Se(W,k,Y,ce,we){const Te=s.convert(Y.format,Y.colorSpace),Qe=s.convert(Y.type),ze=I(Y.internalFormat,Te,Qe,Y.colorSpace);r.get(k).__hasExternalTextures||(we===t.TEXTURE_3D||we===t.TEXTURE_2D_ARRAY?n.texImage3D(we,0,ze,k.width,k.height,k.depth,0,Te,Qe,null):n.texImage2D(we,0,ze,k.width,k.height,0,Te,Qe,null)),n.bindFramebuffer(t.FRAMEBUFFER,W),ke(k)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ce,we,r.get(Y).__webglTexture,0,Ke(k)):(we===t.TEXTURE_2D||we>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&we<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ce,we,r.get(Y).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Me(W,k,Y){if(t.bindRenderbuffer(t.RENDERBUFFER,W),k.depthBuffer&&!k.stencilBuffer){let ce=t.DEPTH_COMPONENT16;if(Y||ke(k)){const we=k.depthTexture;we&&we.isDepthTexture&&(we.type===Is?ce=t.DEPTH_COMPONENT32F:we.type===Ho&&(ce=t.DEPTH_COMPONENT24));const Te=Ke(k);ke(k)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Te,ce,k.width,k.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Te,ce,k.width,k.height)}else t.renderbufferStorage(t.RENDERBUFFER,ce,k.width,k.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,W)}else if(k.depthBuffer&&k.stencilBuffer){const ce=Ke(k);Y&&ke(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ce,t.DEPTH24_STENCIL8,k.width,k.height):ke(k)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ce,t.DEPTH24_STENCIL8,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,k.width,k.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,W)}else{const ce=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let we=0;we<ce.length;we++){const Te=ce[we],Qe=s.convert(Te.format,Te.colorSpace),ze=s.convert(Te.type),ve=I(Te.internalFormat,Qe,ze,Te.colorSpace),Je=Ke(k);Y&&ke(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Je,ve,k.width,k.height):ke(k)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Je,ve,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,ve,k.width,k.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function me(W,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,W),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),G(k.depthTexture,0);const ce=r.get(k.depthTexture).__webglTexture,we=Ke(k);if(k.depthTexture.format===el)ke(k)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ce,0,we):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ce,0);else if(k.depthTexture.format===dl)ke(k)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ce,0,we):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ce,0);else throw new Error("Unknown depthTexture format")}function re(W){const k=r.get(W),Y=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture&&!k.__autoAllocateDepthBuffer){if(Y)throw new Error("target.depthTexture not supported in Cube render targets");me(k.__webglFramebuffer,W)}else if(Y){k.__webglDepthbuffer=[];for(let ce=0;ce<6;ce++)n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer[ce]),k.__webglDepthbuffer[ce]=t.createRenderbuffer(),Me(k.__webglDepthbuffer[ce],W,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=t.createRenderbuffer(),Me(k.__webglDepthbuffer,W,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function fe(W,k,Y){const ce=r.get(W);k!==void 0&&Se(ce.__webglFramebuffer,W,W.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),Y!==void 0&&re(W)}function Le(W){const k=W.texture,Y=r.get(W),ce=r.get(k);W.addEventListener("dispose",X),W.isWebGLMultipleRenderTargets!==!0&&(ce.__webglTexture===void 0&&(ce.__webglTexture=t.createTexture()),ce.__version=k.version,o.memory.textures++);const we=W.isWebGLCubeRenderTarget===!0,Te=W.isWebGLMultipleRenderTargets===!0,Qe=A(W)||a;if(we){Y.__webglFramebuffer=[];for(let ze=0;ze<6;ze++)Y.__webglFramebuffer[ze]=t.createFramebuffer()}else{if(Y.__webglFramebuffer=t.createFramebuffer(),Te)if(i.drawBuffers){const ze=W.texture;for(let ve=0,Je=ze.length;ve<Je;ve++){const q=r.get(ze[ve]);q.__webglTexture===void 0&&(q.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&W.samples>0&&ke(W)===!1){const ze=Te?k:[k];Y.__webglMultisampledFramebuffer=t.createFramebuffer(),Y.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Y.__webglMultisampledFramebuffer);for(let ve=0;ve<ze.length;ve++){const Je=ze[ve];Y.__webglColorRenderbuffer[ve]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Y.__webglColorRenderbuffer[ve]);const q=s.convert(Je.format,Je.colorSpace),ge=s.convert(Je.type),be=I(Je.internalFormat,q,ge,Je.colorSpace,W.isXRRenderTarget===!0),Pe=Ke(W);t.renderbufferStorageMultisample(t.RENDERBUFFER,Pe,be,W.width,W.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ve,t.RENDERBUFFER,Y.__webglColorRenderbuffer[ve])}t.bindRenderbuffer(t.RENDERBUFFER,null),W.depthBuffer&&(Y.__webglDepthRenderbuffer=t.createRenderbuffer(),Me(Y.__webglDepthRenderbuffer,W,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(we){n.bindTexture(t.TEXTURE_CUBE_MAP,ce.__webglTexture),Ae(t.TEXTURE_CUBE_MAP,k,Qe);for(let ze=0;ze<6;ze++)Se(Y.__webglFramebuffer[ze],W,k,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ze);T(k,Qe)&&P(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Te){const ze=W.texture;for(let ve=0,Je=ze.length;ve<Je;ve++){const q=ze[ve],ge=r.get(q);n.bindTexture(t.TEXTURE_2D,ge.__webglTexture),Ae(t.TEXTURE_2D,q,Qe),Se(Y.__webglFramebuffer,W,q,t.COLOR_ATTACHMENT0+ve,t.TEXTURE_2D),T(q,Qe)&&P(t.TEXTURE_2D)}n.unbindTexture()}else{let ze=t.TEXTURE_2D;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?ze=W.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(ze,ce.__webglTexture),Ae(ze,k,Qe),Se(Y.__webglFramebuffer,W,k,t.COLOR_ATTACHMENT0,ze),T(k,Qe)&&P(ze),n.unbindTexture()}W.depthBuffer&&re(W)}function Be(W){const k=A(W)||a,Y=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let ce=0,we=Y.length;ce<we;ce++){const Te=Y[ce];if(T(Te,k)){const Qe=W.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,ze=r.get(Te).__webglTexture;n.bindTexture(Qe,ze),P(Qe),n.unbindTexture()}}}function Ue(W){if(a&&W.samples>0&&ke(W)===!1){const k=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],Y=W.width,ce=W.height;let we=t.COLOR_BUFFER_BIT;const Te=[],Qe=W.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ze=r.get(W),ve=W.isWebGLMultipleRenderTargets===!0;if(ve)for(let Je=0;Je<k.length;Je++)n.bindFramebuffer(t.FRAMEBUFFER,ze.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,ze.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,ze.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ze.__webglFramebuffer);for(let Je=0;Je<k.length;Je++){Te.push(t.COLOR_ATTACHMENT0+Je),W.depthBuffer&&Te.push(Qe);const q=ze.__ignoreDepthValues!==void 0?ze.__ignoreDepthValues:!1;if(q===!1&&(W.depthBuffer&&(we|=t.DEPTH_BUFFER_BIT),W.stencilBuffer&&(we|=t.STENCIL_BUFFER_BIT)),ve&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,ze.__webglColorRenderbuffer[Je]),q===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Qe]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Qe])),ve){const ge=r.get(k[Je]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ge,0)}t.blitFramebuffer(0,0,Y,ce,0,0,Y,ce,we,t.NEAREST),m&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Te)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ve)for(let Je=0;Je<k.length;Je++){n.bindFramebuffer(t.FRAMEBUFFER,ze.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.RENDERBUFFER,ze.__webglColorRenderbuffer[Je]);const q=r.get(k[Je]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,ze.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.TEXTURE_2D,q,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ze.__webglMultisampledFramebuffer)}}function Ke(W){return Math.min(d,W.samples)}function ke(W){const k=r.get(W);return a&&W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Ye(W){const k=o.render.frame;v.get(W)!==k&&(v.set(W,k),W.update())}function ht(W,k){const Y=W.colorSpace,ce=W.format,we=W.type;return W.isCompressedTexture===!0||W.format===uy||Y!==zs&&Y!==tl&&(Y===wt?a===!1?e.has("EXT_sRGB")===!0&&ce===li?(W.format=uy,W.minFilter=Zt,W.generateMipmaps=!1):k=$b.sRGBToLinear(k):(ce!==li||we!==zr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Y)),k}this.allocateTextureUnit=U,this.resetTextureUnits=Z,this.setTexture2D=G,this.setTexture2DArray=ne,this.setTexture3D=J,this.setTextureCube=ee,this.rebindTextures=fe,this.setupRenderTarget=Le,this.updateRenderTargetMipmap=Be,this.updateMultisampleRenderTarget=Ue,this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=Se,this.useMultisampledRTT=ke}function bN(t,e,n){const r=n.isWebGL2;function i(s,o=tl){let a;if(s===zr)return t.UNSIGNED_BYTE;if(s===JO)return t.UNSIGNED_SHORT_4_4_4_4;if(s===KO)return t.UNSIGNED_SHORT_5_5_5_1;if(s===WO)return t.BYTE;if(s===jO)return t.SHORT;if(s===Ub)return t.UNSIGNED_SHORT;if(s===XO)return t.INT;if(s===Ho)return t.UNSIGNED_INT;if(s===Is)return t.FLOAT;if(s===ul)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===YO)return t.ALPHA;if(s===li)return t.RGBA;if(s===QO)return t.LUMINANCE;if(s===qO)return t.LUMINANCE_ALPHA;if(s===el)return t.DEPTH_COMPONENT;if(s===dl)return t.DEPTH_STENCIL;if(s===uy)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===ZO)return t.RED;if(s===eN)return t.RED_INTEGER;if(s===tN)return t.RG;if(s===nN)return t.RG_INTEGER;if(s===rN)return t.RGBA_INTEGER;if(s===b0||s===M0||s===C0||s===T0)if(o===wt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===b0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===M0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===C0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===T0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===b0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===M0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===C0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===T0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===lE||s===cE||s===uE||s===dE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===lE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===cE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===uE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===dE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===iN)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===fE||s===hE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===fE)return o===wt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===hE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===pE||s===mE||s===gE||s===vE||s===yE||s===xE||s===_E||s===SE||s===wE||s===EE||s===AE||s===bE||s===ME||s===CE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===pE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===mE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===gE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===vE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===yE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===xE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===_E)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===SE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===wE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===EE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===AE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===bE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===ME)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===CE)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===R0)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===R0)return o===wt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===sN||s===TE||s===RE||s===PE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===R0)return a.COMPRESSED_RED_RGTC1_EXT;if(s===TE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===RE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===PE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Za?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class MN extends sn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Go extends zt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const RW={type:"move"};class nS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Go,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Go,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Go,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const x=n.getJointPose(y,r),g=this._getHandJoint(c,y);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=u.position.distanceTo(d.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(RW)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Go;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class cx extends fn{constructor(e,n,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:el,u!==el&&u!==dl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===el&&(r=Ho),r===void 0&&u===dl&&(r=Za),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:rn,this.minFilter=l!==void 0?l:rn,this.flipY=!1,this.generateMipmaps=!1}}class PW extends Ui{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,p=null,m=null,v=null;const y=n.getContextAttributes();let x=null,g=null;const _=[],E=[],A=new Set,M=new Map,T=new sn;T.layers.enable(1),T.viewport=new Dt;const P=new sn;P.layers.enable(2),P.viewport=new Dt;const I=[T,P],R=new MN;R.layers.enable(1),R.layers.enable(2);let D=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let te=_[ee];return te===void 0&&(te=new nS,_[ee]=te),te.getTargetRaySpace()},this.getControllerGrip=function(ee){let te=_[ee];return te===void 0&&(te=new nS,_[ee]=te),te.getGripSpace()},this.getHand=function(ee){let te=_[ee];return te===void 0&&(te=new nS,_[ee]=te),te.getHandSpace()};function X(ee){const te=E.indexOf(ee.inputSource);if(te===-1)return;const ye=_[te];ye!==void 0&&(ye.update(ee.inputSource,ee.frame,c||o),ye.dispatchEvent({type:ee.type,data:ee.inputSource}))}function z(){i.removeEventListener("select",X),i.removeEventListener("selectstart",X),i.removeEventListener("selectend",X),i.removeEventListener("squeeze",X),i.removeEventListener("squeezestart",X),i.removeEventListener("squeezeend",X),i.removeEventListener("end",z),i.removeEventListener("inputsourceschange",V);for(let ee=0;ee<_.length;ee++){const te=E[ee];te!==null&&(E[ee]=null,_[ee].disconnect(te))}D=null,F=null,e.setRenderTarget(x),m=null,p=null,d=null,i=null,g=null,J.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){a=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ee){c=ee},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(ee){if(i=ee,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",X),i.addEventListener("selectstart",X),i.addEventListener("selectend",X),i.addEventListener("squeeze",X),i.addEventListener("squeezestart",X),i.addEventListener("squeezeend",X),i.addEventListener("end",z),i.addEventListener("inputsourceschange",V),y.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const te={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,te),i.updateRenderState({baseLayer:m}),g=new yn(m.framebufferWidth,m.framebufferHeight,{format:li,type:zr,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let te=null,ye=null,Ae=null;y.depth&&(Ae=y.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,te=y.stencil?dl:el,ye=y.stencil?Za:Ho);const K={colorFormat:n.RGBA8,depthFormat:Ae,scaleFactor:s};d=new XRWebGLBinding(i,n),p=d.createProjectionLayer(K),i.updateRenderState({layers:[p]}),g=new yn(p.textureWidth,p.textureHeight,{format:li,type:zr,depthTexture:new cx(p.textureWidth,p.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const Ge=e.properties.get(g);Ge.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),J.setContext(i),J.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function V(ee){for(let te=0;te<ee.removed.length;te++){const ye=ee.removed[te],Ae=E.indexOf(ye);Ae>=0&&(E[Ae]=null,_[Ae].disconnect(ye))}for(let te=0;te<ee.added.length;te++){const ye=ee.added[te];let Ae=E.indexOf(ye);if(Ae===-1){for(let Ge=0;Ge<_.length;Ge++)if(Ge>=E.length){E.push(ye),Ae=Ge;break}else if(E[Ge]===null){E[Ge]=ye,Ae=Ge;break}if(Ae===-1)break}const K=_[Ae];K&&K.connect(ye)}}const H=new O,Q=new O;function Z(ee,te,ye){H.setFromMatrixPosition(te.matrixWorld),Q.setFromMatrixPosition(ye.matrixWorld);const Ae=H.distanceTo(Q),K=te.projectionMatrix.elements,Ge=ye.projectionMatrix.elements,We=K[14]/(K[10]-1),Se=K[14]/(K[10]+1),Me=(K[9]+1)/K[5],me=(K[9]-1)/K[5],re=(K[8]-1)/K[0],fe=(Ge[8]+1)/Ge[0],Le=We*re,Be=We*fe,Ue=Ae/(-re+fe),Ke=Ue*-re;te.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(Ke),ee.translateZ(Ue),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const ke=We+Ue,Ye=Se+Ue,ht=Le-Ke,W=Be+(Ae-Ke),k=Me*Se/Ye*ke,Y=me*Se/Ye*ke;ee.projectionMatrix.makePerspective(ht,W,k,Y,ke,Ye),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function U(ee,te){te===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(te.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(i===null)return;R.near=P.near=T.near=ee.near,R.far=P.far=T.far=ee.far,(D!==R.near||F!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),D=R.near,F=R.far);const te=ee.parent,ye=R.cameras;U(R,te);for(let Ae=0;Ae<ye.length;Ae++)U(ye[Ae],te);ye.length===2?Z(R,T,P):R.projectionMatrix.copy(T.projectionMatrix),N(ee,R,te)};function N(ee,te,ye){ye===null?ee.matrix.copy(te.matrixWorld):(ee.matrix.copy(ye.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(te.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0);const Ae=ee.children;for(let K=0,Ge=Ae.length;K<Ge;K++)Ae[K].updateMatrixWorld(!0);ee.projectionMatrix.copy(te.projectionMatrix),ee.projectionMatrixInverse.copy(te.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=$d*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ee){l=ee,p!==null&&(p.fixedFoveation=ee),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ee)},this.getPlanes=function(){return A};let G=null;function ne(ee,te){if(u=te.getViewerPose(c||o),v=te,u!==null){const ye=u.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let Ae=!1;ye.length!==R.cameras.length&&(R.cameras.length=0,Ae=!0);for(let K=0;K<ye.length;K++){const Ge=ye[K];let We=null;if(m!==null)We=m.getViewport(Ge);else{const Me=d.getViewSubImage(p,Ge);We=Me.viewport,K===0&&(e.setRenderTargetTextures(g,Me.colorTexture,p.ignoreDepthValues?void 0:Me.depthStencilTexture),e.setRenderTarget(g))}let Se=I[K];Se===void 0&&(Se=new sn,Se.layers.enable(K),Se.viewport=new Dt,I[K]=Se),Se.matrix.fromArray(Ge.transform.matrix),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),Se.projectionMatrix.fromArray(Ge.projectionMatrix),Se.projectionMatrixInverse.copy(Se.projectionMatrix).invert(),Se.viewport.set(We.x,We.y,We.width,We.height),K===0&&(R.matrix.copy(Se.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Ae===!0&&R.cameras.push(Se)}}for(let ye=0;ye<_.length;ye++){const Ae=E[ye],K=_[ye];Ae!==null&&K!==void 0&&K.update(Ae,te,c||o)}if(G&&G(ee,te),te.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:te.detectedPlanes});let ye=null;for(const Ae of A)te.detectedPlanes.has(Ae)||(ye===null&&(ye=[]),ye.push(Ae));if(ye!==null)for(const Ae of ye)A.delete(Ae),M.delete(Ae),r.dispatchEvent({type:"planeremoved",data:Ae});for(const Ae of te.detectedPlanes)if(!A.has(Ae))A.add(Ae),M.set(Ae,te.lastChangedTime),r.dispatchEvent({type:"planeadded",data:Ae});else{const K=M.get(Ae);Ae.lastChangedTime>K&&(M.set(Ae,Ae.lastChangedTime),r.dispatchEvent({type:"planechanged",data:Ae}))}}v=null}const J=new _N;J.setAnimationLoop(ne),this.setAnimationLoop=function(ee){G=ee},this.dispose=function(){}}}function IW(t,e){function n(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function r(x,g){g.color.getRGB(x.fogColor.value,vN(t)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function i(x,g,_,E,A){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),d(x,g)):g.isMeshPhongMaterial?(s(x,g),u(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,A)):g.isMeshMatcapMaterial?(s(x,g),v(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),y(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,_,E):g.isSpriteMaterial?c(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,n(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,n(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,n(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===ir&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,n(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===ir&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,n(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,n(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(x.envMap.value=_,x.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap){x.lightMap.value=g.lightMap;const E=t.useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=g.lightMapIntensity*E,n(g.lightMap,x.lightMapTransform)}g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,n(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,_,E){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*_,x.scale.value=E*.5,g.map&&(x.map.value=g.map,n(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function c(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,n(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function u(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function d(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,x.roughnessMapTransform)),e.get(g).envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,_){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ir&&x.clearcoatNormalScale.value.negate())),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,g){g.matcap&&(x.matcap.value=g.matcap)}function y(x,g){const _=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function BW(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(_,E){const A=E.program;r.uniformBlockBinding(_,A)}function c(_,E){let A=i[_.id];A===void 0&&(v(_),A=u(_),i[_.id]=A,_.addEventListener("dispose",x));const M=E.program;r.updateUBOMapping(_,M);const T=e.render.frame;s[_.id]!==T&&(p(_),s[_.id]=T)}function u(_){const E=d();_.__bindingPointIndex=E;const A=t.createBuffer(),M=_.__size,T=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,A),t.bufferData(t.UNIFORM_BUFFER,M,T),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,E,A),A}function d(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const E=i[_.id],A=_.uniforms,M=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,E);for(let T=0,P=A.length;T<P;T++){const I=A[T];if(m(I,T,M)===!0){const R=I.__offset,D=Array.isArray(I.value)?I.value:[I.value];let F=0;for(let X=0;X<D.length;X++){const z=D[X],V=y(z);typeof z=="number"?(I.__data[0]=z,t.bufferSubData(t.UNIFORM_BUFFER,R+F,I.__data)):z.isMatrix3?(I.__data[0]=z.elements[0],I.__data[1]=z.elements[1],I.__data[2]=z.elements[2],I.__data[3]=z.elements[0],I.__data[4]=z.elements[3],I.__data[5]=z.elements[4],I.__data[6]=z.elements[5],I.__data[7]=z.elements[0],I.__data[8]=z.elements[6],I.__data[9]=z.elements[7],I.__data[10]=z.elements[8],I.__data[11]=z.elements[0]):(z.toArray(I.__data,F),F+=V.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,R,I.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(_,E,A){const M=_.value;if(A[E]===void 0){if(typeof M=="number")A[E]=M;else{const T=Array.isArray(M)?M:[M],P=[];for(let I=0;I<T.length;I++)P.push(T[I].clone());A[E]=P}return!0}else if(typeof M=="number"){if(A[E]!==M)return A[E]=M,!0}else{const T=Array.isArray(A[E])?A[E]:[A[E]],P=Array.isArray(M)?M:[M];for(let I=0;I<T.length;I++){const R=T[I];if(R.equals(P[I])===!1)return R.copy(P[I]),!0}}return!1}function v(_){const E=_.uniforms;let A=0;const M=16;let T=0;for(let P=0,I=E.length;P<I;P++){const R=E[P],D={boundary:0,storage:0},F=Array.isArray(R.value)?R.value:[R.value];for(let X=0,z=F.length;X<z;X++){const V=F[X],H=y(V);D.boundary+=H.boundary,D.storage+=H.storage}if(R.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=A,P>0){T=A%M;const X=M-T;T!==0&&X-D.boundary<0&&(A+=M-T,R.__offset=A)}A+=D.storage}return T=A%M,T>0&&(A+=M-T),_.__size=A,_.__cache={},this}function y(_){const E={boundary:0,storage:0};return typeof _=="number"?(E.boundary=4,E.storage=4):_.isVector2?(E.boundary=8,E.storage=8):_.isVector3||_.isColor?(E.boundary=16,E.storage=12):_.isVector4?(E.boundary=16,E.storage=16):_.isMatrix3?(E.boundary=48,E.storage=48):_.isMatrix4?(E.boundary=64,E.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),E}function x(_){const E=_.target;E.removeEventListener("dispose",x);const A=o.indexOf(E.__bindingPointIndex);o.splice(A,1),t.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function g(){for(const _ in i)t.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}function DW(){const t=wp("canvas");return t.style.display="block",t}class Yb{constructor(e={}){const{canvas:n=DW(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;let m=null,v=null;const y=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=wt,this.useLegacyLights=!0,this.toneMapping=Os,this.toneMappingExposure=1;const g=this;let _=!1,E=0,A=0,M=null,T=-1,P=null;const I=new Dt,R=new Dt;let D=null,F=n.width,X=n.height,z=1,V=null,H=null;const Q=new Dt(0,0,F,X),Z=new Dt(0,0,F,X);let U=!1;const N=new ax;let G=!1,ne=!1,J=null;const ee=new je,te=new O,ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ae(){return M===null?z:1}let K=r;function Ge($,ue){for(let _e=0;_e<$.length;_e++){const ae=$[_e],Ee=n.getContext(ae,ue);if(Ee!==null)return Ee}return null}try{const $={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${wl}`),n.addEventListener("webglcontextlost",Pe,!1),n.addEventListener("webglcontextrestored",nt,!1),n.addEventListener("webglcontextcreationerror",ut,!1),K===null){const ue=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&ue.shift(),K=Ge(ue,$),K===null)throw Ge(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let We,Se,Me,me,re,fe,Le,Be,Ue,Ke,ke,Ye,ht,W,k,Y,ce,we,Te,Qe,ze,ve,Je,q;function ge(){We=new KV(K),Se=new $V(K,We,e),We.init(Se),ve=new bN(K,We,Se),Me=new CW(K,We,Se),me=new qV(K),re=new mW,fe=new TW(K,We,Me,re,Se,ve,me),Le=new WV(g),Be=new JV(g),Ue=new u$(K,Se),Je=new HV(K,We,Ue,Se),Ke=new YV(K,Ue,me,Je),ke=new n7(K,Ke,Ue,me),Te=new t7(K,Se,fe),Y=new VV(re),Ye=new pW(g,Le,Be,We,Se,Je,Y),ht=new IW(g,re),W=new vW,k=new EW(We,Se),we=new zV(g,Le,Be,Me,ke,p,l),ce=new MW(g,ke,Se),q=new BW(K,me,Se,Me),Qe=new GV(K,We,me,Se),ze=new QV(K,We,me,Se),me.programs=Ye.programs,g.capabilities=Se,g.extensions=We,g.properties=re,g.renderLists=W,g.shadowMap=ce,g.state=Me,g.info=me}ge();const be=new PW(g,K);this.xr=be,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const $=We.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=We.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function($){$!==void 0&&(z=$,this.setSize(F,X,!1))},this.getSize=function($){return $.set(F,X)},this.setSize=function($,ue,_e=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=$,X=ue,n.width=Math.floor($*z),n.height=Math.floor(ue*z),_e===!0&&(n.style.width=$+"px",n.style.height=ue+"px"),this.setViewport(0,0,$,ue)},this.getDrawingBufferSize=function($){return $.set(F*z,X*z).floor()},this.setDrawingBufferSize=function($,ue,_e){F=$,X=ue,z=_e,n.width=Math.floor($*_e),n.height=Math.floor(ue*_e),this.setViewport(0,0,$,ue)},this.getCurrentViewport=function($){return $.copy(I)},this.getViewport=function($){return $.copy(Q)},this.setViewport=function($,ue,_e,ae){$.isVector4?Q.set($.x,$.y,$.z,$.w):Q.set($,ue,_e,ae),Me.viewport(I.copy(Q).multiplyScalar(z).floor())},this.getScissor=function($){return $.copy(Z)},this.setScissor=function($,ue,_e,ae){$.isVector4?Z.set($.x,$.y,$.z,$.w):Z.set($,ue,_e,ae),Me.scissor(R.copy(Z).multiplyScalar(z).floor())},this.getScissorTest=function(){return U},this.setScissorTest=function($){Me.setScissorTest(U=$)},this.setOpaqueSort=function($){V=$},this.setTransparentSort=function($){H=$},this.getClearColor=function($){return $.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function($=!0,ue=!0,_e=!0){let ae=0;$&&(ae|=K.COLOR_BUFFER_BIT),ue&&(ae|=K.DEPTH_BUFFER_BIT),_e&&(ae|=K.STENCIL_BUFFER_BIT),K.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Pe,!1),n.removeEventListener("webglcontextrestored",nt,!1),n.removeEventListener("webglcontextcreationerror",ut,!1),W.dispose(),k.dispose(),re.dispose(),Le.dispose(),Be.dispose(),ke.dispose(),Je.dispose(),q.dispose(),Ye.dispose(),be.dispose(),be.removeEventListener("sessionstart",rt),be.removeEventListener("sessionend",Kt),J&&(J.dispose(),J=null),Yt.stop()};function Pe($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function nt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const $=me.autoReset,ue=ce.enabled,_e=ce.autoUpdate,ae=ce.needsUpdate,Ee=ce.type;ge(),me.autoReset=$,ce.enabled=ue,ce.autoUpdate=_e,ce.needsUpdate=ae,ce.type=Ee}function ut($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function $t($){const ue=$.target;ue.removeEventListener("dispose",$t),ie(ue)}function ie($){pe($),re.remove($)}function pe($){const ue=re.get($).programs;ue!==void 0&&(ue.forEach(function(_e){Ye.releaseProgram(_e)}),$.isShaderMaterial&&Ye.releaseShaderCache($))}this.renderBufferDirect=function($,ue,_e,ae,Ee,ot){ue===null&&(ue=ye);const lt=Ee.isMesh&&Ee.matrixWorld.determinant()<0,dt=Om($,ue,_e,ae,Ee);Me.setMaterial(ae,lt);let _t=_e.index,Mt=1;ae.wireframe===!0&&(_t=Ke.getWireframeAttribute(_e),Mt=2);const Ct=_e.drawRange,It=_e.attributes.position;let Qt=Ct.start*Mt,mr=(Ct.start+Ct.count)*Mt;ot!==null&&(Qt=Math.max(Qt,ot.start*Mt),mr=Math.min(mr,(ot.start+ot.count)*Mt)),_t!==null?(Qt=Math.max(Qt,0),mr=Math.min(mr,_t.count)):It!=null&&(Qt=Math.max(Qt,0),mr=Math.min(mr,It.count));const _i=mr-Qt;if(_i<0||_i===1/0)return;Je.setup(Ee,ae,dt,_e,_t);let ps,un=Qe;if(_t!==null&&(ps=Ue.get(_t),un=ze,un.setIndex(ps)),Ee.isMesh)ae.wireframe===!0?(Me.setLineWidth(ae.wireframeLinewidth*Ae()),un.setMode(K.LINES)):un.setMode(K.TRIANGLES);else if(Ee.isLine){let Bt=ae.linewidth;Bt===void 0&&(Bt=1),Me.setLineWidth(Bt*Ae()),Ee.isLineSegments?un.setMode(K.LINES):Ee.isLineLoop?un.setMode(K.LINE_LOOP):un.setMode(K.LINE_STRIP)}else Ee.isPoints?un.setMode(K.POINTS):Ee.isSprite&&un.setMode(K.TRIANGLES);if(Ee.isInstancedMesh)un.renderInstances(Qt,_i,Ee.count);else if(_e.isInstancedBufferGeometry){const Bt=_e._maxInstanceCount!==void 0?_e._maxInstanceCount:1/0,Rl=Math.min(_e.instanceCount,Bt);un.renderInstances(Qt,_i,Rl)}else un.render(Qt,_i)},this.compile=function($,ue){function _e(ae,Ee,ot){ae.transparent===!0&&ae.side===wr&&ae.forceSinglePass===!1?(ae.side=ir,ae.needsUpdate=!0,iu(ae,Ee,ot),ae.side=Us,ae.needsUpdate=!0,iu(ae,Ee,ot),ae.side=wr):iu(ae,Ee,ot)}v=k.get($),v.init(),x.push(v),$.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ue.layers)&&(v.pushLight(ae),ae.castShadow&&v.pushShadow(ae))}),v.setupLights(g.useLegacyLights),$.traverse(function(ae){const Ee=ae.material;if(Ee)if(Array.isArray(Ee))for(let ot=0;ot<Ee.length;ot++){const lt=Ee[ot];_e(lt,$,ae)}else _e(Ee,$,ae)}),x.pop(),v=null};let Ce=null;function Xe($){Ce&&Ce($)}function rt(){Yt.stop()}function Kt(){Yt.start()}const Yt=new _N;Yt.setAnimationLoop(Xe),typeof self<"u"&&Yt.setContext(self),this.setAnimationLoop=function($){Ce=$,be.setAnimationLoop($),$===null?Yt.stop():Yt.start()},be.addEventListener("sessionstart",rt),be.addEventListener("sessionend",Kt),this.render=function($,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(ue),ue=be.getCamera()),$.isScene===!0&&$.onBeforeRender(g,$,ue,M),v=k.get($,x.length),v.init(),x.push(v),ee.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),N.setFromProjectionMatrix(ee),ne=this.localClippingEnabled,G=Y.init(this.clippingPlanes,ne),m=W.get($,y.length),m.init(),y.push(m),ar($,ue,0,g.sortObjects),m.finish(),g.sortObjects===!0&&m.sort(V,H),G===!0&&Y.beginShadows();const _e=v.state.shadowsArray;if(ce.render(_e,$,ue),G===!0&&Y.endShadows(),this.info.autoReset===!0&&this.info.reset(),we.render(m,$),v.setupLights(g.useLegacyLights),ue.isArrayCamera){const ae=ue.cameras;for(let Ee=0,ot=ae.length;Ee<ot;Ee++){const lt=ae[Ee];hs(m,$,lt,lt.viewport)}}else hs(m,$,ue);M!==null&&(fe.updateMultisampleRenderTarget(M),fe.updateRenderTargetMipmap(M)),$.isScene===!0&&$.onAfterRender(g,$,ue),Je.resetDefaultState(),T=-1,P=null,x.pop(),x.length>0?v=x[x.length-1]:v=null,y.pop(),y.length>0?m=y[y.length-1]:m=null};function ar($,ue,_e,ae){if($.visible===!1)return;if($.layers.test(ue.layers)){if($.isGroup)_e=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(ue);else if($.isLight)v.pushLight($),$.castShadow&&v.pushShadow($);else if($.isSprite){if(!$.frustumCulled||N.intersectsSprite($)){ae&&te.setFromMatrixPosition($.matrixWorld).applyMatrix4(ee);const lt=ke.update($),dt=$.material;dt.visible&&m.push($,lt,dt,_e,te.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||N.intersectsObject($))){$.isSkinnedMesh&&$.skeleton.frame!==me.render.frame&&($.skeleton.update(),$.skeleton.frame=me.render.frame);const lt=ke.update($),dt=$.material;if(ae&&(lt.boundingSphere===null&&lt.computeBoundingSphere(),te.copy(lt.boundingSphere.center).applyMatrix4($.matrixWorld).applyMatrix4(ee)),Array.isArray(dt)){const _t=lt.groups;for(let Mt=0,Ct=_t.length;Mt<Ct;Mt++){const It=_t[Mt],Qt=dt[It.materialIndex];Qt&&Qt.visible&&m.push($,lt,Qt,_e,te.z,It)}}else dt.visible&&m.push($,lt,dt,_e,te.z,null)}}const ot=$.children;for(let lt=0,dt=ot.length;lt<dt;lt++)ar(ot[lt],ue,_e,ae)}function hs($,ue,_e,ae){const Ee=$.opaque,ot=$.transmissive,lt=$.transparent;v.setupLightsView(_e),G===!0&&Y.setGlobalState(g.clippingPlanes,_e),ot.length>0&&xn(Ee,ot,ue,_e),ae&&Me.viewport(I.copy(ae)),Ee.length>0&&$r(Ee,ue,_e),ot.length>0&&$r(ot,ue,_e),lt.length>0&&$r(lt,ue,_e),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function xn($,ue,_e,ae){if(J===null){const dt=Se.isWebGL2;J=new yn(1024,1024,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")?ul:zr,minFilter:ks,samples:dt&&a===!0?4:0})}const Ee=g.getRenderTarget();g.setRenderTarget(J),g.clear();const ot=g.toneMapping;g.toneMapping=Os,$r($,_e,ae),fe.updateMultisampleRenderTarget(J),fe.updateRenderTargetMipmap(J);let lt=!1;for(let dt=0,_t=ue.length;dt<_t;dt++){const Mt=ue[dt],Ct=Mt.object,It=Mt.geometry,Qt=Mt.material,mr=Mt.group;if(Qt.side===wr&&Ct.layers.test(ae.layers)){const _i=Qt.side;Qt.side=ir,Qt.needsUpdate=!0,Hi(Ct,_e,ae,It,Qt,mr),Qt.side=_i,Qt.needsUpdate=!0,lt=!0}}lt===!0&&(fe.updateMultisampleRenderTarget(J),fe.updateRenderTargetMipmap(J)),g.setRenderTarget(Ee),g.toneMapping=ot}function $r($,ue,_e){const ae=ue.isScene===!0?ue.overrideMaterial:null;for(let Ee=0,ot=$.length;Ee<ot;Ee++){const lt=$[Ee],dt=lt.object,_t=lt.geometry,Mt=ae===null?lt.material:ae,Ct=lt.group;dt.layers.test(_e.layers)&&Hi(dt,ue,_e,_t,Mt,Ct)}}function Hi($,ue,_e,ae,Ee,ot){$.onBeforeRender(g,ue,_e,ae,Ee,ot),$.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),Ee.onBeforeRender(g,ue,_e,ae,$,ot),Ee.transparent===!0&&Ee.side===wr&&Ee.forceSinglePass===!1?(Ee.side=ir,Ee.needsUpdate=!0,g.renderBufferDirect(_e,ue,ae,Ee,$,ot),Ee.side=Us,Ee.needsUpdate=!0,g.renderBufferDirect(_e,ue,ae,Ee,$,ot),Ee.side=wr):g.renderBufferDirect(_e,ue,ae,Ee,$,ot),$.onAfterRender(g,ue,_e,ae,Ee,ot)}function iu($,ue,_e){ue.isScene!==!0&&(ue=ye);const ae=re.get($),Ee=v.state.lights,ot=v.state.shadowsArray,lt=Ee.state.version,dt=Ye.getParameters($,Ee.state,ot,ue,_e),_t=Ye.getProgramCacheKey(dt);let Mt=ae.programs;ae.environment=$.isMeshStandardMaterial?ue.environment:null,ae.fog=ue.fog,ae.envMap=($.isMeshStandardMaterial?Be:Le).get($.envMap||ae.environment),Mt===void 0&&($.addEventListener("dispose",$t),Mt=new Map,ae.programs=Mt);let Ct=Mt.get(_t);if(Ct!==void 0){if(ae.currentProgram===Ct&&ae.lightsStateVersion===lt)return Lm($,dt),Ct}else dt.uniforms=Ye.getUniforms($),$.onBuild(_e,dt,g),$.onBeforeCompile(dt,g),Ct=Ye.acquireProgram(dt,_t),Mt.set(_t,Ct),ae.uniforms=dt.uniforms;const It=ae.uniforms;(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(It.clippingPlanes=Y.uniform),Lm($,dt),ae.needsLights=i1($),ae.lightsStateVersion=lt,ae.needsLights&&(It.ambientLightColor.value=Ee.state.ambient,It.lightProbe.value=Ee.state.probe,It.directionalLights.value=Ee.state.directional,It.directionalLightShadows.value=Ee.state.directionalShadow,It.spotLights.value=Ee.state.spot,It.spotLightShadows.value=Ee.state.spotShadow,It.rectAreaLights.value=Ee.state.rectArea,It.ltc_1.value=Ee.state.rectAreaLTC1,It.ltc_2.value=Ee.state.rectAreaLTC2,It.pointLights.value=Ee.state.point,It.pointLightShadows.value=Ee.state.pointShadow,It.hemisphereLights.value=Ee.state.hemi,It.directionalShadowMap.value=Ee.state.directionalShadowMap,It.directionalShadowMatrix.value=Ee.state.directionalShadowMatrix,It.spotShadowMap.value=Ee.state.spotShadowMap,It.spotLightMatrix.value=Ee.state.spotLightMatrix,It.spotLightMap.value=Ee.state.spotLightMap,It.pointShadowMap.value=Ee.state.pointShadowMap,It.pointShadowMatrix.value=Ee.state.pointShadowMatrix);const Qt=Ct.getUniforms(),mr=B0.seqWithValue(Qt.seq,It);return ae.currentProgram=Ct,ae.uniformsList=mr,Ct}function Lm($,ue){const _e=re.get($);_e.outputColorSpace=ue.outputColorSpace,_e.instancing=ue.instancing,_e.skinning=ue.skinning,_e.morphTargets=ue.morphTargets,_e.morphNormals=ue.morphNormals,_e.morphColors=ue.morphColors,_e.morphTargetsCount=ue.morphTargetsCount,_e.numClippingPlanes=ue.numClippingPlanes,_e.numIntersection=ue.numClipIntersection,_e.vertexAlphas=ue.vertexAlphas,_e.vertexTangents=ue.vertexTangents,_e.toneMapping=ue.toneMapping}function Om($,ue,_e,ae,Ee){ue.isScene!==!0&&(ue=ye),fe.resetTextureUnits();const ot=ue.fog,lt=ae.isMeshStandardMaterial?ue.environment:null,dt=M===null?g.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:zs,_t=(ae.isMeshStandardMaterial?Be:Le).get(ae.envMap||lt),Mt=ae.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,Ct=!!ae.normalMap&&!!_e.attributes.tangent,It=!!_e.morphAttributes.position,Qt=!!_e.morphAttributes.normal,mr=!!_e.morphAttributes.color,_i=ae.toneMapped?g.toneMapping:Os,ps=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,un=ps!==void 0?ps.length:0,Bt=re.get(ae),Rl=v.state.lights;if(G===!0&&(ne===!0||$!==P)){const nn=$===P&&ae.id===T;Y.setState(ae,$,nn)}let Xn=!1;ae.version===Bt.__version?(Bt.needsLights&&Bt.lightsStateVersion!==Rl.state.version||Bt.outputColorSpace!==dt||Ee.isInstancedMesh&&Bt.instancing===!1||!Ee.isInstancedMesh&&Bt.instancing===!0||Ee.isSkinnedMesh&&Bt.skinning===!1||!Ee.isSkinnedMesh&&Bt.skinning===!0||Bt.envMap!==_t||ae.fog===!0&&Bt.fog!==ot||Bt.numClippingPlanes!==void 0&&(Bt.numClippingPlanes!==Y.numPlanes||Bt.numIntersection!==Y.numIntersection)||Bt.vertexAlphas!==Mt||Bt.vertexTangents!==Ct||Bt.morphTargets!==It||Bt.morphNormals!==Qt||Bt.morphColors!==mr||Bt.toneMapping!==_i||Se.isWebGL2===!0&&Bt.morphTargetsCount!==un)&&(Xn=!0):(Xn=!0,Bt.__version=ae.version);let ms=Bt.currentProgram;Xn===!0&&(ms=iu(ae,ue,Ee));let xo=!1,ei=!1,qt=!1;const St=ms.getUniforms(),Cr=Bt.uniforms;if(Me.useProgram(ms.program)&&(xo=!0,ei=!0,qt=!0),ae.id!==T&&(T=ae.id,ei=!0),xo||P!==$){if(St.setValue(K,"projectionMatrix",$.projectionMatrix),Se.logarithmicDepthBuffer&&St.setValue(K,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),P!==$&&(P=$,ei=!0,qt=!0),ae.isShaderMaterial||ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshStandardMaterial||ae.envMap){const nn=St.map.cameraPosition;nn!==void 0&&nn.setValue(K,te.setFromMatrixPosition($.matrixWorld))}(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&St.setValue(K,"isOrthographic",$.isOrthographicCamera===!0),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial||ae.isShadowMaterial||Ee.isSkinnedMesh)&&St.setValue(K,"viewMatrix",$.matrixWorldInverse)}if(Ee.isSkinnedMesh){St.setOptional(K,Ee,"bindMatrix"),St.setOptional(K,Ee,"bindMatrixInverse");const nn=Ee.skeleton;nn&&(Se.floatVertexTextures?(nn.boneTexture===null&&nn.computeBoneTexture(),St.setValue(K,"boneTexture",nn.boneTexture,fe),St.setValue(K,"boneTextureSize",nn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Jn=_e.morphAttributes;if((Jn.position!==void 0||Jn.normal!==void 0||Jn.color!==void 0&&Se.isWebGL2===!0)&&Te.update(Ee,_e,ms),(ei||Bt.receiveShadow!==Ee.receiveShadow)&&(Bt.receiveShadow=Ee.receiveShadow,St.setValue(K,"receiveShadow",Ee.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(Cr.envMap.value=_t,Cr.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1),ei&&(St.setValue(K,"toneMappingExposure",g.toneMappingExposure),Bt.needsLights&&Mf(Cr,qt),ot&&ae.fog===!0&&ht.refreshFogUniforms(Cr,ot),ht.refreshMaterialUniforms(Cr,ae,z,X,J),B0.upload(K,Bt.uniformsList,Cr,fe)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(B0.upload(K,Bt.uniformsList,Cr,fe),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&St.setValue(K,"center",Ee.center),St.setValue(K,"modelViewMatrix",Ee.modelViewMatrix),St.setValue(K,"normalMatrix",Ee.normalMatrix),St.setValue(K,"modelMatrix",Ee.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){const nn=ae.uniformsGroups;for(let gs=0,ua=nn.length;gs<ua;gs++)if(Se.isWebGL2){const gr=nn[gs];q.update(gr,ms),q.bind(gr,ms)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ms}function Mf($,ue){$.ambientLightColor.needsUpdate=ue,$.lightProbe.needsUpdate=ue,$.directionalLights.needsUpdate=ue,$.directionalLightShadows.needsUpdate=ue,$.pointLights.needsUpdate=ue,$.pointLightShadows.needsUpdate=ue,$.spotLights.needsUpdate=ue,$.spotLightShadows.needsUpdate=ue,$.rectAreaLights.needsUpdate=ue,$.hemisphereLights.needsUpdate=ue}function i1($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function($,ue,_e){re.get($.texture).__webglTexture=ue,re.get($.depthTexture).__webglTexture=_e;const ae=re.get($);ae.__hasExternalTextures=!0,ae.__hasExternalTextures&&(ae.__autoAllocateDepthBuffer=_e===void 0,ae.__autoAllocateDepthBuffer||We.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ae.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function($,ue){const _e=re.get($);_e.__webglFramebuffer=ue,_e.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function($,ue=0,_e=0){M=$,E=ue,A=_e;let ae=!0,Ee=null,ot=!1,lt=!1;if($){const _t=re.get($);_t.__useDefaultFramebuffer!==void 0?(Me.bindFramebuffer(K.FRAMEBUFFER,null),ae=!1):_t.__webglFramebuffer===void 0?fe.setupRenderTarget($):_t.__hasExternalTextures&&fe.rebindTextures($,re.get($.texture).__webglTexture,re.get($.depthTexture).__webglTexture);const Mt=$.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&(lt=!0);const Ct=re.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Ee=Ct[ue],ot=!0):Se.isWebGL2&&$.samples>0&&fe.useMultisampledRTT($)===!1?Ee=re.get($).__webglMultisampledFramebuffer:Ee=Ct,I.copy($.viewport),R.copy($.scissor),D=$.scissorTest}else I.copy(Q).multiplyScalar(z).floor(),R.copy(Z).multiplyScalar(z).floor(),D=U;if(Me.bindFramebuffer(K.FRAMEBUFFER,Ee)&&Se.drawBuffers&&ae&&Me.drawBuffers($,Ee),Me.viewport(I),Me.scissor(R),Me.setScissorTest(D),ot){const _t=re.get($.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+ue,_t.__webglTexture,_e)}else if(lt){const _t=re.get($.texture),Mt=ue||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,_t.__webglTexture,_e||0,Mt)}T=-1},this.readRenderTargetPixels=function($,ue,_e,ae,Ee,ot,lt){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=re.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&lt!==void 0&&(dt=dt[lt]),dt){Me.bindFramebuffer(K.FRAMEBUFFER,dt);try{const _t=$.texture,Mt=_t.format,Ct=_t.type;if(Mt!==li&&ve.convert(Mt)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const It=Ct===ul&&(We.has("EXT_color_buffer_half_float")||Se.isWebGL2&&We.has("EXT_color_buffer_float"));if(Ct!==zr&&ve.convert(Ct)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ct===Is&&(Se.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float")))&&!It){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=$.width-ae&&_e>=0&&_e<=$.height-Ee&&K.readPixels(ue,_e,ae,Ee,ve.convert(Mt),ve.convert(Ct),ot)}finally{const _t=M!==null?re.get(M).__webglFramebuffer:null;Me.bindFramebuffer(K.FRAMEBUFFER,_t)}}},this.copyFramebufferToTexture=function($,ue,_e=0){const ae=Math.pow(2,-_e),Ee=Math.floor(ue.image.width*ae),ot=Math.floor(ue.image.height*ae);fe.setTexture2D(ue,0),K.copyTexSubImage2D(K.TEXTURE_2D,_e,0,0,$.x,$.y,Ee,ot),Me.unbindTexture()},this.copyTextureToTexture=function($,ue,_e,ae=0){const Ee=ue.image.width,ot=ue.image.height,lt=ve.convert(_e.format),dt=ve.convert(_e.type);fe.setTexture2D(_e,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,_e.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,_e.unpackAlignment),ue.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,ae,$.x,$.y,Ee,ot,lt,dt,ue.image.data):ue.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,ae,$.x,$.y,ue.mipmaps[0].width,ue.mipmaps[0].height,lt,ue.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,ae,$.x,$.y,lt,dt,ue.image),ae===0&&_e.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function($,ue,_e,ae,Ee=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ot=$.max.x-$.min.x+1,lt=$.max.y-$.min.y+1,dt=$.max.z-$.min.z+1,_t=ve.convert(ae.format),Mt=ve.convert(ae.type);let Ct;if(ae.isData3DTexture)fe.setTexture3D(ae,0),Ct=K.TEXTURE_3D;else if(ae.isDataArrayTexture)fe.setTexture2DArray(ae,0),Ct=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,ae.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,ae.unpackAlignment);const It=K.getParameter(K.UNPACK_ROW_LENGTH),Qt=K.getParameter(K.UNPACK_IMAGE_HEIGHT),mr=K.getParameter(K.UNPACK_SKIP_PIXELS),_i=K.getParameter(K.UNPACK_SKIP_ROWS),ps=K.getParameter(K.UNPACK_SKIP_IMAGES),un=_e.isCompressedTexture?_e.mipmaps[0]:_e.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,un.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,un.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,$.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,$.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,$.min.z),_e.isDataTexture||_e.isData3DTexture?K.texSubImage3D(Ct,Ee,ue.x,ue.y,ue.z,ot,lt,dt,_t,Mt,un.data):_e.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(Ct,Ee,ue.x,ue.y,ue.z,ot,lt,dt,_t,un.data)):K.texSubImage3D(Ct,Ee,ue.x,ue.y,ue.z,ot,lt,dt,_t,Mt,un),K.pixelStorei(K.UNPACK_ROW_LENGTH,It),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Qt),K.pixelStorei(K.UNPACK_SKIP_PIXELS,mr),K.pixelStorei(K.UNPACK_SKIP_ROWS,_i),K.pixelStorei(K.UNPACK_SKIP_IMAGES,ps),Ee===0&&ae.generateMipmaps&&K.generateMipmap(Ct),Me.unbindTexture()},this.initTexture=function($){$.isCubeTexture?fe.setTextureCube($,0):$.isData3DTexture?fe.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?fe.setTexture2DArray($,0):fe.setTexture2D($,0),Me.unbindTexture()},this.resetState=function(){E=0,A=0,M=null,Me.reset(),Je.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===wt?Qr:qp}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Qr?wt:zs}}class CN extends Yb{}CN.prototype.isWebGL1Renderer=!0;class ux{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Fe(e),this.density=n}clone(){return new ux(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class dx{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Fe(e),this.near=n,this.far=r}clone(){return new dx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Wd extends zt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class nm{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Sp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Di()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Di()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Di()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const jr=new O;class di{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)jr.fromBufferAttribute(this,n),jr.applyMatrix4(e),this.setXYZ(n,jr.x,jr.y,jr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)jr.fromBufferAttribute(this,n),jr.applyNormalMatrix(e),this.setXYZ(n,jr.x,jr.y,jr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)jr.fromBufferAttribute(this,n),jr.transformDirection(e),this.setXYZ(n,jr.x,jr.y,jr.z);return this}setX(e,n){return this.normalized&&(n=bt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Pi(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Pi(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Pi(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Pi(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array),i=bt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=bt(n,this.array),r=bt(r,this.array),i=bt(i,this.array),s=bt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Lt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new di(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Qb extends Nn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Fe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Lu;const ih=new O,Ou=new O,Nu=new O,Fu=new de,sh=new de,TN=new je,pv=new O,oh=new O,mv=new O,lP=new de,rS=new de,cP=new de;class RN extends zt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Lu===void 0){Lu=new xt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new nm(n,5);Lu.setIndex([0,1,2,0,2,3]),Lu.setAttribute("position",new di(r,3,0,!1)),Lu.setAttribute("uv",new di(r,2,3,!1))}this.geometry=Lu,this.material=e!==void 0?e:new Qb,this.center=new de(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ou.setFromMatrixScale(this.matrixWorld),TN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Nu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ou.multiplyScalar(-Nu.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;gv(pv.set(-.5,-.5,0),Nu,o,Ou,i,s),gv(oh.set(.5,-.5,0),Nu,o,Ou,i,s),gv(mv.set(.5,.5,0),Nu,o,Ou,i,s),lP.set(0,0),rS.set(1,0),cP.set(1,1);let a=e.ray.intersectTriangle(pv,oh,mv,!1,ih);if(a===null&&(gv(oh.set(-.5,.5,0),Nu,o,Ou,i,s),rS.set(0,1),a=e.ray.intersectTriangle(pv,mv,oh,!1,ih),a===null))return;const l=e.ray.origin.distanceTo(ih);l<e.near||l>e.far||n.push({distance:l,point:ih.clone(),uv:yc.getInterpolation(ih,pv,oh,mv,lP,rS,cP,new de),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function gv(t,e,n,r,i,s){Fu.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(sh.x=s*Fu.x-i*Fu.y,sh.y=i*Fu.x+s*Fu.y):sh.copy(Fu),t.copy(e),t.x+=sh.x,t.y+=sh.y,t.applyMatrix4(TN)}const vv=new O,uP=new O;class PN extends zt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){vv.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(vv);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){vv.setFromMatrixPosition(e.matrixWorld),uP.setFromMatrixPosition(this.matrixWorld);const r=vv.distanceTo(uP)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const dP=new O,fP=new Dt,hP=new Dt,LW=new O,pP=new je,Uu=new O;class qb extends Zn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new je,this.bindMatrixInverse=new je,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new wn),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)Uu.fromBufferAttribute(n,r),this.applyBoneTransform(r,Uu),this.boundingBox.expandByPoint(Uu)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new gi),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)Uu.fromBufferAttribute(n,r),this.applyBoneTransform(r,Uu),this.boundingSphere.expandByPoint(Uu)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Dt,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;fP.fromBufferAttribute(i.attributes.skinIndex,e),hP.fromBufferAttribute(i.attributes.skinWeight,e),dP.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=hP.getComponent(s);if(o!==0){const a=fP.getComponent(s);pP.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(LW.copy(dP).applyMatrix4(pP),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class fx extends zt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Cd extends fn{constructor(e=null,n=1,r=1,i,s,o,a,l,c=rn,u=rn,d,p){super(null,o,a,l,c,u,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const mP=new je,OW=new je;let Zb=class IN{constructor(e=[],n=[]){this.uuid=Di(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new je)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new je;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:OW;mP.multiplyMatrices(a,n[s]),mP.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new IN(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=hN(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Cd(n,e,e,li,Is);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new fx),this.bones.push(o),this.boneInverses.push(new je().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}};class jd extends Lt{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ku=new je,gP=new je,yv=[],vP=new wn,NW=new je,ah=new Zn,lh=new gi;class eM extends Zn{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new jd(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,NW)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new wn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,ku),vP.copy(e.boundingBox).applyMatrix4(ku),this.boundingBox.union(vP)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new gi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,ku),lh.copy(e.boundingSphere).applyMatrix4(ku),this.boundingSphere.union(lh)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(ah.geometry=this.geometry,ah.material=this.material,ah.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),lh.copy(this.boundingSphere),lh.applyMatrix4(r),e.ray.intersectsSphere(lh)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,ku),gP.multiplyMatrices(r,ku),ah.matrixWorld=gP,ah.raycast(e,yv);for(let o=0,a=yv.length;o<a;o++){const l=yv[o];l.instanceId=s,l.object=this,n.push(l)}yv.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new jd(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Hr extends Nn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Fe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const yP=new O,xP=new O,_P=new je,iS=new bl,xv=new gi;let qo=class extends zt{constructor(e=new xt,n=new Hr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)yP.fromBufferAttribute(n,i-1),xP.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=yP.distanceTo(xP);e.setAttribute("lineDistance",new tt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),xv.copy(r.boundingSphere),xv.applyMatrix4(i),xv.radius+=s,e.ray.intersectsSphere(xv)===!1)return;_P.copy(i).invert(),iS.copy(e.ray).applyMatrix4(_P);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new O,u=new O,d=new O,p=new O,m=this.isLineSegments?2:1,v=r.index,x=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),_=Math.min(v.count,o.start+o.count);for(let E=g,A=_-1;E<A;E+=m){const M=v.getX(E),T=v.getX(E+1);if(c.fromBufferAttribute(x,M),u.fromBufferAttribute(x,T),iS.distanceSqToSegment(c,u,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(p);I<e.near||I>e.far||n.push({distance:I,point:d.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),_=Math.min(x.count,o.start+o.count);for(let E=g,A=_-1;E<A;E+=m){if(c.fromBufferAttribute(x,E),u.fromBufferAttribute(x,E+1),iS.distanceSqToSegment(c,u,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||n.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const SP=new O,wP=new O;class Gs extends qo{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)SP.fromBufferAttribute(n,i),wP.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+SP.distanceTo(wP);e.setAttribute("lineDistance",new tt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class tM extends qo{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class hx extends Nn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Fe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const EP=new je,OE=new bl,_v=new gi,Sv=new O;class nM extends zt{constructor(e=new xt,n=new hx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),_v.copy(r.boundingSphere),_v.applyMatrix4(i),_v.radius+=s,e.ray.intersectsSphere(_v)===!1)return;EP.copy(i).invert(),OE.copy(e.ray).applyMatrix4(EP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,y=m;v<y;v++){const x=c.getX(v);Sv.fromBufferAttribute(d,x),AP(Sv,x,l,i,e,n,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let v=p,y=m;v<y;v++)Sv.fromBufferAttribute(d,v),AP(Sv,v,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function AP(t,e,n,r,i,s,o){const a=OE.distanceSqToPoint(t);if(a<n){const l=new O;OE.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class FW extends fn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Zt,this.magFilter=s!==void 0?s:Zt,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class UW extends fn{constructor(e,n,r){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=rn,this.minFilter=rn,this.generateMipmaps=!1,this.needsUpdate=!0}}class rM extends fn{constructor(e,n,r,i,s,o,a,l,c,u,d,p){super(null,o,a,l,c,u,i,s,d,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class kW extends rM{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Er}}class zW extends fn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $s{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new de:new O);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new O,i=[],s=[],o=[],a=new O,l=new je;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new O)}s[0]=new O,o[0]=new O;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(On(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(On(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class px extends $s{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new de,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*d+this.aX,c=p*d+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class BN extends px{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function iM(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+d)+(l-a)/d;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const wv=new O,sS=new iM,oS=new iM,aS=new iM;class DN extends $s{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new O){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(wv.subVectors(i[0],i[1]).add(i[0]),c=wv);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(wv.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=wv),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(u),m);y<1e-4&&(y=1),v<1e-4&&(v=y),x<1e-4&&(x=y),sS.initNonuniformCatmullRom(c.x,d.x,p.x,u.x,v,y,x),oS.initNonuniformCatmullRom(c.y,d.y,p.y,u.y,v,y,x),aS.initNonuniformCatmullRom(c.z,d.z,p.z,u.z,v,y,x)}else this.curveType==="catmullrom"&&(sS.initCatmullRom(c.x,d.x,p.x,u.x,this.tension),oS.initCatmullRom(c.y,d.y,p.y,u.y,this.tension),aS.initCatmullRom(c.z,d.z,p.z,u.z,this.tension));return r.set(sS.calc(l),oS.calc(l),aS.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new O().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function bP(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function HW(t,e){const n=1-t;return n*n*e}function GW(t,e){return 2*(1-t)*t*e}function $W(t,e){return t*t*e}function Vh(t,e,n,r){return HW(t,e)+GW(t,n)+$W(t,r)}function VW(t,e){const n=1-t;return n*n*n*e}function WW(t,e){const n=1-t;return 3*n*n*t*e}function jW(t,e){return 3*(1-t)*t*t*e}function XW(t,e){return t*t*t*e}function Wh(t,e,n,r,i){return VW(t,e)+WW(t,n)+jW(t,r)+XW(t,i)}class sM extends $s{constructor(e=new de,n=new de,r=new de,i=new de){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new de){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Wh(e,i.x,s.x,o.x,a.x),Wh(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class LN extends $s{constructor(e=new O,n=new O,r=new O,i=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new O){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Wh(e,i.x,s.x,o.x,a.x),Wh(e,i.y,s.y,o.y,a.y),Wh(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mx extends $s{constructor(e=new de,n=new de){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new de){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new de){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ON extends $s{constructor(e=new O,n=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new O){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new O){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oM extends $s{constructor(e=new de,n=new de,r=new de){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new de){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Vh(e,i.x,s.x,o.x),Vh(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aM extends $s{constructor(e=new O,n=new O,r=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new O){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Vh(e,i.x,s.x,o.x),Vh(e,i.y,s.y,o.y),Vh(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lM extends $s{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new de){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(bP(a,l.x,c.x,u.x,d.x),bP(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new de().fromArray(i))}return this}}var cM=Object.freeze({__proto__:null,ArcCurve:BN,CatmullRomCurve3:DN,CubicBezierCurve:sM,CubicBezierCurve3:LN,EllipseCurve:px,LineCurve:mx,LineCurve3:ON,QuadraticBezierCurve:oM,QuadraticBezierCurve3:aM,SplineCurve:lM});class NN extends $s{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new mx(n,e))}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new cM[i.type]().fromJSON(i))}return this}}class Ep extends NN{constructor(e){super(),this.type="Path",this.currentPoint=new de,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new mx(this.currentPoint.clone(),new de(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new oM(this.currentPoint.clone(),new de(e,n),new de(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new sM(this.currentPoint.clone(),new de(e,n),new de(r,i),new de(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new lM(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new px(e,n,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class uf extends xt{constructor(e=[new de(0,-.5),new de(.5,0),new de(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=On(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,d=new O,p=new de,m=new O,v=new O,y=new O;let x=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,v.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(v)}for(let _=0;_<=n;_++){const E=r+_*u*i,A=Math.sin(E),M=Math.cos(E);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*A,d.y=e[T].y,d.z=e[T].x*M,o.push(d.x,d.y,d.z),p.x=_/n,p.y=T/(e.length-1),a.push(p.x,p.y);const P=l[3*T+0]*A,I=l[3*T+1],R=l[3*T+0]*M;c.push(P,I,R)}}for(let _=0;_<n;_++)for(let E=0;E<e.length-1;E++){const A=E+_*e.length,M=A,T=A+e.length,P=A+e.length+1,I=A+1;s.push(M,T,I),s.push(P,I,T)}this.setIndex(s),this.setAttribute("position",new tt(o,3)),this.setAttribute("uv",new tt(a,2)),this.setAttribute("normal",new tt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uf(e.points,e.segments,e.phiStart,e.phiLength)}}class rm extends uf{constructor(e=1,n=1,r=4,i=8){const s=new Ep;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new rm(e.radius,e.length,e.capSegments,e.radialSegments)}}class im extends xt{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new O,u=new de;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=n;d++,p+=3){const m=r+d/n*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new tt(o,3)),this.setAttribute("normal",new tt(a,3)),this.setAttribute("uv",new tt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new im(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class jc extends xt{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],p=[],m=[];let v=0;const y=[],x=r/2;let g=0;_(),o===!1&&(e>0&&E(!0),n>0&&E(!1)),this.setIndex(u),this.setAttribute("position",new tt(d,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(m,2));function _(){const A=new O,M=new O;let T=0;const P=(n-e)/r;for(let I=0;I<=s;I++){const R=[],D=I/s,F=D*(n-e)+e;for(let X=0;X<=i;X++){const z=X/i,V=z*l+a,H=Math.sin(V),Q=Math.cos(V);M.x=F*H,M.y=-D*r+x,M.z=F*Q,d.push(M.x,M.y,M.z),A.set(H,P,Q).normalize(),p.push(A.x,A.y,A.z),m.push(z,1-D),R.push(v++)}y.push(R)}for(let I=0;I<i;I++)for(let R=0;R<s;R++){const D=y[R][I],F=y[R+1][I],X=y[R+1][I+1],z=y[R][I+1];u.push(D,F,z),u.push(F,X,z),T+=6}c.addGroup(g,T,0),g+=T}function E(A){const M=v,T=new de,P=new O;let I=0;const R=A===!0?e:n,D=A===!0?1:-1;for(let X=1;X<=i;X++)d.push(0,x*D,0),p.push(0,D,0),m.push(.5,.5),v++;const F=v;for(let X=0;X<=i;X++){const V=X/i*l+a,H=Math.cos(V),Q=Math.sin(V);P.x=R*Q,P.y=x*D,P.z=R*H,d.push(P.x,P.y,P.z),p.push(0,D,0),T.x=H*.5+.5,T.y=Q*.5*D+.5,m.push(T.x,T.y),v++}for(let X=0;X<i;X++){const z=M+X,V=F+X;A===!0?u.push(V,V+1,z):u.push(V+1,V,z),I+=3}c.addGroup(g,I,A===!0?1:2),g+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sm extends jc{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new sm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sa extends xt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new tt(s,3)),this.setAttribute("normal",new tt(s.slice(),3)),this.setAttribute("uv",new tt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const E=new O,A=new O,M=new O;for(let T=0;T<n.length;T+=3)m(n[T+0],E),m(n[T+1],A),m(n[T+2],M),l(E,A,M,_)}function l(_,E,A,M){const T=M+1,P=[];for(let I=0;I<=T;I++){P[I]=[];const R=_.clone().lerp(A,I/T),D=E.clone().lerp(A,I/T),F=T-I;for(let X=0;X<=F;X++)X===0&&I===T?P[I][X]=R:P[I][X]=R.clone().lerp(D,X/F)}for(let I=0;I<T;I++)for(let R=0;R<2*(T-I)-1;R++){const D=Math.floor(R/2);R%2===0?(p(P[I][D+1]),p(P[I+1][D]),p(P[I][D])):(p(P[I][D+1]),p(P[I+1][D+1]),p(P[I+1][D]))}}function c(_){const E=new O;for(let A=0;A<s.length;A+=3)E.x=s[A+0],E.y=s[A+1],E.z=s[A+2],E.normalize().multiplyScalar(_),s[A+0]=E.x,s[A+1]=E.y,s[A+2]=E.z}function u(){const _=new O;for(let E=0;E<s.length;E+=3){_.x=s[E+0],_.y=s[E+1],_.z=s[E+2];const A=x(_)/2/Math.PI+.5,M=g(_)/Math.PI+.5;o.push(A,1-M)}v(),d()}function d(){for(let _=0;_<o.length;_+=6){const E=o[_+0],A=o[_+2],M=o[_+4],T=Math.max(E,A,M),P=Math.min(E,A,M);T>.9&&P<.1&&(E<.2&&(o[_+0]+=1),A<.2&&(o[_+2]+=1),M<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,E){const A=_*3;E.x=e[A+0],E.y=e[A+1],E.z=e[A+2]}function v(){const _=new O,E=new O,A=new O,M=new O,T=new de,P=new de,I=new de;for(let R=0,D=0;R<s.length;R+=9,D+=6){_.set(s[R+0],s[R+1],s[R+2]),E.set(s[R+3],s[R+4],s[R+5]),A.set(s[R+6],s[R+7],s[R+8]),T.set(o[D+0],o[D+1]),P.set(o[D+2],o[D+3]),I.set(o[D+4],o[D+5]),M.copy(_).add(E).add(A).divideScalar(3);const F=x(M);y(T,D+0,_,F),y(P,D+2,E,F),y(I,D+4,A,F)}}function y(_,E,A,M){M<0&&_.x===1&&(o[E]=_.x-1),A.x===0&&A.z===0&&(o[E]=M/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sa(e.vertices,e.indices,e.radius,e.details)}}class om extends sa{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new om(e.radius,e.detail)}}const Ev=new O,Av=new O,lS=new O,bv=new yc;class dy extends xt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Ac*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:y,b:x,c:g}=bv;if(y.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),bv.getNormal(lS),d[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,d[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,d[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const E=(_+1)%3,A=d[_],M=d[E],T=bv[u[_]],P=bv[u[E]],I=`${A}_${M}`,R=`${M}_${A}`;R in p&&p[R]?(lS.dot(p[R].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(P.x,P.y,P.z)),p[R]=null):I in p||(p[I]={index0:c[_],index1:c[E],normal:lS.clone()})}}for(const v in p)if(p[v]){const{index0:y,index1:x}=p[v];Ev.fromBufferAttribute(a,y),Av.fromBufferAttribute(a,x),m.push(Ev.x,Ev.y,Ev.z),m.push(Av.x,Av.y,Av.z)}this.setAttribute("position",new tt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Cc extends Ep{constructor(e){super(e),this.uuid=Di(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Ep().fromJSON(i))}return this}}const JW={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=FN(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,p,m;if(r&&(s=ZW(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let v=n;v<i;v+=n)d=t[v],p=t[v+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return Ap(s,o,n,a,l,m,0),o}};function FN(t,e,n,r,i){let s,o;if(i===uj(t,e,n,r)>0)for(s=e;s<n;s+=r)o=MP(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=MP(s,t[s],t[s+1],o);return o&&gx(o,o.next)&&(Mp(o),o=o.next),o}function Oc(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(gx(n,n.next)||Cn(n.prev,n,n.next)===0)){if(Mp(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Ap(t,e,n,r,i,s,o){if(!t)return;!o&&s&&ij(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?YW(t,r,i,s):KW(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Mp(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=QW(Oc(t),e,n),Ap(t,e,n,r,i,s,2)):o===2&&qW(t,e,n,r,i,s):Ap(Oc(t),e,n,r,i,s,1);break}}}function KW(t){const e=t.prev,n=t,r=t.next;if(Cn(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=u&&v.x<=p&&v.y>=d&&v.y<=m&&md(i,a,s,l,o,c,v.x,v.y)&&Cn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function YW(t,e,n,r){const i=t.prev,s=t,o=t.next;if(Cn(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=u<d?u<p?u:p:d<p?d:p,y=a>l?a>c?a:c:l>c?l:c,x=u>d?u>p?u:p:d>p?d:p,g=NE(m,v,e,n,r),_=NE(y,x,e,n,r);let E=t.prevZ,A=t.nextZ;for(;E&&E.z>=g&&A&&A.z<=_;){if(E.x>=m&&E.x<=y&&E.y>=v&&E.y<=x&&E!==i&&E!==o&&md(a,u,l,d,c,p,E.x,E.y)&&Cn(E.prev,E,E.next)>=0||(E=E.prevZ,A.x>=m&&A.x<=y&&A.y>=v&&A.y<=x&&A!==i&&A!==o&&md(a,u,l,d,c,p,A.x,A.y)&&Cn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;E&&E.z>=g;){if(E.x>=m&&E.x<=y&&E.y>=v&&E.y<=x&&E!==i&&E!==o&&md(a,u,l,d,c,p,E.x,E.y)&&Cn(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;A&&A.z<=_;){if(A.x>=m&&A.x<=y&&A.y>=v&&A.y<=x&&A!==i&&A!==o&&md(a,u,l,d,c,p,A.x,A.y)&&Cn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function QW(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!gx(i,s)&&UN(i,r,r.next,s)&&bp(i,s)&&bp(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Mp(r),Mp(r.next),r=t=s),r=r.next}while(r!==t);return Oc(r)}function qW(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&aj(o,a)){let l=kN(o,a);o=Oc(o,o.next),l=Oc(l,l.next),Ap(o,e,n,r,i,s,0),Ap(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function ZW(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=FN(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(oj(c));for(i.sort(ej),s=0;s<i.length;s++)n=tj(i[s],n);return n}function ej(t,e){return t.x-e.x}function tj(t,e){const n=nj(t,e);if(!n)return e;const r=kN(n,t);return Oc(r,r.next),Oc(n,n.next)}function nj(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&md(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),bp(n,t)&&(d<u||d===u&&(n.x>i.x||n.x===i.x&&rj(i,n)))&&(i=n,u=d)),n=n.next;while(n!==a);return i}function rj(t,e){return Cn(t.prev,t,e.prev)<0&&Cn(e.next,t,t.next)<0}function ij(t,e,n,r){let i=t;do i.z===0&&(i.z=NE(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,sj(i)}function sj(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function NE(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function oj(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function md(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function aj(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!lj(t,e)&&(bp(t,e)&&bp(e,t)&&cj(t,e)&&(Cn(t.prev,t,e.prev)||Cn(t,e.prev,e))||gx(t,e)&&Cn(t.prev,t,t.next)>0&&Cn(e.prev,e,e.next)>0)}function Cn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function gx(t,e){return t.x===e.x&&t.y===e.y}function UN(t,e,n,r){const i=Cv(Cn(t,e,n)),s=Cv(Cn(t,e,r)),o=Cv(Cn(n,r,t)),a=Cv(Cn(n,r,e));return!!(i!==s&&o!==a||i===0&&Mv(t,n,e)||s===0&&Mv(t,r,e)||o===0&&Mv(n,t,r)||a===0&&Mv(n,e,r))}function Mv(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Cv(t){return t>0?1:t<0?-1:0}function lj(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&UN(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function bp(t,e){return Cn(t.prev,t,t.next)<0?Cn(t,e,t.next)>=0&&Cn(t,t.prev,e)>=0:Cn(t,e,t.prev)<0||Cn(t,t.next,e)<0}function cj(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function kN(t,e){const n=new FE(t.i,t.x,t.y),r=new FE(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function MP(t,e,n,r){const i=new FE(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Mp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function FE(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uj(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class uo{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return uo.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];CP(e),TP(r,e);let o=e.length;n.forEach(CP);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,TP(r,n[l]);const a=JW.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function CP(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function TP(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class df extends xt{constructor(e=new Cc([new de(.5,.5),new de(-.5,.5),new de(-.5,-.5),new de(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new tt(i,3)),this.setAttribute("uv",new tt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,v=n.bevelSize!==void 0?n.bevelSize:m-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:dj;let E,A=!1,M,T,P,I;g&&(E=g.getSpacedPoints(u),A=!0,p=!1,M=g.computeFrenetFrames(u,!1),T=new O,P=new O,I=new O),p||(x=0,m=0,v=0,y=0);const R=a.extractPoints(c);let D=R.shape;const F=R.holes;if(!uo.isClockWise(D)){D=D.reverse();for(let me=0,re=F.length;me<re;me++){const fe=F[me];uo.isClockWise(fe)&&(F[me]=fe.reverse())}}const z=uo.triangulateShape(D,F),V=D;for(let me=0,re=F.length;me<re;me++){const fe=F[me];D=D.concat(fe)}function H(me,re,fe){return re||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().addScaledVector(re,fe)}const Q=D.length,Z=z.length;function U(me,re,fe){let Le,Be,Ue;const Ke=me.x-re.x,ke=me.y-re.y,Ye=fe.x-me.x,ht=fe.y-me.y,W=Ke*Ke+ke*ke,k=Ke*ht-ke*Ye;if(Math.abs(k)>Number.EPSILON){const Y=Math.sqrt(W),ce=Math.sqrt(Ye*Ye+ht*ht),we=re.x-ke/Y,Te=re.y+Ke/Y,Qe=fe.x-ht/ce,ze=fe.y+Ye/ce,ve=((Qe-we)*ht-(ze-Te)*Ye)/(Ke*ht-ke*Ye);Le=we+Ke*ve-me.x,Be=Te+ke*ve-me.y;const Je=Le*Le+Be*Be;if(Je<=2)return new de(Le,Be);Ue=Math.sqrt(Je/2)}else{let Y=!1;Ke>Number.EPSILON?Ye>Number.EPSILON&&(Y=!0):Ke<-Number.EPSILON?Ye<-Number.EPSILON&&(Y=!0):Math.sign(ke)===Math.sign(ht)&&(Y=!0),Y?(Le=-ke,Be=Ke,Ue=Math.sqrt(W)):(Le=Ke,Be=ke,Ue=Math.sqrt(W/2))}return new de(Le/Ue,Be/Ue)}const N=[];for(let me=0,re=V.length,fe=re-1,Le=me+1;me<re;me++,fe++,Le++)fe===re&&(fe=0),Le===re&&(Le=0),N[me]=U(V[me],V[fe],V[Le]);const G=[];let ne,J=N.concat();for(let me=0,re=F.length;me<re;me++){const fe=F[me];ne=[];for(let Le=0,Be=fe.length,Ue=Be-1,Ke=Le+1;Le<Be;Le++,Ue++,Ke++)Ue===Be&&(Ue=0),Ke===Be&&(Ke=0),ne[Le]=U(fe[Le],fe[Ue],fe[Ke]);G.push(ne),J=J.concat(ne)}for(let me=0;me<x;me++){const re=me/x,fe=m*Math.cos(re*Math.PI/2),Le=v*Math.sin(re*Math.PI/2)+y;for(let Be=0,Ue=V.length;Be<Ue;Be++){const Ke=H(V[Be],N[Be],Le);K(Ke.x,Ke.y,-fe)}for(let Be=0,Ue=F.length;Be<Ue;Be++){const Ke=F[Be];ne=G[Be];for(let ke=0,Ye=Ke.length;ke<Ye;ke++){const ht=H(Ke[ke],ne[ke],Le);K(ht.x,ht.y,-fe)}}}const ee=v+y;for(let me=0;me<Q;me++){const re=p?H(D[me],J[me],ee):D[me];A?(P.copy(M.normals[0]).multiplyScalar(re.x),T.copy(M.binormals[0]).multiplyScalar(re.y),I.copy(E[0]).add(P).add(T),K(I.x,I.y,I.z)):K(re.x,re.y,0)}for(let me=1;me<=u;me++)for(let re=0;re<Q;re++){const fe=p?H(D[re],J[re],ee):D[re];A?(P.copy(M.normals[me]).multiplyScalar(fe.x),T.copy(M.binormals[me]).multiplyScalar(fe.y),I.copy(E[me]).add(P).add(T),K(I.x,I.y,I.z)):K(fe.x,fe.y,d/u*me)}for(let me=x-1;me>=0;me--){const re=me/x,fe=m*Math.cos(re*Math.PI/2),Le=v*Math.sin(re*Math.PI/2)+y;for(let Be=0,Ue=V.length;Be<Ue;Be++){const Ke=H(V[Be],N[Be],Le);K(Ke.x,Ke.y,d+fe)}for(let Be=0,Ue=F.length;Be<Ue;Be++){const Ke=F[Be];ne=G[Be];for(let ke=0,Ye=Ke.length;ke<Ye;ke++){const ht=H(Ke[ke],ne[ke],Le);A?K(ht.x,ht.y+E[u-1].y,E[u-1].x+fe):K(ht.x,ht.y,d+fe)}}}te(),ye();function te(){const me=i.length/3;if(p){let re=0,fe=Q*re;for(let Le=0;Le<Z;Le++){const Be=z[Le];Ge(Be[2]+fe,Be[1]+fe,Be[0]+fe)}re=u+x*2,fe=Q*re;for(let Le=0;Le<Z;Le++){const Be=z[Le];Ge(Be[0]+fe,Be[1]+fe,Be[2]+fe)}}else{for(let re=0;re<Z;re++){const fe=z[re];Ge(fe[2],fe[1],fe[0])}for(let re=0;re<Z;re++){const fe=z[re];Ge(fe[0]+Q*u,fe[1]+Q*u,fe[2]+Q*u)}}r.addGroup(me,i.length/3-me,0)}function ye(){const me=i.length/3;let re=0;Ae(V,re),re+=V.length;for(let fe=0,Le=F.length;fe<Le;fe++){const Be=F[fe];Ae(Be,re),re+=Be.length}r.addGroup(me,i.length/3-me,1)}function Ae(me,re){let fe=me.length;for(;--fe>=0;){const Le=fe;let Be=fe-1;Be<0&&(Be=me.length-1);for(let Ue=0,Ke=u+x*2;Ue<Ke;Ue++){const ke=Q*Ue,Ye=Q*(Ue+1),ht=re+Le+ke,W=re+Be+ke,k=re+Be+Ye,Y=re+Le+Ye;We(ht,W,k,Y)}}}function K(me,re,fe){l.push(me),l.push(re),l.push(fe)}function Ge(me,re,fe){Se(me),Se(re),Se(fe);const Le=i.length/3,Be=_.generateTopUV(r,i,Le-3,Le-2,Le-1);Me(Be[0]),Me(Be[1]),Me(Be[2])}function We(me,re,fe,Le){Se(me),Se(re),Se(Le),Se(re),Se(fe),Se(Le);const Be=i.length/3,Ue=_.generateSideWallUV(r,i,Be-6,Be-3,Be-2,Be-1);Me(Ue[0]),Me(Ue[1]),Me(Ue[3]),Me(Ue[1]),Me(Ue[2]),Me(Ue[3])}function Se(me){i.push(l[me*3+0]),i.push(l[me*3+1]),i.push(l[me*3+2])}function Me(me){s.push(me.x),s.push(me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return fj(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new cM[i.type]().fromJSON(i)),new df(r,e.options)}}const dj={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new de(s,o),new de(a,l),new de(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],y=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new de(o,1-l),new de(c,1-d),new de(p,1-v),new de(y,1-g)]:[new de(a,1-l),new de(u,1-d),new de(m,1-v),new de(x,1-g)]}};function fj(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class am extends sa{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new am(e.radius,e.detail)}}class ff extends sa{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new ff(e.radius,e.detail)}}class lm extends xt{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const p=(n-e)/i,m=new O,v=new de;for(let y=0;y<=i;y++){for(let x=0;x<=r;x++){const g=s+x/r*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/n+1)/2,v.y=(m.y/n+1)/2,u.push(v.x,v.y)}d+=p}for(let y=0;y<i;y++){const x=y*(r+1);for(let g=0;g<r;g++){const _=g+x,E=_,A=_+r+1,M=_+r+2,T=_+1;a.push(E,A,T),a.push(A,M,T)}}this.setIndex(a),this.setAttribute("position",new tt(l,3)),this.setAttribute("normal",new tt(c,3)),this.setAttribute("uv",new tt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lm(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cm extends xt{constructor(e=new Cc([new de(0,.5),new de(-.5,-.5),new de(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new tt(i,3)),this.setAttribute("normal",new tt(s,3)),this.setAttribute("uv",new tt(o,2));function c(u){const d=i.length/3,p=u.extractPoints(n);let m=p.shape;const v=p.holes;uo.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=v.length;x<g;x++){const _=v[x];uo.isClockWise(_)===!0&&(v[x]=_.reverse())}const y=uo.triangulateShape(m,v);for(let x=0,g=v.length;x<g;x++){const _=v[x];m=m.concat(_)}for(let x=0,g=m.length;x<g;x++){const _=m[x];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let x=0,g=y.length;x<g;x++){const _=y[x],E=_[0]+d,A=_[1]+d,M=_[2]+d;r.push(E,A,M),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return hj(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new cm(r,e.curveSegments)}}function hj(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class hf extends xt{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new O,p=new O,m=[],v=[],y=[],x=[];for(let g=0;g<=r;g++){const _=[],E=g/r;let A=0;g===0&&o===0?A=.5/n:g===r&&l===Math.PI&&(A=-.5/n);for(let M=0;M<=n;M++){const T=M/n;d.x=-e*Math.cos(i+T*s)*Math.sin(o+E*a),d.y=e*Math.cos(o+E*a),d.z=e*Math.sin(i+T*s)*Math.sin(o+E*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),x.push(T+A,1-E),_.push(c++)}u.push(_)}for(let g=0;g<r;g++)for(let _=0;_<n;_++){const E=u[g][_+1],A=u[g][_],M=u[g+1][_],T=u[g+1][_+1];(g!==0||o>0)&&m.push(E,A,T),(g!==r-1||l<Math.PI)&&m.push(A,M,T)}this.setIndex(m),this.setAttribute("position",new tt(v,3)),this.setAttribute("normal",new tt(y,3)),this.setAttribute("uv",new tt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class um extends sa{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new um(e.radius,e.detail)}}class dm extends xt{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new O,d=new O,p=new O;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const y=v/i*s,x=m/r*Math.PI*2;d.x=(e+n*Math.cos(x))*Math.cos(y),d.y=(e+n*Math.cos(x))*Math.sin(y),d.z=n*Math.sin(x),a.push(d.x,d.y,d.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),p.subVectors(d,u).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const y=(i+1)*m+v-1,x=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,_=(i+1)*m+v;o.push(y,x,_),o.push(x,g,_)}this.setIndex(o),this.setAttribute("position",new tt(a,3)),this.setAttribute("normal",new tt(l,3)),this.setAttribute("uv",new tt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class fm extends xt{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new O,p=new O,m=new O,v=new O,y=new O,x=new O,g=new O;for(let E=0;E<=r;++E){const A=E/r*s*Math.PI*2;_(A,s,o,e,m),_(A+.01,s,o,e,v),x.subVectors(v,m),g.addVectors(v,m),y.crossVectors(x,g),g.crossVectors(y,x),y.normalize(),g.normalize();for(let M=0;M<=i;++M){const T=M/i*Math.PI*2,P=-n*Math.cos(T),I=n*Math.sin(T);d.x=m.x+(P*g.x+I*y.x),d.y=m.y+(P*g.y+I*y.y),d.z=m.z+(P*g.z+I*y.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),u.push(E/r),u.push(M/i)}}for(let E=1;E<=r;E++)for(let A=1;A<=i;A++){const M=(i+1)*(E-1)+(A-1),T=(i+1)*E+(A-1),P=(i+1)*E+A,I=(i+1)*(E-1)+A;a.push(M,T,I),a.push(T,P,I)}this.setIndex(a),this.setAttribute("position",new tt(l,3)),this.setAttribute("normal",new tt(c,3)),this.setAttribute("uv",new tt(u,2));function _(E,A,M,T,P){const I=Math.cos(E),R=Math.sin(E),D=M/A*E,F=Math.cos(D);P.x=T*(2+F)*.5*I,P.y=T*(2+F)*R*.5,P.z=T*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class hm extends xt{constructor(e=new aM(new O(-1,-1,0),new O(-1,1,0),new O(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new O,l=new O,c=new de;let u=new O;const d=[],p=[],m=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new tt(d,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(m,2));function y(){for(let E=0;E<n;E++)x(E);x(s===!1?n:0),_(),g()}function x(E){u=e.getPointAt(E/n,u);const A=o.normals[E],M=o.binormals[E];for(let T=0;T<=i;T++){const P=T/i*Math.PI*2,I=Math.sin(P),R=-Math.cos(P);l.x=R*A.x+I*M.x,l.y=R*A.y+I*M.y,l.z=R*A.z+I*M.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let E=1;E<=n;E++)for(let A=1;A<=i;A++){const M=(i+1)*(E-1)+(A-1),T=(i+1)*E+(A-1),P=(i+1)*E+A,I=(i+1)*(E-1)+A;v.push(M,T,I),v.push(T,P,I)}}function _(){for(let E=0;E<=n;E++)for(let A=0;A<=i;A++)c.x=E/n,c.y=A/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new hm(new cM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class uM extends xt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new O,s=new O;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],p=d.start,m=d.count;for(let v=p,y=p+m;v<y;v+=3)for(let x=0;x<3;x++){const g=a.getX(v+x),_=a.getX(v+(x+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),RP(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),RP(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new tt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function RP(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var PP=Object.freeze({__proto__:null,BoxGeometry:fo,CapsuleGeometry:rm,CircleGeometry:im,ConeGeometry:sm,CylinderGeometry:jc,DodecahedronGeometry:om,EdgesGeometry:dy,ExtrudeGeometry:df,IcosahedronGeometry:am,LatheGeometry:uf,OctahedronGeometry:ff,PlaneGeometry:Wc,PolyhedronGeometry:sa,RingGeometry:lm,ShapeGeometry:cm,SphereGeometry:hf,TetrahedronGeometry:um,TorusGeometry:dm,TorusKnotGeometry:fm,TubeGeometry:hm,WireframeGeometry:uM});class zN extends Nn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Fe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class HN extends jn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class pm extends Nn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oa extends pm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new de(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return On(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Fe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Fe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Fe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class GN extends Nn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Fe(16777215),this.specular=new Fe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $N extends Nn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class dM extends Nn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class VN extends Nn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WN extends Nn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jN extends Hr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Zi(t,e,n){return fM(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function xc(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function fM(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function XN(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function UE(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function hM(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function pj(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<n||v>=r)){d.push(c.times[m]);for(let y=0;y<u;++y)p.push(c.values[m*u+y])}}d.length!==0&&(c.times=xc(d,c.times.constructor),c.values=xc(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function mj(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let y;if(s<=a.times[0]){const g=u,_=d-u;y=Zi(a.values,g,_)}else if(s>=a.times[v]){const g=v*d+u,_=g+d-u;y=Zi(a.values,g,_)}else{const g=a.createInterpolant(),_=u,E=d-u;g.evaluate(s),y=Zi(g.resultBuffer,_,E)}l==="quaternion"&&new Wn().fromArray(y).normalize().conjugate().toArray(y);const x=c.times.length;for(let g=0;g<x;++g){const _=g*m+p;if(l==="quaternion")Wn.multiplyQuaternionsFlat(c.values,_,y,0,c.values,_);else{const E=m-p*2;for(let A=0;A<E;++A)c.values[_+A]-=y[A]}}}return t.blendMode=kb,t}const gj={arraySlice:Zi,convertArray:xc,isTypedArray:fM,getKeyframeOrder:XN,sortedArray:UE,flattenJSON:hM,subclip:pj,makeClipAdditive:mj};class pf{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class JN extends pf{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:mc,endingEnd:mc}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case gc:s=e,a=2*n-r;break;case _p:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case gc:o=e,l=2*r-n;break;case _p:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-n)/(i-n),y=v*v,x=y*v,g=-p*x+2*p*y-p*v,_=(1+p)*x+(-1.5-2*p)*y+(-.5+p)*v+1,E=(-1-m)*x+(1.5+m)*y+.5*v,A=m*x-m*y;for(let M=0;M!==a;++M)s[M]=g*o[u+M]+_*o[c+M]+E*o[l+M]+A*o[d+M];return s}}class pM extends pf{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),d=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*u;return s}}class KN extends pf{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Vs{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xc(n,this.TimeBufferType),this.values=xc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:xc(e.times,Array),values:xc(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new KN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new JN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Gd:n=this.InterpolantFactoryMethodDiscrete;break;case Lc:n=this.InterpolantFactoryMethodLinear;break;case P0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gd;case this.InterpolantFactoryMethodLinear:return Lc;case this.InterpolantFactoryMethodSmooth:return P0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Zi(r,s,o),this.values=Zi(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&fM(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Zi(this.times),n=Zi(this.values),r=this.getValueSize(),i=this.getInterpolation()===P0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let v=0;v!==r;++v){const y=n[d+v];if(y!==n[p+v]||y!==n[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)n[p+m]=n[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=Zi(e,0,o),this.values=Zi(n,0,o*r)):(this.times=e,this.values=n),this}clone(){const e=Zi(this.times,0),n=Zi(this.values,0),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Vs.prototype.TimeBufferType=Float32Array;Vs.prototype.ValueBufferType=Float32Array;Vs.prototype.DefaultInterpolation=Lc;class Xc extends Vs{}Xc.prototype.ValueTypeName="bool";Xc.prototype.ValueBufferType=Array;Xc.prototype.DefaultInterpolation=Gd;Xc.prototype.InterpolantFactoryMethodLinear=void 0;Xc.prototype.InterpolantFactoryMethodSmooth=void 0;class mM extends Vs{}mM.prototype.ValueTypeName="color";class Xd extends Vs{}Xd.prototype.ValueTypeName="number";class YN extends pf{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)Wn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class fl extends Vs{InterpolantFactoryMethodLinear(e){return new YN(this.times,this.values,this.getValueSize(),e)}}fl.prototype.ValueTypeName="quaternion";fl.prototype.DefaultInterpolation=Lc;fl.prototype.InterpolantFactoryMethodSmooth=void 0;class Jc extends Vs{}Jc.prototype.ValueTypeName="string";Jc.prototype.ValueBufferType=Array;Jc.prototype.DefaultInterpolation=Gd;Jc.prototype.InterpolantFactoryMethodLinear=void 0;Jc.prototype.InterpolantFactoryMethodSmooth=void 0;class Jd extends Vs{}Jd.prototype.ValueTypeName="vector";class Kd{constructor(e,n=-1,r,i=sx){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Di(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(yj(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Vs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=XN(l);l=UE(l,1,u),c=UE(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Xd(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let p=i[d];p||(i[d]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,v,y){if(m.length!==0){const x=[],g=[];hM(m,x,g,v),x.length!==0&&y.push(new d(p,x,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let y=0;y<p[v].morphTargets.length;y++)m[p[v].morphTargets[y]]=-1;for(const y in m){const x=[],g=[];for(let _=0;_!==p[v].morphTargets.length;++_){const E=p[v];x.push(E.time),g.push(E.morphTarget===y?1:0)}i.push(new Xd(".morphTargetInfluence["+y+"]",x,g))}l=m.length*o}else{const m=".bones["+n[d].name+"]";r(Jd,m+".position",p,"pos",i),r(fl,m+".quaternion",p,"rot",i),r(Jd,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function vj(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xd;case"vector":case"vector2":case"vector3":case"vector4":return Jd;case"color":return mM;case"quaternion":return fl;case"bool":case"boolean":return Xc;case"string":return Jc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function yj(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=vj(t.type);if(t.times===void 0){const n=[],r=[];hM(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Nc={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class gM{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],v=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return v}return null}}}const gd=new gM;let Gr=class{constructor(e){this.manager=e!==void 0?e:gd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Bo={};class xj extends Error{constructor(e,n){super(e),this.response=n}}class mi extends Gr{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Nc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Bo[e]!==void 0){Bo[e].push({onLoad:n,onProgress:r,onError:i});return}Bo[e]=[],Bo[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Bo[e],d=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let y=0;const x=new ReadableStream({start(g){_();function _(){d.read().then(({done:E,value:A})=>{if(E)g.close();else{y+=A.byteLength;const M=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:m});for(let T=0,P=u.length;T<P;T++){const I=u[T];I.onProgress&&I.onProgress(M)}g.enqueue(A),_()}})}}});return new Response(x)}else throw new xj(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{Nc.add(e,c);const u=Bo[e];delete Bo[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Bo[e];if(u===void 0)throw this.manager.itemError(e),c;delete Bo[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class _j extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new mi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=Kd.parse(e[r]);n.push(i)}return n}}class Sj extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new rM,l=new mi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Zt),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)u(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+y]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Zt),a.format=p.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class Cp extends Gr{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Nc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=wp("img");function l(){u(),Nc.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class wj extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=new tm,o=new Cp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class Ej extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Cd,a=new mi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Er,o.wrapT=c.wrapT!==void 0?c.wrapT:Er,o.magFilter=c.magFilter!==void 0?c.magFilter:Zt,o.minFilter=c.minFilter!==void 0?c.minFilter:Zt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=ks),c.mipmapCount===1&&(o.minFilter=Zt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c))},r,i),o}}class mm extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=new fn,o=new Cp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Ml extends zt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Fe(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class QN extends Ml{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Fe(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const cS=new je,IP=new O,BP=new O;class vM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.map=null,this.mapPass=null,this.matrix=new je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ax,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new Dt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;IP.setFromMatrixPosition(e.matrixWorld),n.position.copy(IP),BP.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(BP),n.updateMatrixWorld(),cS.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cS),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(cS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Aj extends vM{constructor(){super(new sn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=$d*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class yM extends Ml{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Aj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const DP=new je,ch=new O,uS=new O;class bj extends vM{constructor(){super(new sn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new de(4,2),this._viewportCount=6,this._viewports=[new Dt(2,1,1,1),new Dt(0,1,1,1),new Dt(3,1,1,1),new Dt(1,1,1,1),new Dt(3,0,1,1),new Dt(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),ch.setFromMatrixPosition(e.matrixWorld),r.position.copy(ch),uS.copy(r.position),uS.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(uS),r.updateMatrixWorld(),i.makeTranslation(-ch.x,-ch.y,-ch.z),DP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DP)}}class xM extends Ml{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new bj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Mj extends vM{constructor(){super(new Ns(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _M extends Ml{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.shadow=new Mj}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qN extends Ml{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZN extends Ml{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class eF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new O)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class vx extends Ml{constructor(e=new eF,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class yx extends Gr{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new mi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=yx.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Fe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Fe().setHex(o.value);break;case"v2":i.uniforms[s].value=new de().fromArray(o.value);break;case"v3":i.uniforms[s].value=new O().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Dt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Rt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new je().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new de().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new de().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:zN,SpriteMaterial:Qb,RawShaderMaterial:HN,ShaderMaterial:jn,PointsMaterial:hx,MeshPhysicalMaterial:oa,MeshStandardMaterial:pm,MeshPhongMaterial:GN,MeshToonMaterial:$N,MeshNormalMaterial:dM,MeshLambertMaterial:VN,MeshDepthMaterial:Jb,MeshDistanceMaterial:Kb,MeshBasicMaterial:ui,MeshMatcapMaterial:WN,LineDashedMaterial:jN,LineBasicMaterial:Hr,Material:Nn};return new n[e]}}class Yd{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class SM extends xt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class tF extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new mi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,v){if(n[v]!==void 0)return n[v];const x=m.interleavedBuffers[v],g=s(m,x.buffer),_=hd(x.type,g),E=new nm(_,x.stride);return E.uuid=x.uuid,n[v]=E,E}function s(m,v){if(r[v]!==void 0)return r[v];const x=m.arrayBuffers[v],g=new Uint32Array(x).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new SM:new xt,a=e.data.index;if(a!==void 0){const m=hd(a.type,a.array);o.setIndex(new Lt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let y;if(v.isInterleavedBufferAttribute){const x=i(e.data,v.data);y=new di(x,v.itemSize,v.offset,v.normalized)}else{const x=hd(v.type,v.array),g=v.isInstancedBufferAttribute?jd:Lt;y=new g(x,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),v.updateRange!==void 0&&(y.updateRange.offset=v.updateRange.offset,y.updateRange.count=v.updateRange.count),o.setAttribute(m,y)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],y=[];for(let x=0,g=v.length;x<g;x++){const _=v[x];let E;if(_.isInterleavedBufferAttribute){const A=i(e.data,_.data);E=new di(A,_.itemSize,_.offset,_.normalized)}else{const A=hd(_.type,_.array);E=new Lt(A,_.itemSize,_.normalized)}_.name!==void 0&&(E.name=_.name),y.push(E)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,v=d.length;m!==v;++m){const y=d[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new O;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new gi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Cj extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?Yd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new mi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Yd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new mi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Cc().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Zb().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new tF;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in PP?a=PP[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new yx;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Kd.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:hd(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new gM(n);s=new Cp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Cd(g.data,g.width,g.height)))}i[d.uuid]=new vc(m)}else{const m=a(d.url);i[d.uuid]=new vc(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:hd(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Cp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],v=await s(m);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new Cd(v.data,v.width,v.height)))}r[l.uuid]=new vc(u)}else{const u=await s(l.url);r[l.uuid]=new vc(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new tm,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Cd:u=new fn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,Tj)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],LP),u.wrapT=r(a.wrap[1],LP)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,OP)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,OP)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(r[x])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,d;switch(e.type){case"Scene":o=new Wd,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Fe(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new dx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ux(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new sn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ns(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new qN(e.color,e.intensity);break;case"DirectionalLight":o=new _M(e.color,e.intensity);break;case"PointLight":o=new xM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ZN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new yM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new QN(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new vx().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new qb(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new Zn(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new eM(u,d,p),o.instanceMatrix=new jd(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new jd(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new PN;break;case"Line":o=new qo(a(e.geometry),l(e.material));break;case"LineLoop":o=new tM(a(e.geometry),l(e.material));break;case"LineSegments":o=new Gs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new nM(a(e.geometry),l(e.material));break;case"Sprite":o=new RN(l(e.material));break;case"Group":o=new Go;break;case"Bone":o=new fx;break;default:o=new zt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],n,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],y=o.getObjectByProperty("uuid",v.object);y!==void 0&&o.addLevel(y,v.distance,v.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Tj={UVMapping:rx,CubeReflectionMapping:al,CubeRefractionMapping:ll,EquirectangularReflectionMapping:vp,EquirectangularRefractionMapping:yp,CubeUVReflectionMapping:af},LP={RepeatWrapping:cl,ClampToEdgeWrapping:Er,MirroredRepeatWrapping:Hd},OP={NearestFilter:rn,NearestMipmapNearestFilter:xp,NearestMipmapLinearFilter:bd,LinearFilter:Zt,LinearMipmapNearestFilter:ix,LinearMipmapLinearFilter:ks};class nF extends Gr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Nc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Nc.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Tv;class wM{static getContext(){return Tv===void 0&&(Tv=new(window.AudioContext||window.webkitAudioContext)),Tv}static setContext(e){Tv=e}}class Rj extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new mi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);wM.getContext().decodeAudioData(c,function(d){n(d)},a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class Pj extends vx{constructor(e,n,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new Fe().set(e),s=new Fe().set(n),o=new O(i.r,i.g,i.b),a=new O(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class Ij extends vx{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const r=new Fe().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const NP=new je,FP=new je,Gl=new je;class Bj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new sn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new sn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Gl.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(Ac*n.fov*.5)/n.zoom;let a,l;FP.elements[12]=-i,NP.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Gl.elements[0]=2*n.near/(l-a),Gl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Gl),a=-o*n.aspect-s,l=o*n.aspect-s,Gl.elements[0]=2*n.near/(l-a),Gl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Gl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(FP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(NP)}}class EM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=UP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=UP();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function UP(){return(typeof performance>"u"?Date:performance).now()}const $l=new O,kP=new Wn,Dj=new O,Vl=new O;class Lj extends zt{constructor(){super(),this.type="AudioListener",this.context=wM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new EM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($l,kP,Dj),Vl.set(0,0,-1).applyQuaternion(kP),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime($l.x,i),n.positionY.linearRampToValueAtTime($l.y,i),n.positionZ.linearRampToValueAtTime($l.z,i),n.forwardX.linearRampToValueAtTime(Vl.x,i),n.forwardY.linearRampToValueAtTime(Vl.y,i),n.forwardZ.linearRampToValueAtTime(Vl.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition($l.x,$l.y,$l.z),n.setOrientation(Vl.x,Vl.y,Vl.z,r.x,r.y,r.z)}}class rF extends zt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Wl=new O,zP=new Wn,Oj=new O,jl=new O;class Nj extends rF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wl,zP,Oj),jl.set(0,0,1).applyQuaternion(zP);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Wl.x,r),n.positionY.linearRampToValueAtTime(Wl.y,r),n.positionZ.linearRampToValueAtTime(Wl.z,r),n.orientationX.linearRampToValueAtTime(jl.x,r),n.orientationY.linearRampToValueAtTime(jl.y,r),n.orientationZ.linearRampToValueAtTime(jl.z,r)}else n.setPosition(Wl.x,Wl.y,Wl.z),n.setOrientation(jl.x,jl.y,jl.z)}}class Fj{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class iF{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){Wn.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;Wn.multiplyQuaternionsFlat(e,o,e,n,e,r),Wn.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const AM="\\[\\]\\.:\\/",Uj=new RegExp("["+AM+"]","g"),bM="[^"+AM+"]",kj="[^"+AM.replace("\\.","")+"]",zj=/((?:WC+[\/:])*)/.source.replace("WC",bM),Hj=/(WCOD+)?/.source.replace("WCOD",kj),Gj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bM),$j=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bM),Vj=new RegExp("^"+zj+Hj+Gj+$j+"$"),Wj=["material","materials","bones","map"];class jj{constructor(e,n,r){const i=r||Ut.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Ut{constructor(e,n,r){this.path=n,this.parsedPath=r||Ut.parseTrackName(n),this.node=Ut.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Ut.Composite(e,n,r):new Ut(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Uj,"")}static parseTrackName(e){const n=Vj.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Wj.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=Ut.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ut.Composite=jj;Ut.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ut.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ut.prototype.GetterByBindingType=[Ut.prototype._getValue_direct,Ut.prototype._getValue_array,Ut.prototype._getValue_arrayElement,Ut.prototype._getValue_toArray];Ut.prototype.SetterByBindingTypeAndVersioning=[[Ut.prototype._setValue_direct,Ut.prototype._setValue_direct_setNeedsUpdate,Ut.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_array,Ut.prototype._setValue_array_setNeedsUpdate,Ut.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_arrayElement,Ut.prototype._setValue_arrayElement_setNeedsUpdate,Ut.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_fromArray,Ut.prototype._setValue_fromArray_setNeedsUpdate,Ut.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Xj{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Di(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],m=p.uuid;let v=n[m];if(v===void 0){v=l++,n[m]=v,e.push(p);for(let y=0,x=o;y!==x;++y)s[y].push(new Ut(p,r[y],i[y]))}else if(v<c){a=e[v];const y=--c,x=e[y];n[x.uuid]=v,e[v]=x,n[m]=y,e[y]=p;for(let g=0,_=o;g!==_;++g){const E=s[g],A=E[y];let M=E[v];E[v]=A,M===void 0&&(M=new Ut(p,r[g],i[g])),E[y]=M}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const d=s++,p=e[d];n[p.uuid]=u,e[u]=p,n[c]=d,e[d]=l;for(let m=0,v=i;m!==v;++m){const y=r[m],x=y[d],g=y[u];y[u]=x,y[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<s){const p=--s,m=e[p],v=--o,y=e[v];n[m.uuid]=d,e[d]=m,n[y.uuid]=p,e[p]=y,e.pop();for(let x=0,g=i;x!==g;++x){const _=r[x],E=_[p],A=_[v];_[d]=E,_[p]=A,_.pop()}}else{const p=--o,m=e[p];p>0&&(n[m.uuid]=d),e[d]=m,e.pop();for(let v=0,y=i;v!==y;++v){const x=r[v];x[d]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(d);for(let p=u,m=l.length;p!==m;++p){const v=l[p];d[p]=new Ut(v,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class sF{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:mc,endingEnd:mc};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=aN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case kb:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case sx:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===lN;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===oN){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=gc,i.endingEnd=gc):(e?i.endingStart=this.zeroSlopeAtStart?gc:mc:i.endingStart=_p,n?i.endingEnd=this.zeroSlopeAtEnd?gc:mc:i.endingEnd=_p)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const Jj=new Float32Array(1);class Kj extends Ui{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let v=u[m];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const y=n&&n._propertyBindings[d].binding.parsedPath;v=new iF(Ut.create(r,m,y),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new pM(new Float32Array(2),new Float32Array(2),1,Jj),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?Kd.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=sx),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new sF(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?Kd.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Ve{constructor(e){this.value=e}clone(){return new Ve(this.value.clone===void 0?this.value:this.value.clone())}}let Yj=0;class Qj extends Ui{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Yj++}),this.name="",this.usage=Sp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class fy extends nm{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class qj{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class oF{constructor(e,n,r=0,i=1/0){this.ray=new bl(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new Mc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return kE(e,this,r,n),r.sort(HP),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)kE(e[i],this,r,n);return r.sort(HP),r}}function HP(t,e){return t.distance-e.distance}function kE(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)kE(i[s],e,n,!0)}}class zE{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(On(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Zj{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const GP=new de;class eX{constructor(e=new de(1/0,1/0),n=new de(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=GP.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,GP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $P=new O,Rv=new O;class aF{constructor(e=new O,n=new O){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){$P.subVectors(e,this.start),Rv.subVectors(this.end,this.start);const r=Rv.dot(Rv);let s=Rv.dot($P)/r;return n&&(s=On(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const VP=new O;class tX extends zt{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new xt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new tt(i,3));const s=new Hr({fog:!1,toneMapped:!1});this.cone=new Gs(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),VP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Aa=new O,Pv=new je,dS=new je;class nX extends Gs{constructor(e){const n=lF(e),r=new xt,i=[],s=[],o=new Fe(0,0,1),a=new Fe(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new tt(i,3)),r.setAttribute("color",new tt(s,3));const l=new Hr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");dS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(Pv.multiplyMatrices(dS,a.matrixWorld),Aa.setFromMatrixPosition(Pv),i.setXYZ(o,Aa.x,Aa.y,Aa.z),Pv.multiplyMatrices(dS,a.parent.matrixWorld),Aa.setFromMatrixPosition(Pv),i.setXYZ(o+1,Aa.x,Aa.y,Aa.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function lF(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,lF(t.children[n]));return e}class rX extends Zn{constructor(e,n,r){const i=new hf(n,4,2),s=new ui({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const iX=new O,WP=new Fe,jP=new Fe;class sX extends zt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new ff(n);i.rotateY(Math.PI*.5),this.material=new ui({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Lt(o,3)),this.add(new Zn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");WP.copy(this.light.color),jP.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?WP:jP;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(iX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class oX extends Gs{constructor(e=10,n=10,r=4473924,i=8947848){r=new Fe(r),i=new Fe(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=n;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const y=p===s?r:i;y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3}const u=new xt;u.setAttribute("position",new tt(l,3)),u.setAttribute("color",new tt(c,3));const d=new Hr({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class aX extends Gs{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new Fe(s),o=new Fe(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const p=d/n*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const y=d&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let v=0;v<i;v++){let y=v/i*(Math.PI*2),x=Math.sin(y)*m,g=Math.cos(y)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),y=(v+1)/i*(Math.PI*2),x=Math.sin(y)*m,g=Math.cos(y)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const c=new xt;c.setAttribute("position",new tt(a,3)),c.setAttribute("color",new tt(l,3));const u=new Hr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const XP=new O,Iv=new O,JP=new O;class lX extends zt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new xt;i.setAttribute("position",new tt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Hr({fog:!1,toneMapped:!1});this.lightPlane=new qo(i,s),this.add(this.lightPlane),i=new xt,i.setAttribute("position",new tt([0,0,0,0,0,1],3)),this.targetLine=new qo(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),XP.setFromMatrixPosition(this.light.matrixWorld),Iv.setFromMatrixPosition(this.light.target.matrixWorld),JP.subVectors(Iv,XP),this.lightPlane.lookAt(Iv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Iv),this.targetLine.scale.z=JP.length()}}const Bv=new O,Dn=new lf;class cX extends Gs{constructor(e){const n=new xt,r=new Hr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,y){l(v),l(y)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}n.setAttribute("position",new tt(i,3)),n.setAttribute("color",new tt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Fe(16755200),u=new Fe(16711680),d=new Fe(43775),p=new Fe(16777215),m=new Fe(3355443);this.setColors(c,u,d,p,m)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Dn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),kn("c",n,e,Dn,0,0,-1),kn("t",n,e,Dn,0,0,1),kn("n1",n,e,Dn,-r,-i,-1),kn("n2",n,e,Dn,r,-i,-1),kn("n3",n,e,Dn,-r,i,-1),kn("n4",n,e,Dn,r,i,-1),kn("f1",n,e,Dn,-r,-i,1),kn("f2",n,e,Dn,r,-i,1),kn("f3",n,e,Dn,-r,i,1),kn("f4",n,e,Dn,r,i,1),kn("u1",n,e,Dn,r*.7,i*1.1,-1),kn("u2",n,e,Dn,-r*.7,i*1.1,-1),kn("u3",n,e,Dn,0,i*2,-1),kn("cf1",n,e,Dn,-r,0,1),kn("cf2",n,e,Dn,r,0,1),kn("cf3",n,e,Dn,0,-i,1),kn("cf4",n,e,Dn,0,i,1),kn("cn1",n,e,Dn,-r,0,-1),kn("cn2",n,e,Dn,r,0,-1),kn("cn3",n,e,Dn,0,-i,-1),kn("cn4",n,e,Dn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function kn(t,e,n,r,i,s,o){Bv.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Bv.x,Bv.y,Bv.z)}}const Dv=new wn;class uX extends Gs{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new xt;s.setIndex(new Lt(r,1)),s.setAttribute("position",new Lt(i,3)),super(s,new Hr({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Dv.setFromObject(this.object),Dv.isEmpty())return;const n=Dv.min,r=Dv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dX extends Gs{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new xt;s.setIndex(new Lt(r,1)),s.setAttribute("position",new tt(i,3)),super(s,new Hr({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class fX extends qo{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new xt;o.setAttribute("position",new tt(s,3)),o.computeBoundingSphere(),super(o,new Hr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new xt;l.setAttribute("position",new tt(a,3)),l.computeBoundingSphere(),this.add(new Zn(l,new ui({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const KP=new O;let Lv,fS;class hX extends zt{constructor(e=new O(0,0,1),n=new O(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Lv===void 0&&(Lv=new xt,Lv.setAttribute("position",new tt([0,0,0,0,1,0],3)),fS=new jc(0,.5,1,5,1),fS.translate(0,-.5,0)),this.position.copy(n),this.line=new qo(Lv,new Hr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zn(fS,new ui({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{KP.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(KP,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pX extends Gs{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new xt;i.setAttribute("position",new tt(n,3)),i.setAttribute("color",new tt(r,3));const s=new Hr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new Fe,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cF{constructor(){this.type="ShapePath",this.color=new Fe,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Ep,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const _=[];for(let E=0,A=g.length;E<A;E++){const M=g[E],T=new Cc;T.curves=M.curves,_.push(T)}return _}function r(g,_){const E=_.length;let A=!1;for(let M=E-1,T=0;T<E;M=T++){let P=_[M],I=_[T],R=I.x-P.x,D=I.y-P.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(P=_[T],R=-R,I=_[M],D=-D),g.y<P.y||g.y>I.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const F=D*(g.x-P.x)-R*(g.y-P.y);if(F===0)return!0;if(F<0)continue;A=!A}}else{if(g.y!==P.y)continue;if(I.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=I.x)return!0}}return A}const i=uo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Cc,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],p=[];let m=[],v=0,y;p[v]=void 0,m[v]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],y=a.getPoints(),o=i(y),o=e?!o:o,o?(!u&&p[v]&&v++,p[v]={s:new Cc,p:y},p[v].s.curves=a.curves,u&&v++,m[v]=[]):m[v].push({h:a,p:y[0]});if(!p[0])return n(s);if(p.length>1){let g=!1,_=0;for(let E=0,A=p.length;E<A;E++)d[E]=[];for(let E=0,A=p.length;E<A;E++){const M=m[E];for(let T=0;T<M.length;T++){const P=M[T];let I=!0;for(let R=0;R<p.length;R++)r(P.p,p[R].p)&&(E!==R&&_++,I?(I=!1,d[R].push(P)):g=!0);I&&d[E].push(P)}}_>0&&g===!1&&(m=d)}let x;for(let g=0,_=p.length;g<_;g++){l=p[g].s,c.push(l),x=m[g];for(let E=0,A=x.length;E<A;E++)l.holes.push(x[E].h)}return c}}class mX extends fo{constructor(e,n,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,r,i,s,o)}}class gX extends rm{constructor(e,n,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,r,i)}}class vX extends im{constructor(e,n,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,r,i)}}class yX extends sm{constructor(e,n,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,r,i,s,o,a)}}class xX extends jc{constructor(e,n,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,r,i,s,o,a,l)}}class _X extends om{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class SX extends df{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class wX extends am{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class EX extends uf{constructor(e,n,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,r,i)}}class AX extends ff{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class bX extends Wc{constructor(e,n,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,r,i)}}class MX extends sa{constructor(e,n,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,r,i)}}class CX extends lm{constructor(e,n,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,r,i,s,o)}}class TX extends cm{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class RX extends hf{constructor(e,n,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,r,i,s,o,a)}}class PX extends um{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class IX extends dm{constructor(e,n,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,r,i,s)}}class BX extends fm{constructor(e,n,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,r,i,s,o)}}class DX extends hm{constructor(e,n,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:wl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=wl);const LX=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Fb,AddEquation:lc,AddOperation:zO,AdditiveAnimationBlendMode:kb,AdditiveBlending:rE,AlphaFormat:YO,AlwaysDepth:DO,AlwaysStencilFunc:fN,AmbientLight:qN,AmbientLightProbe:Ij,AnimationAction:sF,AnimationClip:Kd,AnimationLoader:_j,AnimationMixer:Kj,AnimationObjectGroup:Xj,AnimationUtils:gj,ArcCurve:BN,ArrayCamera:MN,ArrowHelper:hX,Audio:rF,AudioAnalyser:Fj,AudioContext:wM,AudioListener:Lj,AudioLoader:Rj,AxesHelper:pX,BackSide:ir,BasicDepthPacking:El,BasicShadowMap:xO,Bone:fx,BooleanKeyframeTrack:Xc,Box2:eX,Box3:wn,Box3Helper:dX,BoxBufferGeometry:mX,BoxGeometry:fo,BoxHelper:uX,BufferAttribute:Lt,BufferGeometry:xt,BufferGeometryLoader:tF,ByteType:WO,Cache:Nc,Camera:lf,CameraHelper:cX,CanvasTexture:zW,CapsuleBufferGeometry:gX,CapsuleGeometry:rm,CatmullRomCurve3:DN,CineonToneMapping:$O,CircleBufferGeometry:vX,CircleGeometry:im,ClampToEdgeWrapping:Er,Clock:EM,Color:Fe,ColorKeyframeTrack:mM,ColorManagement:Qi,CompressedArrayTexture:kW,CompressedTexture:rM,CompressedTextureLoader:Sj,ConeBufferGeometry:yX,ConeGeometry:sm,CubeCamera:yN,CubeReflectionMapping:al,CubeRefractionMapping:ll,CubeTexture:tm,CubeTextureLoader:wj,CubeUVReflectionMapping:af,CubicBezierCurve:sM,CubicBezierCurve3:LN,CubicInterpolant:JN,CullFaceBack:nE,CullFaceFront:yO,CullFaceFrontBack:H8,CullFaceNone:vO,Curve:$s,CurvePath:NN,CustomBlending:_O,CustomToneMapping:VO,CylinderBufferGeometry:xX,CylinderGeometry:jc,Cylindrical:Zj,Data3DTexture:Vb,DataArrayTexture:ox,DataTexture:Cd,DataTextureLoader:Ej,DataUtils:K6,DecrementStencilOp:Y8,DecrementWrapStencilOp:q8,DefaultLoadingManager:gd,DepthFormat:el,DepthStencilFormat:dl,DepthTexture:cx,DirectionalLight:_M,DirectionalLightHelper:lX,DiscreteInterpolant:KN,DisplayP3ColorSpace:Hb,DodecahedronBufferGeometry:_X,DodecahedronGeometry:om,DoubleSide:wr,DstAlphaFactor:CO,DstColorFactor:RO,DynamicCopyUsage:h6,DynamicDrawUsage:a6,DynamicReadUsage:u6,EdgesGeometry:dy,EllipseCurve:px,EqualDepth:OO,EqualStencilFunc:n6,EquirectangularReflectionMapping:vp,EquirectangularRefractionMapping:yp,Euler:Zp,EventDispatcher:Ui,ExtrudeBufferGeometry:SX,ExtrudeGeometry:df,FileLoader:mi,Float16BufferAttribute:t$,Float32BufferAttribute:tt,Float64BufferAttribute:n$,FloatType:Is,Fog:dx,FogExp2:ux,FramebufferTexture:UW,FrontSide:Us,Frustum:ax,GLBufferAttribute:qj,GLSL1:m6,GLSL3:IE,GreaterDepth:FO,GreaterEqualDepth:NO,GreaterEqualStencilFunc:o6,GreaterStencilFunc:i6,GridHelper:oX,Group:Go,HalfFloatType:ul,HemisphereLight:QN,HemisphereLightHelper:sX,HemisphereLightProbe:Pj,IcosahedronBufferGeometry:wX,IcosahedronGeometry:am,ImageBitmapLoader:nF,ImageLoader:Cp,ImageUtils:$b,IncrementStencilOp:K8,IncrementWrapStencilOp:Q8,InstancedBufferAttribute:jd,InstancedBufferGeometry:SM,InstancedInterleavedBuffer:fy,InstancedMesh:eM,Int16BufferAttribute:Z6,Int32BufferAttribute:e$,Int8BufferAttribute:Y6,IntType:XO,InterleavedBuffer:nm,InterleavedBufferAttribute:di,Interpolant:pf,InterpolateDiscrete:Gd,InterpolateLinear:Lc,InterpolateSmooth:P0,InvertStencilOp:Z8,KeepStencilOp:I0,KeyframeTrack:Vs,LOD:PN,LatheBufferGeometry:EX,LatheGeometry:uf,Layers:Mc,LessDepth:LO,LessEqualDepth:ly,LessEqualStencilFunc:r6,LessStencilFunc:t6,Light:Ml,LightProbe:vx,Line:qo,Line3:aF,LineBasicMaterial:Hr,LineCurve:mx,LineCurve3:ON,LineDashedMaterial:jN,LineLoop:tM,LineSegments:Gs,LinearEncoding:qp,LinearFilter:Zt,LinearInterpolant:pM,LinearMipMapLinearFilter:j8,LinearMipMapNearestFilter:W8,LinearMipmapLinearFilter:ks,LinearMipmapNearestFilter:ix,LinearSRGBColorSpace:zs,LinearToneMapping:HO,Loader:Gr,LoaderUtils:Yd,LoadingManager:gM,LoopOnce:oN,LoopPingPong:lN,LoopRepeat:aN,LuminanceAlphaFormat:qO,LuminanceFormat:QO,MOUSE:ec,Material:Nn,MaterialLoader:yx,MathUtils:bc,Matrix3:Rt,Matrix4:je,MaxEquation:aE,Mesh:Zn,MeshBasicMaterial:ui,MeshDepthMaterial:Jb,MeshDistanceMaterial:Kb,MeshLambertMaterial:VN,MeshMatcapMaterial:WN,MeshNormalMaterial:dM,MeshPhongMaterial:GN,MeshPhysicalMaterial:oa,MeshStandardMaterial:pm,MeshToonMaterial:$N,MinEquation:oE,MirroredRepeatWrapping:Hd,MixOperation:kO,MultiplyBlending:sE,MultiplyOperation:Qp,NearestFilter:rn,NearestMipMapLinearFilter:V8,NearestMipMapNearestFilter:$8,NearestMipmapLinearFilter:bd,NearestMipmapNearestFilter:xp,NeverDepth:BO,NeverStencilFunc:e6,NoBlending:br,NoColorSpace:tl,NoToneMapping:Os,NormalAnimationBlendMode:sx,NormalBlending:Ec,NotEqualDepth:UO,NotEqualStencilFunc:s6,NumberKeyframeTrack:Xd,Object3D:zt,ObjectLoader:Cj,ObjectSpaceNormalMap:dN,OctahedronBufferGeometry:AX,OctahedronGeometry:ff,OneFactor:AO,OneMinusDstAlphaFactor:TO,OneMinusDstColorFactor:PO,OneMinusSrcAlphaFactor:Nb,OneMinusSrcColorFactor:MO,OrthographicCamera:Ns,PCFShadowMap:nx,PCFSoftShadowMap:Hh,PMREMGenerator:DE,Path:Ep,PerspectiveCamera:sn,Plane:so,PlaneBufferGeometry:bX,PlaneGeometry:Wc,PlaneHelper:fX,PointLight:xM,PointLightHelper:rX,Points:nM,PointsMaterial:hx,PolarGridHelper:aX,PolyhedronBufferGeometry:MX,PolyhedronGeometry:sa,PositionalAudio:Nj,PropertyBinding:Ut,PropertyMixer:iF,QuadraticBezierCurve:oM,QuadraticBezierCurve3:aM,Quaternion:Wn,QuaternionKeyframeTrack:fl,QuaternionLinearInterpolant:YN,RED_GREEN_RGTC2_Format:RE,RED_RGTC1_Format:sN,REVISION:wl,RGBADepthPacking:uN,RGBAFormat:li,RGBAIntegerFormat:rN,RGBA_ASTC_10x10_Format:bE,RGBA_ASTC_10x5_Format:wE,RGBA_ASTC_10x6_Format:EE,RGBA_ASTC_10x8_Format:AE,RGBA_ASTC_12x10_Format:ME,RGBA_ASTC_12x12_Format:CE,RGBA_ASTC_4x4_Format:pE,RGBA_ASTC_5x4_Format:mE,RGBA_ASTC_5x5_Format:gE,RGBA_ASTC_6x5_Format:vE,RGBA_ASTC_6x6_Format:yE,RGBA_ASTC_8x5_Format:xE,RGBA_ASTC_8x6_Format:_E,RGBA_ASTC_8x8_Format:SE,RGBA_BPTC_Format:R0,RGBA_ETC2_EAC_Format:hE,RGBA_PVRTC_2BPPV1_Format:dE,RGBA_PVRTC_4BPPV1_Format:uE,RGBA_S3TC_DXT1_Format:M0,RGBA_S3TC_DXT3_Format:C0,RGBA_S3TC_DXT5_Format:T0,RGB_ETC1_Format:iN,RGB_ETC2_Format:fE,RGB_PVRTC_2BPPV1_Format:cE,RGB_PVRTC_4BPPV1_Format:lE,RGB_S3TC_DXT1_Format:b0,RGFormat:tN,RGIntegerFormat:nN,RawShaderMaterial:HN,Ray:bl,Raycaster:oF,RectAreaLight:ZN,RedFormat:ZO,RedIntegerFormat:eN,ReinhardToneMapping:GO,RepeatWrapping:cl,ReplaceStencilOp:J8,ReverseSubtractEquation:wO,RingBufferGeometry:CX,RingGeometry:lm,SIGNED_RED_GREEN_RGTC2_Format:PE,SIGNED_RED_RGTC1_Format:TE,SRGBColorSpace:wt,Scene:Wd,ShaderChunk:At,ShaderLib:Kr,ShaderMaterial:jn,ShadowMaterial:zN,Shape:Cc,ShapeBufferGeometry:TX,ShapeGeometry:cm,ShapePath:cF,ShapeUtils:uo,ShortType:jO,Skeleton:Zb,SkeletonHelper:nX,SkinnedMesh:qb,Source:vc,Sphere:gi,SphereBufferGeometry:RX,SphereGeometry:hf,Spherical:zE,SphericalHarmonics3:eF,SplineCurve:lM,SpotLight:yM,SpotLightHelper:tX,Sprite:RN,SpriteMaterial:Qb,SrcAlphaFactor:Ob,SrcAlphaSaturateFactor:IO,SrcColorFactor:bO,StaticCopyUsage:f6,StaticDrawUsage:Sp,StaticReadUsage:c6,StereoCamera:Bj,StreamCopyUsage:p6,StreamDrawUsage:l6,StreamReadUsage:d6,StringKeyframeTrack:Jc,SubtractEquation:SO,SubtractiveBlending:iE,TOUCH:tc,TangentSpaceNormalMap:Al,TetrahedronBufferGeometry:PX,TetrahedronGeometry:um,Texture:fn,TextureLoader:mm,TorusBufferGeometry:IX,TorusGeometry:dm,TorusKnotBufferGeometry:BX,TorusKnotGeometry:fm,Triangle:yc,TriangleFanDrawMode:cy,TriangleStripDrawMode:zb,TrianglesDrawMode:cN,TubeBufferGeometry:DX,TubeGeometry:hm,TwoPassDoubleSide:G8,UVMapping:rx,Uint16BufferAttribute:Wb,Uint32BufferAttribute:jb,Uint8BufferAttribute:Q6,Uint8ClampedBufferAttribute:q6,Uniform:Ve,UniformsGroup:Qj,UniformsLib:Ne,UniformsUtils:em,UnsignedByteType:zr,UnsignedInt248Type:Za,UnsignedIntType:Ho,UnsignedShort4444Type:JO,UnsignedShort5551Type:KO,UnsignedShortType:Ub,VSMShadowMap:Cs,Vector2:de,Vector3:O,Vector4:Dt,VectorKeyframeTrack:Jd,VideoTexture:FW,WebGL1Renderer:CN,WebGL3DRenderTarget:U6,WebGLArrayRenderTarget:F6,WebGLCubeRenderTarget:xN,WebGLMultipleRenderTargets:k6,WebGLRenderTarget:yn,WebGLRenderer:Yb,WebGLUtils:bN,WireframeGeometry:uM,WrapAroundEnding:_p,ZeroCurvatureEnding:mc,ZeroFactor:EO,ZeroSlopeEnding:gc,ZeroStencilOp:X8,_SRGBAFormat:uy,sRGBEncoding:Qr},Symbol.toStringTag,{value:"Module"})),HE=new Map,Ov=t=>{const e=HE.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},OX=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=HE.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return HE.set(n.name,i),{type:"tracked",store:t,...i}},NX=(t,e={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=e;let c;try{c=(s??({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,i);const{connection:u,...d}=OX(a,c,l);let p=!0;i.setState=(y,x,g)=>{const _=n(y,x);if(!p)return _;const E=g===void 0?{type:o||"anonymous"}:typeof g=="string"?{type:g}:g;return a===void 0?(u==null||u.send(E,r()),_):(u==null||u.send({...E,type:`${a}/${E.type}`},{...Ov(l.name),[a]:i.getState()}),_)};const m=(...y)=>{const x=p;p=!1,n(...y),p=x},v=t(i.setState,r,i);if(d.type==="untracked"?u==null||u.init(v):(d.stores[d.store]=i,u==null||u.init(Object.fromEntries(Object.entries(d.stores).map(([y,x])=>[y,y===d.store?v:x.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let y=!1;const x=i.dispatch;i.dispatch=(...g)=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&g[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),x(...g)}}return u.subscribe(y=>{var x;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return hS(y.payload,g=>{if(g.type==="__setState"){if(a===void 0){m(g.state);return}Object.keys(g.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const _=g.state[a];if(_==null)return;JSON.stringify(i.getState())!==JSON.stringify(_)&&m(_);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(g)});case"DISPATCH":switch(y.payload.type){case"RESET":return m(v),a===void 0?u==null?void 0:u.init(i.getState()):u==null?void 0:u.init(Ov(l.name));case"COMMIT":if(a===void 0){u==null||u.init(i.getState());return}return u==null?void 0:u.init(Ov(l.name));case"ROLLBACK":return hS(y.state,g=>{if(a===void 0){m(g),u==null||u.init(i.getState());return}m(g[a]),u==null||u.init(Ov(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return hS(y.state,g=>{if(a===void 0){m(g);return}JSON.stringify(i.getState())!==JSON.stringify(g[a])&&m(g[a])});case"IMPORT_STATE":{const{nextLiftedState:g}=y.payload,_=(x=g.computedStates.slice(-1)[0])==null?void 0:x.state;if(!_)return;m(a===void 0?_:_[a]),u==null||u.send(null,g);return}case"PAUSE_RECORDING":return p=!p}return}}),v},FX=NX,hS=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function UX(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>n.removeItem(i)}}const Tp=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Tp(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Tp(r)(n)}}}},kX=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,g)=>({...g,...x}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...x)},r,i);const u=Tp(s.serialize),d=()=>{const x=s.partialize({...r()});let g;const _=u({state:x,version:s.version}).then(E=>c.setItem(s.name,E)).catch(E=>{g=E});if(g)throw g;return _},p=i.setState;i.setState=(x,g)=>{p(x,g),d()};const m=t((...x)=>{n(...x),d()},r,i);let v;const y=()=>{var x;if(!c)return;o=!1,a.forEach(_=>_(r()));const g=((x=s.onRehydrateStorage)==null?void 0:x.call(s,r()))||void 0;return Tp(c.getItem.bind(c))(s.name).then(_=>{if(_)return s.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return s.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var E;return v=s.merge(_,(E=r())!=null?E:m),n(v,!0),d()}).then(()=>{g==null||g(v,void 0),o=!0,l.forEach(_=>_(v))}).catch(_=>{g==null||g(void 0,_)})};return i.persist={setOptions:x=>{s={...s,...x},x.getStorage&&(c=x.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},y(),v||m},zX=(t,e)=>(n,r,i)=>{let s={storage:UX(()=>localStorage),partialize:y=>y,version:0,merge:(y,x)=>({...x,...y}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...y)},r,i);const u=()=>{const y=s.partialize({...r()});return c.setItem(s.name,{state:y,version:s.version})},d=i.setState;i.setState=(y,x)=>{d(y,x),u()};const p=t((...y)=>{n(...y),u()},r,i);let m;const v=()=>{var y,x;if(!c)return;o=!1,a.forEach(_=>{var E;return _((E=r())!=null?E:p)});const g=((x=s.onRehydrateStorage)==null?void 0:x.call(s,(y=r())!=null?y:p))||void 0;return Tp(c.getItem.bind(c))(s.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return s.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var E;return m=s.merge(_,(E=r())!=null?E:p),n(m,!0),u()}).then(()=>{g==null||g(m,void 0),m=r(),o=!0,l.forEach(_=>_(m))}).catch(_=>{g==null||g(void 0,_)})};return i.persist={setOptions:y=>{s={...s,...y},y.storage&&(c=y.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:y=>(a.add(y),()=>{a.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},s.skipHydration||v(),m||p},HX=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),kX(t,e)):zX(t,e),GX=HX,Kc=ia()(FX(GX((t,e)=>({textsAndModels:[],height:0,renderOrder:99,modelLayerNumber:0,textLayerNumber:0,isBackboardVisible:!0,setIsBackboardVisible:n=>t(()=>({isBackboardVisible:n})),addText:(n,r,i,s)=>t(o=>{const a=[{text:n,id:AR(),isBase:!0,height:o.height,font:i,color:s,renderOrder:o.renderOrder,worldMatrix:null,layerName:o.textLayerNumber===0?n:`${n}(${o.textLayerNumber})`,isLayerNameSet:!1,isSelected:!1,bboxSize:new O},...o.textsAndModels];return{height:o.height+.8,renderOrder:o.renderOrder-1,textLayerNumber:o.textLayerNumber+1,textsAndModels:a}}),removeText:n=>t(r=>{const s=r.textsAndModels.filter(o=>o.id!==n).length===0?0:r.height-.8;return{textsAndModels:r.textsAndModels.filter(o=>o.id!==n),height:Math.max(s,0),renderOrder:Math.min(r.renderOrder+1,99),textLayerNumber:r.textLayerNumber===0?0:r.textLayerNumber-1}}),editText:(n,r)=>t(i=>({textsAndModels:z8(i.textsAndModels,n,r)})),addModel:(n,r,i)=>t(s=>({textsAndModels:[{isSelected:!1,id:AR(),isBase:!0,color:i,path:n,height:s.height,renderOrder:s.renderOrder,layerName:s.modelLayerNumber===0?n:`${n}(${s.modelLayerNumber})`,worldMatrix:null,isLayerNameSet:!1,bboxSize:new O},...s.textsAndModels],height:s.height+.8,renderOrder:s.renderOrder-1,modelLayerNumber:s.modelLayerNumber+1})),loadTemplate:n=>t(()=>n),isSelectionOn:!1,setIsSelectionOn:n=>t(()=>({isSelectionOn:n})),selectedItems:[],setSelectedItems:n=>t(()=>({textsAndModels:e().textsAndModels.map(i=>n.includes(i.id)?{...i,isSelected:!0}:{...i,isSelected:!1})})),clearBoard:()=>t(()=>({textsAndModels:[],height:0,renderOrder:99,textLayerNumber:0,modelLayerNumber:0}))}),{name:"neon-storage",version:1})));ia()(t=>({isSelectionOn:!1,setIsSelectionOn:e=>t(()=>({isSelectionOn:e})),selectedItems:[],setSelectedItems:e=>t(()=>({selectedItems:e}))}));const gm=ia()(t=>({isOpen:!1,placement:"indoor",cableColor:"white",mountingKit:{type:"hanging",color:"gold"},tubeMatching:!1,setTubeMatching:e=>t(()=>({tubeMatching:e})),setIsOpen:e=>t(()=>({isOpen:e})),setPlacement:e=>t(()=>({placement:e})),setCableColor:e=>t(()=>({cableColor:e})),setMountingKit:e=>t(()=>({mountingKit:e}))})),ho=ia()((t,e)=>({isCustom:!1,lastBoardType:"Auto-fit",boardColor:"transparent",boardStyle:"full-board",setBoardColor:n=>t(()=>({boardColor:n})),boardSize:[0,0,0],boardCenter:new O(0,0,0),setBoardStyle:n=>t(()=>({boardStyle:n})),setBoardSize:(n,r)=>t(()=>({boardSize:r,boardCenter:n})),setIsCustom:(n,r)=>t(()=>({isCustom:n,lastBoardType:r})),smallestBoardCitizen:7,setSmallestBoardCitizen:n=>t(()=>{n.length===0&&n.push(7);const r=Math.min(...n),i=Number(Number(1/(r/10)).toFixed(2));return{smallestBoardCitizen:r,scaleCoefficient:i}}),scaleCoefficient:1,actualBoardSize:[0,0],setActualBoardSize:n=>t(()=>({actualBoardSize:n})),scale:1,setScale:(n,r=300)=>t(()=>{const i=e().smallestBoardCitizen,s=e().boardSize[0],o=r,a=s/o,l=e().scaleCoefficient;if(l*n*s>o||o<300){if(i*(1/a)<=10)return{scale:l};if(n===2)return{scale:1/a};if(n===1.5)return{scale:1/a*.95};if(n===1.25)return{scale:1/a*.9}}return{scale:l*n}}),scaleCurrent:1,setScaleCurrent:n=>t(()=>({scaleCurrent:n}))})),mf=ia(t=>({selectedSidebar:5,isShown:!0,setIsShown:e=>t(()=>({isShown:e})),setSelectedSidebar:e=>t(()=>({selectedSidebar:e}))})),uF=ia()(t=>({isOpen:!1,templates:[],setIsOpen:e=>t(()=>({isOpen:e})),addTemplate:e=>t(n=>({templates:[...n.templates,e]}))})),vm=ia(t=>({url:`${window.pluginVars.pluginUrl}templates/dist/bg.jpg`,scale:1,personUploadedImage:"",setUrl:e=>t(()=>({url:e})),setScale:e=>t(()=>({scale:e})),setPersonUploadedImage:e=>t(()=>({personUploadedImage:e}))})),Yc=ia(t=>({is3dModeOn:!1,isRullerOn:!0,brightness:100,switch:e=>t(()=>({is3dModeOn:e})),setRuller:e=>t(()=>({isRullerOn:e})),setBrightness:e=>t(()=>({brightness:e}))})),Zo=ia(t=>({selected:"",setSelected:e=>t(()=>({selected:e}))}));function Re(){return Re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Re.apply(this,arguments)}function $X(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function MM(...t){return e=>t.forEach(n=>$X(n,e))}function Fn(...t){return S.useCallback(MM(...t),t)}const Fc=S.forwardRef((t,e)=>{const{children:n,...r}=t,i=S.Children.toArray(n),s=i.find(WX);if(s){const o=s.props.children,a=i.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return S.createElement(GE,Re({},r,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,a):null)}return S.createElement(GE,Re({},r,{ref:e}),n)});Fc.displayName="Slot";const GE=S.forwardRef((t,e)=>{const{children:n,...r}=t;return S.isValidElement(n)?S.cloneElement(n,{...jX(r,n.props),ref:MM(e,n.ref)}):S.Children.count(n)>1?S.Children.only(null):null});GE.displayName="SlotClone";const VX=({children:t})=>S.createElement(S.Fragment,null,t);function WX(t){return S.isValidElement(t)&&t.type===VX}function jX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function dF(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=dF(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function fF(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=dF(t))&&(r&&(r+=" "),r+=e);return r}const YP=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,QP=fF,XX=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return QP(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const p=YP(u)||YP(d);return i[c][p]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,p]=u;return p===void 0||(c[d]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:p,...m}=u;return Object.entries(m).every(v=>{let[y,x]=v;return Array.isArray(x)?x.includes({...s,...a}[y]):{...s,...a}[y]===x})?[...c,d,p]:c},[]);return QP(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function JX(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=hF(e))&&(r&&(r+=" "),r+=n);return r}function hF(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=hF(t[r]))&&(n&&(n+=" "),n+=e);return n}var CM="-";function KX(t){var e=QX(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(CM);return l[0]===""&&l.length!==1&&l.shift(),pF(l,e)||YX(a)}function o(a,l){var c=n[a]||[];return l&&i[a]?[].concat(c,i[a]):c}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function pF(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?pF(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=t.join(CM);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var qP=/^\[(.+)\]$/;function YX(t){if(qP.test(t)){var e=qP.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function QX(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=ZX(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],a=s[1];$E(a,r,o,e)}),r}function $E(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:ZP(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(qX(i)){$E(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];$E(l,ZP(e,a),n,r)})})}function ZP(t,e){var n=t;return e.split(CM).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function qX(t){return t.isThemeGetter}function ZX(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,s]}):t}function eJ(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):i(o,a)}}}var mF="!";function tJ(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,c=0,u,d=0;d<o.length;d++){var p=o[d];if(l===0){if(p===r&&(n||o.slice(d,d+i)===e)){a.push(o.slice(c,d)),c=d+i;continue}if(p==="/"){u=d;continue}}p==="["?l++:p==="]"&&l--}var m=a.length===0?o:o.substring(c),v=m.startsWith(mF),y=v?m.substring(1):m,x=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:x}}}function nJ(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function rJ(t){return{cache:eJ(t.cacheSize),splitModifiers:tJ(t),...KX(t)}}var iJ=/\s+/;function sJ(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(iJ).map(function(o){var a=n(o),l=a.modifiers,c=a.hasImportantModifier,u=a.baseClassName,d=a.maybePostfixModifierPosition,p=r(d?u.substring(0,d):u),m=!!d;if(!p){if(!d)return{isTailwindClass:!1,originalClassName:o};if(p=r(u),!p)return{isTailwindClass:!1,originalClassName:o};m=!1}var v=nJ(l).join(":"),y=c?v+mF:v;return{isTailwindClass:!0,modifierId:y,classGroupId:p,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,u=a+l;return s.has(u)?!1:(s.add(u),i(l,c).forEach(function(d){return s.add(a+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function oJ(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=a;function a(c){var u=e[0],d=e.slice(1),p=d.reduce(function(m,v){return v(m)},u());return r=rJ(p),i=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){var u=i(c);if(u)return u;var d=sJ(c,r);return s(c,d),d}return function(){return o(JX.apply(null,arguments))}}function hn(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var gF=/^\[(?:([a-z-]+):)?(.+)\]$/i,aJ=/^\d+\/\d+$/,lJ=new Set(["px","full","screen"]),cJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))/,dJ=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function As(t){return _c(t)||lJ.has(t)||aJ.test(t)||Ia(t)}function Ia(t){return Qc(t,"length",vJ)}function fJ(t){return Qc(t,"size",vF)}function hJ(t){return Qc(t,"position",vF)}function pJ(t){return Qc(t,"url",yJ)}function Nv(t){return Qc(t,"number",_c)}function _c(t){return!Number.isNaN(Number(t))}function mJ(t){return t.endsWith("%")&&_c(t.slice(0,-1))}function uh(t){return eI(t)||Qc(t,"number",eI)}function zn(t){return gF.test(t)}function dh(){return!0}function ba(t){return cJ.test(t)}function gJ(t){return Qc(t,"",xJ)}function Qc(t,e,n){var r=gF.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function vJ(t){return uJ.test(t)}function vF(){return!1}function yJ(t){return t.startsWith("url(")}function eI(t){return Number.isInteger(Number(t))}function xJ(t){return dJ.test(t)}function _J(){var t=hn("colors"),e=hn("spacing"),n=hn("blur"),r=hn("brightness"),i=hn("borderColor"),s=hn("borderRadius"),o=hn("borderSpacing"),a=hn("borderWidth"),l=hn("contrast"),c=hn("grayscale"),u=hn("hueRotate"),d=hn("invert"),p=hn("gap"),m=hn("gradientColorStops"),v=hn("gradientColorStopPositions"),y=hn("inset"),x=hn("margin"),g=hn("opacity"),_=hn("padding"),E=hn("saturate"),A=hn("scale"),M=hn("sepia"),T=hn("skew"),P=hn("space"),I=hn("translate"),R=function(){return["auto","contain","none"]},D=function(){return["auto","hidden","clip","visible","scroll"]},F=function(){return["auto",e]},X=function(){return["",As]},z=function(){return["auto",_c,zn]},V=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},H=function(){return["solid","dashed","dotted","double","none"]},Q=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Z=function(){return["start","end","center","between","around","evenly","stretch"]},U=function(){return["","0",zn]},N=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},G=function(){return[_c,Nv]},ne=function(){return[_c,zn]};return{cacheSize:500,theme:{colors:[dh],spacing:[As],blur:["none","",ba,Ia],brightness:G(),borderColor:[t],borderRadius:["none","","full",ba,Ia],borderSpacing:[e],borderWidth:X(),contrast:G(),grayscale:U(),hueRotate:ne(),invert:U(),gap:[e],gradientColorStops:[t],gradientColorStopPositions:[mJ,Ia],inset:F(),margin:F(),opacity:G(),padding:[e],saturate:G(),scale:G(),sepia:U(),skew:ne(),space:[e],translate:[e]},classGroups:{aspect:[{aspect:["auto","square","video",zn]}],container:["container"],columns:[{columns:[ba]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(V(),[zn])}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",uh]}],basis:[{basis:[e]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",zn]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",uh]}],"grid-cols":[{"grid-cols":[dh]}],"col-start-end":[{col:["auto",{span:[uh]},zn]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[dh]}],"row-start-end":[{row:["auto",{span:[uh]},zn]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",zn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",zn]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(Z())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Z(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Z(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",e]}],"min-w":[{"min-w":["min","max","fit",As]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ba]},ba,Ia]}],h:[{h:[e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",As]}],"max-h":[{"max-h":[e,"min","max","fit"]}],"font-size":[{text:["base",ba,Ia]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nv]}],"font-family":[{font:[dh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ia]}],"line-clamp":[{"line-clamp":["none",_c,Nv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",As]}],"list-image":[{"list-image":["none",zn]}],"list-style-type":[{list:["none","disc","decimal",zn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(H(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",As]}],"underline-offset":[{"underline-offset":["auto",As]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[e]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ia]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",zn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(V(),[hJ])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fJ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},pJ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[].concat(H(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:H()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(H())}],"outline-offset":[{"outline-offset":[As]}],"outline-w":[{outline:[As]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[As]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ba,gJ]}],"shadow-color":[{shadow:[dh]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":Q()}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ba,zn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[E]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",zn]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",zn]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",zn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[uh,zn]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",zn]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",zn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[e]}],"scroll-mx":[{"scroll-mx":[e]}],"scroll-my":[{"scroll-my":[e]}],"scroll-ms":[{"scroll-ms":[e]}],"scroll-me":[{"scroll-me":[e]}],"scroll-mt":[{"scroll-mt":[e]}],"scroll-mr":[{"scroll-mr":[e]}],"scroll-mb":[{"scroll-mb":[e]}],"scroll-ml":[{"scroll-ml":[e]}],"scroll-p":[{"scroll-p":[e]}],"scroll-px":[{"scroll-px":[e]}],"scroll-py":[{"scroll-py":[e]}],"scroll-ps":[{"scroll-ps":[e]}],"scroll-pe":[{"scroll-pe":[e]}],"scroll-pt":[{"scroll-pt":[e]}],"scroll-pr":[{"scroll-pr":[e]}],"scroll-pb":[{"scroll-pb":[e]}],"scroll-pl":[{"scroll-pl":[e]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",zn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[As,Nv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var SJ=oJ(_J);function Pt(...t){return SJ(fF(t))}const jh={red:{color:"#FFFFFF",emissive:"#FF0100",emissiveIntensity:5},"light-pink":{color:"#FFFFFF",emissive:"#FD0857",emissiveIntensity:5},pink:{color:"#FFFFFF",emissive:"#FE08E8",emissiveIntensity:5},yellow:{color:"#FFFFFF",emissive:"#E9DE00",emissiveIntensity:3},orange:{color:"#FFFFFF",emissive:"#FF5601",emissiveIntensity:5},golden:{color:"#FFFFFF",emissive:"#FF7D00",emissiveIntensity:5},green:{color:"#FFFFFF",emissive:"#04FA28",emissiveIntensity:2},"ice-blue":{color:"#FFFFFF",emissive:"#00AFE6",emissiveIntensity:4},blue:{color:"#FFFFFF",emissive:"#0101FE",emissiveIntensity:13.5},purple:{color:"#FFFFFF",emissive:"#9100F3",emissiveIntensity:9},"warm-white":{color:"#FFFFFF",emissive:"#FCB562",emissiveIntensity:5},"cold-white":{color:"#FFFFFF",emissive:"#9BB1D9",emissiveIntensity:4}},tI=()=>{const t=Object.keys(jh);return jh[t[t.length*Math.random()<<0]]},wJ=XX("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-[linear-gradient(277deg,_#f50cf5_-3%,#f50cf5_28%,#f5002e_123%)] bg-cover  bg-blend-normal bg-no-repeat rounded-[200px] text-white uppercase text-xs tracking-wide ",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-solid border-primarypink rounded-[200px] text-primarypink",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-5 ",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),hr=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Fc:"button";return L.jsx(o,{className:Pt(wJ({variant:e,size:n,className:t})),ref:s,...i})});hr.displayName="Button";var EJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const AJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),on=(t,e)=>{const n=S.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>S.createElement("svg",{ref:c,...EJ,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${AJ(t)}`,...l},[...e.map(([u,d])=>S.createElement(u,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},bJ=on("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]),yF=on("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),MJ=on("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),CJ=on("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),TJ=on("Croissant",[["path",{d:"m4.6 13.11 5.79-3.21c1.89-1.05 4.79 1.78 3.71 3.71l-3.22 5.81C8.8 23.16.79 15.23 4.6 13.11Z",key:"1ozxlb"}],["path",{d:"m10.5 9.5-1-2.29C9.2 6.48 8.8 6 8 6H4.5C2.79 6 2 6.5 2 8.5a7.71 7.71 0 0 0 2 4.83",key:"ffuyb5"}],["path",{d:"M8 6c0-1.55.24-4-2-4-2 0-2.5 2.17-2.5 4",key:"osnpzi"}],["path",{d:"m14.5 13.5 2.29 1c.73.3 1.21.7 1.21 1.5v3.5c0 1.71-.5 2.5-2.5 2.5a7.71 7.71 0 0 1-4.83-2",key:"1vubaw"}],["path",{d:"M18 16c1.55 0 4-.24 4 2 0 2-2.17 2.5-4 2.5",key:"wxr772"}]]),RJ=on("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]),PJ=on("Diamond",[["rect",{width:"15.56",height:"15.56",x:"12",y:"1",rx:"2.41",transform:"rotate(45 12 1)",key:"mruvuj"}]]),IJ=on("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]),BJ=on("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),DJ=on("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),LJ=on("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),OJ=on("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),NJ=on("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),FJ=on("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),UJ=on("LightbulbOff",[["path",{d:"M16.8 11.2c.8-.9 1.2-2 1.2-3.2a6 6 0 0 0-9.3-5",key:"1fkcox"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M6.3 6.3a4.67 4.67 0 0 0 1.2 5.2c.7.7 1.3 1.5 1.5 2.5",key:"10m8kw"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),kJ=on("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),zJ=on("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),HJ=on("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),GJ=on("Ruler",[["path",{d:"M21.3 8.7 8.7 21.3c-1 1-2.5 1-3.4 0l-2.6-2.6c-1-1-1-2.5 0-3.4L15.3 2.7c1-1 2.5-1 3.4 0l2.6 2.6c1 1 1 2.5 0 3.4Z",key:"14xb44"}],["path",{d:"m7.5 10.5 2 2",key:"3h1c69"}],["path",{d:"m10.5 7.5 2 2",key:"1lvsmz"}],["path",{d:"m13.5 4.5 2 2",key:"1i616n"}],["path",{d:"m4.5 13.5 2 2",key:"16iojn"}]]),$J=on("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}]]),VJ=on("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),WJ=on("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),jJ=on("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),xF=on("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),XJ=on("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),TM=on("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),JJ=on("Triangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}]]),xx=on("X",[["line",{x1:"18",x2:"6",y1:"6",y2:"18",key:"15jfxm"}],["line",{x1:"6",x2:"18",y1:"6",y2:"18",key:"d1lma3"}]]),KJ={file:L.jsx(BJ,{size:36,strokeWidth:1}),layers:L.jsx(FJ,{size:36,strokeWidth:1}),star:L.jsx(xF,{size:36,strokeWidth:1}),image:L.jsx(OJ,{size:36,strokeWidth:1}),crop:L.jsx(RJ,{size:36,strokeWidth:1}),settings:L.jsx(VJ,{size:36,strokeWidth:1})},YJ=t=>[t.setSelectedSidebar,t.selectedSidebar,t.setIsShown],fh=({icon:t,text:e,id:n})=>{const[r,i,s]=mf(YJ),o=uF(l=>l.setIsOpen),a=gm(l=>l.setIsOpen);return L.jsxs("button",{onClick:()=>{switch(n){case 1:s(!1),a(!1),o(!0),s(!1);return;case 0:s(!1),o(!1),a(!0);return;default:if(i===n){s(!1);return}o(!1),a(!1),s(!0),r(n);return}},className:Pt("flex relative flex-col gap-1 justify-center items-center rounded-sm px-3 hover:text-accent-foreground",'after:absolute after:content-[""] after:left-0 after:right-0 after:h-0.5 after:bg-transparent hover:after:bg-primarypink after:rounded-t-sm after:-bottom-1',i===n&&"after:bg-primarypink"),children:[KJ[t],L.jsx("h1",{className:Pt("text-xs relative"),children:e})]})},QJ=()=>{const t=ho(s=>s.boardSize),[e,n]=gm(s=>[s.placement,s.mountingKit]),r=e==="outdoor"?10:0,i=n.type==="wall"?10:0;return L.jsx("header",{className:"sticky top-0 z-40 w-full  bg-secondary",children:L.jsxs("div",{className:" flex h-16 items-center justify-between space-2 px-2 sm:justify-between sm:space-x-0",children:[L.jsx("div",{className:"flex items-center justify-between space-x-2",children:L.jsxs("nav",{className:"flex items-center space-x-2",children:[L.jsx(fh,{icon:"file",text:"Template gallery",id:1}),L.jsx(fh,{icon:"layers",text:"Layers",id:5}),L.jsx(fh,{icon:"image",text:"Background",id:3}),L.jsx(fh,{icon:"crop",text:"Board",id:6}),L.jsx(fh,{icon:"settings",text:"Sign settings",id:0})]})}),L.jsxs("div",{className:"flex flex-auto items-center justify-center gap-1",children:[L.jsx("h1",{className:"uppercase font-thin",children:t!==null&&!isNaN(t[0])&&!isNaN(t[1])?`${Math.floor(t[0])}cm x ${Math.floor(t[1])}cm`:"0cm x 0cm"}),L.jsx(IJ,{scale:24}),L.jsx("p",{className:"font-bold text-[#F60793]",children:t&&!isNaN(t[0])&&!isNaN(t[1])?Math.floor(t[0])*Math.floor(t[1])/100+i+r+"$":"0$"})]}),L.jsxs("div",{className:" flex flex-1 justify-end space-x-4",children:[L.jsx(hr,{children:"Order now"}),L.jsx(hr,{variant:"outline",children:"Get custom design"})]})]})})};var _F={exports:{}},qc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */qc.ConcurrentRoot=1;qc.ContinuousEventPriority=4;qc.DefaultEventPriority=16;qc.DiscreteEventPriority=1;qc.IdleEventPriority=536870912;qc.LegacyRoot=0;_F.exports=qc;var vd=_F.exports;function qJ(t){let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),n.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!d(p,v)){const y=p;c(p=v,y)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const ZJ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),nI=ZJ?S.useEffect:S.useLayoutEffect;function eK(t){const e=typeof t=="function"?qJ(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=S.useReducer(x=>x+1,0),o=e.getState(),a=S.useRef(o),l=S.useRef(r),c=S.useRef(i),u=S.useRef(!1),d=S.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(d.current,p)),nI(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=S.useRef(o);nI(()=>{const x=()=>{try{const _=e.getState(),E=l.current(_);c.current(d.current,E)||(a.current=_,d.current=E,s())}catch{u.current=!0,s()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const y=m?p:d.current;return S.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var SF={exports:{}},wF={exports:{}},EF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,N){var G=U.length;U.push(N);e:for(;0<G;){var ne=G-1>>>1,J=U[ne];if(0<i(J,N))U[ne]=N,U[G]=J,G=ne;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var N=U[0],G=U.pop();if(G!==N){U[0]=G;e:for(var ne=0,J=U.length,ee=J>>>1;ne<ee;){var te=2*(ne+1)-1,ye=U[te],Ae=te+1,K=U[Ae];if(0>i(ye,G))Ae<J&&0>i(K,ye)?(U[ne]=K,U[Ae]=G,ne=Ae):(U[ne]=ye,U[te]=G,ne=te);else if(Ae<J&&0>i(K,G))U[ne]=K,U[Ae]=G,ne=Ae;else break e}}return N}function i(U,N){var G=U.sortIndex-N.sortIndex;return G!==0?G:U.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=U)r(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function A(U){if(y=!1,E(U),!v)if(n(l)!==null)v=!0,Q(M);else{var N=n(c);N!==null&&Z(A,N.startTime-U)}}function M(U,N){v=!1,y&&(y=!1,g(I),I=-1),m=!0;var G=p;try{for(E(N),d=n(l);d!==null&&(!(d.expirationTime>N)||U&&!F());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var J=ne(d.expirationTime<=N);N=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&r(l),E(N)}else r(l);d=n(l)}if(d!==null)var ee=!0;else{var te=n(c);te!==null&&Z(A,te.startTime-N),ee=!1}return ee}finally{d=null,p=G,m=!1}}var T=!1,P=null,I=-1,R=5,D=-1;function F(){return!(t.unstable_now()-D<R)}function X(){if(P!==null){var U=t.unstable_now();D=U;var N=!0;try{N=P(!0,U)}finally{N?z():(T=!1,P=null)}}else T=!1}var z;if(typeof _=="function")z=function(){_(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,H=V.port2;V.port1.onmessage=X,z=function(){H.postMessage(null)}}else z=function(){x(X,0)};function Q(U){P=U,T||(T=!0,z())}function Z(U,N){I=x(function(){U(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,Q(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var N=3;break;default:N=p}var G=p;p=N;try{return U()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,N){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=p;p=U;try{return N()}finally{p=G}},t.unstable_scheduleCallback=function(U,N,G){var ne=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ne+G:ne):G=ne,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=G+J,U={id:u++,callback:N,priorityLevel:U,startTime:G,expirationTime:J,sortIndex:-1},G>ne?(U.sortIndex=G,e(c,U),n(l)===null&&U===n(c)&&(y?(g(I),I=-1):y=!0,Z(A,G-ne))):(U.sortIndex=J,e(l,U),v||m||(v=!0,Q(M))),U},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(U){var N=p;return function(){var G=p;p=N;try{return U.apply(this,arguments)}finally{p=G}}}})(EF);wF.exports=EF;var VE=wF.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tK=function(e){var n={},r=S,i=VE,s=Object.assign;function o(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),M=Symbol.iterator;function T(f){return f===null||typeof f!="object"?null:(f=M&&f[M]||f["@@iterator"],typeof f=="function"?f:null)}function P(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case v:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case y:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case _:return h=f.displayName||null,h!==null?h:P(f.type)||"Memo";case E:h=f._payload,f=f._init;try{return P(f(h))}catch{}}return null}function I(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function R(f){var h=f,w=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(w=h.return),f=h.return;while(f)}return h.tag===3?w:null}function D(f){if(R(f)!==f)throw Error(o(188))}function F(f){var h=f.alternate;if(!h){if(h=R(f),h===null)throw Error(o(188));return h!==f?null:f}for(var w=f,b=h;;){var C=w.return;if(C===null)break;var B=C.alternate;if(B===null){if(b=C.return,b!==null){w=b;continue}break}if(C.child===B.child){for(B=C.child;B;){if(B===w)return D(C),f;if(B===b)return D(C),h;B=B.sibling}throw Error(o(188))}if(w.return!==b.return)w=C,b=B;else{for(var j=!1,se=C.child;se;){if(se===w){j=!0,w=C,b=B;break}if(se===b){j=!0,b=C,w=B;break}se=se.sibling}if(!j){for(se=B.child;se;){if(se===w){j=!0,w=B,b=C;break}if(se===b){j=!0,b=B,w=C;break}se=se.sibling}if(!j)throw Error(o(189))}}if(w.alternate!==b)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?f:h}function X(f){return f=F(f),f!==null?z(f):null}function z(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=z(f);if(h!==null)return h;f=f.sibling}return null}function V(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var h=V(f);if(h!==null)return h}f=f.sibling}return null}var H=Array.isArray,Q=e.getPublicInstance,Z=e.getRootHostContext,U=e.getChildHostContext,N=e.prepareForCommit,G=e.resetAfterCommit,ne=e.createInstance,J=e.appendInitialChild,ee=e.finalizeInitialChildren,te=e.prepareUpdate,ye=e.shouldSetTextContent,Ae=e.createTextInstance,K=e.scheduleTimeout,Ge=e.cancelTimeout,We=e.noTimeout,Se=e.isPrimaryRenderer,Me=e.supportsMutation,me=e.supportsPersistence,re=e.supportsHydration,fe=e.getInstanceFromNode,Le=e.preparePortalMount,Be=e.getCurrentEventPriority,Ue=e.detachDeletedInstance,Ke=e.supportsMicrotasks,ke=e.scheduleMicrotask,Ye=e.supportsTestSelectors,ht=e.findFiberRoot,W=e.getBoundingRect,k=e.getTextContent,Y=e.isHiddenSubtree,ce=e.matchAccessibilityRole,we=e.setFocusIfFocusable,Te=e.setupIntersectionObserver,Qe=e.appendChild,ze=e.appendChildToContainer,ve=e.commitTextUpdate,Je=e.commitMount,q=e.commitUpdate,ge=e.insertBefore,be=e.insertInContainerBefore,Pe=e.removeChild,nt=e.removeChildFromContainer,ut=e.resetTextContent,$t=e.hideInstance,ie=e.hideTextInstance,pe=e.unhideInstance,Ce=e.unhideTextInstance,Xe=e.clearContainer,rt=e.cloneInstance,Kt=e.createContainerChildSet,Yt=e.appendChildToContainerChildSet,ar=e.finalizeContainerChildren,hs=e.replaceContainerChildren,xn=e.cloneHiddenInstance,$r=e.cloneHiddenTextInstance,Hi=e.canHydrateInstance,iu=e.canHydrateTextInstance,Lm=e.canHydrateSuspenseInstance,Om=e.isSuspenseInstancePending,Mf=e.isSuspenseInstanceFallback,i1=e.registerSuspenseInstanceRetry,$=e.getNextHydratableSibling,ue=e.getFirstHydratableChild,_e=e.getFirstHydratableChildWithinContainer,ae=e.getFirstHydratableChildWithinSuspenseInstance,Ee=e.hydrateInstance,ot=e.hydrateTextInstance,lt=e.hydrateSuspenseInstance,dt=e.getNextHydratableInstanceAfterSuspenseInstance,_t=e.commitHydratedContainer,Mt=e.commitHydratedSuspenseInstance,Ct=e.clearSuspenseBoundary,It=e.clearSuspenseBoundaryFromContainer,Qt=e.shouldDeleteUnhydratedTailInstances,mr=e.didNotMatchHydratedContainerTextInstance,_i=e.didNotMatchHydratedTextInstance,ps;function un(f){if(ps===void 0)try{throw Error()}catch(w){var h=w.stack.trim().match(/\n( *(at )?)/);ps=h&&h[1]||""}return`
`+ps+f}var Bt=!1;function Rl(f,h){if(!f||Bt)return"";Bt=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(De){var b=De}Reflect.construct(f,[],h)}else{try{h.call()}catch(De){b=De}f.call(h.prototype)}else{try{throw Error()}catch(De){b=De}f()}}catch(De){if(De&&b&&typeof De.stack=="string"){for(var C=De.stack.split(`
`),B=b.stack.split(`
`),j=C.length-1,se=B.length-1;1<=j&&0<=se&&C[j]!==B[se];)se--;for(;1<=j&&0<=se;j--,se--)if(C[j]!==B[se]){if(j!==1||se!==1)do if(j--,se--,0>se||C[j]!==B[se]){var xe=`
`+C[j].replace(" at new "," at ");return f.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",f.displayName)),xe}while(1<=j&&0<=se);break}}}finally{Bt=!1,Error.prepareStackTrace=w}return(f=f?f.displayName||f.name:"")?un(f):""}var Xn=Object.prototype.hasOwnProperty,ms=[],xo=-1;function ei(f){return{current:f}}function qt(f){0>xo||(f.current=ms[xo],ms[xo]=null,xo--)}function St(f,h){xo++,ms[xo]=f.current,f.current=h}var Cr={},Jn=ei(Cr),nn=ei(!1),gs=Cr;function ua(f,h){var w=f.type.contextTypes;if(!w)return Cr;var b=f.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var C={},B;for(B in w)C[B]=h[B];return b&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=C),C}function gr(f){return f=f.childContextTypes,f!=null}function Nm(){qt(nn),qt(Jn)}function BC(f,h,w){if(Jn.current!==Cr)throw Error(o(168));St(Jn,h),St(nn,w)}function DC(f,h,w){var b=f.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return w;b=b.getChildContext();for(var C in b)if(!(C in h))throw Error(o(108,I(f)||"Unknown",C));return s({},w,b)}function Fm(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Cr,gs=Jn.current,St(Jn,f),St(nn,nn.current),!0}function LC(f,h,w){var b=f.stateNode;if(!b)throw Error(o(169));w?(f=DC(f,h,gs),b.__reactInternalMemoizedMergedChildContext=f,qt(nn),qt(Jn),St(Jn,f)):qt(nn),St(nn,w)}var vs=Math.clz32?Math.clz32:Yz,Jz=Math.log,Kz=Math.LN2;function Yz(f){return f>>>=0,f===0?32:31-(Jz(f)/Kz|0)|0}var Um=64,km=4194304;function Cf(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function zm(f,h){var w=f.pendingLanes;if(w===0)return 0;var b=0,C=f.suspendedLanes,B=f.pingedLanes,j=w&268435455;if(j!==0){var se=j&~C;se!==0?b=Cf(se):(B&=j,B!==0&&(b=Cf(B)))}else j=w&~C,j!==0?b=Cf(j):B!==0&&(b=Cf(B));if(b===0)return 0;if(h!==0&&h!==b&&!(h&C)&&(C=b&-b,B=h&-h,C>=B||C===16&&(B&4194240)!==0))return h;if(b&4&&(b|=w&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=b;0<h;)w=31-vs(h),C=1<<w,b|=f[w],h&=~C;return b}function Qz(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qz(f,h){for(var w=f.suspendedLanes,b=f.pingedLanes,C=f.expirationTimes,B=f.pendingLanes;0<B;){var j=31-vs(B),se=1<<j,xe=C[j];xe===-1?(!(se&w)||se&b)&&(C[j]=Qz(se,h)):xe<=h&&(f.expiredLanes|=se),B&=~se}}function s1(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function o1(f){for(var h=[],w=0;31>w;w++)h.push(f);return h}function Tf(f,h,w){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-vs(h),f[h]=w}function Zz(f,h){var w=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var b=f.eventTimes;for(f=f.expirationTimes;0<w;){var C=31-vs(w),B=1<<C;h[C]=0,b[C]=-1,f[C]=-1,w&=~B}}function a1(f,h){var w=f.entangledLanes|=h;for(f=f.entanglements;w;){var b=31-vs(w),C=1<<b;C&h|f[b]&h&&(f[b]|=h),w&=~C}}var Vt=0;function OC(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var l1=i.unstable_scheduleCallback,NC=i.unstable_cancelCallback,e5=i.unstable_shouldYield,t5=i.unstable_requestPaint,lr=i.unstable_now,c1=i.unstable_ImmediatePriority,n5=i.unstable_UserBlockingPriority,u1=i.unstable_NormalPriority,r5=i.unstable_IdlePriority,Hm=null,Ws=null;function i5(f){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(Hm,f,void 0,(f.current.flags&128)===128)}catch{}}function s5(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var js=typeof Object.is=="function"?Object.is:s5,_o=null,Gm=!1,d1=!1;function FC(f){_o===null?_o=[f]:_o.push(f)}function o5(f){Gm=!0,FC(f)}function Xs(){if(!d1&&_o!==null){d1=!0;var f=0,h=Vt;try{var w=_o;for(Vt=1;f<w.length;f++){var b=w[f];do b=b(!0);while(b!==null)}_o=null,Gm=!1}catch(C){throw _o!==null&&(_o=_o.slice(f+1)),l1(c1,Xs),C}finally{Vt=h,d1=!1}}return null}var a5=a.ReactCurrentBatchConfig;function $m(f,h){if(js(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var w=Object.keys(f),b=Object.keys(h);if(w.length!==b.length)return!1;for(b=0;b<w.length;b++){var C=w[b];if(!Xn.call(h,C)||!js(f[C],h[C]))return!1}return!0}function l5(f){switch(f.tag){case 5:return un(f.type);case 16:return un("Lazy");case 13:return un("Suspense");case 19:return un("SuspenseList");case 0:case 2:case 15:return f=Rl(f.type,!1),f;case 11:return f=Rl(f.type.render,!1),f;case 1:return f=Rl(f.type,!0),f;default:return""}}function ys(f,h){if(f&&f.defaultProps){h=s({},h),f=f.defaultProps;for(var w in f)h[w]===void 0&&(h[w]=f[w]);return h}return h}var Vm=ei(null),Wm=null,su=null,f1=null;function h1(){f1=su=Wm=null}function UC(f,h,w){Se?(St(Vm,h._currentValue),h._currentValue=w):(St(Vm,h._currentValue2),h._currentValue2=w)}function p1(f){var h=Vm.current;qt(Vm),Se?f._currentValue=h:f._currentValue2=h}function m1(f,h,w){for(;f!==null;){var b=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),f===w)break;f=f.return}}function ou(f,h){Wm=f,f1=su=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(Ei=!0),f.firstContext=null)}function Gi(f){var h=Se?f._currentValue:f._currentValue2;if(f1!==f)if(f={context:f,memoizedValue:h,next:null},su===null){if(Wm===null)throw Error(o(308));su=f,Wm.dependencies={lanes:0,firstContext:f}}else su=su.next=f;return h}var Js=null,da=!1;function g1(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kC(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function So(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function fa(f,h){var w=f.updateQueue;w!==null&&(w=w.shared,Kn!==null&&f.mode&1&&!(Tt&2)?(f=w.interleaved,f===null?(h.next=h,Js===null?Js=[w]:Js.push(w)):(h.next=f.next,f.next=h),w.interleaved=h):(f=w.pending,f===null?h.next=h:(h.next=f.next,f.next=h),w.pending=h))}function jm(f,h,w){if(h=h.updateQueue,h!==null&&(h=h.shared,(w&4194240)!==0)){var b=h.lanes;b&=f.pendingLanes,w|=b,h.lanes=w,a1(f,w)}}function zC(f,h){var w=f.updateQueue,b=f.alternate;if(b!==null&&(b=b.updateQueue,w===b)){var C=null,B=null;if(w=w.firstBaseUpdate,w!==null){do{var j={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};B===null?C=B=j:B=B.next=j,w=w.next}while(w!==null);B===null?C=B=h:B=B.next=h}else C=B=h;w={baseState:b.baseState,firstBaseUpdate:C,lastBaseUpdate:B,shared:b.shared,effects:b.effects},f.updateQueue=w;return}f=w.lastBaseUpdate,f===null?w.firstBaseUpdate=h:f.next=h,w.lastBaseUpdate=h}function Xm(f,h,w,b){var C=f.updateQueue;da=!1;var B=C.firstBaseUpdate,j=C.lastBaseUpdate,se=C.shared.pending;if(se!==null){C.shared.pending=null;var xe=se,De=xe.next;xe.next=null,j===null?B=De:j.next=De,j=xe;var et=f.alternate;et!==null&&(et=et.updateQueue,se=et.lastBaseUpdate,se!==j&&(se===null?et.firstBaseUpdate=De:se.next=De,et.lastBaseUpdate=xe))}if(B!==null){var pt=C.baseState;j=0,et=De=xe=null,se=B;do{var at=se.lane,an=se.eventTime;if((b&at)===at){et!==null&&(et=et.next={eventTime:an,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var st=f,Ir=se;switch(at=h,an=w,Ir.tag){case 1:if(st=Ir.payload,typeof st=="function"){pt=st.call(an,pt,at);break e}pt=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=Ir.payload,at=typeof st=="function"?st.call(an,pt,at):st,at==null)break e;pt=s({},pt,at);break e;case 2:da=!0}}se.callback!==null&&se.lane!==0&&(f.flags|=64,at=C.effects,at===null?C.effects=[se]:at.push(se))}else an={eventTime:an,lane:at,tag:se.tag,payload:se.payload,callback:se.callback,next:null},et===null?(De=et=an,xe=pt):et=et.next=an,j|=at;if(se=se.next,se===null){if(se=C.shared.pending,se===null)break;at=se,se=at.next,at.next=null,C.lastBaseUpdate=at,C.shared.pending=null}}while(1);if(et===null&&(xe=pt),C.baseState=xe,C.firstBaseUpdate=De,C.lastBaseUpdate=et,h=C.shared.interleaved,h!==null){C=h;do j|=C.lane,C=C.next;while(C!==h)}else B===null&&(C.shared.lanes=0);mu|=j,f.lanes=j,f.memoizedState=pt}}function HC(f,h,w){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var b=f[h],C=b.callback;if(C!==null){if(b.callback=null,b=w,typeof C!="function")throw Error(o(191,C));C.call(b)}}}var GC=new r.Component().refs;function v1(f,h,w,b){h=f.memoizedState,w=w(b,h),w=w==null?h:s({},h,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var Jm={isMounted:function(f){return(f=f._reactInternals)?R(f)===f:!1},enqueueSetState:function(f,h,w){f=f._reactInternals;var b=Wr(),C=ma(f),B=So(b,C);B.payload=h,w!=null&&(B.callback=w),fa(f,B),h=Xi(f,C,b),h!==null&&jm(h,f,C)},enqueueReplaceState:function(f,h,w){f=f._reactInternals;var b=Wr(),C=ma(f),B=So(b,C);B.tag=1,B.payload=h,w!=null&&(B.callback=w),fa(f,B),h=Xi(f,C,b),h!==null&&jm(h,f,C)},enqueueForceUpdate:function(f,h){f=f._reactInternals;var w=Wr(),b=ma(f),C=So(w,b);C.tag=2,h!=null&&(C.callback=h),fa(f,C),h=Xi(f,b,w),h!==null&&jm(h,f,b)}};function $C(f,h,w,b,C,B,j){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(b,B,j):h.prototype&&h.prototype.isPureReactComponent?!$m(w,b)||!$m(C,B):!0}function VC(f,h,w){var b=!1,C=Cr,B=h.contextType;return typeof B=="object"&&B!==null?B=Gi(B):(C=gr(h)?gs:Jn.current,b=h.contextTypes,B=(b=b!=null)?ua(f,C):Cr),h=new h(w,B),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Jm,f.stateNode=h,h._reactInternals=f,b&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=C,f.__reactInternalMemoizedMaskedChildContext=B),h}function WC(f,h,w,b){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(w,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(w,b),h.state!==f&&Jm.enqueueReplaceState(h,h.state,null)}function y1(f,h,w,b){var C=f.stateNode;C.props=w,C.state=f.memoizedState,C.refs=GC,g1(f);var B=h.contextType;typeof B=="object"&&B!==null?C.context=Gi(B):(B=gr(h)?gs:Jn.current,C.context=ua(f,B)),C.state=f.memoizedState,B=h.getDerivedStateFromProps,typeof B=="function"&&(v1(f,h,B,w),C.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(h=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),h!==C.state&&Jm.enqueueReplaceState(C,C.state,null),Xm(f,w,C,b),C.state=f.memoizedState),typeof C.componentDidMount=="function"&&(f.flags|=4194308)}var au=[],lu=0,Km=null,Ym=0,$i=[],Vi=0,Pl=null,wo=1,Eo="";function Il(f,h){au[lu++]=Ym,au[lu++]=Km,Km=f,Ym=h}function jC(f,h,w){$i[Vi++]=wo,$i[Vi++]=Eo,$i[Vi++]=Pl,Pl=f;var b=wo;f=Eo;var C=32-vs(b)-1;b&=~(1<<C),w+=1;var B=32-vs(h)+C;if(30<B){var j=C-C%5;B=(b&(1<<j)-1).toString(32),b>>=j,C-=j,wo=1<<32-vs(h)+C|w<<C|b,Eo=B+f}else wo=1<<B|w<<C|b,Eo=f}function x1(f){f.return!==null&&(Il(f,1),jC(f,1,0))}function _1(f){for(;f===Km;)Km=au[--lu],au[lu]=null,Ym=au[--lu],au[lu]=null;for(;f===Pl;)Pl=$i[--Vi],$i[Vi]=null,Eo=$i[--Vi],$i[Vi]=null,wo=$i[--Vi],$i[Vi]=null}var Si=null,wi=null,_n=!1,Rf=!1,xs=null;function XC(f,h){var w=Ji(5,null,null,0);w.elementType="DELETED",w.stateNode=h,w.return=f,h=f.deletions,h===null?(f.deletions=[w],f.flags|=16):h.push(w)}function JC(f,h){switch(f.tag){case 5:return h=Hi(h,f.type,f.pendingProps),h!==null?(f.stateNode=h,Si=f,wi=ue(h),!0):!1;case 6:return h=iu(h,f.pendingProps),h!==null?(f.stateNode=h,Si=f,wi=null,!0):!1;case 13:if(h=Lm(h),h!==null){var w=Pl!==null?{id:wo,overflow:Eo}:null;return f.memoizedState={dehydrated:h,treeContext:w,retryLane:1073741824},w=Ji(18,null,null,0),w.stateNode=h,w.return=f,f.child=w,Si=f,wi=null,!0}return!1;default:return!1}}function S1(f){return(f.mode&1)!==0&&(f.flags&128)===0}function w1(f){if(_n){var h=wi;if(h){var w=h;if(!JC(f,h)){if(S1(f))throw Error(o(418));h=$(w);var b=Si;h&&JC(f,h)?XC(b,w):(f.flags=f.flags&-4097|2,_n=!1,Si=f)}}else{if(S1(f))throw Error(o(418));f.flags=f.flags&-4097|2,_n=!1,Si=f}}}function KC(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Si=f}function Pf(f){if(!re||f!==Si)return!1;if(!_n)return KC(f),_n=!0,!1;if(f.tag!==3&&(f.tag!==5||Qt(f.type)&&!ye(f.type,f.memoizedProps))){var h=wi;if(h){if(S1(f)){for(f=wi;f;)f=$(f);throw Error(o(418))}for(;h;)XC(f,h),h=$(h)}}if(KC(f),f.tag===13){if(!re)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));wi=dt(f)}else wi=Si?$(f.stateNode):null;return!0}function cu(){re&&(wi=Si=null,Rf=_n=!1)}function E1(f){xs===null?xs=[f]:xs.push(f)}function If(f,h,w){if(f=w.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var b=w.stateNode}if(!b)throw Error(o(147,f));var C=b,B=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===B?h.ref:(h=function(j){var se=C.refs;se===GC&&(se=C.refs={}),j===null?delete se[B]:se[B]=j},h._stringRef=B,h)}if(typeof f!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,f))}return f}function Qm(f,h){throw f=Object.prototype.toString.call(h),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function YC(f){var h=f._init;return h(f._payload)}function QC(f){function h(le,oe){if(f){var he=le.deletions;he===null?(le.deletions=[oe],le.flags|=16):he.push(oe)}}function w(le,oe){if(!f)return null;for(;oe!==null;)h(le,oe),oe=oe.sibling;return null}function b(le,oe){for(le=new Map;oe!==null;)oe.key!==null?le.set(oe.key,oe):le.set(oe.index,oe),oe=oe.sibling;return le}function C(le,oe){return le=va(le,oe),le.index=0,le.sibling=null,le}function B(le,oe,he){return le.index=he,f?(he=le.alternate,he!==null?(he=he.index,he<oe?(le.flags|=2,oe):he):(le.flags|=2,oe)):(le.flags|=1048576,oe)}function j(le){return f&&le.alternate===null&&(le.flags|=2),le}function se(le,oe,he,$e){return oe===null||oe.tag!==6?(oe=o_(he,le.mode,$e),oe.return=le,oe):(oe=C(oe,he),oe.return=le,oe)}function xe(le,oe,he,$e){var it=he.type;return it===u?et(le,oe,he.props.children,$e,he.key):oe!==null&&(oe.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===E&&YC(it)===oe.type)?($e=C(oe,he.props),$e.ref=If(le,oe,he),$e.return=le,$e):($e=Tg(he.type,he.key,he.props,null,le.mode,$e),$e.ref=If(le,oe,he),$e.return=le,$e)}function De(le,oe,he,$e){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==he.containerInfo||oe.stateNode.implementation!==he.implementation?(oe=a_(he,le.mode,$e),oe.return=le,oe):(oe=C(oe,he.children||[]),oe.return=le,oe)}function et(le,oe,he,$e,it){return oe===null||oe.tag!==7?(oe=Ul(he,le.mode,$e,it),oe.return=le,oe):(oe=C(oe,he),oe.return=le,oe)}function pt(le,oe,he){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=o_(""+oe,le.mode,he),oe.return=le,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case l:return he=Tg(oe.type,oe.key,oe.props,null,le.mode,he),he.ref=If(le,null,oe),he.return=le,he;case c:return oe=a_(oe,le.mode,he),oe.return=le,oe;case E:var $e=oe._init;return pt(le,$e(oe._payload),he)}if(H(oe)||T(oe))return oe=Ul(oe,le.mode,he,null),oe.return=le,oe;Qm(le,oe)}return null}function at(le,oe,he,$e){var it=oe!==null?oe.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return it!==null?null:se(le,oe,""+he,$e);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return he.key===it?xe(le,oe,he,$e):null;case c:return he.key===it?De(le,oe,he,$e):null;case E:return it=he._init,at(le,oe,it(he._payload),$e)}if(H(he)||T(he))return it!==null?null:et(le,oe,he,$e,null);Qm(le,he)}return null}function an(le,oe,he,$e,it){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return le=le.get(he)||null,se(oe,le,""+$e,it);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case l:return le=le.get($e.key===null?he:$e.key)||null,xe(oe,le,$e,it);case c:return le=le.get($e.key===null?he:$e.key)||null,De(oe,le,$e,it);case E:var Et=$e._init;return an(le,oe,he,Et($e._payload),it)}if(H($e)||T($e))return le=le.get(he)||null,et(oe,le,$e,it,null);Qm(oe,$e)}return null}function st(le,oe,he,$e){for(var it=null,Et=null,mt=oe,Wt=oe=0,ur=null;mt!==null&&Wt<he.length;Wt++){mt.index>Wt?(ur=mt,mt=null):ur=mt.sibling;var jt=at(le,mt,he[Wt],$e);if(jt===null){mt===null&&(mt=ur);break}f&&mt&&jt.alternate===null&&h(le,mt),oe=B(jt,oe,Wt),Et===null?it=jt:Et.sibling=jt,Et=jt,mt=ur}if(Wt===he.length)return w(le,mt),_n&&Il(le,Wt),it;if(mt===null){for(;Wt<he.length;Wt++)mt=pt(le,he[Wt],$e),mt!==null&&(oe=B(mt,oe,Wt),Et===null?it=mt:Et.sibling=mt,Et=mt);return _n&&Il(le,Wt),it}for(mt=b(le,mt);Wt<he.length;Wt++)ur=an(mt,le,Wt,he[Wt],$e),ur!==null&&(f&&ur.alternate!==null&&mt.delete(ur.key===null?Wt:ur.key),oe=B(ur,oe,Wt),Et===null?it=ur:Et.sibling=ur,Et=ur);return f&&mt.forEach(function(ya){return h(le,ya)}),_n&&Il(le,Wt),it}function Ir(le,oe,he,$e){var it=T(he);if(typeof it!="function")throw Error(o(150));if(he=it.call(he),he==null)throw Error(o(151));for(var Et=it=null,mt=oe,Wt=oe=0,ur=null,jt=he.next();mt!==null&&!jt.done;Wt++,jt=he.next()){mt.index>Wt?(ur=mt,mt=null):ur=mt.sibling;var ya=at(le,mt,jt.value,$e);if(ya===null){mt===null&&(mt=ur);break}f&&mt&&ya.alternate===null&&h(le,mt),oe=B(ya,oe,Wt),Et===null?it=ya:Et.sibling=ya,Et=ya,mt=ur}if(jt.done)return w(le,mt),_n&&Il(le,Wt),it;if(mt===null){for(;!jt.done;Wt++,jt=he.next())jt=pt(le,jt.value,$e),jt!==null&&(oe=B(jt,oe,Wt),Et===null?it=jt:Et.sibling=jt,Et=jt);return _n&&Il(le,Wt),it}for(mt=b(le,mt);!jt.done;Wt++,jt=he.next())jt=an(mt,le,Wt,jt.value,$e),jt!==null&&(f&&jt.alternate!==null&&mt.delete(jt.key===null?Wt:jt.key),oe=B(jt,oe,Wt),Et===null?it=jt:Et.sibling=jt,Et=jt);return f&&mt.forEach(function(U5){return h(le,U5)}),_n&&Il(le,Wt),it}function Ki(le,oe,he,$e){if(typeof he=="object"&&he!==null&&he.type===u&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case l:e:{for(var it=he.key,Et=oe;Et!==null;){if(Et.key===it){if(it=he.type,it===u){if(Et.tag===7){w(le,Et.sibling),oe=C(Et,he.props.children),oe.return=le,le=oe;break e}}else if(Et.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===E&&YC(it)===Et.type){w(le,Et.sibling),oe=C(Et,he.props),oe.ref=If(le,Et,he),oe.return=le,le=oe;break e}w(le,Et);break}else h(le,Et);Et=Et.sibling}he.type===u?(oe=Ul(he.props.children,le.mode,$e,he.key),oe.return=le,le=oe):($e=Tg(he.type,he.key,he.props,null,le.mode,$e),$e.ref=If(le,oe,he),$e.return=le,le=$e)}return j(le);case c:e:{for(Et=he.key;oe!==null;){if(oe.key===Et)if(oe.tag===4&&oe.stateNode.containerInfo===he.containerInfo&&oe.stateNode.implementation===he.implementation){w(le,oe.sibling),oe=C(oe,he.children||[]),oe.return=le,le=oe;break e}else{w(le,oe);break}else h(le,oe);oe=oe.sibling}oe=a_(he,le.mode,$e),oe.return=le,le=oe}return j(le);case E:return Et=he._init,Ki(le,oe,Et(he._payload),$e)}if(H(he))return st(le,oe,he,$e);if(T(he))return Ir(le,oe,he,$e);Qm(le,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,oe!==null&&oe.tag===6?(w(le,oe.sibling),oe=C(oe,he),oe.return=le,le=oe):(w(le,oe),oe=o_(he,le.mode,$e),oe.return=le,le=oe),j(le)):w(le,oe)}return Ki}var uu=QC(!0),qC=QC(!1),Bf={},Wi=ei(Bf),Df=ei(Bf),du=ei(Bf);function Ks(f){if(f===Bf)throw Error(o(174));return f}function A1(f,h){St(du,h),St(Df,f),St(Wi,Bf),f=Z(h),qt(Wi),St(Wi,f)}function fu(){qt(Wi),qt(Df),qt(du)}function ZC(f){var h=Ks(du.current),w=Ks(Wi.current);h=U(w,f.type,h),w!==h&&(St(Df,f),St(Wi,h))}function b1(f){Df.current===f&&(qt(Wi),qt(Df))}var En=ei(0);function qm(f){for(var h=f;h!==null;){if(h.tag===13){var w=h.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Om(w)||Mf(w)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var M1=[];function C1(){for(var f=0;f<M1.length;f++){var h=M1[f];Se?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}M1.length=0}var Zm=a.ReactCurrentDispatcher,ji=a.ReactCurrentBatchConfig,hu=0,Bn=null,Tr=null,cr=null,eg=!1,Lf=!1,Of=0,c5=0;function Rr(){throw Error(o(321))}function T1(f,h){if(h===null)return!1;for(var w=0;w<h.length&&w<f.length;w++)if(!js(f[w],h[w]))return!1;return!0}function R1(f,h,w,b,C,B){if(hu=B,Bn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Zm.current=f===null||f.memoizedState===null?h5:p5,f=w(b,C),Lf){B=0;do{if(Lf=!1,Of=0,25<=B)throw Error(o(301));B+=1,cr=Tr=null,h.updateQueue=null,Zm.current=m5,f=w(b,C)}while(Lf)}if(Zm.current=sg,h=Tr!==null&&Tr.next!==null,hu=0,cr=Tr=Bn=null,eg=!1,h)throw Error(o(300));return f}function P1(){var f=Of!==0;return Of=0,f}function Ao(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?Bn.memoizedState=cr=f:cr=cr.next=f,cr}function Ys(){if(Tr===null){var f=Bn.alternate;f=f!==null?f.memoizedState:null}else f=Tr.next;var h=cr===null?Bn.memoizedState:cr.next;if(h!==null)cr=h,Tr=f;else{if(f===null)throw Error(o(310));Tr=f,f={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},cr===null?Bn.memoizedState=cr=f:cr=cr.next=f}return cr}function Bl(f,h){return typeof h=="function"?h(f):h}function tg(f){var h=Ys(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=f;var b=Tr,C=b.baseQueue,B=w.pending;if(B!==null){if(C!==null){var j=C.next;C.next=B.next,B.next=j}b.baseQueue=C=B,w.pending=null}if(C!==null){B=C.next,b=b.baseState;var se=j=null,xe=null,De=B;do{var et=De.lane;if((hu&et)===et)xe!==null&&(xe=xe.next={lane:0,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),b=De.hasEagerState?De.eagerState:f(b,De.action);else{var pt={lane:et,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null};xe===null?(se=xe=pt,j=b):xe=xe.next=pt,Bn.lanes|=et,mu|=et}De=De.next}while(De!==null&&De!==B);xe===null?j=b:xe.next=se,js(b,h.memoizedState)||(Ei=!0),h.memoizedState=b,h.baseState=j,h.baseQueue=xe,w.lastRenderedState=b}if(f=w.interleaved,f!==null){C=f;do B=C.lane,Bn.lanes|=B,mu|=B,C=C.next;while(C!==f)}else C===null&&(w.lanes=0);return[h.memoizedState,w.dispatch]}function ng(f){var h=Ys(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=f;var b=w.dispatch,C=w.pending,B=h.memoizedState;if(C!==null){w.pending=null;var j=C=C.next;do B=f(B,j.action),j=j.next;while(j!==C);js(B,h.memoizedState)||(Ei=!0),h.memoizedState=B,h.baseQueue===null&&(h.baseState=B),w.lastRenderedState=B}return[B,b]}function eT(){}function tT(f,h){var w=Bn,b=Ys(),C=h(),B=!js(b.memoizedState,C);if(B&&(b.memoizedState=C,Ei=!0),b=b.queue,Ff(iT.bind(null,w,b,f),[f]),b.getSnapshot!==h||B||cr!==null&&cr.memoizedState.tag&1){if(w.flags|=2048,Nf(9,rT.bind(null,w,b,C,h),void 0,null),Kn===null)throw Error(o(349));hu&30||nT(w,h,C)}return C}function nT(f,h,w){f.flags|=16384,f={getSnapshot:h,value:w},h=Bn.updateQueue,h===null?(h={lastEffect:null,stores:null},Bn.updateQueue=h,h.stores=[f]):(w=h.stores,w===null?h.stores=[f]:w.push(f))}function rT(f,h,w,b){h.value=w,h.getSnapshot=b,sT(h)&&Xi(f,1,-1)}function iT(f,h,w){return w(function(){sT(h)&&Xi(f,1,-1)})}function sT(f){var h=f.getSnapshot;f=f.value;try{var w=h();return!js(f,w)}catch{return!0}}function I1(f){var h=Ao();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:f},h.queue=f,f=f.dispatch=f5.bind(null,Bn,f),[h.memoizedState,f]}function Nf(f,h,w,b){return f={tag:f,create:h,destroy:w,deps:b,next:null},h=Bn.updateQueue,h===null?(h={lastEffect:null,stores:null},Bn.updateQueue=h,h.lastEffect=f.next=f):(w=h.lastEffect,w===null?h.lastEffect=f.next=f:(b=w.next,w.next=f,f.next=b,h.lastEffect=f)),f}function oT(){return Ys().memoizedState}function rg(f,h,w,b){var C=Ao();Bn.flags|=f,C.memoizedState=Nf(1|h,w,void 0,b===void 0?null:b)}function ig(f,h,w,b){var C=Ys();b=b===void 0?null:b;var B=void 0;if(Tr!==null){var j=Tr.memoizedState;if(B=j.destroy,b!==null&&T1(b,j.deps)){C.memoizedState=Nf(h,w,B,b);return}}Bn.flags|=f,C.memoizedState=Nf(1|h,w,B,b)}function B1(f,h){return rg(8390656,8,f,h)}function Ff(f,h){return ig(2048,8,f,h)}function aT(f,h){return ig(4,2,f,h)}function lT(f,h){return ig(4,4,f,h)}function cT(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function uT(f,h,w){return w=w!=null?w.concat([f]):null,ig(4,4,cT.bind(null,h,f),w)}function D1(){}function dT(f,h){var w=Ys();h=h===void 0?null:h;var b=w.memoizedState;return b!==null&&h!==null&&T1(h,b[1])?b[0]:(w.memoizedState=[f,h],f)}function fT(f,h){var w=Ys();h=h===void 0?null:h;var b=w.memoizedState;return b!==null&&h!==null&&T1(h,b[1])?b[0]:(f=f(),w.memoizedState=[f,h],f)}function u5(f,h){var w=Vt;Vt=w!==0&&4>w?w:4,f(!0);var b=ji.transition;ji.transition={};try{f(!1),h()}finally{Vt=w,ji.transition=b}}function hT(){return Ys().memoizedState}function d5(f,h,w){var b=ma(f);w={lane:b,action:w,hasEagerState:!1,eagerState:null,next:null},pT(f)?mT(h,w):(gT(f,h,w),w=Wr(),f=Xi(f,b,w),f!==null&&vT(f,h,b))}function f5(f,h,w){var b=ma(f),C={lane:b,action:w,hasEagerState:!1,eagerState:null,next:null};if(pT(f))mT(h,C);else{gT(f,h,C);var B=f.alternate;if(f.lanes===0&&(B===null||B.lanes===0)&&(B=h.lastRenderedReducer,B!==null))try{var j=h.lastRenderedState,se=B(j,w);if(C.hasEagerState=!0,C.eagerState=se,js(se,j))return}catch{}finally{}w=Wr(),f=Xi(f,b,w),f!==null&&vT(f,h,b)}}function pT(f){var h=f.alternate;return f===Bn||h!==null&&h===Bn}function mT(f,h){Lf=eg=!0;var w=f.pending;w===null?h.next=h:(h.next=w.next,w.next=h),f.pending=h}function gT(f,h,w){Kn!==null&&f.mode&1&&!(Tt&2)?(f=h.interleaved,f===null?(w.next=w,Js===null?Js=[h]:Js.push(h)):(w.next=f.next,f.next=w),h.interleaved=w):(f=h.pending,f===null?w.next=w:(w.next=f.next,f.next=w),h.pending=w)}function vT(f,h,w){if(w&4194240){var b=h.lanes;b&=f.pendingLanes,w|=b,h.lanes=w,a1(f,w)}}var sg={readContext:Gi,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},h5={readContext:Gi,useCallback:function(f,h){return Ao().memoizedState=[f,h===void 0?null:h],f},useContext:Gi,useEffect:B1,useImperativeHandle:function(f,h,w){return w=w!=null?w.concat([f]):null,rg(4194308,4,cT.bind(null,h,f),w)},useLayoutEffect:function(f,h){return rg(4194308,4,f,h)},useInsertionEffect:function(f,h){return rg(4,2,f,h)},useMemo:function(f,h){var w=Ao();return h=h===void 0?null:h,f=f(),w.memoizedState=[f,h],f},useReducer:function(f,h,w){var b=Ao();return h=w!==void 0?w(h):h,b.memoizedState=b.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},b.queue=f,f=f.dispatch=d5.bind(null,Bn,f),[b.memoizedState,f]},useRef:function(f){var h=Ao();return f={current:f},h.memoizedState=f},useState:I1,useDebugValue:D1,useDeferredValue:function(f){var h=I1(f),w=h[0],b=h[1];return B1(function(){var C=ji.transition;ji.transition={};try{b(f)}finally{ji.transition=C}},[f]),w},useTransition:function(){var f=I1(!1),h=f[0];return f=u5.bind(null,f[1]),Ao().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,w){var b=Bn,C=Ao();if(_n){if(w===void 0)throw Error(o(407));w=w()}else{if(w=h(),Kn===null)throw Error(o(349));hu&30||nT(b,h,w)}C.memoizedState=w;var B={value:w,getSnapshot:h};return C.queue=B,B1(iT.bind(null,b,B,f),[f]),b.flags|=2048,Nf(9,rT.bind(null,b,B,w,h),void 0,null),w},useId:function(){var f=Ao(),h=Kn.identifierPrefix;if(_n){var w=Eo,b=wo;w=(b&~(1<<32-vs(b)-1)).toString(32)+w,h=":"+h+"R"+w,w=Of++,0<w&&(h+="H"+w.toString(32)),h+=":"}else w=c5++,h=":"+h+"r"+w.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},p5={readContext:Gi,useCallback:dT,useContext:Gi,useEffect:Ff,useImperativeHandle:uT,useInsertionEffect:aT,useLayoutEffect:lT,useMemo:fT,useReducer:tg,useRef:oT,useState:function(){return tg(Bl)},useDebugValue:D1,useDeferredValue:function(f){var h=tg(Bl),w=h[0],b=h[1];return Ff(function(){var C=ji.transition;ji.transition={};try{b(f)}finally{ji.transition=C}},[f]),w},useTransition:function(){var f=tg(Bl)[0],h=Ys().memoizedState;return[f,h]},useMutableSource:eT,useSyncExternalStore:tT,useId:hT,unstable_isNewReconciler:!1},m5={readContext:Gi,useCallback:dT,useContext:Gi,useEffect:Ff,useImperativeHandle:uT,useInsertionEffect:aT,useLayoutEffect:lT,useMemo:fT,useReducer:ng,useRef:oT,useState:function(){return ng(Bl)},useDebugValue:D1,useDeferredValue:function(f){var h=ng(Bl),w=h[0],b=h[1];return Ff(function(){var C=ji.transition;ji.transition={};try{b(f)}finally{ji.transition=C}},[f]),w},useTransition:function(){var f=ng(Bl)[0],h=Ys().memoizedState;return[f,h]},useMutableSource:eT,useSyncExternalStore:tT,useId:hT,unstable_isNewReconciler:!1};function L1(f,h){try{var w="",b=h;do w+=l5(b),b=b.return;while(b);var C=w}catch(B){C=`
Error generating stack: `+B.message+`
`+B.stack}return{value:f,source:h,stack:C}}function O1(f,h){try{console.error(h.value)}catch(w){setTimeout(function(){throw w})}}var g5=typeof WeakMap=="function"?WeakMap:Map;function yT(f,h,w){w=So(-1,w),w.tag=3,w.payload={element:null};var b=h.value;return w.callback=function(){Sg||(Sg=!0,Z1=b),O1(f,h)},w}function xT(f,h,w){w=So(-1,w),w.tag=3;var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var C=h.value;w.payload=function(){return b(C)},w.callback=function(){O1(f,h)}}var B=f.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(w.callback=function(){O1(f,h),typeof b!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var j=h.stack;this.componentDidCatch(h.value,{componentStack:j!==null?j:""})}),w}function _T(f,h,w){var b=f.pingCache;if(b===null){b=f.pingCache=new g5;var C=new Set;b.set(h,C)}else C=b.get(h),C===void 0&&(C=new Set,b.set(h,C));C.has(w)||(C.add(w),f=P5.bind(null,f,h,w),h.then(f,f))}function ST(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function wT(f,h,w,b,C){return f.mode&1?(f.flags|=65536,f.lanes=C,f):(f===h?f.flags|=65536:(f.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(h=So(-1,1),h.tag=2,fa(w,h))),w.lanes|=1),f)}function Qs(f){f.flags|=4}function ET(f,h){if(f!==null&&f.child===h.child)return!0;if(h.flags&16)return!1;for(f=h.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var Uf,kf,og,ag;if(Me)Uf=function(f,h){for(var w=h.child;w!==null;){if(w.tag===5||w.tag===6)J(f,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},kf=function(){},og=function(f,h,w,b,C){if(f=f.memoizedProps,f!==b){var B=h.stateNode,j=Ks(Wi.current);w=te(B,w,f,b,C,j),(h.updateQueue=w)&&Qs(h)}},ag=function(f,h,w,b){w!==b&&Qs(h)};else if(me){Uf=function(f,h,w,b){for(var C=h.child;C!==null;){if(C.tag===5){var B=C.stateNode;w&&b&&(B=xn(B,C.type,C.memoizedProps,C)),J(f,B)}else if(C.tag===6)B=C.stateNode,w&&b&&(B=$r(B,C.memoizedProps,C)),J(f,B);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)B=C.child,B!==null&&(B.return=C),Uf(f,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===h)break;for(;C.sibling===null;){if(C.return===null||C.return===h)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var AT=function(f,h,w,b){for(var C=h.child;C!==null;){if(C.tag===5){var B=C.stateNode;w&&b&&(B=xn(B,C.type,C.memoizedProps,C)),Yt(f,B)}else if(C.tag===6)B=C.stateNode,w&&b&&(B=$r(B,C.memoizedProps,C)),Yt(f,B);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)B=C.child,B!==null&&(B.return=C),AT(f,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===h)break;for(;C.sibling===null;){if(C.return===null||C.return===h)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};kf=function(f,h){var w=h.stateNode;if(!ET(f,h)){f=w.containerInfo;var b=Kt(f);AT(b,h,!1,!1),w.pendingChildren=b,Qs(h),ar(f,b)}},og=function(f,h,w,b,C){var B=f.stateNode,j=f.memoizedProps;if((f=ET(f,h))&&j===b)h.stateNode=B;else{var se=h.stateNode,xe=Ks(Wi.current),De=null;j!==b&&(De=te(se,w,j,b,C,xe)),f&&De===null?h.stateNode=B:(B=rt(B,De,w,j,b,h,f,se),ee(B,w,b,C,xe)&&Qs(h),h.stateNode=B,f?Qs(h):Uf(B,h,!1,!1))}},ag=function(f,h,w,b){w!==b?(f=Ks(du.current),w=Ks(Wi.current),h.stateNode=Ae(b,f,w,h),Qs(h)):h.stateNode=f.stateNode}}else kf=function(){},og=function(){},ag=function(){};function zf(f,h){if(!_n)switch(f.tailMode){case"hidden":h=f.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var b=null;w!==null;)w.alternate!==null&&(b=w),w=w.sibling;b===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:b.sibling=null}}function Pr(f){var h=f.alternate!==null&&f.alternate.child===f.child,w=0,b=0;if(h)for(var C=f.child;C!==null;)w|=C.lanes|C.childLanes,b|=C.subtreeFlags&14680064,b|=C.flags&14680064,C.return=f,C=C.sibling;else for(C=f.child;C!==null;)w|=C.lanes|C.childLanes,b|=C.subtreeFlags,b|=C.flags,C.return=f,C=C.sibling;return f.subtreeFlags|=b,f.childLanes=w,h}function v5(f,h,w){var b=h.pendingProps;switch(_1(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(h),null;case 1:return gr(h.type)&&Nm(),Pr(h),null;case 3:return b=h.stateNode,fu(),qt(nn),qt(Jn),C1(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(Pf(h)?Qs(h):f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,xs!==null&&(n_(xs),xs=null))),kf(f,h),Pr(h),null;case 5:b1(h),w=Ks(du.current);var C=h.type;if(f!==null&&h.stateNode!=null)og(f,h,C,b,w),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(o(166));return Pr(h),null}if(f=Ks(Wi.current),Pf(h)){if(!re)throw Error(o(175));f=Ee(h.stateNode,h.type,h.memoizedProps,w,f,h,!Rf),h.updateQueue=f,f!==null&&Qs(h)}else{var B=ne(C,b,w,f,h);Uf(B,h,!1,!1),h.stateNode=B,ee(B,C,b,w,f)&&Qs(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Pr(h),null;case 6:if(f&&h.stateNode!=null)ag(f,h,f.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(o(166));if(f=Ks(du.current),w=Ks(Wi.current),Pf(h)){if(!re)throw Error(o(176));if(f=h.stateNode,b=h.memoizedProps,(w=ot(f,b,h,!Rf))&&(C=Si,C!==null))switch(B=(C.mode&1)!==0,C.tag){case 3:mr(C.stateNode.containerInfo,f,b,B);break;case 5:_i(C.type,C.memoizedProps,C.stateNode,f,b,B)}w&&Qs(h)}else h.stateNode=Ae(b,f,w,h)}return Pr(h),null;case 13:if(qt(En),b=h.memoizedState,_n&&wi!==null&&h.mode&1&&!(h.flags&128)){for(f=wi;f;)f=$(f);return cu(),h.flags|=98560,h}if(b!==null&&b.dehydrated!==null){if(b=Pf(h),f===null){if(!b)throw Error(o(318));if(!re)throw Error(o(344));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));lt(f,h)}else cu(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Pr(h),null}return xs!==null&&(n_(xs),xs=null),h.flags&128?(h.lanes=w,h):(b=b!==null,w=!1,f===null?Pf(h):w=f.memoizedState!==null,b&&!w&&(h.child.flags|=8192,h.mode&1&&(f===null||En.current&1?er===0&&(er=3):i_())),h.updateQueue!==null&&(h.flags|=4),Pr(h),null);case 4:return fu(),kf(f,h),f===null&&Le(h.stateNode.containerInfo),Pr(h),null;case 10:return p1(h.type._context),Pr(h),null;case 17:return gr(h.type)&&Nm(),Pr(h),null;case 19:if(qt(En),C=h.memoizedState,C===null)return Pr(h),null;if(b=(h.flags&128)!==0,B=C.rendering,B===null)if(b)zf(C,!1);else{if(er!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(B=qm(f),B!==null){for(h.flags|=128,zf(C,!1),f=B.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),h.subtreeFlags=0,f=w,b=h.child;b!==null;)w=b,C=f,w.flags&=14680066,B=w.alternate,B===null?(w.childLanes=0,w.lanes=C,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=B.childLanes,w.lanes=B.lanes,w.child=B.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=B.memoizedProps,w.memoizedState=B.memoizedState,w.updateQueue=B.updateQueue,w.type=B.type,C=B.dependencies,w.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),b=b.sibling;return St(En,En.current&1|2),h.child}f=f.sibling}C.tail!==null&&lr()>q1&&(h.flags|=128,b=!0,zf(C,!1),h.lanes=4194304)}else{if(!b)if(f=qm(B),f!==null){if(h.flags|=128,b=!0,f=f.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),zf(C,!0),C.tail===null&&C.tailMode==="hidden"&&!B.alternate&&!_n)return Pr(h),null}else 2*lr()-C.renderingStartTime>q1&&w!==1073741824&&(h.flags|=128,b=!0,zf(C,!1),h.lanes=4194304);C.isBackwards?(B.sibling=h.child,h.child=B):(f=C.last,f!==null?f.sibling=B:h.child=B,C.last=B)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=lr(),h.sibling=null,f=En.current,St(En,b?f&1|2:f&1),h):(Pr(h),null);case 22:case 23:return r_(),b=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==b&&(h.flags|=8192),b&&h.mode&1?Ai&1073741824&&(Pr(h),Me&&h.subtreeFlags&6&&(h.flags|=8192)):Pr(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var y5=a.ReactCurrentOwner,Ei=!1;function Vr(f,h,w,b){h.child=f===null?qC(h,null,w,b):uu(h,f.child,w,b)}function bT(f,h,w,b,C){w=w.render;var B=h.ref;return ou(h,C),b=R1(f,h,w,b,B,C),w=P1(),f!==null&&!Ei?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~C,bo(f,h,C)):(_n&&w&&x1(h),h.flags|=1,Vr(f,h,b,C),h.child)}function MT(f,h,w,b,C){if(f===null){var B=w.type;return typeof B=="function"&&!s_(B)&&B.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(h.tag=15,h.type=B,CT(f,h,B,b,C)):(f=Tg(w.type,null,b,h,h.mode,C),f.ref=h.ref,f.return=h,h.child=f)}if(B=f.child,!(f.lanes&C)){var j=B.memoizedProps;if(w=w.compare,w=w!==null?w:$m,w(j,b)&&f.ref===h.ref)return bo(f,h,C)}return h.flags|=1,f=va(B,b),f.ref=h.ref,f.return=h,h.child=f}function CT(f,h,w,b,C){if(f!==null&&$m(f.memoizedProps,b)&&f.ref===h.ref)if(Ei=!1,(f.lanes&C)!==0)f.flags&131072&&(Ei=!0);else return h.lanes=f.lanes,bo(f,h,C);return N1(f,h,w,b,C)}function TT(f,h,w){var b=h.pendingProps,C=b.children,B=f!==null?f.memoizedState:null;if(b.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},St(pu,Ai),Ai|=w;else if(w&1073741824)h.memoizedState={baseLanes:0,cachePool:null},b=B!==null?B.baseLanes:w,St(pu,Ai),Ai|=b;else return f=B!==null?B.baseLanes|w:w,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null},h.updateQueue=null,St(pu,Ai),Ai|=f,null;else B!==null?(b=B.baseLanes|w,h.memoizedState=null):b=w,St(pu,Ai),Ai|=b;return Vr(f,h,C,w),h.child}function RT(f,h){var w=h.ref;(f===null&&w!==null||f!==null&&f.ref!==w)&&(h.flags|=512,h.flags|=2097152)}function N1(f,h,w,b,C){var B=gr(w)?gs:Jn.current;return B=ua(h,B),ou(h,C),w=R1(f,h,w,b,B,C),b=P1(),f!==null&&!Ei?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~C,bo(f,h,C)):(_n&&b&&x1(h),h.flags|=1,Vr(f,h,w,C),h.child)}function PT(f,h,w,b,C){if(gr(w)){var B=!0;Fm(h)}else B=!1;if(ou(h,C),h.stateNode===null)f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),VC(h,w,b),y1(h,w,b,C),b=!0;else if(f===null){var j=h.stateNode,se=h.memoizedProps;j.props=se;var xe=j.context,De=w.contextType;typeof De=="object"&&De!==null?De=Gi(De):(De=gr(w)?gs:Jn.current,De=ua(h,De));var et=w.getDerivedStateFromProps,pt=typeof et=="function"||typeof j.getSnapshotBeforeUpdate=="function";pt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(se!==b||xe!==De)&&WC(h,j,b,De),da=!1;var at=h.memoizedState;j.state=at,Xm(h,b,j,C),xe=h.memoizedState,se!==b||at!==xe||nn.current||da?(typeof et=="function"&&(v1(h,w,et,b),xe=h.memoizedState),(se=da||$C(h,w,se,b,at,xe,De))?(pt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=xe),j.props=b,j.state=xe,j.context=De,b=se):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{j=h.stateNode,kC(f,h),se=h.memoizedProps,De=h.type===h.elementType?se:ys(h.type,se),j.props=De,pt=h.pendingProps,at=j.context,xe=w.contextType,typeof xe=="object"&&xe!==null?xe=Gi(xe):(xe=gr(w)?gs:Jn.current,xe=ua(h,xe));var an=w.getDerivedStateFromProps;(et=typeof an=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(se!==pt||at!==xe)&&WC(h,j,b,xe),da=!1,at=h.memoizedState,j.state=at,Xm(h,b,j,C);var st=h.memoizedState;se!==pt||at!==st||nn.current||da?(typeof an=="function"&&(v1(h,w,an,b),st=h.memoizedState),(De=da||$C(h,w,De,b,at,st,xe)||!1)?(et||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(b,st,xe),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(b,st,xe)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||se===f.memoizedProps&&at===f.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||se===f.memoizedProps&&at===f.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=st),j.props=b,j.state=st,j.context=xe,b=De):(typeof j.componentDidUpdate!="function"||se===f.memoizedProps&&at===f.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||se===f.memoizedProps&&at===f.memoizedState||(h.flags|=1024),b=!1)}return F1(f,h,w,b,B,C)}function F1(f,h,w,b,C,B){RT(f,h);var j=(h.flags&128)!==0;if(!b&&!j)return C&&LC(h,w,!1),bo(f,h,B);b=h.stateNode,y5.current=h;var se=j&&typeof w.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,f!==null&&j?(h.child=uu(h,f.child,null,B),h.child=uu(h,null,se,B)):Vr(f,h,se,B),h.memoizedState=b.state,C&&LC(h,w,!0),h.child}function IT(f){var h=f.stateNode;h.pendingContext?BC(f,h.pendingContext,h.pendingContext!==h.context):h.context&&BC(f,h.context,!1),A1(f,h.containerInfo)}function BT(f,h,w,b,C){return cu(),E1(C),h.flags|=256,Vr(f,h,w,b),h.child}var lg={dehydrated:null,treeContext:null,retryLane:0};function cg(f){return{baseLanes:f,cachePool:null}}function DT(f,h,w){var b=h.pendingProps,C=En.current,B=!1,j=(h.flags&128)!==0,se;if((se=j)||(se=f!==null&&f.memoizedState===null?!1:(C&2)!==0),se?(B=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(C|=1),St(En,C&1),f===null)return w1(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?Mf(f)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(C=b.children,f=b.fallback,B?(b=h.mode,B=h.child,C={mode:"hidden",children:C},!(b&1)&&B!==null?(B.childLanes=0,B.pendingProps=C):B=Rg(C,b,0,null),f=Ul(f,b,w,null),B.return=h,f.return=h,B.sibling=f,h.child=B,h.child.memoizedState=cg(w),h.memoizedState=lg,f):U1(h,C));if(C=f.memoizedState,C!==null){if(se=C.dehydrated,se!==null){if(j)return h.flags&256?(h.flags&=-257,ug(f,h,w,Error(o(422)))):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(B=b.fallback,C=h.mode,b=Rg({mode:"visible",children:b.children},C,0,null),B=Ul(B,C,w,null),B.flags|=2,b.return=h,B.return=h,b.sibling=B,h.child=b,h.mode&1&&uu(h,f.child,null,w),h.child.memoizedState=cg(w),h.memoizedState=lg,B);if(!(h.mode&1))h=ug(f,h,w,null);else if(Mf(se))h=ug(f,h,w,Error(o(419)));else if(b=(w&f.childLanes)!==0,Ei||b){if(b=Kn,b!==null){switch(w&-w){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}b=B&(b.suspendedLanes|w)?0:B,b!==0&&b!==C.retryLane&&(C.retryLane=b,Xi(f,b,-1))}i_(),h=ug(f,h,w,Error(o(421)))}else Om(se)?(h.flags|=128,h.child=f.child,h=I5.bind(null,f),i1(se,h),h=null):(w=C.treeContext,re&&(wi=ae(se),Si=h,_n=!0,xs=null,Rf=!1,w!==null&&($i[Vi++]=wo,$i[Vi++]=Eo,$i[Vi++]=Pl,wo=w.id,Eo=w.overflow,Pl=h)),h=U1(h,h.pendingProps.children),h.flags|=4096);return h}return B?(b=OT(f,h,b.children,b.fallback,w),B=h.child,C=f.child.memoizedState,B.memoizedState=C===null?cg(w):{baseLanes:C.baseLanes|w,cachePool:null},B.childLanes=f.childLanes&~w,h.memoizedState=lg,b):(w=LT(f,h,b.children,w),h.memoizedState=null,w)}return B?(b=OT(f,h,b.children,b.fallback,w),B=h.child,C=f.child.memoizedState,B.memoizedState=C===null?cg(w):{baseLanes:C.baseLanes|w,cachePool:null},B.childLanes=f.childLanes&~w,h.memoizedState=lg,b):(w=LT(f,h,b.children,w),h.memoizedState=null,w)}function U1(f,h){return h=Rg({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function LT(f,h,w,b){var C=f.child;return f=C.sibling,w=va(C,{mode:"visible",children:w}),!(h.mode&1)&&(w.lanes=b),w.return=h,w.sibling=null,f!==null&&(b=h.deletions,b===null?(h.deletions=[f],h.flags|=16):b.push(f)),h.child=w}function OT(f,h,w,b,C){var B=h.mode;f=f.child;var j=f.sibling,se={mode:"hidden",children:w};return!(B&1)&&h.child!==f?(w=h.child,w.childLanes=0,w.pendingProps=se,h.deletions=null):(w=va(f,se),w.subtreeFlags=f.subtreeFlags&14680064),j!==null?b=va(j,b):(b=Ul(b,B,C,null),b.flags|=2),b.return=h,w.return=h,w.sibling=b,h.child=w,b}function ug(f,h,w,b){return b!==null&&E1(b),uu(h,f.child,null,w),f=U1(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function NT(f,h,w){f.lanes|=h;var b=f.alternate;b!==null&&(b.lanes|=h),m1(f.return,h,w)}function k1(f,h,w,b,C){var B=f.memoizedState;B===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:w,tailMode:C}:(B.isBackwards=h,B.rendering=null,B.renderingStartTime=0,B.last=b,B.tail=w,B.tailMode=C)}function FT(f,h,w){var b=h.pendingProps,C=b.revealOrder,B=b.tail;if(Vr(f,h,b.children,w),b=En.current,b&2)b=b&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&NT(f,w,h);else if(f.tag===19)NT(f,w,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}b&=1}if(St(En,b),!(h.mode&1))h.memoizedState=null;else switch(C){case"forwards":for(w=h.child,C=null;w!==null;)f=w.alternate,f!==null&&qm(f)===null&&(C=w),w=w.sibling;w=C,w===null?(C=h.child,h.child=null):(C=w.sibling,w.sibling=null),k1(h,!1,C,w,B);break;case"backwards":for(w=null,C=h.child,h.child=null;C!==null;){if(f=C.alternate,f!==null&&qm(f)===null){h.child=C;break}f=C.sibling,C.sibling=w,w=C,C=f}k1(h,!0,w,null,B);break;case"together":k1(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function bo(f,h,w){if(f!==null&&(h.dependencies=f.dependencies),mu|=h.lanes,!(w&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(o(153));if(h.child!==null){for(f=h.child,w=va(f,f.pendingProps),h.child=w,w.return=h;f.sibling!==null;)f=f.sibling,w=w.sibling=va(f,f.pendingProps),w.return=h;w.sibling=null}return h.child}function x5(f,h,w){switch(h.tag){case 3:IT(h),cu();break;case 5:ZC(h);break;case 1:gr(h.type)&&Fm(h);break;case 4:A1(h,h.stateNode.containerInfo);break;case 10:UC(h,h.type._context,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(St(En,En.current&1),h.flags|=128,null):w&h.child.childLanes?DT(f,h,w):(St(En,En.current&1),f=bo(f,h,w),f!==null?f.sibling:null);St(En,En.current&1);break;case 19:if(b=(w&h.childLanes)!==0,f.flags&128){if(b)return FT(f,h,w);h.flags|=128}var C=h.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),St(En,En.current),b)break;return null;case 22:case 23:return h.lanes=0,TT(f,h,w)}return bo(f,h,w)}function _5(f,h){switch(_1(h),h.tag){case 1:return gr(h.type)&&Nm(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return fu(),qt(nn),qt(Jn),C1(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return b1(h),null;case 13:if(qt(En),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(o(340));cu()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return qt(En),null;case 4:return fu(),null;case 10:return p1(h.type._context),null;case 22:case 23:return r_(),null;case 24:return null;default:return null}}var dg=!1,Dl=!1,S5=typeof WeakSet=="function"?WeakSet:Set,He=null;function fg(f,h){var w=f.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(b){ri(f,h,b)}else w.current=null}function z1(f,h,w){try{w()}catch(b){ri(f,h,b)}}var UT=!1;function w5(f,h){for(N(f.containerInfo),He=h;He!==null;)if(f=He,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,He=h;else for(;He!==null;){f=He;try{var w=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,C=w.memoizedState,B=f.stateNode,j=B.getSnapshotBeforeUpdate(f.elementType===f.type?b:ys(f.type,b),C);B.__reactInternalSnapshotBeforeUpdate=j}break;case 3:Me&&Xe(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(se){ri(f,f.return,se)}if(h=f.sibling,h!==null){h.return=f.return,He=h;break}He=f.return}return w=UT,UT=!1,w}function Ll(f,h,w){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var C=b=b.next;do{if((C.tag&f)===f){var B=C.destroy;C.destroy=void 0,B!==void 0&&z1(h,w,B)}C=C.next}while(C!==b)}}function Hf(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var w=h=h.next;do{if((w.tag&f)===f){var b=w.create;w.destroy=b()}w=w.next}while(w!==h)}}function H1(f){var h=f.ref;if(h!==null){var w=f.stateNode;switch(f.tag){case 5:f=Q(w);break;default:f=w}typeof h=="function"?h(f):h.current=f}}function kT(f,h,w){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(Hm,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var b=f=f.next;do{var C=b,B=C.destroy;C=C.tag,B!==void 0&&(C&2||C&4)&&z1(h,w,B),b=b.next}while(b!==f)}break;case 1:if(fg(h,w),f=h.stateNode,typeof f.componentWillUnmount=="function")try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(j){ri(h,w,j)}break;case 5:fg(h,w);break;case 4:Me?WT(f,h,w):me&&me&&(h=h.stateNode.containerInfo,w=Kt(h),hs(h,w))}}function zT(f,h,w){for(var b=h;;)if(kT(f,b,w),b.child===null||Me&&b.tag===4){if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function HT(f){var h=f.alternate;h!==null&&(f.alternate=null,HT(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&Ue(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function GT(f){return f.tag===5||f.tag===3||f.tag===4}function $T(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||GT(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function VT(f){if(Me){e:{for(var h=f.return;h!==null;){if(GT(h))break e;h=h.return}throw Error(o(160))}var w=h;switch(w.tag){case 5:h=w.stateNode,w.flags&32&&(ut(h),w.flags&=-33),w=$T(f),$1(f,w,h);break;case 3:case 4:h=w.stateNode.containerInfo,w=$T(f),G1(f,w,h);break;default:throw Error(o(161))}}}function G1(f,h,w){var b=f.tag;if(b===5||b===6)f=f.stateNode,h?be(w,f,h):ze(w,f);else if(b!==4&&(f=f.child,f!==null))for(G1(f,h,w),f=f.sibling;f!==null;)G1(f,h,w),f=f.sibling}function $1(f,h,w){var b=f.tag;if(b===5||b===6)f=f.stateNode,h?ge(w,f,h):Qe(w,f);else if(b!==4&&(f=f.child,f!==null))for($1(f,h,w),f=f.sibling;f!==null;)$1(f,h,w),f=f.sibling}function WT(f,h,w){for(var b=h,C=!1,B,j;;){if(!C){C=b.return;e:for(;;){if(C===null)throw Error(o(160));switch(B=C.stateNode,C.tag){case 5:j=!1;break e;case 3:B=B.containerInfo,j=!0;break e;case 4:B=B.containerInfo,j=!0;break e}C=C.return}C=!0}if(b.tag===5||b.tag===6)zT(f,b,w),j?nt(B,b.stateNode):Pe(B,b.stateNode);else if(b.tag===18)j?It(B,b.stateNode):Ct(B,b.stateNode);else if(b.tag===4){if(b.child!==null){B=b.stateNode.containerInfo,j=!0,b.child.return=b,b=b.child;continue}}else if(kT(f,b,w),b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return,b.tag===4&&(C=!1)}b.sibling.return=b.return,b=b.sibling}}function V1(f,h){if(Me){switch(h.tag){case 0:case 11:case 14:case 15:Ll(3,h,h.return),Hf(3,h),Ll(5,h,h.return);return;case 1:return;case 5:var w=h.stateNode;if(w!=null){var b=h.memoizedProps;f=f!==null?f.memoizedProps:b;var C=h.type,B=h.updateQueue;h.updateQueue=null,B!==null&&q(w,B,C,f,b,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));w=h.memoizedProps,ve(h.stateNode,f!==null?f.memoizedProps:w,w);return;case 3:re&&f!==null&&f.memoizedState.isDehydrated&&_t(h.stateNode.containerInfo);return;case 12:return;case 13:hg(h);return;case 19:hg(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Ll(3,h,h.return),Hf(3,h),Ll(5,h,h.return);return;case 12:return;case 13:hg(h);return;case 19:hg(h);return;case 3:re&&f!==null&&f.memoizedState.isDehydrated&&_t(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(me){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,hs(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function hg(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var w=f.stateNode;w===null&&(w=f.stateNode=new S5),h.forEach(function(b){var C=B5.bind(null,f,b);w.has(b)||(w.add(b),b.then(C,C))})}}function E5(f,h){for(He=h;He!==null;){h=He;var w=h.deletions;if(w!==null)for(var b=0;b<w.length;b++){var C=w[b];try{var B=f;Me?WT(B,C,h):zT(B,C,h);var j=C.alternate;j!==null&&(j.return=null),C.return=null}catch(it){ri(C,h,it)}}if(w=h.child,h.subtreeFlags&12854&&w!==null)w.return=h,He=w;else for(;He!==null;){h=He;try{var se=h.flags;if(se&32&&Me&&ut(h.stateNode),se&512){var xe=h.alternate;if(xe!==null){var De=xe.ref;De!==null&&(typeof De=="function"?De(null):De.current=null)}}if(se&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var et=h.alternate;(et===null||et.memoizedState===null)&&(Q1=lr())}break;case 22:var pt=h.memoizedState!==null,at=h.alternate,an=at!==null&&at.memoizedState!==null;if(w=h,Me){e:if(b=w,C=pt,B=null,Me)for(var st=b;;){if(st.tag===5){if(B===null){B=st;var Ir=st.stateNode;C?$t(Ir):pe(st.stateNode,st.memoizedProps)}}else if(st.tag===6){if(B===null){var Ki=st.stateNode;C?ie(Ki):Ce(Ki,st.memoizedProps)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===b)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===b)break;for(;st.sibling===null;){if(st.return===null||st.return===b)break e;B===st&&(B=null),st=st.return}B===st&&(B=null),st.sibling.return=st.return,st=st.sibling}}if(pt&&!an&&w.mode&1){He=w;for(var le=w.child;le!==null;){for(w=He=le;He!==null;){b=He;var oe=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Ll(4,b,b.return);break;case 1:fg(b,b.return);var he=b.stateNode;if(typeof he.componentWillUnmount=="function"){var $e=b.return;try{he.props=b.memoizedProps,he.state=b.memoizedState,he.componentWillUnmount()}catch(it){ri(b,$e,it)}}break;case 5:fg(b,b.return);break;case 22:if(b.memoizedState!==null){JT(w);continue}}oe!==null?(oe.return=b,He=oe):JT(w)}le=le.sibling}}}switch(se&4102){case 2:VT(h),h.flags&=-3;break;case 6:VT(h),h.flags&=-3,V1(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,V1(h.alternate,h);break;case 4:V1(h.alternate,h)}}catch(it){ri(h,h.return,it)}if(w=h.sibling,w!==null){w.return=h.return,He=w;break}He=h.return}}}function A5(f,h,w){He=f,jT(f)}function jT(f,h,w){for(var b=(f.mode&1)!==0;He!==null;){var C=He,B=C.child;if(C.tag===22&&b){var j=C.memoizedState!==null||dg;if(!j){var se=C.alternate,xe=se!==null&&se.memoizedState!==null||Dl;se=dg;var De=Dl;if(dg=j,(Dl=xe)&&!De)for(He=C;He!==null;)j=He,xe=j.child,j.tag===22&&j.memoizedState!==null?KT(C):xe!==null?(xe.return=j,He=xe):KT(C);for(;B!==null;)He=B,jT(B),B=B.sibling;He=C,dg=se,Dl=De}XT(f)}else C.subtreeFlags&8772&&B!==null?(B.return=C,He=B):XT(f)}}function XT(f){for(;He!==null;){var h=He;if(h.flags&8772){var w=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Dl||Hf(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!Dl)if(w===null)b.componentDidMount();else{var C=h.elementType===h.type?w.memoizedProps:ys(h.type,w.memoizedProps);b.componentDidUpdate(C,w.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var B=h.updateQueue;B!==null&&HC(h,B,b);break;case 3:var j=h.updateQueue;if(j!==null){if(w=null,h.child!==null)switch(h.child.tag){case 5:w=Q(h.child.stateNode);break;case 1:w=h.child.stateNode}HC(h,j,w)}break;case 5:var se=h.stateNode;w===null&&h.flags&4&&Je(se,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(re&&h.memoizedState===null){var xe=h.alternate;if(xe!==null){var De=xe.memoizedState;if(De!==null){var et=De.dehydrated;et!==null&&Mt(et)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Dl||h.flags&512&&H1(h)}catch(pt){ri(h,h.return,pt)}}if(h===f){He=null;break}if(w=h.sibling,w!==null){w.return=h.return,He=w;break}He=h.return}}function JT(f){for(;He!==null;){var h=He;if(h===f){He=null;break}var w=h.sibling;if(w!==null){w.return=h.return,He=w;break}He=h.return}}function KT(f){for(;He!==null;){var h=He;try{switch(h.tag){case 0:case 11:case 15:var w=h.return;try{Hf(4,h)}catch(xe){ri(h,w,xe)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var C=h.return;try{b.componentDidMount()}catch(xe){ri(h,C,xe)}}var B=h.return;try{H1(h)}catch(xe){ri(h,B,xe)}break;case 5:var j=h.return;try{H1(h)}catch(xe){ri(h,j,xe)}}}catch(xe){ri(h,h.return,xe)}if(h===f){He=null;break}var se=h.sibling;if(se!==null){se.return=h.return,He=se;break}He=h.return}}var pg=0,mg=1,gg=2,vg=3,yg=4;if(typeof Symbol=="function"&&Symbol.for){var Gf=Symbol.for;pg=Gf("selector.component"),mg=Gf("selector.has_pseudo_class"),gg=Gf("selector.role"),vg=Gf("selector.test_id"),yg=Gf("selector.text")}function W1(f){var h=fe(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(f=ht(f),f===null)throw Error(o(362));return f.stateNode.current}function j1(f,h){switch(h.$$typeof){case pg:if(f.type===h.value)return!0;break;case mg:e:{h=h.value,f=[f,0];for(var w=0;w<f.length;){var b=f[w++],C=f[w++],B=h[C];if(b.tag!==5||!Y(b)){for(;B!=null&&j1(b,B);)C++,B=h[C];if(C===h.length){h=!0;break e}else for(b=b.child;b!==null;)f.push(b,C),b=b.sibling}}h=!1}return h;case gg:if(f.tag===5&&ce(f.stateNode,h.value))return!0;break;case yg:if((f.tag===5||f.tag===6)&&(f=k(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case vg:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function X1(f){switch(f.$$typeof){case pg:return"<"+(P(f.value)||"Unknown")+">";case mg:return":has("+(X1(f)||"")+")";case gg:return'[role="'+f.value+'"]';case yg:return'"'+f.value+'"';case vg:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function YT(f,h){var w=[];f=[f,0];for(var b=0;b<f.length;){var C=f[b++],B=f[b++],j=h[B];if(C.tag!==5||!Y(C)){for(;j!=null&&j1(C,j);)B++,j=h[B];if(B===h.length)w.push(C);else for(C=C.child;C!==null;)f.push(C,B),C=C.sibling}}return w}function J1(f,h){if(!Ye)throw Error(o(363));f=W1(f),f=YT(f,h),h=[],f=Array.from(f);for(var w=0;w<f.length;){var b=f[w++];if(b.tag===5)Y(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)f.push(b),b=b.sibling}return h}var b5=Math.ceil,xg=a.ReactCurrentDispatcher,K1=a.ReactCurrentOwner,Un=a.ReactCurrentBatchConfig,Tt=0,Kn=null,Yn=null,vr=0,Ai=0,pu=ei(0),er=0,$f=null,mu=0,_g=0,Y1=0,Vf=null,ti=null,Q1=0,q1=1/0;function gu(){q1=lr()+500}var Sg=!1,Z1=null,ha=null,wg=!1,pa=null,Eg=0,Wf=0,e_=null,Ag=-1,bg=0;function Wr(){return Tt&6?lr():Ag!==-1?Ag:Ag=lr()}function ma(f){return f.mode&1?Tt&2&&vr!==0?vr&-vr:a5.transition!==null?(bg===0&&(f=Um,Um<<=1,!(Um&4194240)&&(Um=64),bg=f),bg):(f=Vt,f!==0?f:Be()):1}function Xi(f,h,w){if(50<Wf)throw Wf=0,e_=null,Error(o(185));var b=Mg(f,h);return b===null?null:(Tf(b,h,w),(!(Tt&2)||b!==Kn)&&(b===Kn&&(!(Tt&2)&&(_g|=h),er===4&&ga(b,vr)),ni(b,w),h===1&&Tt===0&&!(f.mode&1)&&(gu(),Gm&&Xs())),b)}function Mg(f,h){f.lanes|=h;var w=f.alternate;for(w!==null&&(w.lanes|=h),w=f,f=f.return;f!==null;)f.childLanes|=h,w=f.alternate,w!==null&&(w.childLanes|=h),w=f,f=f.return;return w.tag===3?w.stateNode:null}function ni(f,h){var w=f.callbackNode;qz(f,h);var b=zm(f,f===Kn?vr:0);if(b===0)w!==null&&NC(w),f.callbackNode=null,f.callbackPriority=0;else if(h=b&-b,f.callbackPriority!==h){if(w!=null&&NC(w),h===1)f.tag===0?o5(qT.bind(null,f)):FC(qT.bind(null,f)),Ke?ke(function(){Tt===0&&Xs()}):l1(c1,Xs),w=null;else{switch(OC(b)){case 1:w=c1;break;case 4:w=n5;break;case 16:w=u1;break;case 536870912:w=r5;break;default:w=u1}w=a2(w,QT.bind(null,f))}f.callbackPriority=h,f.callbackNode=w}}function QT(f,h){if(Ag=-1,bg=0,Tt&6)throw Error(o(327));var w=f.callbackNode;if(Fl()&&f.callbackNode!==w)return null;var b=zm(f,f===Kn?vr:0);if(b===0)return null;if(b&30||b&f.expiredLanes||h)h=Cg(f,b);else{h=b;var C=Tt;Tt|=2;var B=t2();(Kn!==f||vr!==h)&&(gu(),Ol(f,h));do try{T5();break}catch(se){e2(f,se)}while(1);h1(),xg.current=B,Tt=C,Yn!==null?h=0:(Kn=null,vr=0,h=er)}if(h!==0){if(h===2&&(C=s1(f),C!==0&&(b=C,h=t_(f,C))),h===1)throw w=$f,Ol(f,0),ga(f,b),ni(f,lr()),w;if(h===6)ga(f,b);else{if(C=f.current.alternate,!(b&30)&&!M5(C)&&(h=Cg(f,b),h===2&&(B=s1(f),B!==0&&(b=B,h=t_(f,B))),h===1))throw w=$f,Ol(f,0),ga(f,b),ni(f,lr()),w;switch(f.finishedWork=C,f.finishedLanes=b,h){case 0:case 1:throw Error(o(345));case 2:Nl(f,ti);break;case 3:if(ga(f,b),(b&130023424)===b&&(h=Q1+500-lr(),10<h)){if(zm(f,0)!==0)break;if(C=f.suspendedLanes,(C&b)!==b){Wr(),f.pingedLanes|=f.suspendedLanes&C;break}f.timeoutHandle=K(Nl.bind(null,f,ti),h);break}Nl(f,ti);break;case 4:if(ga(f,b),(b&4194240)===b)break;for(h=f.eventTimes,C=-1;0<b;){var j=31-vs(b);B=1<<j,j=h[j],j>C&&(C=j),b&=~B}if(b=C,b=lr()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*b5(b/1960))-b,10<b){f.timeoutHandle=K(Nl.bind(null,f,ti),b);break}Nl(f,ti);break;case 5:Nl(f,ti);break;default:throw Error(o(329))}}}return ni(f,lr()),f.callbackNode===w?QT.bind(null,f):null}function t_(f,h){var w=Vf;return f.current.memoizedState.isDehydrated&&(Ol(f,h).flags|=256),f=Cg(f,h),f!==2&&(h=ti,ti=w,h!==null&&n_(h)),f}function n_(f){ti===null?ti=f:ti.push.apply(ti,f)}function M5(f){for(var h=f;;){if(h.flags&16384){var w=h.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var b=0;b<w.length;b++){var C=w[b],B=C.getSnapshot;C=C.value;try{if(!js(B(),C))return!1}catch{return!1}}}if(w=h.child,h.subtreeFlags&16384&&w!==null)w.return=h,h=w;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ga(f,h){for(h&=~Y1,h&=~_g,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var w=31-vs(h),b=1<<w;f[w]=-1,h&=~b}}function qT(f){if(Tt&6)throw Error(o(327));Fl();var h=zm(f,0);if(!(h&1))return ni(f,lr()),null;var w=Cg(f,h);if(f.tag!==0&&w===2){var b=s1(f);b!==0&&(h=b,w=t_(f,b))}if(w===1)throw w=$f,Ol(f,0),ga(f,h),ni(f,lr()),w;if(w===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,Nl(f,ti),ni(f,lr()),null}function ZT(f){pa!==null&&pa.tag===0&&!(Tt&6)&&Fl();var h=Tt;Tt|=1;var w=Un.transition,b=Vt;try{if(Un.transition=null,Vt=1,f)return f()}finally{Vt=b,Un.transition=w,Tt=h,!(Tt&6)&&Xs()}}function r_(){Ai=pu.current,qt(pu)}function Ol(f,h){f.finishedWork=null,f.finishedLanes=0;var w=f.timeoutHandle;if(w!==We&&(f.timeoutHandle=We,Ge(w)),Yn!==null)for(w=Yn.return;w!==null;){var b=w;switch(_1(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Nm();break;case 3:fu(),qt(nn),qt(Jn),C1();break;case 5:b1(b);break;case 4:fu();break;case 13:qt(En);break;case 19:qt(En);break;case 10:p1(b.type._context);break;case 22:case 23:r_()}w=w.return}if(Kn=f,Yn=f=va(f.current,null),vr=Ai=h,er=0,$f=null,Y1=_g=mu=0,ti=Vf=null,Js!==null){for(h=0;h<Js.length;h++)if(w=Js[h],b=w.interleaved,b!==null){w.interleaved=null;var C=b.next,B=w.pending;if(B!==null){var j=B.next;B.next=C,b.next=j}w.pending=b}Js=null}return f}function e2(f,h){do{var w=Yn;try{if(h1(),Zm.current=sg,eg){for(var b=Bn.memoizedState;b!==null;){var C=b.queue;C!==null&&(C.pending=null),b=b.next}eg=!1}if(hu=0,cr=Tr=Bn=null,Lf=!1,Of=0,K1.current=null,w===null||w.return===null){er=1,$f=h,Yn=null;break}e:{var B=f,j=w.return,se=w,xe=h;if(h=vr,se.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var De=xe,et=se,pt=et.tag;if(!(et.mode&1)&&(pt===0||pt===11||pt===15)){var at=et.alternate;at?(et.updateQueue=at.updateQueue,et.memoizedState=at.memoizedState,et.lanes=at.lanes):(et.updateQueue=null,et.memoizedState=null)}var an=ST(j);if(an!==null){an.flags&=-257,wT(an,j,se,B,h),an.mode&1&&_T(B,De,h),h=an,xe=De;var st=h.updateQueue;if(st===null){var Ir=new Set;Ir.add(xe),h.updateQueue=Ir}else st.add(xe);break e}else{if(!(h&1)){_T(B,De,h),i_();break e}xe=Error(o(426))}}else if(_n&&se.mode&1){var Ki=ST(j);if(Ki!==null){!(Ki.flags&65536)&&(Ki.flags|=256),wT(Ki,j,se,B,h),E1(xe);break e}}B=xe,er!==4&&(er=2),Vf===null?Vf=[B]:Vf.push(B),xe=L1(xe,se),se=j;do{switch(se.tag){case 3:se.flags|=65536,h&=-h,se.lanes|=h;var le=yT(se,xe,h);zC(se,le);break e;case 1:B=xe;var oe=se.type,he=se.stateNode;if(!(se.flags&128)&&(typeof oe.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(ha===null||!ha.has(he)))){se.flags|=65536,h&=-h,se.lanes|=h;var $e=xT(se,B,h);zC(se,$e);break e}}se=se.return}while(se!==null)}r2(w)}catch(it){h=it,Yn===w&&w!==null&&(Yn=w=w.return);continue}break}while(1)}function t2(){var f=xg.current;return xg.current=sg,f===null?sg:f}function i_(){(er===0||er===3||er===2)&&(er=4),Kn===null||!(mu&268435455)&&!(_g&268435455)||ga(Kn,vr)}function Cg(f,h){var w=Tt;Tt|=2;var b=t2();Kn===f&&vr===h||Ol(f,h);do try{C5();break}catch(C){e2(f,C)}while(1);if(h1(),Tt=w,xg.current=b,Yn!==null)throw Error(o(261));return Kn=null,vr=0,er}function C5(){for(;Yn!==null;)n2(Yn)}function T5(){for(;Yn!==null&&!e5();)n2(Yn)}function n2(f){var h=o2(f.alternate,f,Ai);f.memoizedProps=f.pendingProps,h===null?r2(f):Yn=h,K1.current=null}function r2(f){var h=f;do{var w=h.alternate;if(f=h.return,h.flags&32768){if(w=_5(w,h),w!==null){w.flags&=32767,Yn=w;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{er=6,Yn=null;return}}else if(w=v5(w,h,Ai),w!==null){Yn=w;return}if(h=h.sibling,h!==null){Yn=h;return}Yn=h=f}while(h!==null);er===0&&(er=5)}function Nl(f,h){var w=Vt,b=Un.transition;try{Un.transition=null,Vt=1,R5(f,h,w)}finally{Un.transition=b,Vt=w}return null}function R5(f,h,w){do Fl();while(pa!==null);if(Tt&6)throw Error(o(327));var b=f.finishedWork,C=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var B=b.lanes|b.childLanes;if(Zz(f,B),f===Kn&&(Yn=Kn=null,vr=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||wg||(wg=!0,a2(u1,function(){return Fl(),null})),B=(b.flags&15990)!==0,b.subtreeFlags&15990||B){B=Un.transition,Un.transition=null;var j=Vt;Vt=1;var se=Tt;Tt|=4,K1.current=null,w5(f,b),E5(f,b),G(f.containerInfo),f.current=b,A5(b),t5(),Tt=se,Vt=j,Un.transition=B}else f.current=b;if(wg&&(wg=!1,pa=f,Eg=C),B=f.pendingLanes,B===0&&(ha=null),i5(b.stateNode),ni(f,lr()),h!==null)for(w=f.onRecoverableError,b=0;b<h.length;b++)w(h[b]);if(Sg)throw Sg=!1,f=Z1,Z1=null,f;return Eg&1&&f.tag!==0&&Fl(),B=f.pendingLanes,B&1?f===e_?Wf++:(Wf=0,e_=f):Wf=0,Xs(),null}function Fl(){if(pa!==null){var f=OC(Eg),h=Un.transition,w=Vt;try{if(Un.transition=null,Vt=16>f?16:f,pa===null)var b=!1;else{if(f=pa,pa=null,Eg=0,Tt&6)throw Error(o(331));var C=Tt;for(Tt|=4,He=f.current;He!==null;){var B=He,j=B.child;if(He.flags&16){var se=B.deletions;if(se!==null){for(var xe=0;xe<se.length;xe++){var De=se[xe];for(He=De;He!==null;){var et=He;switch(et.tag){case 0:case 11:case 15:Ll(8,et,B)}var pt=et.child;if(pt!==null)pt.return=et,He=pt;else for(;He!==null;){et=He;var at=et.sibling,an=et.return;if(HT(et),et===De){He=null;break}if(at!==null){at.return=an,He=at;break}He=an}}}var st=B.alternate;if(st!==null){var Ir=st.child;if(Ir!==null){st.child=null;do{var Ki=Ir.sibling;Ir.sibling=null,Ir=Ki}while(Ir!==null)}}He=B}}if(B.subtreeFlags&2064&&j!==null)j.return=B,He=j;else e:for(;He!==null;){if(B=He,B.flags&2048)switch(B.tag){case 0:case 11:case 15:Ll(9,B,B.return)}var le=B.sibling;if(le!==null){le.return=B.return,He=le;break e}He=B.return}}var oe=f.current;for(He=oe;He!==null;){j=He;var he=j.child;if(j.subtreeFlags&2064&&he!==null)he.return=j,He=he;else e:for(j=oe;He!==null;){if(se=He,se.flags&2048)try{switch(se.tag){case 0:case 11:case 15:Hf(9,se)}}catch(it){ri(se,se.return,it)}if(se===j){He=null;break e}var $e=se.sibling;if($e!==null){$e.return=se.return,He=$e;break e}He=se.return}}if(Tt=C,Xs(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(Hm,f)}catch{}b=!0}return b}finally{Vt=w,Un.transition=h}}return!1}function i2(f,h,w){h=L1(w,h),h=yT(f,h,1),fa(f,h),h=Wr(),f=Mg(f,1),f!==null&&(Tf(f,1,h),ni(f,h))}function ri(f,h,w){if(f.tag===3)i2(f,f,w);else for(;h!==null;){if(h.tag===3){i2(h,f,w);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(ha===null||!ha.has(b))){f=L1(w,f),f=xT(h,f,1),fa(h,f),f=Wr(),h=Mg(h,1),h!==null&&(Tf(h,1,f),ni(h,f));break}}h=h.return}}function P5(f,h,w){var b=f.pingCache;b!==null&&b.delete(h),h=Wr(),f.pingedLanes|=f.suspendedLanes&w,Kn===f&&(vr&w)===w&&(er===4||er===3&&(vr&130023424)===vr&&500>lr()-Q1?Ol(f,0):Y1|=w),ni(f,h)}function s2(f,h){h===0&&(f.mode&1?(h=km,km<<=1,!(km&130023424)&&(km=4194304)):h=1);var w=Wr();f=Mg(f,h),f!==null&&(Tf(f,h,w),ni(f,w))}function I5(f){var h=f.memoizedState,w=0;h!==null&&(w=h.retryLane),s2(f,w)}function B5(f,h){var w=0;switch(f.tag){case 13:var b=f.stateNode,C=f.memoizedState;C!==null&&(w=C.retryLane);break;case 19:b=f.stateNode;break;default:throw Error(o(314))}b!==null&&b.delete(h),s2(f,w)}var o2;o2=function(f,h,w){if(f!==null)if(f.memoizedProps!==h.pendingProps||nn.current)Ei=!0;else{if(!(f.lanes&w)&&!(h.flags&128))return Ei=!1,x5(f,h,w);Ei=!!(f.flags&131072)}else Ei=!1,_n&&h.flags&1048576&&jC(h,Ym,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps;var C=ua(h,Jn.current);ou(h,w),C=R1(null,h,b,f,C,w);var B=P1();return h.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,gr(b)?(B=!0,Fm(h)):B=!1,h.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,g1(h),C.updater=Jm,h.stateNode=C,C._reactInternals=h,y1(h,b,f,w),h=F1(null,h,b,!0,B,w)):(h.tag=0,_n&&B&&x1(h),Vr(null,h,C,w),h=h.child),h;case 16:b=h.elementType;e:{switch(f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps,C=b._init,b=C(b._payload),h.type=b,C=h.tag=L5(b),f=ys(b,f),C){case 0:h=N1(null,h,b,f,w);break e;case 1:h=PT(null,h,b,f,w);break e;case 11:h=bT(null,h,b,f,w);break e;case 14:h=MT(null,h,b,ys(b.type,f),w);break e}throw Error(o(306,b,""))}return h;case 0:return b=h.type,C=h.pendingProps,C=h.elementType===b?C:ys(b,C),N1(f,h,b,C,w);case 1:return b=h.type,C=h.pendingProps,C=h.elementType===b?C:ys(b,C),PT(f,h,b,C,w);case 3:e:{if(IT(h),f===null)throw Error(o(387));b=h.pendingProps,B=h.memoizedState,C=B.element,kC(f,h),Xm(h,b,null,w);var j=h.memoizedState;if(b=j.element,re&&B.isDehydrated)if(B={element:b,isDehydrated:!1,cache:j.cache,transitions:j.transitions},h.updateQueue.baseState=B,h.memoizedState=B,h.flags&256){C=Error(o(423)),h=BT(f,h,b,w,C);break e}else if(b!==C){C=Error(o(424)),h=BT(f,h,b,w,C);break e}else for(re&&(wi=_e(h.stateNode.containerInfo),Si=h,_n=!0,xs=null,Rf=!1),w=qC(h,null,b,w),h.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(cu(),b===C){h=bo(f,h,w);break e}Vr(f,h,b,w)}h=h.child}return h;case 5:return ZC(h),f===null&&w1(h),b=h.type,C=h.pendingProps,B=f!==null?f.memoizedProps:null,j=C.children,ye(b,C)?j=null:B!==null&&ye(b,B)&&(h.flags|=32),RT(f,h),Vr(f,h,j,w),h.child;case 6:return f===null&&w1(h),null;case 13:return DT(f,h,w);case 4:return A1(h,h.stateNode.containerInfo),b=h.pendingProps,f===null?h.child=uu(h,null,b,w):Vr(f,h,b,w),h.child;case 11:return b=h.type,C=h.pendingProps,C=h.elementType===b?C:ys(b,C),bT(f,h,b,C,w);case 7:return Vr(f,h,h.pendingProps,w),h.child;case 8:return Vr(f,h,h.pendingProps.children,w),h.child;case 12:return Vr(f,h,h.pendingProps.children,w),h.child;case 10:e:{if(b=h.type._context,C=h.pendingProps,B=h.memoizedProps,j=C.value,UC(h,b,j),B!==null)if(js(B.value,j)){if(B.children===C.children&&!nn.current){h=bo(f,h,w);break e}}else for(B=h.child,B!==null&&(B.return=h);B!==null;){var se=B.dependencies;if(se!==null){j=B.child;for(var xe=se.firstContext;xe!==null;){if(xe.context===b){if(B.tag===1){xe=So(-1,w&-w),xe.tag=2;var De=B.updateQueue;if(De!==null){De=De.shared;var et=De.pending;et===null?xe.next=xe:(xe.next=et.next,et.next=xe),De.pending=xe}}B.lanes|=w,xe=B.alternate,xe!==null&&(xe.lanes|=w),m1(B.return,w,h),se.lanes|=w;break}xe=xe.next}}else if(B.tag===10)j=B.type===h.type?null:B.child;else if(B.tag===18){if(j=B.return,j===null)throw Error(o(341));j.lanes|=w,se=j.alternate,se!==null&&(se.lanes|=w),m1(j,w,h),j=B.sibling}else j=B.child;if(j!==null)j.return=B;else for(j=B;j!==null;){if(j===h){j=null;break}if(B=j.sibling,B!==null){B.return=j.return,j=B;break}j=j.return}B=j}Vr(f,h,C.children,w),h=h.child}return h;case 9:return C=h.type,b=h.pendingProps.children,ou(h,w),C=Gi(C),b=b(C),h.flags|=1,Vr(f,h,b,w),h.child;case 14:return b=h.type,C=ys(b,h.pendingProps),C=ys(b.type,C),MT(f,h,b,C,w);case 15:return CT(f,h,h.type,h.pendingProps,w);case 17:return b=h.type,C=h.pendingProps,C=h.elementType===b?C:ys(b,C),f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,gr(b)?(f=!0,Fm(h)):f=!1,ou(h,w),VC(h,b,C),y1(h,b,C,w),F1(null,h,b,!0,f,w);case 19:return FT(f,h,w);case 22:return TT(f,h,w)}throw Error(o(156,h.tag))};function a2(f,h){return l1(f,h)}function D5(f,h,w,b){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(f,h,w,b){return new D5(f,h,w,b)}function s_(f){return f=f.prototype,!(!f||!f.isReactComponent)}function L5(f){if(typeof f=="function")return s_(f)?1:0;if(f!=null){if(f=f.$$typeof,f===y)return 11;if(f===_)return 14}return 2}function va(f,h){var w=f.alternate;return w===null?(w=Ji(f.tag,h,f.key,f.mode),w.elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=h,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=f.flags&14680064,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,h=f.dependencies,w.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w}function Tg(f,h,w,b,C,B){var j=2;if(b=f,typeof f=="function")s_(f)&&(j=1);else if(typeof f=="string")j=5;else e:switch(f){case u:return Ul(w.children,C,B,h);case d:j=8,C|=8;break;case p:return f=Ji(12,w,h,C|2),f.elementType=p,f.lanes=B,f;case x:return f=Ji(13,w,h,C),f.elementType=x,f.lanes=B,f;case g:return f=Ji(19,w,h,C),f.elementType=g,f.lanes=B,f;case A:return Rg(w,C,B,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:j=10;break e;case v:j=9;break e;case y:j=11;break e;case _:j=14;break e;case E:j=16,b=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return h=Ji(j,w,h,C),h.elementType=f,h.type=b,h.lanes=B,h}function Ul(f,h,w,b){return f=Ji(7,f,b,h),f.lanes=w,f}function Rg(f,h,w,b){return f=Ji(22,f,b,h),f.elementType=A,f.lanes=w,f.stateNode={},f}function o_(f,h,w){return f=Ji(6,f,null,h),f.lanes=w,f}function a_(f,h,w){return h=Ji(4,f.children!==null?f.children:[],f.key,h),h.lanes=w,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function O5(f,h,w,b,C){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=We,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=o1(0),this.expirationTimes=o1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=o1(0),this.identifierPrefix=b,this.onRecoverableError=C,re&&(this.mutableSourceEagerHydrationData=null)}function l2(f,h,w,b,C,B,j,se,xe){return f=new O5(f,h,w,se,xe),h===1?(h=1,B===!0&&(h|=8)):h=0,B=Ji(3,null,null,h),f.current=B,B.stateNode=f,B.memoizedState={element:b,isDehydrated:w,cache:null,transitions:null},g1(B),f}function c2(f){if(!f)return Cr;f=f._reactInternals;e:{if(R(f)!==f||f.tag!==1)throw Error(o(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(gr(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(f.tag===1){var w=f.type;if(gr(w))return DC(f,w,h)}return h}function u2(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=X(h),f===null?null:f.stateNode}function d2(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<h?w:h}}function l_(f,h){d2(f,h),(f=f.alternate)&&d2(f,h)}function N5(f){return f=X(f),f===null?null:f.stateNode}function F5(){return null}return n.attemptContinuousHydration=function(f){if(f.tag===13){var h=Wr();Xi(f,134217728,h),l_(f,134217728)}},n.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var h=Wr(),w=ma(f);Xi(f,w,h),l_(f,w)}},n.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var w=Cf(h.pendingLanes);w!==0&&(a1(h,w|1),ni(h,lr()),!(Tt&6)&&(gu(),Xs()))}break;case 13:var b=Wr();ZT(function(){return Xi(f,1,b)}),l_(f,1)}},n.batchedUpdates=function(f,h){var w=Tt;Tt|=1;try{return f(h)}finally{Tt=w,Tt===0&&(gu(),Gm&&Xs())}},n.createComponentSelector=function(f){return{$$typeof:pg,value:f}},n.createContainer=function(f,h,w,b,C,B,j){return l2(f,h,!1,null,w,b,C,B,j)},n.createHasPseudoClassSelector=function(f){return{$$typeof:mg,value:f}},n.createHydrationContainer=function(f,h,w,b,C,B,j,se,xe){return f=l2(w,b,!0,f,C,B,j,se,xe),f.context=c2(null),w=f.current,b=Wr(),C=ma(w),B=So(b,C),B.callback=h??null,fa(w,B),f.current.lanes=C,Tf(f,C,b),ni(f,b),f},n.createPortal=function(f,h,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:f,containerInfo:h,implementation:w}},n.createRoleSelector=function(f){return{$$typeof:gg,value:f}},n.createTestNameSelector=function(f){return{$$typeof:vg,value:f}},n.createTextSelector=function(f){return{$$typeof:yg,value:f}},n.deferredUpdates=function(f){var h=Vt,w=Un.transition;try{return Un.transition=null,Vt=16,f()}finally{Vt=h,Un.transition=w}},n.discreteUpdates=function(f,h,w,b,C){var B=Vt,j=Un.transition;try{return Un.transition=null,Vt=1,f(h,w,b,C)}finally{Vt=B,Un.transition=j,Tt===0&&gu()}},n.findAllNodes=J1,n.findBoundingRects=function(f,h){if(!Ye)throw Error(o(363));h=J1(f,h),f=[];for(var w=0;w<h.length;w++)f.push(W(h[w]));for(h=f.length-1;0<h;h--){w=f[h];for(var b=w.x,C=b+w.width,B=w.y,j=B+w.height,se=h-1;0<=se;se--)if(h!==se){var xe=f[se],De=xe.x,et=De+xe.width,pt=xe.y,at=pt+xe.height;if(b>=De&&B>=pt&&C<=et&&j<=at){f.splice(h,1);break}else if(b!==De||w.width!==xe.width||at<B||pt>j){if(!(B!==pt||w.height!==xe.height||et<b||De>C)){De>b&&(xe.width+=De-b,xe.x=b),et<C&&(xe.width=C-De),f.splice(h,1);break}}else{pt>B&&(xe.height+=pt-B,xe.y=B),at<j&&(xe.height=j-pt),f.splice(h,1);break}}}return f},n.findHostInstance=u2,n.findHostInstanceWithNoPortals=function(f){return f=F(f),f=f!==null?V(f):null,f===null?null:f.stateNode},n.findHostInstanceWithWarning=function(f){return u2(f)},n.flushControlled=function(f){var h=Tt;Tt|=1;var w=Un.transition,b=Vt;try{Un.transition=null,Vt=1,f()}finally{Vt=b,Un.transition=w,Tt=h,Tt===0&&(gu(),Xs())}},n.flushPassiveEffects=Fl,n.flushSync=ZT,n.focusWithin=function(f,h){if(!Ye)throw Error(o(363));for(f=W1(f),h=YT(f,h),h=Array.from(h),f=0;f<h.length;){var w=h[f++];if(!Y(w)){if(w.tag===5&&we(w.stateNode))return!0;for(w=w.child;w!==null;)h.push(w),w=w.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Vt},n.getFindAllNodesFailureDescription=function(f,h){if(!Ye)throw Error(o(363));var w=0,b=[];f=[W1(f),0];for(var C=0;C<f.length;){var B=f[C++],j=f[C++],se=h[j];if((B.tag!==5||!Y(B))&&(j1(B,se)&&(b.push(X1(se)),j++,j>w&&(w=j)),j<h.length))for(B=B.child;B!==null;)f.push(B,j),B=B.sibling}if(w<h.length){for(f=[];w<h.length;w++)f.push(X1(h[w]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},n.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return Q(f.child.stateNode);default:return f.child.stateNode}},n.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:N5,findFiberByHostInstance:f.findFiberByHostInstance||F5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{Hm=h.inject(f),Ws=h}catch{}f=!!h.checkDCE}}return f},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(f,h,w,b){if(!Ye)throw Error(o(363));f=J1(f,h);var C=Te(f,w,b).disconnect;return{disconnect:function(){C()}}},n.registerMutableSourceForHydration=function(f,h){var w=h._getVersion;w=w(h._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[h,w]:f.mutableSourceEagerHydrationData.push(h,w)},n.runWithPriority=function(f,h){var w=Vt;try{return Vt=f,h()}finally{Vt=w}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(f,h,w,b){var C=h.current,B=Wr(),j=ma(C);return w=c2(w),h.context===null?h.context=w:h.pendingContext=w,h=So(B,j),h.payload={element:f},b=b===void 0?null:b,b!==null&&(h.callback=b),fa(C,h),f=Xi(C,j,B),f!==null&&jm(f,C,j),j},n};SF.exports=tK;var nK=SF.exports;const rK=yl(nK);function AF(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}const Uo=[];function bF(t,e,n=!1,r={}){for(const s of Uo)if(AF(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,promise:t(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=Uo.indexOf(i);s!==-1&&Uo.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(Uo.push(i),!n)throw i.promise}const MF=(t,e,n)=>bF(t,e,!1,n),CF=(t,e,n)=>void bF(t,e,!0,n),TF=t=>{if(t===void 0||t.length===0)Uo.splice(0,Uo.length);else{const e=Uo.find(n=>AF(t,n.keys,n.equal));if(e){const n=Uo.indexOf(e);n!==-1&&Uo.splice(n,1)}}},RM={},PM=t=>void Object.assign(RM,t);function iK(t,e){function n(u,{args:d=[],attach:p,...m},v){let y=`${u[0].toUpperCase()}${u.slice(1)}`,x;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=qu(g,{type:u,root:v,attach:p,primitive:!0})}else{const g=RM[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=qu(new g(...d),{type:u,root:v,attach:p,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof xt?x.__r3f.attach="geometry":x instanceof Nn&&(x.__r3f.attach="material")),y!=="inject"&&gS(x,m),x}function r(u,d){let p=!1;if(d){var m,v;(m=d.__r3f)!=null&&m.attach?mS(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),p=!0),p||(v=u.__r3f)==null||v.objects.push(d),d.__r3f||qu(d,{}),d.__r3f.parent=u,jE(d),Zu(d)}}function i(u,d,p){let m=!1;if(d){var v,y;if((v=d.__r3f)!=null&&v.attach)mS(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"});const x=u.children.filter(_=>_!==d),g=x.indexOf(p);u.children=[...x.slice(0,g),d,...x.slice(g)],m=!0}m||(y=u.__r3f)==null||y.objects.push(d),d.__r3f||qu(d,{}),d.__r3f.parent=u,jE(d),Zu(d)}}function s(u,d,p=!1){u&&[...u].forEach(m=>o(d,m,p))}function o(u,d,p){if(d){var m,v,y;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==d)),(v=d.__r3f)!=null&&v.attach)aI(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var x;u.remove(d),(x=d.__r3f)!=null&&x.root&&fK(d.__r3f.root,d)}const _=(y=d.__r3f)==null?void 0:y.primitive,E=p===void 0?d.dispose!==null&&!_:p;if(!_){var g;s((g=d.__r3f)==null?void 0:g.objects,d,E),s(d.children,d,E)}d.__r3f&&(delete d.__r3f.root,delete d.__r3f.objects,delete d.__r3f.handlers,delete d.__r3f.memoizedProps,_||delete d.__r3f),E&&d.dispose&&d.type!=="Scene"&&VE.unstable_scheduleCallback(VE.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),Zu(u)}}function a(u,d,p,m){var v;const y=(v=u.__r3f)==null?void 0:v.parent;if(!y)return;const x=n(d,p,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&r(x,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>r(x,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(y,u),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(y,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:rK({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,p)=>{if(!d||!p)return;const m=u.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,p,m){if(u.__r3f.primitive&&m.object&&m.object!==u)return[!0];{const{args:v=[],children:y,...x}=m,{args:g=[],children:_,...E}=p;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((M,T)=>M!==g[T]))return[!0];const A=OF(u,x,E,!0);return A.changes.length?[!1,A]:null}},commitUpdate(u,[d,p],m,v,y,x){d?a(u,m,y,x):gS(u,p)},commitMount(u,d,p,m){var v;const y=(v=u.__r3f)!=null?v:{};u.raycast&&y.handlers&&y.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>qu(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:p,parent:m}=(d=u.__r3f)!=null?d:{};p&&m&&aI(m,u,p),u.isObject3D&&(u.visible=!1),Zu(u)},unhideInstance(u,d){var p;const{attach:m,parent:v}=(p=u.__r3f)!=null?p:{};m&&v&&mS(v,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),Zu(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():vd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&gn.fun(performance.now)?performance.now:gn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:gS}}var rI,iI;const pS=t=>"colorSpace"in t||"outputColorSpace"in t,RF=()=>{var t;return(t=RM.ColorManagement)!=null?t:null},PF=t=>t&&t.isOrthographicCamera,sK=t=>t&&t.hasOwnProperty("current"),ym=typeof window<"u"&&((rI=window.document)!=null&&rI.createElement||((iI=window.navigator)==null?void 0:iI.product)==="ReactNative")?S.useLayoutEffect:S.useEffect;function IF(t){const e=S.useRef(t);return ym(()=>void(e.current=t),[t]),e}function oK({set:t}){return ym(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class BF extends S.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}BF.getDerivedStateFromError=()=>({error:!0});const DF="__default",sI=new Map,aK=t=>t&&!!t.memoized&&!!t.changes;function LF(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const hh=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},gn={obj:t=>t===Object(t)&&!gn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(gn.str(t)||gn.num(t))return t===e;const s=gn.obj(t);if(s&&r==="reference")return t===e;const o=gn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!gn.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(gn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function lK(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function cK(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function qu(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function WE(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const oI=/-\d+$/;function mS(t,e,n){if(gn.str(n)){if(oI.test(n)){const s=n.replace(oI,""),{target:o,key:a}=WE(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=WE(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function aI(t,e,n){var r,i;if(gn.str(n)){const{target:s,key:o}=WE(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function OF(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const d=(u=t==null?void 0:t.__r3f)!=null?u:{},p=Object.entries(i),m=[];if(c){const y=Object.keys(l);for(let x=0;x<y.length;x++)i.hasOwnProperty(y[x])||p.unshift([y[x],DF+"remove"])}p.forEach(([y,x])=>{var g;if((g=t.__r3f)!=null&&g.primitive&&y==="object"||gn.equ(x,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return m.push([y,x,!0,[]]);let _=[];y.includes("-")&&(_=y.split("-")),m.push([y,x,!1,_]);for(const E in i){const A=i[E];E.startsWith(`${y}-`)&&m.push([E,A,!1,E.split("-")])}});const v={...i};return d.memoizedProps&&d.memoizedProps.args&&(v.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(v.attach=d.memoizedProps.attach),{memoized:v,changes:m}}function gS(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=aK(e)?e:OF(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,v,y,x]=c[p];if(pS(t)){const A="srgb",M="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?A:M):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?A:M)}let g=t,_=g[m];if(x.length&&(_=x.reduce((E,A)=>E[A],t),!(_&&_.set))){const[E,...A]=x.reverse();g=A.reverse().reduce((M,T)=>M[T],t),m=E}if(v===DF+"remove")if(g.constructor){let E=sI.get(g.constructor);E||(E=new g.constructor,sI.set(g.constructor,E)),v=E[m]}else v=0;if(y)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof Mc)){if(Array.isArray(v))_.fromArray?_.fromArray(v):_.set(...v);else if(_.copy&&v&&v.constructor&&_.constructor===v.constructor)_.copy(v);else if(v!==void 0){const E=_ instanceof Fe;!E&&_.setScalar?_.setScalar(v):_ instanceof Mc&&v instanceof Mc?_.mask=v.mask:_.set(v),!RF()&&!a.linear&&E&&_.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof fn&&g[m].format===li&&g[m].type===zr){const E=g[m];pS(E)&&pS(a.gl)?E.colorSpace=a.gl.outputColorSpace:E.encoding=a.gl.outputEncoding}Zu(t)}if(s.parent&&a.internal&&t.raycast&&u!==s.eventCount){const p=a.internal.interaction.indexOf(t);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=t.__r3f)!=null&&i.parent&&jE(t),t}function Zu(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function jE(t){t.onUpdate==null||t.onUpdate(t)}function uK(t,e){t.manual||(PF(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Fv(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function dK(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return vd.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return vd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return vd.ContinuousEventPriority;default:return vd.DefaultEventPriority}}function NF(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function fK(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{NF(n.capturedMap,e,r,i)})}function hK(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),d=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<m.length;g++){const _=hh(m[g]);_&&(_.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(g){const _=hh(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var E;_.events.compute==null||_.events.compute(l,_,(E=_.previousRoot)==null?void 0:E.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let y=m.flatMap(v).sort((g,_)=>{const E=hh(g.object),A=hh(_.object);return!E||!A?g.distance-_.distance:A.events.priority-E.events.priority||g.distance-_.distance}).filter(g=>{const _=Fv(g);return d.has(_)?!1:(d.add(_),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const g of y){let _=g.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())d.has(Fv(g.intersection))||p.push(g.intersection);return p}function i(l,c,u,d){const p=t.getState();if(l.length){const m={stopped:!1};for(const v of l){const y=hh(v.object)||p,{raycaster:x,pointer:g,camera:_,internal:E}=y,A=new O(g.x,g.y,0).unproject(_),M=D=>{var F,X;return(F=(X=E.capturedMap.get(D))==null?void 0:X.has(v.eventObject))!=null?F:!1},T=D=>{const F={intersection:v,target:c.target};E.capturedMap.has(D)?E.capturedMap.get(D).set(v.eventObject,F):E.capturedMap.set(D,new Map([[v.eventObject,F]])),c.target.setPointerCapture(D)},P=D=>{const F=E.capturedMap.get(D);F&&NF(E.capturedMap,v.eventObject,F,D)};let I={};for(let D in c){let F=c[D];typeof F!="function"&&(I[D]=F)}let R={...v,...I,pointer:g,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:A,ray:x.ray,camera:_,stopPropagation(){const D="pointerId"in c&&E.capturedMap.get(c.pointerId);if((!D||D.has(v.eventObject))&&(R.stopped=m.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(F=>F.eventObject===v.eventObject))){const F=l.slice(0,l.indexOf(v));s([...F,v])}},target:{hasPointerCapture:M,setPointerCapture:T,releasePointerCapture:P},currentTarget:{hasPointerCapture:M,setPointerCapture:T,releasePointerCapture:P},nativeEvent:c};if(d(R),m.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Fv(u)),p!=null&&p.eventCount){const v={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:p}=t.getState();p.lastEvent.current=u;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(u,m?n:void 0),g=v?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=x.map(E=>E.eventObject)),v&&!x.length&&g<=2&&(o(u,p.interaction),d&&d(u)),m&&s(x);function _(E){const A=E.eventObject,M=A.__r3f,T=M==null?void 0:M.handlers;if(M!=null&&M.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const P=Fv(E),I=p.hovered.get(P);I?I.stopped&&E.stopPropagation():(p.hovered.set(P,E),T.onPointerOver==null||T.onPointerOver(E),T.onPointerEnter==null||T.onPointerEnter(E))}T.onPointerMove==null||T.onPointerMove(E)}else{const P=T[l];P?(!v||p.initialHits.includes(A))&&(o(u,p.interaction.filter(I=>!p.initialHits.includes(I))),P(E)):v&&p.initialHits.includes(A)&&o(u,p.interaction.filter(I=>!p.initialHits.includes(I)))}}i(x,u,g,_)}}return{handlePointer:a}}const FF=t=>!!(t!=null&&t.render),UF=S.createContext(null),pK=(t,e)=>{const n=eK((a,l)=>{const c=new O,u=new O,d=new O;function p(g=l().camera,_=u,E=l().size){const{width:A,height:M,top:T,left:P}=E,I=A/M;_ instanceof O?d.copy(_):d.set(..._);const R=g.getWorldPosition(c).distanceTo(d);if(PF(g))return{width:A/g.zoom,height:M/g.zoom,top:T,left:P,factor:1,distance:R,aspect:I};{const D=g.fov*Math.PI/180,F=2*Math.tan(D/2)*R,X=F*(A/M);return{width:X,height:F,top:T,left:P,factor:A/X,distance:R,aspect:I}}}let m;const v=g=>a(_=>({performance:{..._.performance,current:g}})),y=new de;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>t(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new EM,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,E,A,M)=>{const T=l().camera,P={width:g,height:_,top:A||0,left:M||0,updateStyle:E};a(I=>({size:P,viewport:{...I.viewport,...p(T,u,P)}}))},setDpr:g=>a(_=>{const E=LF(g);return{viewport:{..._.viewport,dpr:E,initialDpr:_.viewport.initialDpr||E}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:S.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,E)=>{const A=l().internal;return A.priority=A.priority+(_>0?1:0),A.subscribers.push({ref:g,priority:_,store:E}),A.subscribers=A.subscribers.sort((M,T)=>M.priority-T.priority),()=>{const M=l().internal;M!=null&&M.subscribers&&(M.priority=M.priority-(_>0?1:0),M.subscribers=M.subscribers.filter(T=>T.ref!==g))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=n.getState();if(l!==i||c.dpr!==s){var p;i=l,s=c.dpr,uK(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let Uv,mK=new Set,gK=new Set,vK=new Set;function vS(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function ph(t,e){switch(t){case"before":return vS(mK,e);case"after":return vS(gK,e);case"tail":return vS(vK,e)}}let yS,xS;function _S(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),yS=e.internal.subscribers,Uv=0;Uv<yS.length;Uv++)xS=yS[Uv],xS.ref.current(xS.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function yK(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,ph("before",l);for(const u of t.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(n+=_S(l,i))}if(ph("after",l),n===0)return ph("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return t.forEach(d=>o(d.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,d){if(c&&ph("before",l),u)_S(l,u,d);else for(const p of t.values())_S(l,p.store.getState());c&&ph("after",l)}return{loop:s,invalidate:o,advance:a}}function kF(){const t=S.useContext(UF);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function cn(t=n=>n,e){return kF()(t,e)}function gf(t,e=0){const n=kF(),r=n.getState().internal.subscribe,i=IF(t);return ym(()=>r(i,e,n),[e,r,n]),null}function zF(t,e){return function(n,...r){const i=new n;return t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,lK(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Cl(t,e,n,r){const i=Array.isArray(e)?e:[e],s=MF(zF(n,r),[t,...i],{equal:gn.equ});return Array.isArray(e)?s:s[0]}Cl.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return CF(zF(n),[t,...r])};Cl.clear=function(t,e){const n=Array.isArray(e)?e:[e];return TF([t,...n])};const Qd=new Map,{invalidate:lI,advance:cI}=yK(Qd),{reconciler:hy,applyProps:zu}=iK(Qd,dK),Hu={objects:"shallow",strict:!1},xK=(t,e)=>{const n=typeof t=="function"?t(e):t;return FF(n)?n:new Yb({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function _K(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:r,top:i,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function SK(t){const e=Qd.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||pK(lI,cI),o=n||hy.createContainer(s,vd.ConcurrentRoot,null,!1,null,"",i,null);e||Qd.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:p,scene:m,events:v,onCreated:y,shadows:x=!1,linear:g=!1,flat:_=!1,legacy:E=!1,orthographic:A=!1,frameloop:M="always",dpr:T=[1,2],performance:P,raycaster:I,camera:R,onPointerMissed:D}=u,F=s.getState(),X=F.gl;F.gl||F.set({gl:X=xK(d,t)});let z=F.raycaster;z||F.set({raycaster:z=new oF});const{params:V,...H}=I||{};if(gn.equ(H,z,Hu)||zu(z,{...H}),gn.equ(V,z.params,Hu)||zu(z,{params:{...z.params,...V}}),!F.camera||F.camera===c&&!gn.equ(c,R,Hu)){c=R;const ne=R instanceof lf,J=ne?R:A?new Ns(0,0,0,0,.1,1e3):new sn(75,0,.1,1e3);ne||(J.position.z=5,R&&zu(J,R),!F.camera&&!(R!=null&&R.rotation)&&J.lookAt(0,0,0)),F.set({camera:J})}if(!F.scene){let ne;m instanceof Wd?ne=m:(ne=new Wd,m&&zu(ne,m)),F.set({scene:qu(ne)})}if(!F.xr){const ne=(te,ye)=>{const Ae=s.getState();Ae.frameloop!=="never"&&cI(te,!0,Ae,ye)},J=()=>{const te=s.getState();te.gl.xr.enabled=te.gl.xr.isPresenting,te.gl.xr.setAnimationLoop(te.gl.xr.isPresenting?ne:null),te.gl.xr.isPresenting||lI(te)},ee={connect(){const te=s.getState().gl;te.xr.addEventListener("sessionstart",J),te.xr.addEventListener("sessionend",J)},disconnect(){const te=s.getState().gl;te.xr.removeEventListener("sessionstart",J),te.xr.removeEventListener("sessionend",J)}};X.xr&&ee.connect(),F.set({xr:ee})}if(X.shadowMap){const ne=X.shadowMap.enabled,J=X.shadowMap.type;if(X.shadowMap.enabled=!!x,gn.boo(x))X.shadowMap.type=Hh;else if(gn.str(x)){var Q;const ee={basic:xO,percentage:nx,soft:Hh,variance:Cs};X.shadowMap.type=(Q=ee[x])!=null?Q:Hh}else gn.obj(x)&&Object.assign(X.shadowMap,x);(ne!==X.shadowMap.enabled||J!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}const Z=RF();Z&&("enabled"in Z?Z.enabled=!E:"legacyMode"in Z&&(Z.legacyMode=E)),zu(X,{outputEncoding:g?3e3:3001,toneMapping:_?Os:Fb}),F.legacy!==E&&F.set(()=>({legacy:E})),F.linear!==g&&F.set(()=>({linear:g})),F.flat!==_&&F.set(()=>({flat:_})),d&&!gn.fun(d)&&!FF(d)&&!gn.equ(d,X,Hu)&&zu(X,d),v&&!F.events.handlers&&F.set({events:v(s)});const G=_K(t,p);return gn.equ(G,F.size,Hu)||F.setSize(G.width,G.height,G.updateStyle,G.top,G.left),T&&F.viewport.dpr!==LF(T)&&F.setDpr(T),F.frameloop!==M&&F.setFrameloop(M),F.onPointerMissed||F.set({onPointerMissed:D}),P&&!gn.equ(P,F.performance,Hu)&&F.set(ne=>({performance:{...ne.performance,...P}})),a=y,l=!0,this},render(u){return l||this.configure(),hy.updateContainer(S.createElement(wK,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){HF(t)}}}function wK({store:t,children:e,onCreated:n,rootElement:r}){return ym(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),S.createElement(UF.Provider,{value:t},e)}function HF(t,e){const n=Qd.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),hy.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),cK(i),Qd.delete(t),e&&e(t)}catch{}},500)})}}hy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:S.version});function XE(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}XE.debounce=XE;var EK=XE;const uI=yl(EK);function AK(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=S.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=S.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=S.useRef(!1);S.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,v]=S.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:E,top:A,width:M,height:T,bottom:P,right:I,x:R,y:D}=l.current.element.getBoundingClientRect(),F={left:E,top:A,width:M,height:T,bottom:P,right:I,x:R,y:D};l.current.element instanceof HTMLElement&&i&&(F.height=l.current.element.offsetHeight,F.width=l.current.element.offsetWidth),Object.freeze(F),d.current&&!TK(l.current.lastBounds,F)&&a(l.current.lastBounds=F)};return[_,u?uI(_,u):_,c?uI(_,c):_]},[a,i,c,u]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=_=>{!_||_===l.current.element||(y(),l.current.element=_,l.current.scrollContainers=GF(_),x())};return MK(v,!!n),bK(m),S.useEffect(()=>{y(),x()},[n,v,m]),S.useEffect(()=>y,[]),[g,o,p]}function bK(t){S.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function MK(t,e){S.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function GF(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...GF(t.parentElement)]}const CK=["x","y","top","bottom","left","right","width","height"],TK=(t,e)=>CK.every(n=>t[n]===e[n]);var RK=Object.defineProperty,PK=Object.defineProperties,IK=Object.getOwnPropertyDescriptors,dI=Object.getOwnPropertySymbols,BK=Object.prototype.hasOwnProperty,DK=Object.prototype.propertyIsEnumerable,fI=(t,e,n)=>e in t?RK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hI=(t,e)=>{for(var n in e||(e={}))BK.call(e,n)&&fI(t,n,e[n]);if(dI)for(var n of dI(e))DK.call(e,n)&&fI(t,n,e[n]);return t},LK=(t,e)=>PK(t,IK(e));function $F(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=$F(r,e,n);if(i)return i;r=e?null:r.sibling}}function VF(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const IM=VF(S.createContext(null));class WF extends S.Component{render(){return S.createElement(IM.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:pI,ReactCurrentDispatcher:mI}=S.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function OK(){const t=S.useContext(IM);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=S.useId();return S.useMemo(()=>{for(const r of[pI==null?void 0:pI.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=$F(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function NK(){var t,e;const n=OK(),[r]=S.useState(()=>new Map);r.clear();let i=n;for(;i;){const s=(t=i.type)==null?void 0:t._context;s&&s!==IM&&!r.has(s)&&r.set(s,(e=mI==null?void 0:mI.current)==null?void 0:e.readContext(VF(s))),i=i.return}return r}function FK(){const t=NK();return S.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>S.createElement(e,null,S.createElement(n.Provider,LK(hI({},r),{value:t.get(n)}))),e=>S.createElement(WF,hI({},e))),[t])}const SS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function UK(t){const{handlePointer:e}=hK(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(SS).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=SS[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=SS[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const kK=S.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=UK,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:y,performance:x,raycaster:g,camera:_,onPointerMissed:E,onCreated:A,...M},T){S.useMemo(()=>PM(LX),[]);const P=FK(),[I,R]=AK({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=S.useRef(null),F=S.useRef(null);S.useImperativeHandle(T,()=>D.current);const X=IF(E),[z,V]=S.useState(!1),[H,Q]=S.useState(!1);if(z)throw z;if(H)throw H;const Z=S.useRef(null);ym(()=>{const N=D.current;R.width>0&&R.height>0&&N&&(Z.current||(Z.current=SK(N)),Z.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:y,performance:x,raycaster:g,camera:_,size:R,onPointerMissed:(...G)=>X.current==null?void 0:X.current(...G),onCreated:G=>{G.events.connect==null||G.events.connect(a?sK(a)?a.current:a:F.current),l&&G.setEvents({compute:(ne,J)=>{const ee=ne[l+"X"],te=ne[l+"Y"];J.pointer.set(ee/J.size.width*2-1,-(te/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),A==null||A(G)}}),Z.current.render(S.createElement(P,null,S.createElement(BF,{set:Q},S.createElement(S.Suspense,{fallback:S.createElement(oK,{set:V})},e)))))}),S.useEffect(()=>{const N=D.current;if(N)return()=>HF(N)},[]);const U=a?"none":"auto";return S.createElement("div",Re({ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:U,...i}},M),S.createElement("div",{ref:I,style:{width:"100%",height:"100%"}},S.createElement("canvas",{ref:D,style:{display:"block"}},n)))}),zK=S.forwardRef(function(e,n){return S.createElement(WF,null,S.createElement(kK,Re({},e,{ref:n})))}),xm=new O,BM=new O,HK=new O;function GK(t,e,n){const r=xm.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function $K(t,e){const n=xm.setFromMatrixPosition(t.matrixWorld),r=BM.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(HK);return i.angleTo(s)>Math.PI/2}function VK(t,e,n,r){const i=xm.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function WK(t,e){if(e instanceof Ns)return e.zoom;if(e instanceof sn){const n=xm.setFromMatrixPosition(t.matrixWorld),r=BM.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function jK(t,e,n){if(e instanceof sn||e instanceof Ns){const r=xm.setFromMatrixPosition(t.matrixWorld),i=BM.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const JE=t=>Math.abs(t)<1e-10?0:t;function jF(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=JE(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const XK=(t=>e=>jF(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),JK=(t=>(e,n)=>jF(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function KK(t){return t&&typeof t=="object"&&"current"in t}const Rp=S.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:v,material:y,geometry:x,zIndexRange:g=[16777271,0],calculatePosition:_=GK,as:E="div",wrapperClass:A,pointerEvents:M="auto",...T},P)=>{const{gl:I,camera:R,scene:D,size:F,raycaster:X,events:z,viewport:V}=cn(),[H]=S.useState(()=>document.createElement(E)),Q=S.useRef(),Z=S.useRef(null),U=S.useRef(0),N=S.useRef([0,0]),G=S.useRef(null),ne=S.useRef(null),J=(a==null?void 0:a.current)||z.connected||I.domElement.parentNode,ee=S.useRef(null),te=S.useRef(!1),ye=S.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&KK(d[0]),[d]);S.useLayoutEffect(()=>{const Se=I.domElement;d&&d==="blending"?(Se.style.zIndex=`${Math.floor(g[0]/2)}`,Se.style.position="absolute",Se.style.pointerEvents="none"):(Se.style.zIndex=null,Se.style.position=null,Se.style.pointerEvents=null)},[d]),S.useLayoutEffect(()=>{if(Z.current){const Se=Q.current=fO(H);if(D.updateMatrixWorld(),u)H.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Me=_(Z.current,R,F);H.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Me[0]}px,${Me[1]}px,0);transform-origin:0 0;`}return J&&(i?J.prepend(H):J.appendChild(H)),()=>{J&&J.removeChild(H),Se.unmount()}}},[J,u]),S.useLayoutEffect(()=>{A&&(H.className=A)},[A]);const Ae=S.useMemo(()=>u?{position:"absolute",top:0,left:0,width:F.width,height:F.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-F.height/2,left:-F.width/2,width:F.width,height:F.height},...n},[n,s,o,F,u]),K=S.useMemo(()=>({position:"absolute",pointerEvents:M}),[M]);S.useLayoutEffect(()=>{if(te.current=!1,u){var Se;(Se=Q.current)==null||Se.render(S.createElement("div",{ref:G,style:Ae},S.createElement("div",{ref:ne,style:K},S.createElement("div",{ref:P,className:r,style:n,children:t}))))}else{var Me;(Me=Q.current)==null||Me.render(S.createElement("div",{ref:P,style:Ae,className:r,children:t}))}});const Ge=S.useRef(!0);gf(Se=>{if(Z.current){R.updateMatrixWorld(),Z.current.updateWorldMatrix(!0,!1);const Me=u?N.current:_(Z.current,R,F);if(u||Math.abs(U.current-R.zoom)>e||Math.abs(N.current[0]-Me[0])>e||Math.abs(N.current[1]-Me[1])>e){const me=$K(Z.current,R);let re=!1;ye&&(d!=="blending"?re=[D]:Array.isArray(d)&&(re=d.map(Ue=>Ue.current)));const fe=Ge.current;if(re){const Ue=VK(Z.current,R,X,re);Ge.current=Ue&&!me}else Ge.current=!me;fe!==Ge.current&&(p?p(!Ge.current):H.style.display=Ge.current?"block":"none");const Le=Math.floor(g[0]/2),Be=d?ye?[g[0],Le]:[Le-1,0]:g;if(H.style.zIndex=`${jK(Z.current,R,Be)}`,u){const[Ue,Ke]=[F.width/2,F.height/2],ke=R.projectionMatrix.elements[5]*Ke,{isOrthographicCamera:Ye,top:ht,left:W,bottom:k,right:Y}=R,ce=XK(R.matrixWorldInverse),we=Ye?`scale(${ke})translate(${JE(-(Y+W)/2)}px,${JE((ht+k)/2)}px)`:`translateZ(${ke}px)`;let Te=Z.current.matrixWorld;c&&(Te=R.matrixWorldInverse.clone().transpose().copyPosition(Te).scale(Z.current.scale),Te.elements[3]=Te.elements[7]=Te.elements[11]=0,Te.elements[15]=1),H.style.width=F.width+"px",H.style.height=F.height+"px",H.style.perspective=Ye?"":`${ke}px`,G.current&&ne.current&&(G.current.style.transform=`${we}${ce}translate(${Ue}px,${Ke}px)`,ne.current.style.transform=JK(Te,1/((l||10)/400)))}else{const Ue=l===void 0?1:WK(Z.current,R)*l;H.style.transform=`translate3d(${Me[0]}px,${Me[1]}px,0) scale(${Ue})`}N.current=Me,U.current=R.zoom}}if(!ye&&ee.current&&!te.current)if(u){if(G.current){const Me=G.current.children[0];if(Me!=null&&Me.clientWidth&&Me!=null&&Me.clientHeight){const{isOrthographicCamera:me}=R;if(me||x)T.scale&&(Array.isArray(T.scale)?T.scale instanceof O?ee.current.scale.copy(T.scale.clone().divideScalar(1)):ee.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):ee.current.scale.setScalar(1/T.scale));else{const re=(l||10)/400,fe=Me.clientWidth*re,Le=Me.clientHeight*re;ee.current.scale.set(fe,Le,1)}te.current=!0}}}else{const Me=H.children[0];if(Me!=null&&Me.clientWidth&&Me!=null&&Me.clientHeight){const me=1/V.factor,re=Me.clientWidth*me,fe=Me.clientHeight*me;ee.current.scale.set(re,fe,1),te.current=!0}ee.current.lookAt(Se.camera.position)}});const We=S.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return S.createElement("group",Re({},T,{ref:Z}),d&&!ye&&S.createElement("mesh",{castShadow:m,receiveShadow:v,ref:ee},x||S.createElement("planeGeometry",null),y||S.createElement("shaderMaterial",{side:wr,vertexShader:We.vertexShader,fragmentShader:We.fragmentShader})))});function _x(t,e="pointer",n="auto"){S.useEffect(()=>{if(t)return document.body.style.cursor=e,()=>void(document.body.style.cursor=n)},[t])}function YK(t){let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),n.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!d(p,v)){const y=p;c(p=v,y)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const QK=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gI=QK?S.useEffect:S.useLayoutEffect;function qK(t){const e=typeof t=="function"?YK(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=S.useReducer(x=>x+1,0),o=e.getState(),a=S.useRef(o),l=S.useRef(r),c=S.useRef(i),u=S.useRef(!1),d=S.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(d.current,p)),gI(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=S.useRef(o);gI(()=>{const x=()=>{try{const _=e.getState(),E=l.current(_);c.current(d.current,E)||(a.current=_,d.current=E,s())}catch{u.current=!0,s()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const y=m?p:d.current;return S.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}let mh=0;const ZK=qK(t=>(gd.onStart=(e,n,r)=>{t({active:!0,item:e,loaded:n,total:r,progress:(n-mh)/(r-mh)*100})},gd.onLoad=()=>{t({active:!1})},gd.onError=e=>t(n=>({errors:[...n.errors,e]})),gd.onProgress=(e,n,r)=>{n===r&&(mh=r),t({active:!0,item:e,loaded:n,total:r,progress:(n-mh)/(r-mh)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),eY=t=>`Loading ${t.toFixed(2)}%`;function tY({containerStyles:t,innerStyles:e,barStyles:n,dataStyles:r,dataInterpolation:i=eY,initialState:s=o=>o}){const{active:o,progress:a}=ZK(),l=S.useRef(0),c=S.useRef(0),u=S.useRef(null),[d,p]=S.useState(s(o));S.useEffect(()=>{let v;return o!==d&&(v=setTimeout(()=>p(o),300)),()=>clearTimeout(v)},[d,o]);const m=S.useCallback(()=>{u.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),u.current.innerText=i(l.current),l.current<a&&(c.current=requestAnimationFrame(m)))},[i,a]);return S.useEffect(()=>(m(),()=>cancelAnimationFrame(c.current)),[m]),d?S.createElement("div",{style:{...kv.container,opacity:o?1:0,...t}},S.createElement("div",null,S.createElement("div",{style:{...kv.inner,...e}},S.createElement("div",{style:{...kv.bar,transform:`scaleX(${a/100})`,...n}}),S.createElement("span",{ref:u,style:{...kv.data,...r}})))):null}const kv={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function XF(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function nY(t,e,n){return Math.max(e,Math.min(t,n))}const Ur={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function vI(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function yI(t,e,n,r=.15){return r===0?nY(t,e,n):t<e?-vI(e-t,n-e,r)+e:t>n?+vI(t-n,n-e,r)+n:t}function rY(t,[e,n],[r,i]){const[[s,o],[a,l]]=t;return[yI(e,s,o,r),yI(n,a,l,i)]}function iY(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sY(t){var e=iY(t,"string");return typeof e=="symbol"?e:String(e)}function si(t,e,n){return e=sY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xI(Object(n),!0).forEach(function(r){si(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const JF={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function _I(t){return t?t[0].toUpperCase()+t.slice(1):""}const oY=["enter","leave"];function aY(t=!1,e){return t&&!oY.includes(e)}function lY(t,e="",n=!1){const r=JF[t],i=r&&r[e]||e;return"on"+_I(t)+_I(i)+(aY(n,i)?"Capture":"")}const cY=["gotpointercapture","lostpointercapture"];function uY(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=cY.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function dY(t,e=""){const n=JF[t],r=n&&n[e]||e;return t+r}function Sx(t){return"touches"in t}function KF(t){return Sx(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function fY(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function hY(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function YF(t){return Sx(t)?hY(t)[0]:t}function pY(t){return fY(t).map(e=>e.identifier)}function wS(t){const e=YF(t);return Sx(t)?e.identifier:e.pointerId}function SI(t){const e=YF(t);return[e.clientX,e.clientY]}function mY(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return e}function py(t,...e){return typeof t=="function"?t(...e):t}function gY(){}function vY(...t){return t.length===0?gY:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function wI(t,e){return Object.assign({},e,t||{})}const yY=32;class xY{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?py(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,mY(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const T=n._delta.map(Math.abs);Ur.addTo(n._distance,T)}this.axisIntent&&this.axisIntent(e);const[o,a]=n._movement,[l,c]=r.threshold,{_step:u,values:d}=n;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[T,P]=d;p[0]=u[0]!==!1?T-u[0]:0,p[1]=u[1]!==!1?P-u[1]:0}else p[0]=u[0]!==!1?o-u[0]:0,p[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const m=n.offset,v=n._active&&!n._blocked||n.active;v&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=py(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[y,x]=n.offset,[[g,_],[E,A]]=n._bounds;n.overflow=[y<g?-1:y>_?1:0,x<E?-1:x>A?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const M=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=rY(n._bounds,n.offset,M),n.delta=Ur.sub(n.offset,m),this.computeMovement(),v&&(!n.last||s>yY)){n.delta=Ur.sub(n.offset,m);const T=n.delta.map(Math.abs);Ur.addTo(n.distance,T),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[T[0]/s,T[1]/s],n.timeDelta=s)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Tn(Tn(Tn({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function _Y([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class SY extends xY{constructor(...e){super(...e),si(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ur.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ur.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[KF(e)]:r.axisThreshold;n.axis=_Y(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const wY=t=>t,EI=.15,QF={enabled(t=!0){return t},eventOptions(t,e,n){return Tn(Tn({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[EI,EI];case!1:return[0,0];default:return Ur.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Ur.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||wY},threshold(t){return Ur.toVector(t,0)}},EY=0,_m=Tn(Tn({},QF),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=EY){return t},bounds(t={}){if(typeof t=="function")return s=>_m.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),AI={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class AY extends SY{constructor(...e){super(...e),si(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=_m.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=wS(e),r._pointerActive=!0,this.computeValues(SI(e)),this.computeInitial(),n.preventScrollAxis&&KF(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=wS(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=SI(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Ur.sub(s,n._values),this.computeValues(s)),Ur.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=wS(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=n._distance;if(n.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[c,u]=n._movement,[d,p]=r.swipe.velocity,[m,v]=r.swipe.distance,y=r.swipe.duration;if(n.elapsedTime<y){const x=Math.abs(a/n.timeDelta),g=Math.abs(l/n.timeDelta);x>d&&Math.abs(c)>m&&(n.swipe[0]=Math.sign(a)),g>p&&Math.abs(u)>v&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,bY(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=AI[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Ur.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in AI&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function bY(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Sm=typeof window<"u"&&window.document&&window.document.createElement;function MY(){return Sm&&"ontouchstart"in window}function bI(){return MY()||Sm&&window.navigator.maxTouchPoints>1}function CY(){return Sm&&"onpointerdown"in window}function TY(){return Sm&&"exitPointerLock"in window.document}function RY(){try{return"constructor"in GestureEvent}catch{return!1}}const ns={isBrowser:Sm,gesture:RY(),touch:bI(),touchscreen:bI(),pointer:CY(),pointerLock:TY()},PY=250,IY=180,BY=.5,DY=50,LY=250,OY=10,MI={mouse:0,touch:0,pen:8},NY=Tn(Tn({},_m),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&ns.pointerLock,ns.touch&&n?"touch":this.pointerLock?"mouse":ns.pointer&&!i?"pointer":ns.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?PY:void 0,!(!ns.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Ur.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:t=BY,distance:e=DY,duration:n=LY}={}){return{velocity:this.transform(Ur.toVector(t)),distance:this.transform(Ur.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return IY;case!1:return 0;default:return t}},axisThreshold(t){return t?Tn(Tn({},MI),t):MI},keyboardDisplacement(t=OY){return t}});Tn(Tn({},QF),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!ns.touch&&ns.gesture)return"gesture";if(ns.touch&&r)return"touch";if(ns.touchscreen){if(ns.pointer)return"pointer";if(ns.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=o=>{const a=wI(py(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=wI(py(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Ur.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Tn(Tn({},_m),{},{mouseOnly:(t=!0)=>t});Tn(Tn({},_m),{},{mouseOnly:(t=!0)=>t});const qF=new Map,KE=new Map;function FY(t){qF.set(t.key,t.engine),KE.set(t.key,t.resolver)}const UY={key:"drag",engine:AY,resolver:NY};function kY(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function zY(t,e){if(t==null)return{};var n=kY(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const HY={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=ns.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},GY=["target","eventOptions","window","enabled","transform"];function D0(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=D0(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function $Y(t,e,n={}){const r=t,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=zY(r,GY);if(n.shared=D0({target:i,eventOptions:s,window:o,enabled:a,transform:l},HY),e){const u=KE.get(e);n[e]=D0(Tn({shared:n.shared},c),u)}else for(const u in c){const d=KE.get(u);d&&(n[u]=D0(Tn({shared:n.shared},c[u]),d))}return n}class ZF{constructor(e,n){si(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,s){const o=this._listeners,a=dY(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Tn(Tn({},l),s);e.addEventListener(a,i,c);const u=()=>{e.removeEventListener(a,i,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class VY{constructor(){si(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class WY{constructor(e){si(this,"gestures",new Set),si(this,"_targetEventStore",new ZF(this)),si(this,"gestureEventStores",{}),si(this,"gestureTimeoutStores",{}),si(this,"handlers",{}),si(this,"config",{}),si(this,"pointerIds",new Set),si(this,"touchIds",new Set),si(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),jY(this,e)}setEventIds(e){if(Sx(e))return this.touchIds=new Set(pY(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=$Y(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=CI(r,a.eventOptions,!!i);if(a.enabled){const c=qF.get(o);new c(this,e,o).bind(l)}}const s=CI(r,n.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Tn(Tn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=vY(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=uY(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Gu(t,e){t.gestures.add(e),t.gestureEventStores[e]=new ZF(t,e),t.gestureTimeoutStores[e]=new VY}function jY(t,e){e.drag&&Gu(t,"drag"),e.wheel&&Gu(t,"wheel"),e.scroll&&Gu(t,"scroll"),e.move&&Gu(t,"move"),e.pinch&&Gu(t,"pinch"),e.hover&&Gu(t,"hover")}const CI=(t,e,n)=>(r,i,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,d=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=a?r:lY(r,i,u);n&&d&&(p+="Passive"),t[p]=t[p]||[],t[p].push(s)};function XY(t,e={},n,r){const i=vt.useMemo(()=>new WY(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),vt.useEffect(i.effect.bind(i)),vt.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function JY(t,e){return FY(UY),XY({drag:t},e||{},"drag")}function Pp(t){return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function KY(t,e){if(Pp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YY(t){var e=KY(t,"string");return Pp(e)==="symbol"?e:String(e)}function ft(t,e,n){return e=YY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let gh;function QY(){if(gh!==void 0)return gh;try{var t;let e;const n=document.createElement("canvas");return gh=!!(window.WebGL2RenderingContext&&(e=n.getContext("webgl2"))),e&&((t=e.getExtension("WEBGL_lose_context"))===null||t===void 0||t.loseContext()),gh}catch{return gh=!1}}function TI(t,e){if(e===cN)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===cy||e===zb){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,i=[];if(n)if(e===cy)for(let o=1;o<=r;o++)i.push(n.getX(0)),i.push(n.getX(o)),i.push(n.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(n.getX(o)),i.push(n.getX(o+1)),i.push(n.getX(o+2))):(i.push(n.getX(o+2)),i.push(n.getX(o+1)),i.push(n.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}const RI=(t,e)=>(t%e+e)%e;let qY=class extends Ui{constructor(e,n){super(),ft(this,"object",void 0),ft(this,"domElement",void 0),ft(this,"enabled",!0),ft(this,"target",new O),ft(this,"minDistance",0),ft(this,"maxDistance",1/0),ft(this,"minZoom",0),ft(this,"maxZoom",1/0),ft(this,"minPolarAngle",0),ft(this,"maxPolarAngle",Math.PI),ft(this,"minAzimuthAngle",-1/0),ft(this,"maxAzimuthAngle",1/0),ft(this,"enableDamping",!1),ft(this,"dampingFactor",.05),ft(this,"enableZoom",!0),ft(this,"zoomSpeed",1),ft(this,"enableRotate",!0),ft(this,"rotateSpeed",1),ft(this,"enablePan",!0),ft(this,"panSpeed",1),ft(this,"screenSpacePanning",!0),ft(this,"keyPanSpeed",7),ft(this,"autoRotate",!1),ft(this,"autoRotateSpeed",2),ft(this,"reverseOrbit",!1),ft(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ft(this,"mouseButtons",{LEFT:ec.ROTATE,MIDDLE:ec.DOLLY,RIGHT:ec.PAN}),ft(this,"touches",{ONE:tc.ROTATE,TWO:tc.DOLLY_PAN}),ft(this,"target0",void 0),ft(this,"position0",void 0),ft(this,"zoom0",void 0),ft(this,"_domElementKeyEvents",null),ft(this,"getPolarAngle",void 0),ft(this,"getAzimuthalAngle",void 0),ft(this,"setPolarAngle",void 0),ft(this,"setAzimuthalAngle",void 0),ft(this,"getDistance",void 0),ft(this,"listenToKeyEvents",void 0),ft(this,"saveState",void 0),ft(this,"reset",void 0),ft(this,"update",void 0),ft(this,"connect",void 0),ft(this,"dispose",void 0),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof sn?this.object.zoom:1,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=q=>{let ge=RI(q,2*Math.PI),be=u.phi;be<0&&(be+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let Pe=Math.abs(ge-be);2*Math.PI-Pe<Pe&&(ge<be?ge+=2*Math.PI:be+=2*Math.PI),d.phi=ge-be,r.update()},this.setAzimuthalAngle=q=>{let ge=RI(q,2*Math.PI),be=u.theta;be<0&&(be+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let Pe=Math.abs(ge-be);2*Math.PI-Pe<Pe&&(ge<be?ge+=2*Math.PI:be+=2*Math.PI),d.theta=ge-be,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=q=>{q.addEventListener("keydown",Y),this._domElementKeyEvents=q},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof sn?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof sn&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const q=new O,ge=new Wn().setFromUnitVectors(e.up,new O(0,1,0)),be=ge.clone().invert(),Pe=new O,nt=new Wn,ut=2*Math.PI;return function(){const ie=r.object.position;q.copy(ie).sub(r.target),q.applyQuaternion(ge),u.setFromVector3(q),r.autoRotate&&l===a.NONE&&X(D()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let pe=r.minAzimuthAngle,Ce=r.maxAzimuthAngle;return isFinite(pe)&&isFinite(Ce)&&(pe<-Math.PI?pe+=ut:pe>Math.PI&&(pe-=ut),Ce<-Math.PI?Ce+=ut:Ce>Math.PI&&(Ce-=ut),pe<=Ce?u.theta=Math.max(pe,Math.min(Ce,u.theta)):u.theta=u.theta>(pe+Ce)/2?Math.max(pe,u.theta):Math.min(Ce,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=p,u.radius=Math.max(r.minDistance,Math.min(r.maxDistance,u.radius)),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),q.setFromSpherical(u),q.applyQuaternion(be),ie.copy(r.target).add(q),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0)),p=1,v||Pe.distanceToSquared(r.object.position)>c||8*(1-nt.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Pe.copy(r.object.position),nt.copy(r.object.quaternion),v=!1,!0):!1}})(),this.connect=q=>{q===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=q,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Te),r.domElement.addEventListener("pointerdown",Ue),r.domElement.addEventListener("pointercancel",Ye),r.domElement.addEventListener("wheel",k)},this.dispose=()=>{var q,ge,be,Pe,nt,ut;(q=r.domElement)===null||q===void 0||q.removeEventListener("contextmenu",Te),(ge=r.domElement)===null||ge===void 0||ge.removeEventListener("pointerdown",Ue),(be=r.domElement)===null||be===void 0||be.removeEventListener("pointercancel",Ye),(Pe=r.domElement)===null||Pe===void 0||Pe.removeEventListener("wheel",k),(nt=r.domElement)===null||nt===void 0||nt.ownerDocument.removeEventListener("pointermove",Ke),(ut=r.domElement)===null||ut===void 0||ut.ownerDocument.removeEventListener("pointerup",ke),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Y)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new zE,d=new zE;let p=1;const m=new O;let v=!1;const y=new de,x=new de,g=new de,_=new de,E=new de,A=new de,M=new de,T=new de,P=new de,I=[],R={};function D(){return 2*Math.PI/60/60*r.autoRotateSpeed}function F(){return Math.pow(.95,r.zoomSpeed)}function X(q){r.reverseOrbit?d.theta+=q:d.theta-=q}function z(q){r.reverseOrbit?d.phi+=q:d.phi-=q}const V=(()=>{const q=new O;return function(be,Pe){q.setFromMatrixColumn(Pe,0),q.multiplyScalar(-be),m.add(q)}})(),H=(()=>{const q=new O;return function(be,Pe){r.screenSpacePanning===!0?q.setFromMatrixColumn(Pe,1):(q.setFromMatrixColumn(Pe,0),q.crossVectors(r.object.up,q)),q.multiplyScalar(be),m.add(q)}})(),Q=(()=>{const q=new O;return function(be,Pe){const nt=r.domElement;if(nt&&r.object instanceof sn&&r.object.isPerspectiveCamera){const ut=r.object.position;q.copy(ut).sub(r.target);let $t=q.length();$t*=Math.tan(r.object.fov/2*Math.PI/180),V(2*be*$t/nt.clientHeight,r.object.matrix),H(2*Pe*$t/nt.clientHeight,r.object.matrix)}else nt&&r.object instanceof Ns&&r.object.isOrthographicCamera?(V(be*(r.object.right-r.object.left)/r.object.zoom/nt.clientWidth,r.object.matrix),H(Pe*(r.object.top-r.object.bottom)/r.object.zoom/nt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Z(q){r.object instanceof sn&&r.object.isPerspectiveCamera?p/=q:r.object instanceof Ns&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*q)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function U(q){r.object instanceof sn&&r.object.isPerspectiveCamera?p*=q:r.object instanceof Ns&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/q)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function N(q){y.set(q.clientX,q.clientY)}function G(q){M.set(q.clientX,q.clientY)}function ne(q){_.set(q.clientX,q.clientY)}function J(q){x.set(q.clientX,q.clientY),g.subVectors(x,y).multiplyScalar(r.rotateSpeed);const ge=r.domElement;ge&&(X(2*Math.PI*g.x/ge.clientHeight),z(2*Math.PI*g.y/ge.clientHeight)),y.copy(x),r.update()}function ee(q){T.set(q.clientX,q.clientY),P.subVectors(T,M),P.y>0?Z(F()):P.y<0&&U(F()),M.copy(T),r.update()}function te(q){E.set(q.clientX,q.clientY),A.subVectors(E,_).multiplyScalar(r.panSpeed),Q(A.x,A.y),_.copy(E),r.update()}function ye(q){q.deltaY<0?U(F()):q.deltaY>0&&Z(F()),r.update()}function Ae(q){let ge=!1;switch(q.code){case r.keys.UP:Q(0,r.keyPanSpeed),ge=!0;break;case r.keys.BOTTOM:Q(0,-r.keyPanSpeed),ge=!0;break;case r.keys.LEFT:Q(r.keyPanSpeed,0),ge=!0;break;case r.keys.RIGHT:Q(-r.keyPanSpeed,0),ge=!0;break}ge&&(q.preventDefault(),r.update())}function K(){if(I.length==1)y.set(I[0].pageX,I[0].pageY);else{const q=.5*(I[0].pageX+I[1].pageX),ge=.5*(I[0].pageY+I[1].pageY);y.set(q,ge)}}function Ge(){if(I.length==1)_.set(I[0].pageX,I[0].pageY);else{const q=.5*(I[0].pageX+I[1].pageX),ge=.5*(I[0].pageY+I[1].pageY);_.set(q,ge)}}function We(){const q=I[0].pageX-I[1].pageX,ge=I[0].pageY-I[1].pageY,be=Math.sqrt(q*q+ge*ge);M.set(0,be)}function Se(){r.enableZoom&&We(),r.enablePan&&Ge()}function Me(){r.enableZoom&&We(),r.enableRotate&&K()}function me(q){if(I.length==1)x.set(q.pageX,q.pageY);else{const be=Je(q),Pe=.5*(q.pageX+be.x),nt=.5*(q.pageY+be.y);x.set(Pe,nt)}g.subVectors(x,y).multiplyScalar(r.rotateSpeed);const ge=r.domElement;ge&&(X(2*Math.PI*g.x/ge.clientHeight),z(2*Math.PI*g.y/ge.clientHeight)),y.copy(x)}function re(q){if(I.length==1)E.set(q.pageX,q.pageY);else{const ge=Je(q),be=.5*(q.pageX+ge.x),Pe=.5*(q.pageY+ge.y);E.set(be,Pe)}A.subVectors(E,_).multiplyScalar(r.panSpeed),Q(A.x,A.y),_.copy(E)}function fe(q){const ge=Je(q),be=q.pageX-ge.x,Pe=q.pageY-ge.y,nt=Math.sqrt(be*be+Pe*Pe);T.set(0,nt),P.set(0,Math.pow(T.y/M.y,r.zoomSpeed)),Z(P.y),M.copy(T)}function Le(q){r.enableZoom&&fe(q),r.enablePan&&re(q)}function Be(q){r.enableZoom&&fe(q),r.enableRotate&&me(q)}function Ue(q){if(r.enabled!==!1){if(I.length===0){var ge,be;(ge=r.domElement)===null||ge===void 0||ge.ownerDocument.addEventListener("pointermove",Ke),(be=r.domElement)===null||be===void 0||be.ownerDocument.addEventListener("pointerup",ke)}Qe(q),q.pointerType==="touch"?ce(q):ht(q)}}function Ke(q){r.enabled!==!1&&(q.pointerType==="touch"?we(q):W(q))}function ke(q){if(ze(q),I.length===0){var ge,be,Pe;(ge=r.domElement)===null||ge===void 0||ge.releasePointerCapture(q.pointerId),(be=r.domElement)===null||be===void 0||be.ownerDocument.removeEventListener("pointermove",Ke),(Pe=r.domElement)===null||Pe===void 0||Pe.ownerDocument.removeEventListener("pointerup",ke)}r.dispatchEvent(o),l=a.NONE}function Ye(q){ze(q)}function ht(q){let ge;switch(q.button){case 0:ge=r.mouseButtons.LEFT;break;case 1:ge=r.mouseButtons.MIDDLE;break;case 2:ge=r.mouseButtons.RIGHT;break;default:ge=-1}switch(ge){case ec.DOLLY:if(r.enableZoom===!1)return;G(q),l=a.DOLLY;break;case ec.ROTATE:if(q.ctrlKey||q.metaKey||q.shiftKey){if(r.enablePan===!1)return;ne(q),l=a.PAN}else{if(r.enableRotate===!1)return;N(q),l=a.ROTATE}break;case ec.PAN:if(q.ctrlKey||q.metaKey||q.shiftKey){if(r.enableRotate===!1)return;N(q),l=a.ROTATE}else{if(r.enablePan===!1)return;ne(q),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function W(q){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;J(q);break;case a.DOLLY:if(r.enableZoom===!1)return;ee(q);break;case a.PAN:if(r.enablePan===!1)return;te(q);break}}function k(q){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(q.preventDefault(),r.dispatchEvent(s),ye(q),r.dispatchEvent(o))}function Y(q){r.enabled===!1||r.enablePan===!1||Ae(q)}function ce(q){switch(ve(q),I.length){case 1:switch(r.touches.ONE){case tc.ROTATE:if(r.enableRotate===!1)return;K(),l=a.TOUCH_ROTATE;break;case tc.PAN:if(r.enablePan===!1)return;Ge(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case tc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Se(),l=a.TOUCH_DOLLY_PAN;break;case tc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function we(q){switch(ve(q),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;me(q),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;re(q),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Le(q),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Be(q),r.update();break;default:l=a.NONE}}function Te(q){r.enabled!==!1&&q.preventDefault()}function Qe(q){I.push(q)}function ze(q){delete R[q.pointerId];for(let ge=0;ge<I.length;ge++)if(I[ge].pointerId==q.pointerId){I.splice(ge,1);return}}function ve(q){let ge=R[q.pointerId];ge===void 0&&(ge=new de,R[q.pointerId]=ge),ge.set(q.pageX,q.pageY)}function Je(q){const ge=q.pointerId===I[0].pointerId?I[1]:I[0];return R[ge.pointerId]}n!==void 0&&this.connect(n),this.update()}};class DM extends Gr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new rQ(n)}),this.register(function(n){return new uQ(n)}),this.register(function(n){return new dQ(n)}),this.register(function(n){return new fQ(n)}),this.register(function(n){return new sQ(n)}),this.register(function(n){return new oQ(n)}),this.register(function(n){return new aQ(n)}),this.register(function(n){return new lQ(n)}),this.register(function(n){return new nQ(n)}),this.register(function(n){return new cQ(n)}),this.register(function(n){return new iQ(n)}),this.register(function(n){return new eQ(n)}),this.register(function(n){return new hQ(n)}),this.register(function(n){return new pQ(n)})}load(e,n,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Yd.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new mi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){n(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===eU){try{o[kt.KHR_BINARY_GLTF]=new mQ(e)}catch(d){i&&i(d);return}s=JSON.parse(o[kt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new TQ(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],p=s.extensionsRequired||[];switch(d){case kt.KHR_MATERIALS_UNLIT:o[d]=new tQ;break;case kt.KHR_DRACO_MESH_COMPRESSION:o[d]=new gQ(s,this.dracoLoader);break;case kt.KHR_TEXTURE_TRANSFORM:o[d]=new vQ;break;case kt.KHR_MESH_QUANTIZATION:o[d]=new yQ;break;default:p.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(r,i)}parseAsync(e,n){const r=this;return new Promise(function(i,s){r.parse(e,n,i,s)})}}function ZY(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const kt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class eQ{constructor(e){this.parser=e,this.name=kt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const s=n[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let i=n.cache.get(r);if(i)return i;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Fe(16777215);l.color!==void 0&&u.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new _M(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new xM(u),c.distance=d;break;case"spot":c=new yM(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Oa(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),n.cache.add(r,i),i}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}}class tQ{constructor(){this.name=kt.KHR_MATERIALS_UNLIT}getMaterialType(){return ui}extendParams(e,n,r){const i=[];e.color=new Fe(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Qr))}return Promise.all(i)}}class nQ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class rQ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:oa}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new de(a,a)}return Promise.all(s)}}class iQ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:oa}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class sQ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:oa}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new Fe(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(n,"sheenColorMap",o.sheenColorTexture,Qr)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class oQ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:oa}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class aQ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:oa}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new Fe(a[0],a[1],a[2]),Promise.all(s)}}class lQ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:oa}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class cQ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:oa}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new Fe(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(n,"specularColorMap",o.specularColorTexture,Qr)),Promise.all(s)}}class uQ{constructor(e){this.parser=e,this.name=kt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class dQ{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class fQ{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class hQ{constructor(e){this.name=kt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(m),u,d,p,i.mode,i.filter),m})})}else return null}}class pQ{constructor(e){this.name=kt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==qi.TRIANGLES&&c.mode!==qi.TRIANGLE_STRIP&&c.mode!==qi.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const v of d){const y=new je,x=new O,g=new Wn,_=new O(1,1,1),E=new eM(v.geometry,v.material,p);for(let A=0;A<p;A++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,A),l.SCALE&&_.fromBufferAttribute(l.SCALE,A),E.setMatrixAt(A,y.compose(x,g,_));for(const A in l)A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&v.geometry.setAttribute(A,l[A]);zt.prototype.copy.call(E,v),this.parser.assignFinalMaterial(E),m.push(E)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const eU="glTF",vh=12,PI={JSON:1313821514,BIN:5130562};class mQ{constructor(e){this.name=kt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,vh),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==eU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-vh,s=new DataView(e,vh);let o=0;for(;o<i;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===PI.JSON){const c=new Uint8Array(e,vh+o,a);this.content=r.decode(c)}else if(l===PI.BIN){const c=vh+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class gQ{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=YE[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=YE[u]||u.toLowerCase();if(o[u]!==void 0){const p=r.accessors[e.attributes[u]],m=Td[p.componentType];c[d]=m.name,l[d]=p.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(d){i.decodeDracoFile(u,function(p){for(const m in p.attributes){const v=p.attributes[m],y=l[m];y!==void 0&&(v.normalized=y)}d(p)},a,c)})})}}class vQ{constructor(){this.name=kt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class yQ{constructor(){this.name=kt.KHR_MESH_QUANTIZATION}}class tU extends pf{constructor(e,n,r,i){super(e,n,r,i)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)n[o]=r[s+o];return n}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-n,d=(r-n)/u,p=d*d,m=p*d,v=e*c,y=v-c,x=-2*m+3*p,g=m-p,_=1-x,E=g-p+d;for(let A=0;A!==a;A++){const M=o[y+A+a],T=o[y+A+l]*u,P=o[v+A+a],I=o[v+A]*u;s[A]=_*M+E*T+x*P+g*I}return s}}const xQ=new Wn;class _Q extends tU{interpolate_(e,n,r,i){const s=super.interpolate_(e,n,r,i);return xQ.fromArray(s).normalize().toArray(s),s}}const qi={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Td={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},II={9728:rn,9729:Zt,9984:xp,9985:ix,9986:bd,9987:ks},BI={33071:Er,33648:Hd,10497:cl},ES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},YE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...wl.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ma={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},SQ={CUBICSPLINE:void 0,LINEAR:Lc,STEP:Gd},AS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function wQ(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new pm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Us})),t.DefaultMaterial}function yh(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function Oa(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function EQ(t,e,n){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(r){const p=d.POSITION!==void 0?n.getDependency("accessor",d.POSITION):t.attributes.position;o.push(p)}if(i){const p=d.NORMAL!==void 0?n.getDependency("accessor",d.NORMAL):t.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?n.getDependency("accessor",d.COLOR_0):t.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],p=c[2];return r&&(t.morphAttributes.position=u),i&&(t.morphAttributes.normal=d),s&&(t.morphAttributes.color=p),t.morphTargetsRelative=!0,t})}function AQ(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function bQ(t){const e=t.extensions&&t.extensions[kt.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+DI(e.attributes):n=t.indices+":"+DI(t.attributes)+":"+t.mode,n}function DI(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function QE(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function MQ(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const CQ=new je;class TQ{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new ZY,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new mm(this.options.manager):this.textureLoader=new nF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new mi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};yh(s,a,i),Oa(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[n]++,i}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=e(n[r]);if(i)return i}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const s=e(n[i]);s&&r.push(s)}return r}getDependency(e,n){const r=e+":"+n;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[kt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Yd.resolveURL(n.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,s=n.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const n=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=ES[i.type],a=Td[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Lt(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=ES[i.type],c=Td[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let y,x;if(m&&m!==d){const g=Math.floor(p/m),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let E=n.cache.get(_);E||(y=new c(a,g*m,i.count*m/u),E=new nm(y,m/u),n.cache.add(_,E)),x=new di(E,l,p%m/u,v)}else a===null?y=new c(i.count*l):y=new c(a,p,i.count*l),x=new Lt(y,l,v);if(i.sparse!==void 0){const g=ES.SCALAR,_=Td[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,A=i.sparse.values.byteOffset||0,M=new _(o[1],E,i.sparse.count*g),T=new c(o[2],A,i.sparse.count*l);a!==null&&(x=new Lt(x.array.slice(),x.itemSize,x.normalized));for(let P=0,I=M.length;P<I;P++){const R=M[P];if(x.setX(R,T[P*l]),l>=2&&x.setY(R,T[P*l+1]),l>=3&&x.setZ(R,T[P*l+2]),l>=4&&x.setW(R,T[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const n=this.json,r=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,r){const i=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=II[p.magFilter]||Zt,u.minFilter=II[p.minFilter]||ks,u.wrapS=BI[p.wrapS]||cl,u.wrapT=BI[p.wrapT]||cl,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let v=p;n.isImageBitmapLoader===!0&&(v=function(y){const x=new fn(y);x.needsUpdate=!0,p(x)}),n.load(Yd.resolveURL(d,s.path),v,void 0,m)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||MQ(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,n,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[kt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[kt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[kt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(o.encoding=i),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const i=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new hx,Nn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Hr,Nn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return pm}loadMaterial(e){const n=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[kt.KHR_MATERIALS_UNLIT]){const d=i[kt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,n))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Fe(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",d.baseColorTexture,Qr)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=wr);const u=s.alphaMode||AS.OPAQUE;if(u===AS.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===AS.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ui&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new de(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==ui&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ui&&(a.emissive=new Fe().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==ui&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,Qr)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Oa(d,s),n.associations.set(d,{materials:e}),s.extensions&&yh(i,d,s),d})}createUniqueName(e){const n=Ut.sanitizeNodeName(e||"");let r=n;for(let i=1;this.nodeNamesUsed[r];++i)r=n+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const n=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[kt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return LI(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=bQ(c),d=i[u];if(d)o.push(d.promise);else{let p;c.extensions&&c.extensions[kt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=LI(new xt,c,n),i[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const n=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?wQ(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let m=0,v=u.length;m<v;m++){const y=u[m],x=o[m];let g;const _=c[m];if(x.mode===qi.TRIANGLES||x.mode===qi.TRIANGLE_STRIP||x.mode===qi.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new qb(y,_):new Zn(y,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===qi.TRIANGLE_STRIP?g.geometry=TI(g.geometry,zb):x.mode===qi.TRIANGLE_FAN&&(g.geometry=TI(g.geometry,cy));else if(x.mode===qi.LINES)g=new Gs(y,_);else if(x.mode===qi.LINE_STRIP)g=new qo(y,_);else if(x.mode===qi.LINE_LOOP)g=new tM(y,_);else if(x.mode===qi.POINTS)g=new nM(y,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&AQ(g,s),g.name=n.createUniqueName(s.name||"mesh_"+e),Oa(g,s),x.extensions&&yh(i,g,x),n.assignFinalMaterial(g),d.push(g)}for(let m=0,v=d.length;m<v;m++)n.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return d[0];const p=new Go;n.associations.set(p,{meshes:e});for(let m=0,v=d.length;m<v;m++)p.add(d[m]);return p})}loadCamera(e){let n;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new sn(bc.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Ns(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),Oa(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let i=0,s=n.joints.length;i<s;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const p=new je;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Zb(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let u=0,d=r.channels.length;u<d;u++){const p=r.channels[u],m=r.samplers[p.sampler],v=p.target,y=v.node,x=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;v.node!==void 0&&(s.push(this.getDependency("node",y)),o.push(this.getDependency("accessor",x)),a.push(this.getDependency("accessor",g)),l.push(m),c.push(v))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const d=u[0],p=u[1],m=u[2],v=u[3],y=u[4],x=[];for(let g=0,_=d.length;g<_;g++){const E=d[g],A=p[g],M=m[g],T=v[g],P=y[g];if(E===void 0)continue;E.updateMatrix();let I;switch(Ma[P.path]){case Ma.weights:I=Xd;break;case Ma.rotation:I=fl;break;case Ma.position:case Ma.scale:default:I=Jd;break}const R=E.name?E.name:E.uuid,D=T.interpolation!==void 0?SQ[T.interpolation]:Lc,F=[];Ma[P.path]===Ma.weights?E.traverse(function(z){z.morphTargetInfluences&&F.push(z.name?z.name:z.uuid)}):F.push(R);let X=M.array;if(M.normalized){const z=QE(X.constructor),V=new Float32Array(X.length);for(let H=0,Q=X.length;H<Q;H++)V[H]=X[H]*z;X=V}for(let z=0,V=F.length;z<V;z++){const H=new I(F[z]+"."+Ma[P.path],A.array,X,D);T.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function(Z){const U=this instanceof fl?_Q:tU;return new U(this.times,this.values,this.getValueSize()/3,Z)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),x.push(H)}}return new Kd(i,void 0,x)})}createNodeMesh(e){const n=this.json,r=this,i=n.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const n=this.json,r=this,i=n.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,CQ)});for(let m=0,v=d.length;m<v;m++)u.add(d[m]);return u})}_loadNodeShallow(e){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new fx:c.length>1?u=new Go:c.length===1?u=c[0]:u=new zt,u!==c[0])for(let d=0,p=c.length;d<p;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),Oa(u,s),s.extensions&&yh(r,u,s),s.matrix!==void 0){const d=new je;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],i=this,s=new Go;r.name&&(s.name=i.createUniqueName(r.name)),Oa(s,r),r.extensions&&yh(n,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[p,m]of i.associations)(p instanceof Nn||p instanceof fn)&&d.set(p,m);return u.traverse(p=>{const m=i.associations.get(p);m!=null&&d.set(p,m)}),d};return i.associations=c(s),s})}}function RQ(t,e,n){const r=e.attributes,i=new wn;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new O(l[0],l[1],l[2]),new O(c[0],c[1],c[2])),a.normalized){const u=QE(Td[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new O,l=new O;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const p=n.json.accessors[d.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const y=QE(Td[p.componentType]);l.multiplyScalar(y)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}t.boundingBox=i;const o=new gi;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}function LI(t,e,n){const r=e.attributes,i=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in r){const a=YE[o]||o.toLowerCase();a in t.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});i.push(o)}return Oa(t,e),RQ(t,e,n),Promise.all(i).then(function(){return e.targets!==void 0?EQ(t,e.targets,n):t})}class PQ extends df{constructor(e,n={}){const{bevelEnabled:r=!1,bevelSize:i=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...d}=n;if(o===void 0)super();else{const p=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(p,{...d,bevelEnabled:r,bevelSize:i,bevelThickness:s,depth:a})}this.type="TextGeometry"}}class IQ extends Gr{constructor(e){super(e)}load(e,n,r,i){const s=new mi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);n&&n(l)},r,i)}parse(e){return new LM(e)}}class LM{constructor(e){ft(this,"data",void 0),this.data=e}generateShapes(e,n=100,r){const i=[],s={letterSpacing:0,lineHeight:1,...r},o=BQ(e,n,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(i,o[a].toShapes(!1));return i}}ft(LM,"isFont",void 0);ft(LM,"type",void 0);function BQ(t,e,n,r){const i=Array.from(t),s=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<i.length;u++){const d=i[u];if(d===`
`)l=0,c-=o*r.lineHeight;else{const p=DQ(d,s,l,c,n);p&&(l+=p.offsetX+r.letterSpacing,a.push(p.path))}}return a}function DQ(t,e,n,r,i){const s=i.glyphs[t]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");return}const o=new cF;let a,l,c,u,d,p,m,v;if(s.o){const y=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let x=0,g=y.length;x<g;)switch(y[x++]){case"m":a=parseInt(y[x++])*e+n,l=parseInt(y[x++])*e+r,o.moveTo(a,l);break;case"l":a=parseInt(y[x++])*e+n,l=parseInt(y[x++])*e+r,o.lineTo(a,l);break;case"q":c=parseInt(y[x++])*e+n,u=parseInt(y[x++])*e+r,d=parseInt(y[x++])*e+n,p=parseInt(y[x++])*e+r,o.quadraticCurveTo(d,p,c,u);break;case"b":c=parseInt(y[x++])*e+n,u=parseInt(y[x++])*e+r,d=parseInt(y[x++])*e+n,p=parseInt(y[x++])*e+r,m=parseInt(y[x++])*e+n,v=parseInt(y[x++])*e+r,o.bezierCurveTo(d,p,m,v,c,u);break}}return{offsetX:s.ha*e,path:o}}const bS=new WeakMap;class LQ extends Gr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,r,i){const s=new mi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(i)},r,i)}decodeDracoFile(e,n,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const r=JSON.stringify(n);if(bS.has(e)){const l=bS.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),bS.set(e,{key:r,promise:a}),a}_createGeometry(e){const n=new xt;e.index&&n.setIndex(new Lt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;n.setAttribute(s,new Lt(o,a))}return n}_loadLibrary(e,n){const r=new mi(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=OQ.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=n,r._taskLoad+=n,r})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function OQ(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const d=u.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=n(d,p,m,c),y=v.attributes.map(x=>x.array.buffer);v.index&&y.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},y)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{d.destroy(m),d.destroy(p)}});break}};function n(o,a,l,c){const u=c.attributeIDs,d=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const y={index:null,attributes:[]};for(const x in u){const g=self[d[x]];let _,E;if(c.useUniqueIDs)E=u[x],_=a.GetAttributeByUniqueId(p,E);else{if(E=a.GetAttributeId(p,o[u[x]]),E===-1)continue;_=a.GetAttribute(p,E)}y.attributes.push(i(o,a,p,x,g,_))}return v===o.TRIANGULAR_MESH&&(y.index=r(o,a,p)),o.destroy(p),y}function r(o,a,l){const u=l.num_faces()*3,d=u*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,u,d){const p=d.num_components(),v=l.num_points()*p,y=v*u.BYTES_PER_ELEMENT,x=s(o,u),g=o._malloc(y);a.GetAttributeDataArrayForAllPoints(l,d,x,y,g);const _=new u(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:_,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const OI=new wn,zv=new O;class OM extends SM{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new tt(e,3)),this.setAttribute("uv",new tt(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),r.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new fy(n,6,1);return this.setAttribute("instanceStart",new di(r,3,0)),this.setAttribute("instanceEnd",new di(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new fy(n,6,1);return this.setAttribute("instanceColorStart",new di(r,3,0)),this.setAttribute("instanceColorEnd",new di(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new uM(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new wn);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),OI.setFromBufferAttribute(n),this.boundingBox.union(OI))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gi),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)zv.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(zv)),zv.fromBufferAttribute(n,s),i=Math.max(i,r.distanceToSquared(zv));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class nU extends OM{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setColors(r),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}Ne.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new de(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Kr.line={uniforms:em.merge([Ne.common,Ne.fog,Ne.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class NM extends jn{constructor(e){super({type:"LineMaterial",uniforms:em.clone(Kr.line.uniforms),vertexShader:Kr.line.vertexShader,fragmentShader:Kr.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const NI=new O,FI=new O,yr=new Dt,xr=new Dt,eo=new Dt,MS=new O,CS=new je,Nr=new aF,UI=new O,Hv=new wn,Gv=new gi,to=new Dt;let ao,qE,rU,Tc;function kI(t,e,n){return to.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),to.multiplyScalar(1/to.w),to.x=Tc/n.width,to.y=Tc/n.height,to.applyMatrix4(t.projectionMatrixInverse),to.multiplyScalar(1/to.w),Math.abs(Math.max(to.x,to.y))}function NQ(t,e){for(let n=0,r=qE.count;n<r;n++){Nr.start.fromBufferAttribute(qE,n),Nr.end.fromBufferAttribute(rU,n);const i=new O,s=new O;ao.distanceSqToSegment(Nr.start,Nr.end,s,i),s.distanceTo(i)<Tc*.5&&e.push({point:s,pointOnLine:i,distance:ao.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function FQ(t,e,n){const r=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;ao.at(1,eo),eo.w=1,eo.applyMatrix4(e.matrixWorldInverse),eo.applyMatrix4(r),eo.multiplyScalar(1/eo.w),eo.x*=s.x/2,eo.y*=s.y/2,eo.z=0,MS.copy(eo),CS.multiplyMatrices(e.matrixWorldInverse,o);for(let d=0,p=l.count;d<p;d++){if(yr.fromBufferAttribute(l,d),xr.fromBufferAttribute(c,d),yr.w=1,xr.w=1,yr.applyMatrix4(CS),xr.applyMatrix4(CS),yr.z>u&&xr.z>u)continue;if(yr.z>u){const _=yr.z-xr.z,E=(yr.z-u)/_;yr.lerp(xr,E)}else if(xr.z>u){const _=xr.z-yr.z,E=(xr.z-u)/_;xr.lerp(yr,E)}yr.applyMatrix4(r),xr.applyMatrix4(r),yr.multiplyScalar(1/yr.w),xr.multiplyScalar(1/xr.w),yr.x*=s.x/2,yr.y*=s.y/2,xr.x*=s.x/2,xr.y*=s.y/2,Nr.start.copy(yr),Nr.start.z=0,Nr.end.copy(xr),Nr.end.z=0;const v=Nr.closestPointToPointParameter(MS,!0);Nr.at(v,UI);const y=bc.lerp(yr.z,xr.z,v),x=y>=-1&&y<=1,g=MS.distanceTo(UI)<Tc*.5;if(x&&g){Nr.start.fromBufferAttribute(l,d),Nr.end.fromBufferAttribute(c,d),Nr.start.applyMatrix4(o),Nr.end.applyMatrix4(o);const _=new O,E=new O;ao.distanceSqToSegment(Nr.start,Nr.end,E,_),n.push({point:E,pointOnLine:_,distance:ao.origin.distanceTo(E),object:t,face:null,faceIndex:d,uv:null,uv2:null})}}}class iU extends Zn{constructor(e=new OM,n=new NM({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)NI.fromBufferAttribute(n,o),FI.fromBufferAttribute(r,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+NI.distanceTo(FI);const s=new fy(i,2,1);return e.setAttribute("instanceDistanceStart",new di(s,1,0)),e.setAttribute("instanceDistanceEnd",new di(s,1,1)),this}raycast(e,n){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ao=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Tc=l.linewidth+s,qE=a.attributes.instanceStart,rU=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),Gv.copy(a.boundingSphere).applyMatrix4(o);let c;if(r)c=Tc*.5;else{const d=Math.max(i.near,Gv.distanceToPoint(ao.origin));c=kI(i,d,l.resolution)}if(Gv.radius+=c,ao.intersectsSphere(Gv)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Hv.copy(a.boundingBox).applyMatrix4(o);let u;if(r)u=Tc*.5;else{const d=Math.max(i.near,Hv.distanceToPoint(ao.origin));u=kI(i,d,l.resolution)}Hv.expandByScalar(u),ao.intersectsBox(Hv)!==!1&&(r?NQ(this,n):FQ(this,i,n))}}class UQ extends iU{constructor(e=new nU,n=new NM({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}let $v;const TS=()=>{if($v)return $v;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=t;WebAssembly.validate(n)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let v=0;v<d.length;++v){const y=d.charCodeAt(v);p[v]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let m=0;for(let v=0;v<d.length;++v)p[m++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(d,p,m,v,y,x){const g=s.exports.sbrk,_=m+3&-4,E=g(_*v),A=g(y.length),M=new Uint8Array(s.exports.memory.buffer);M.set(y,A);const T=d(E,m,v,A,y.length);if(T===0&&x&&x(E,_,v),p.set(M.subarray(E,E+m*v)),g(E-g(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return $v={ready:o,supported:!0,decodeVertexBuffer(d,p,m,v,y){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,v,s.exports[c[y]])},decodeIndexBuffer(d,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,v)},decodeIndexSequence(d,p,m,v){l(s.exports.meshopt_decodeIndexSequence,d,p,m,v)},decodeGltfBuffer(d,p,m,v,y,x){l(s.exports[u[y]],d,p,m,v,s.exports[c[x]])}},$v},ic=S.forwardRef(function({points:e,color:n="black",vertexColors:r,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},c){const u=cn(v=>v.size),d=S.useMemo(()=>o?new iU:new UQ,[o]),[p]=S.useState(()=>new NM),m=S.useMemo(()=>{const v=o?new OM:new nU,y=e.map(x=>{const g=Array.isArray(x);return x instanceof O?[x.x,x.y,x.z]:x instanceof de?[x.x,x.y,0]:g&&x.length===3?[x[0],x[1],x[2]]:g&&x.length===2?[x[0],x[1],0]:x});if(v.setPositions(y.flat()),r){const x=r.map(g=>g instanceof Fe?g.toArray():g);v.setColors(x.flat())}return v},[e,o,r]);return S.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),S.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),S.useEffect(()=>()=>m.dispose(),[m]),S.createElement("primitive",Re({object:d,ref:c},l),S.createElement("primitive",{object:m,attach:"geometry"}),S.createElement("primitive",Re({object:p,attach:"material",color:n,vertexColors:!!r,resolution:[u.width,u.height],linewidth:i??s,dashed:a},l)))});let RS=null;async function sU(t){RS||(RS=new IQ);let e=typeof t=="string"?await(await fetch(t)).json():t;return RS.parse(e)}function wm(t){return MF(sU,[t])}wm.preload=t=>CF(sU,[t]);wm.clear=t=>TF([t]);function kQ(t,e,n,r){const i=class extends jn{constructor(o={}){const a=Object.entries(t);super({uniforms:a.reduce((l,[c,u])=>{const d=em.clone({[c]:{value:u}});return{...l,...d}},{}),vertexShader:e,fragmentShader:n}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o),r&&r(this)}};return i.key=bc.generateUUID(),i}const zI=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function FM(t,e){const n=cn(i=>i.gl),r=Cl(mm,zI(t)?Object.values(t):t);if(S.useLayoutEffect(()=>{e==null||e(r)},[e]),S.useEffect(()=>{(Array.isArray(r)?r:[r]).forEach(n.initTexture)},[n,r]),zI(t)){const i=Object.keys(t),s={};return i.forEach(o=>Object.assign(s,{[o]:r[i.indexOf(o)]})),s}else return r}FM.preload=t=>Cl.preload(mm,t);FM.clear=t=>Cl.clear(mm,t);const zQ=kQ({color:new Fe("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`),oU=S.forwardRef(({children:t,color:e,segments:n=1,scale:r=1,zoom:i=1,grayscale:s=0,opacity:o=1,texture:a,toneMapped:l,transparent:c,...u},d)=>{PM({ImageMaterial:zQ});const p=Array.isArray(r)?[r[0],r[1]]:[r,r],m=[a.image.width,a.image.height];return S.createElement("mesh",Re({ref:d,scale:Array.isArray(r)?[...r,1]:r},u),S.createElement("planeGeometry",{args:[1,1,n,n]}),S.createElement("imageMaterial",{color:e,map:a,zoom:i,grayscale:s,opacity:o,scale:p,imageBounds:m,toneMapped:l,transparent:c}),t)}),HQ=S.forwardRef(({url:t,...e},n)=>{const r=FM(t);return S.createElement(oU,Re({},e,{texture:r,ref:n}))}),GQ=S.forwardRef(({url:t,...e},n)=>S.createElement(oU,Re({},e,{ref:n}))),$Q=S.forwardRef((t,e)=>{if(t.url)return S.createElement(HQ,Re({},t,{ref:e}));if(t.texture)return S.createElement(GQ,Re({},t,{ref:e}));throw new Error("<Image /> requires a url or texture")});let Vv=null;function aU(t,e,n){return r=>{n&&n(r),t&&(Vv||(Vv=new LQ),Vv.setDecoderPath(typeof t=="string"?t:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),r.setDRACOLoader(Vv)),e&&r.setMeshoptDecoder(typeof TS=="function"?TS():TS)}}function wx(t,e=!0,n=!0,r){return Cl(DM,t,aU(e,n,r))}wx.preload=(t,e=!0,n=!0,r)=>Cl.preload(DM,t,aU(e,n,r));wx.clear=t=>Cl.clear(DM,t);function lU(t,e,n){const r=cn(p=>p.size),i=cn(p=>p.viewport),s=typeof t=="number"?t:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:c,...u}=a,d=S.useMemo(()=>{const p=new yn(s,o,{minFilter:Zt,magFilter:Zt,type:ul,...u});return c&&(p.depthTexture=new cx(s,o,Is)),p.samples=l,p},[]);return S.useLayoutEffect(()=>{d.setSize(s,o),l&&(d.samples=l)},[l,d,s,o]),S.useEffect(()=>()=>d.dispose(),[]),d}const VQ=t=>typeof t=="function",WQ=S.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,children:r,makeDefault:i,...s},o)=>{const a=cn(({set:x})=>x),l=cn(({camera:x})=>x),c=cn(({size:x})=>x),u=S.useRef(null),d=S.useRef(null),p=lU(e);S.useLayoutEffect(()=>{s.manual||u.current.updateProjectionMatrix()},[c,s]),S.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),S.useLayoutEffect(()=>{if(i){const x=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:x}))}},[u,i,a]);let m=0,v=null;const y=VQ(r);return gf(x=>{y&&(n===1/0||m<n)&&(d.current.visible=!1,x.gl.setRenderTarget(p),v=x.scene.background,t&&(x.scene.background=t),x.gl.render(x.scene,u.current),x.scene.background=v,x.gl.setRenderTarget(null),d.current.visible=!0,m++)}),S.createElement(S.Fragment,null,S.createElement("orthographicCamera",Re({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:XF([u,o])},s),!y&&r),S.createElement("group",{ref:d},y&&r(p.texture)))}),jQ=t=>typeof t=="function",XQ=S.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=cn(({set:x})=>x),l=cn(({camera:x})=>x),c=cn(({size:x})=>x),u=S.useRef(null),d=S.useRef(null),p=lU(e);S.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),S.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let m=0,v=null;const y=jQ(i);return gf(x=>{y&&(n===1/0||m<n)&&(d.current.visible=!1,x.gl.setRenderTarget(p),v=x.scene.background,t&&(x.scene.background=t),x.gl.render(x.scene,u.current),x.scene.background=v,x.gl.setRenderTarget(null),d.current.visible=!0,m++)}),S.useLayoutEffect(()=>{if(r){const x=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:x}))}},[u,r,a]),S.createElement(S.Fragment,null,S.createElement("perspectiveCamera",Re({ref:XF([u,o])},s),!y&&i),S.createElement("group",{ref:d},y&&i(p.texture)))}),JQ=S.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,onChange:s,onStart:o,onEnd:a,...l},c)=>{const u=cn(M=>M.invalidate),d=cn(M=>M.camera),p=cn(M=>M.gl),m=cn(M=>M.events),v=cn(M=>M.setEvents),y=cn(M=>M.set),x=cn(M=>M.get),g=cn(M=>M.performance),_=e||d,E=r||m.connected||p.domElement,A=S.useMemo(()=>new qY(_),[_]);return gf(()=>{A.enabled&&A.update()},-1),S.useEffect(()=>(A.connect(E),()=>void A.dispose()),[E,n,A,u]),S.useEffect(()=>{const M=I=>{u(),n&&g.regress(),s&&s(I)},T=I=>{o&&o(I)},P=I=>{a&&a(I)};return A.addEventListener("change",M),A.addEventListener("start",T),A.addEventListener("end",P),()=>{A.removeEventListener("start",T),A.removeEventListener("end",P),A.removeEventListener("change",M)}},[s,o,a,A,u,v]),S.useEffect(()=>{if(t){const M=x().controls;return y({controls:A}),()=>y({controls:M})}},[t,A]),S.createElement("primitive",Re({ref:c,object:A,enableDamping:i},l))}),KQ=S.forwardRef(function({children:e,disable:n,disableX:r,disableY:i,disableZ:s,left:o,right:a,top:l,bottom:c,front:u,back:d,onCentered:p,precise:m=!0,cacheKey:v=0,...y},x){const g=S.useRef(null),_=S.useRef(null),E=S.useRef(null);return S.useLayoutEffect(()=>{_.current.matrixWorld.identity();const A=new wn().setFromObject(E.current,m),M=new O,T=new gi,P=A.max.x-A.min.x,I=A.max.y-A.min.y,R=A.max.z-A.min.z;A.getCenter(M),A.getBoundingSphere(T);const D=l?I/2:c?-I/2:0,F=o?-P/2:a?P/2:0,X=u?R/2:d?-R/2:0;_.current.position.set(n||r?0:-M.x+F,n||i?0:-M.y+D,n||s?0:-M.z+X),typeof p<"u"&&p({parent:g.current.parent,container:g.current,width:P,height:I,depth:R,boundingBox:A,boundingSphere:T,center:M,verticalAlignment:D,horizontalAlignment:F,depthAlignment:X})},[v,p,l,o,u,n,r,i,s,m,a,c,d]),S.useImperativeHandle(x,()=>g.current,[]),S.createElement("group",Re({ref:g},y),S.createElement("group",{ref:_},S.createElement("group",{ref:E},e)))});function YQ(t,e){const n=t+"Geometry";return S.forwardRef(({args:r,children:i,...s},o)=>{const a=S.useRef(null);return S.useImperativeHandle(o,()=>a.current),S.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),S.createElement("mesh",Re({ref:a},s),S.createElement(n,{attach:"geometry",args:r}),i)})}const QQ=YQ("box");var cU={exports:{}},qQ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZQ=qQ,eq=ZQ;function uU(){}function dU(){}dU.resetWarningCache=uU;var tq=function(){function t(r,i,s,o,a,l){if(l!==eq){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:dU,resetWarningCache:uU};return n.PropTypes=n,n};cU.exports=tq();var nq=cU.exports;const ln=yl(nq);var HI=0/0,rq="[object Symbol]",iq=/^\s+|\s+$/g,sq=/^[-+]0x[0-9a-f]+$/i,oq=/^0b[01]+$/i,aq=/^0o[0-7]+$/i,lq=parseInt,cq=Object.prototype,uq=cq.toString;function dq(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function GI(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function fq(t){return!!t&&typeof t=="object"}function hq(t){return typeof t=="symbol"||fq(t)&&uq.call(t)==rq}function PS(t){if(typeof t=="number")return t;if(hq(t))return HI;if(GI(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=GI(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(iq,"");var n=oq.test(t);return n||aq.test(t)?lq(t.slice(2),n?2:8):sq.test(t)?HI:+t}function pq(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=PS(n),n=n===n?n:0),e!==void 0&&(e=PS(e),e=e===e?e:0),dq(PS(t),e,n)}var mq=pq;const fU=yl(mq);/**
 * postprocessing v6.31.0 build Sun May 07 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var gq=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,UM="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",vq=class extends jn{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new Ve(null),luminanceBuffer1:new Ve(null),minLuminance:new Ve(.01),deltaTime:new Ve(0),tau:new Ve(1)},extensions:{shaderTextureLOD:!0},blending:br,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:gq,vertexShader:UM})}set luminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}setLuminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}set luminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}setLuminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}set mipLevel1x1(t){this.defines.MIP_LEVEL_1X1=t.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(t){this.mipLevel1x1=t}set deltaTime(t){this.uniforms.deltaTime.value=t}setDeltaTime(t){this.uniforms.deltaTime.value=t}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(t){this.uniforms.minLuminance.value=t}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(t){this.uniforms.minLuminance.value=t}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(t){this.uniforms.tau.value=t}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(t){this.uniforms.tau.value=t}},hU="",Gn="srgb",Ex="srgb-linear",yq=Number(wl.replace(/\D+/g,"")),pU=yq>=152,xq=new Map([[qp,Ex],[Qr,Gn]]),_q=new Map([[Ex,qp],[Gn,Qr]]);function Uc(t){return t===null?null:pU?t.outputColorSpace:xq.get(t.outputEncoding)}function Wo(t,e){t!==null&&(pU?t.colorSpace=e:t.encoding=_q.get(e))}var ct={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},nl={NONE:0,DEPTH:1,CONVOLUTION:2},Xt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Zc={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Do={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},Wv={DEFAULT:0,ESKIL:1},Sq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,wq="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Eq=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],mU=class extends jn{constructor(t=new Dt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ve(null),texelSize:new Ve(new Dt),scale:new Ve(1),kernel:new Ve(0)},blending:br,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Sq,vertexShader:wq}),this.setTexelSize(t.x,t.y),this.kernelSize=Zc.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return Eq[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},Aq=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,gU=class extends jn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ve(null),opacity:new Ve(1)},blending:br,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Aq,vertexShader:UM})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},bq=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Mq="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Cq=class extends jn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ve(null),normalBuffer:new Ve(null),texelSize:new Ve(new de)},blending:br,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:bq,vertexShader:Mq})}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=El){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,t!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Tq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,Rq="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Pq=class extends jn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Ve(null),texelSize:new Ve(new de)},blending:br,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Tq,vertexShader:Rq})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Iq=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,Bq="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Dq=class extends jn{constructor(t,e,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:wl.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ve(null),depthBuffer:new Ve(null),resolution:new Ve(new de),texelSize:new Ve(new de),cameraNear:new Ve(.3),cameraFar:new Ve(1e3),aspect:new Ve(1),time:new Ve(0)},blending:br,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=El){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=Iq.replace(Xt.FRAGMENT_HEAD,t.get(Xt.FRAGMENT_HEAD)||"").replace(Xt.FRAGMENT_MAIN_UV,t.get(Xt.FRAGMENT_MAIN_UV)||"").replace(Xt.FRAGMENT_MAIN_IMAGE,t.get(Xt.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Bq.replace(Xt.VERTEX_HEAD,t.get(Xt.VERTEX_HEAD)||"").replace(Xt.VERTEX_MAIN_SUPPORT,t.get(Xt.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof sn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Xt}},Lq=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Oq=class extends jn{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:wl.replace(/\D+/g,"")},uniforms:{inputBuffer:new Ve(null),threshold:new Ve(0),smoothing:new Ve(1),range:new Ve(null)},blending:br,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Lq,vertexShader:UM}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},Nq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,Fq="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",Uq=class extends mU{constructor({kernelSize:t=Zc.MEDIUM,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=Nq,this.vertexShader=Fq,this.kernelSize=t,this.uniforms.aspect=new Ve(1),this.uniforms.rotation=new Ve(new de),this.uniforms.maskParams=new Ve(new Dt),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),n=Math.max(e-this.feather,0);t.set(this.offset-e,this.offset-n,this.offset+e,this.offset+n)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(t){this.uniforms.rotation.value.set(Math.cos(t),Math.sin(t))}get offset(){return this._offset}set offset(t){this._offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.updateParams()}setSize(t,e){super.setSize(t,e),this.uniforms.aspect.value=t/e}},kq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,zq="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Hq=class extends jn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Ve(null),supportBuffer:new Ve(null),texelSize:new Ve(new de),radius:new Ve(.85)},blending:br,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kq,vertexShader:zq})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Gq=new lf,Ca=null;function $q(){if(Ca===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Ca=new xt,Ca.setAttribute!==void 0?(Ca.setAttribute("position",new Lt(t,3)),Ca.setAttribute("uv",new Lt(e,2))):(Ca.addAttribute("position",new Lt(t,3)),Ca.addAttribute("uv",new Lt(e,2)))}return Ca}var vi=class{constructor(t="Pass",e=new Wd,n=Gq){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new Zn($q(),t),e.frustumCulled=!1,this.scene===null&&(this.scene=new Wd),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=El){}render(t,e,n,r,i){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof yn||e instanceof Nn||e instanceof fn||e instanceof vi)&&this[t].dispose()}}},vU=class extends vi{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new gU,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new yn(1,1,{minFilter:Zt,magFilter:Zt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==zr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":Uc(t)===Gn&&Wo(this.renderTarget.texture,Gn))}},Vq=class extends vi{constructor(t,{minLuminance:e=.01,adaptationRate:n=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new vq,this.needsSwap=!1,this.renderTargetPrevious=new yn(1,1,{minFilter:rn,magFilter:rn,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const r=this.fullscreenMaterial;r.luminanceBuffer0=this.renderTargetPrevious.texture,r.luminanceBuffer1=t,r.minLuminance=e,r.adaptationRate=n,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new vU(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(t){this.fullscreenMaterial.mipLevel1x1=t}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(t){this.fullscreenMaterial.adaptationRate=t}render(t,e,n,r,i){this.fullscreenMaterial.deltaTime=r,t.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),t.render(this.scene,this.camera),this.copyPass.render(t,this.renderTargetAdapted)}},Wq=class extends vi{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const s=t.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},$I=new Fe,yU=class extends vi{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=t.getClearAlpha(),l=s!==null,c=o>=0;l?(t.getClearColor($I),t.setClearColor(s,c?o:a)):c&&t.setClearAlpha(o),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor($I,a):c&&t.setClearAlpha(a)}},Ta=-1,Vn=class extends Ui{constructor(t,e=Ta,n=Ta,r=1){super(),this.resizable=t,this.baseSize=new de(1,1),this.preferredSize=new de(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new de,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==Ta?n.width=e.width:e.height!==Ta?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==Ta?n.height=e.height:e.width!==Ta?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(Ta),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ta}},IS=!1,VI=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case wr:n=this.materialsFlatShadedDoubleSide;break;case ir:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case wr:n=this.materialsDoubleSide;break;case ir:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof jn))return t.clone();const e=t.uniforms,n=new Map;for(const i in e){const s=e[i].value;s.isRenderTargetTexture&&(e[i].value=null,n.set(i,s))}const r=t.clone();for(const i of n)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=Us;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=ir,r}),this.materialsDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=wr,r}),this.materialsFlatShaded=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=ir,r}),this.materialsFlatShadedDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=wr,r})}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,IS){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=i}t.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return IS}static set workaroundEnabled(t){IS=t}},xU=class extends vi{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new yU,this.overrideMaterialManager=n===null?null:new VI(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new VI(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,u=t.shadowMap.autoUpdate,d=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,s,o):t.render(s,o),o.layers.mask=l,s.background=c,t.shadowMap.autoUpdate=u}},jq=class extends vi{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=Vn.AUTO_SIZE,height:r=Vn.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new Cq;o.normalBuffer=t,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new yn(1,1,{minFilter:rn,magFilter:rn,depthBuffer:!1,type:Is}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new Vn(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=El){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,r,i){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){const r=t.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function WI(t,e,n){for(const r of e){const i="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of n.entries())o[1]!==null&&n.set(o[0],o[1].replace(s,i))}}function Xq(t,e,n){let r=e.getFragmentShader(),i=e.getVertexShader();const s=r!==void 0&&/mainImage/.test(r),o=r!==void 0&&/mainUv/.test(r);if(n.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&n.attributes&nl.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts;let c=l.get(Xt.FRAGMENT_HEAD)||"",u=l.get(Xt.FRAGMENT_MAIN_UV)||"",d=l.get(Xt.FRAGMENT_MAIN_IMAGE)||"",p=l.get(Xt.VERTEX_HEAD)||"",m=l.get(Xt.VERTEX_MAIN_SUPPORT)||"";const v=new Set,y=new Set;if(o&&(u+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const _=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);m+=`	${t}MainSupport(`,m+=_?`vUv);
`:`);
`;for(const E of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const A of E[1].split(/\s*,\s*/))n.varyings.add(A),v.add(A),y.add(A);for(const E of i.matchAll(a))y.add(E[1])}for(const _ of r.matchAll(a))y.add(_[1]);for(const _ of e.defines.keys())y.add(_.replace(/\([\w\s,]*\)/g,""));for(const _ of e.uniforms.keys())y.add(_);y.delete("while"),y.delete("for"),y.delete("if"),e.uniforms.forEach((_,E)=>n.uniforms.set(t+E.charAt(0).toUpperCase()+E.slice(1),_)),e.defines.forEach((_,E)=>n.defines.set(t+E.charAt(0).toUpperCase()+E.slice(1),_));const x=new Map([["fragment",r],["vertex",i]]);WI(t,y,n.defines),WI(t,y,x),r=x.get("fragment"),i=x.get("vertex");const g=e.blendMode;if(n.blendModes.set(g.blendFunction,g),s){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(d+=e.inputColorSpace===Gn?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==hU?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const _=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${t}MainImage(color0, UV, `,n.attributes&nl.DEPTH&&_.test(r)&&(d+="depth, ",n.readDepth=!0),d+=`color1);
	`;const E=t+"BlendOpacity";n.uniforms.set(E,g.opacity),d+=`color0 = blend${g.blendFunction}(color0, color1, ${E});

	`,c+=`uniform float ${E};

`}if(c+=r+`
`,i!==null&&(p+=i+`
`),l.set(Xt.FRAGMENT_HEAD,c),l.set(Xt.FRAGMENT_MAIN_UV,u),l.set(Xt.FRAGMENT_MAIN_IMAGE,d),l.set(Xt.VERTEX_HEAD,p),l.set(Xt.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const _ of e.extensions)n.extensions.add(_)}}var Jq=class extends vi{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new Dq(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new nZ;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===ct.DST)t.attributes|=o.getAttributes()&nl.DEPTH;else{if(t.attributes&o.getAttributes()&nl.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);Xq("e"+e++,o,t)}let n=t.shaderParts.get(Xt.FRAGMENT_HEAD),r=t.shaderParts.get(Xt.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get(Xt.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of t.blendModes.values())n+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;t.attributes&nl.DEPTH?(t.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===Gn&&(r+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Xt.FRAGMENT_HEAD,n),t.shaderParts.set(Xt.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set(Xt.FRAGMENT_MAIN_UV,i);for(const[o,a]of t.shaderParts)a!==null&&t.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=El){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const s of this.effects)s.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==zr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},_U=class extends vi{constructor({kernelSize:t=Zc.MEDIUM,resolutionScale:e=.5,width:n=Vn.AUTO_SIZE,height:r=Vn.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new yn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new Vn(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new mU,this._blurMaterial.kernelSize=t,this.copyMaterial=new gU}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let d=e;this.fullscreenMaterial=c;for(let p=0,m=u.length;p<m;++p){const v=p&1?l:a;c.kernel=u[p],c.inputBuffer=d.texture,t.setRenderTarget(v),t.render(s,o),d=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(s,o)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==zr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):Uc(t)===Gn&&(Wo(this.renderTargetA.texture,Gn),Wo(this.renderTargetB.texture,Gn)))}static get AUTO_SIZE(){return Vn.AUTO_SIZE}},SU=class extends vi{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:r=1,width:i=Vn.AUTO_SIZE,height:s=Vn.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new Oq(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new yn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Vn(this,o,a,r);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==zr&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Kq=class extends vi{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new yU(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const s=t.getContext(),o=t.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,d=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,u,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(t,null):(c.render(t,e),c.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(a,l)):(t.setRenderTarget(e),t.render(a,l),t.setRenderTarget(n),t.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Yq=class extends vi{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new yn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Pq,this.upsamplingMaterial=new Hq,this.resolution=new de}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const r=e.clone();r.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let n=1,r=t-1;n<r;++n){const i=e.clone();i.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let d=e;this.fullscreenMaterial=a;for(let p=0,m=c.length;p<m;++p){const v=c[p];a.setSize(d.width,d.height),a.inputBuffer=d.texture,t.setRenderTarget(v),t.render(s,o),d=v}this.fullscreenMaterial=l;for(let p=u.length-1;p>=0;--p){const m=u[p];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=c[p].texture,t.setRenderTarget(m),t.render(s,o),d=m}}setSize(t,e){const n=this.resolution;n.set(t,e);let r=n.width,i=n.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(t,e,n){if(n!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=n;if(n!==zr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(Uc(t)===Gn)for(const i of r)Wo(i.texture,Gn)}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},Qq=class extends vi{constructor(t,e,{renderTarget:n,resolutionScale:r=1,width:i=Vn.AUTO_SIZE,height:s=Vn.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new xU(t,e,new dM);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new Fe(7829503),c.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new yn(1,1,{minFilter:rn,magFilter:rn}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new Vn(this,o,a,r);u.addEventListener("change",d=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},qq=class extends _U{constructor({offset:t=0,rotation:e=0,focusArea:n=.4,feather:r=.3,kernelSize:i=Zc.MEDIUM,resolutionScale:s=.5,resolutionX:o=Vn.AUTO_SIZE,resolutionY:a=Vn.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:s,resolutionX:o,resolutionY:a}),this.blurMaterial=new Uq({kernelSize:i,offset:t,rotation:e,focusArea:n,feather:r})}},BS=1/1e3,Zq=1e3,eZ=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*BS}get fixedDelta(){return this._fixedDelta*BS}set fixedDelta(t){this._fixedDelta=t*Zq}get elapsed(){return this._elapsed*BS}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},tZ=class{constructor(e=null,{depthBuffer:n=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(n,r,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new vU,this.depthTexture=null,this.passes=[],this.timer=new eZ,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const n=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer,n.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const n=e.getSize(new de),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===zr&&Uc(e)===Gn&&(Wo(this.inputBuffer.texture,Gn),Wo(this.outputBuffer.texture,Gn),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(n.width,n.height);for(const s of this.passes)s.initialize(e,r,i)}}replaceRenderer(e,n=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),n&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new cx;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=dl,e.type=Za):e.type=Ho,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,n,r,i){const s=this.renderer,o=s===null?new de:s.getDrawingBufferSize(new de),a={minFilter:Zt,magFilter:Zt,stencilBuffer:n,depthBuffer:e,type:r},l=new yn(o.width,o.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),r===zr&&Uc(s)===Gn&&Wo(l.texture,Gn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const n of this.passes)n.mainScene=e}setMainCamera(e){for(const n of this.passes)n.mainCamera=e}addPass(e,n){const r=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new de),o=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(s.width,s.height),e.initialize(i,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),n!==void 0?r.splice(n,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const n=this.passes,r=n.indexOf(e);if(r!==-1&&n.splice(r,1).length>0){if(this.depthTexture!==null){const o=(l,c)=>l||c.needsDepthTexture;n.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===n.length&&(e.renderToScreen=!1,n.length>0&&(n[n.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const n=this.renderer,r=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,c;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const u of this.passes)u.enabled&&(u.render(n,i,s,e,o),u.needsSwap&&(o&&(r.renderToScreen=u.renderToScreen,a=n.getContext(),l=n.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),r.render(n,i,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),c=i,i=s,s=c),u instanceof Kq?o=!0:u instanceof Wq&&(o=!1))}setSize(e,n,r){const i=this.renderer,s=i.getSize(new de);(e===void 0||n===void 0)&&(e=s.width,n=s.height),(s.width!==e||s.height!==n)&&i.setSize(e,n,r);const o=i.getDrawingBufferSize(new de);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},nZ=class{constructor(){this.shaderParts=new Map([[Xt.FRAGMENT_HEAD,null],[Xt.FRAGMENT_MAIN_UV,null],[Xt.FRAGMENT_MAIN_IMAGE,null],[Xt.VERTEX_HEAD,null],[Xt.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=nl.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Ex}},rZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",iZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",sZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",oZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",aZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",lZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",cZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",uZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",dZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",fZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",hZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",pZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",mZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",gZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",vZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",yZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",xZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",_Z="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",SZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",wZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",EZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",AZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",bZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",MZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",CZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",TZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",RZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",PZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",IZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",BZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",DZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",LZ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",OZ=new Map([[ct.ADD,rZ],[ct.ALPHA,iZ],[ct.AVERAGE,sZ],[ct.COLOR,oZ],[ct.COLOR_BURN,aZ],[ct.COLOR_DODGE,lZ],[ct.DARKEN,cZ],[ct.DIFFERENCE,uZ],[ct.DIVIDE,dZ],[ct.DST,null],[ct.EXCLUSION,fZ],[ct.HARD_LIGHT,hZ],[ct.HARD_MIX,pZ],[ct.HUE,mZ],[ct.INVERT,gZ],[ct.INVERT_RGB,vZ],[ct.LIGHTEN,yZ],[ct.LINEAR_BURN,xZ],[ct.LINEAR_DODGE,_Z],[ct.LINEAR_LIGHT,SZ],[ct.LUMINOSITY,wZ],[ct.MULTIPLY,EZ],[ct.NEGATION,AZ],[ct.NORMAL,bZ],[ct.OVERLAY,MZ],[ct.PIN_LIGHT,CZ],[ct.REFLECT,TZ],[ct.SATURATION,RZ],[ct.SCREEN,PZ],[ct.SOFT_LIGHT,IZ],[ct.SRC,BZ],[ct.SUBTRACT,DZ],[ct.VIVID_LIGHT,LZ]]),NZ=class extends Ui{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Ve(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return OZ.get(this.blendFunction)}},ki=class extends Ui{constructor(t,e,{attributes:n=nl.NONE,blendFunction:r=ct.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new NZ(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Ex,this._outputColorSpace=hU}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=El){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof yn||e instanceof Nn||e instanceof fn||e instanceof vi)&&this[t].dispose()}}},FZ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,UZ=class extends ki{constructor({blendFunction:t=ct.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=Zc.LARGE,resolutionScale:l=.5,width:c=Vn.AUTO_SIZE,height:u=Vn.AUTO_SIZE,resolutionX:d=c,resolutionY:p=u}={}){super("BloomEffect",FZ,{blendFunction:t,uniforms:new Map([["map",new Ve(null)],["intensity",new Ve(i)]])}),this.renderTarget=new yn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new _U({kernelSize:a}),this.luminancePass=new SU({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new Yq,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new Vn(this,d,p,l);m.addEventListener("change",v=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,i.renderTarget):this.blurPass.render(t,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,r)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,Uc(t)===Gn&&Wo(this.renderTarget.texture,Gn))}},kZ="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",zZ=class extends ki{constructor({blendFunction:t=ct.SRC,brightness:e=0,contrast:n=0}={}){super("BrightnessContrastEffect",kZ,{blendFunction:t,uniforms:new Map([["brightness",new Ve(e)],["contrast",new Ve(n)]])}),this.inputColorSpace=Gn}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(){return this.contrast}setContrast(t){this.contrast=t}},HZ="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",GZ=class extends ki{constructor({blendFunction:t,bits:e=16}={}){super("ColorDepthEffect",HZ,{blendFunction:t,uniforms:new Map([["factor",new Ve(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(t){this.bits=t,this.uniforms.get("factor").value=Math.pow(2,t/3)}getBitDepth(){return this.bitDepth}setBitDepth(t){this.bitDepth=t}},$Z=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,VZ=class extends ki{constructor({blendFunction:t=ct.SRC,inverted:e=!1}={}){super("DepthEffect",$Z,{blendFunction:t,attributes:nl.DEPTH}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(t){this.inverted!==t&&(t?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(t){this.inverted=t}},WZ="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",jZ=class extends ki{constructor({blendFunction:t,angle:e=Math.PI*.5,scale:n=1}={}){super("DotScreenEffect",WZ,{blendFunction:t,uniforms:new Map([["angle",new Ve(new de)],["scale",new Ve(n)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(t){this.uniforms.get("angle").value.set(Math.sin(t),Math.cos(t))}getAngle(){return this.angle}setAngle(t){this.angle=t}get scale(){return this.uniforms.get("scale").value}set scale(t){this.uniforms.get("scale").value=t}};new O;new je;var XZ="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",JZ=class extends ki{constructor({blendFunction:t=ct.SRC,hue:e=0,saturation:n=0}={}){super("HueSaturationEffect",XZ,{blendFunction:t,uniforms:new Map([["hue",new Ve(new O)],["saturation",new Ve(n)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){const t=this.uniforms.get("hue").value;return Math.acos((t.x*3-1)/2)}set hue(t){const e=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}};new Fe;var KZ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,YZ=class extends ki{constructor({blendFunction:t=ct.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",KZ,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},QZ=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,qZ=class extends ki{constructor({blendFunction:t=ct.OVERLAY,density:e=1.25,scrollSpeed:n=0}={}){super("ScanlineEffect",QZ,{blendFunction:t,uniforms:new Map([["count",new Ve(0)],["scrollSpeed",new Ve(0)]])}),this.resolution=new de,this.d=e,this.scrollSpeed=n}get density(){return this.d}set density(t){this.d=t,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(t){this.density=t}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(t){this.uniforms.get("scrollSpeed").value=t,t===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(t,e){this.resolution.set(t,e),this.uniforms.get("count").value=Math.round(e*this.density)}},ZZ="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",eee="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",tee=Math.PI*.5,xh=new O,jI=new O,nee=class extends ki{constructor(t,e=new O,{speed:n=2,maxRadius:r=1,waveSize:i=.2,amplitude:s=.05}={}){super("ShockWaveEffect",ZZ,{vertexShader:eee,uniforms:new Map([["active",new Ve(!1)],["center",new Ve(new de(.5,.5))],["cameraDistance",new Ve(1)],["size",new Ve(1)],["radius",new Ve(-i)],["maxRadius",new Ve(r)],["waveSize",new Ve(i)],["amplitude",new Ve(s)]])}),this.position=e,this.speed=n,this.camera=t,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}set mainCamera(t){this.camera=t}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(t){this.uniforms.get("amplitude").value=t}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(t){this.uniforms.get("waveSize").value=t}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(t){this.uniforms.get("maxRadius").value=t}get epicenter(){return this.position}set epicenter(t){this.position=t}getPosition(){return this.position}setPosition(t){this.position=t}getSpeed(){return this.speed}setSpeed(t){this.speed=t}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(t,e,n){const r=this.position,i=this.camera,s=this.uniforms,o=s.get("active");if(this.active){const a=s.get("waveSize").value;i.getWorldDirection(xh),jI.copy(i.position).sub(r),o.value=xh.angleTo(jI)>tee,o.value&&(s.get("cameraDistance").value=i.position.distanceTo(r),xh.copy(r).project(i),this.screenPosition.set((xh.x+1)*.5,(xh.y+1)*.5)),this.time+=n*this.speed;const l=this.time-a;s.get("radius").value=l,l>=(s.get("maxRadius").value+a)*2&&(this.active=!1,o.value=!1)}}},ree="uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",iee=class extends ki{constructor({blendFunction:t,intensity:e=1}={}){super("SepiaEffect",ree,{blendFunction:t,uniforms:new Map([["weightsR",new Ve(new O(.393,.769,.189))],["weightsG",new Ve(new O(.349,.686,.168))],["weightsB",new Ve(new O(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(t){this.blendMode.opacity.value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}},see=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,oee="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",aee=class extends ki{constructor({blendFunction:t,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3,kernelSize:s=Zc.MEDIUM,resolutionScale:o=.5,resolutionX:a=Vn.AUTO_SIZE,resolutionY:l=Vn.AUTO_SIZE}={}){super("TiltShiftEffect",see,{vertexShader:oee,blendFunction:t,uniforms:new Map([["rotation",new Ve(new de)],["maskParams",new Ve(new de)],["map",new Ve(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new yn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new qq({kernelSize:s,resolutionScale:o,resolutionX:a,resolutionY:l,offset:e,rotation:n,focusArea:r,feather:i});const c=this.resolution=new Vn(this,a,l,o);c.addEventListener("change",u=>this.setSize(c.baseWidth,c.baseHeight)),this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);t.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(t){this.uniforms.get("rotation").value.set(Math.cos(t),Math.sin(t)),this.blurPass.blurMaterial.rotation=t}get offset(){return this._offset}set offset(t){this._offset=t,this.blurPass.blurMaterial.offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.blurPass.blurMaterial.focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.blurPass.blurMaterial.feather=t,this.updateParams()}get bias(){return 0}set bias(t){}update(t,e,n){this.blurPass.render(t,e,this.renderTarget)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,Uc(t)===Gn&&Wo(this.renderTarget.texture,Gn))}},lee=`#include <tonemapping_pars_fragment>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
uniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;
#if TONE_MAPPING_MODE != 2
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 2
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,cee=class extends ki{constructor({blendFunction:t=ct.SRC,adaptive:e=!0,mode:n=e?Do.REINHARD2_ADAPTIVE:Do.REINHARD2,resolution:r=256,maxLuminance:i=16,whitePoint:s=i,middleGrey:o=.6,minLuminance:a=.01,averageLuminance:l=1,adaptationRate:c=1}={}){super("ToneMappingEffect",lee,{blendFunction:t,uniforms:new Map([["luminanceBuffer",new Ve(null)],["maxLuminance",new Ve(i)],["whitePoint",new Ve(s)],["middleGrey",new Ve(o)],["averageLuminance",new Ve(l)]])}),this.renderTargetLuminance=new yn(1,1,{minFilter:ks,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new SU({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new Vq(this.luminancePass.texture,{minLuminance:a,adaptationRate:c}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=r,this.mode=n}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(t){if(this.mode!==t){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",t.toFixed(0)),t){case Do.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case Do.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case Do.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=t===Do.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(t){this.mode=t}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(t){this.uniforms.get("whitePoint").value=t}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(t){this.uniforms.get("middleGrey").value=t}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(t){this.uniforms.get("averageLuminance").value=t}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(t){const e=Math.max(0,Math.ceil(Math.log2(t))),n=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(n,n),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(t){this.resolution=t}get adaptive(){return this.mode===Do.REINHARD2_ADAPTIVE}set adaptive(t){this.mode=t?Do.REINHARD2_ADAPTIVE:Do.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(t){this.adaptiveLuminanceMaterial.adaptationRate=t}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(t){console.warn(this.name,"distinction was removed.")}update(t,e,n){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(t,e),this.adaptiveLuminancePass.render(t,null,null,n))}initialize(t,e,n){this.adaptiveLuminancePass.initialize(t,e,n)}},uee=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,dee=class extends ki{constructor({blendFunction:t,technique:e=Wv.DEFAULT,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",uee,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Ve(r)],["darkness",new Ve(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Wv.ESKIL}set eskil(t){this.technique=t?Wv.ESKIL:Wv.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}};const zi=function(t,e){return e===void 0&&(e=ct.NORMAL),S.forwardRef(function(r,i){let{blendFunction:s,opacity:o,...a}=r;const l=cn(u=>u.invalidate),c=S.useMemo(()=>new t(a),[a]);return S.useLayoutEffect(()=>{c.blendMode.blendFunction=!s&&s!==0?e:s,o!==void 0&&(c.blendMode.opacity.value=o),l()},[s,c.blendMode,o]),vt.createElement("primitive",{ref:i,object:c,dispose:null})})},fee=zi(UZ,ct.ADD);zi(zZ);zi(GZ);zi(VZ);const hee=S.createContext(null),pee=vt.memo(S.forwardRef((t,e)=>{let{children:n,camera:r,scene:i,resolutionScale:s,enabled:o=!0,renderPriority:a=1,autoClear:l=!0,depthBuffer:c,disableNormalPass:u,stencilBuffer:d,multisampling:p=8,frameBufferType:m=ul}=t;const{gl:v,scene:y,camera:x,size:g}=cn();i=i||y,r=r||x;const[_,E,A]=S.useMemo(()=>{const P=QY(),I=new tZ(v,{depthBuffer:c,stencilBuffer:d,multisampling:p>0&&P?p:0,frameBufferType:m});I.addPass(new xU(i,r));let R=null,D=null;return u||(D=new Qq(i,r),D.enabled=!1,I.addPass(D),s!==void 0&&P&&(R=new jq({normalBuffer:D.texture,resolutionScale:s}),R.enabled=!1,I.addPass(R))),[I,D,R]},[r,v,c,d,p,m,i,u,s]);S.useEffect(()=>_==null?void 0:_.setSize(g.width,g.height),[_,g]),gf((P,I)=>{o&&(v.autoClear=l,_.render(I))},o?a:0);const M=S.useRef(null);S.useLayoutEffect(()=>{let P;return M.current&&M.current.__r3f&&_&&(P=new Jq(r,...M.current.__r3f.objects),P.renderToScreen=!0,_.addPass(P),E&&(E.enabled=!0),A&&(A.enabled=!0)),()=>{P&&(_==null||_.removePass(P)),E&&(E.enabled=!1),A&&(A.enabled=!1)}},[_,n,r,E,A]);const T=S.useMemo(()=>({composer:_,normalPass:E,downSamplingPass:A,resolutionScale:s,camera:r,scene:i}),[_,E,A,s,r,i]);return S.useImperativeHandle(e,()=>_,[_]),vt.createElement(hee.Provider,{value:T},vt.createElement("group",{ref:M},n))}));zi(jZ);zi(JZ);zi(YZ,ct.COLOR_DODGE);zi(qZ,ct.OVERLAY);zi(iee);zi(cee);zi(dee);zi(nee);zi(aee,ct.ADD);const mee=t=>[t.url,t.scale],gee=()=>{const[t,e]=vm(mee),n=S.useRef(null);return L.jsx(S.Suspense,{fallback:null,children:t?L.jsx($Q,{renderOrder:-1,ref:n,url:t,scale:[300,150].map(r=>r*e),position:[0,0,-2],transparent:!1}):null})},vee=()=>{const t=cn(r=>r.camera),e=Yc(r=>r.is3dModeOn),n=ho(r=>r.boardCenter);return S.useLayoutEffect(()=>{if(console.log(t),!e){t.position.set(0,0,120),t.lookAt(new O(0,0,0));return}},[e,t]),L.jsxs(L.Fragment,{children:[L.jsx(XQ,{makeDefault:e,position:[n.x,n.y,170],fov:60}),L.jsx(WQ,{makeDefault:!e,zoom:4,position:[0,0,120]})]})},XI=({path:t,color:e,height:n,extrude:r,id:i})=>{const s=wx(`${window.pluginVars.pluginUrl}templates/dist/${t}.glb`,!1),{color:o,emissive:a,emissiveIntensity:l}=e,c=Yc(p=>p.brightness),u=Object.keys(s.nodes).filter(p=>p!=="Scene").map(p=>s.nodes[p].geometry.clone()),d=Object.keys(s.materials).map(p=>s.materials[p].clone());return L.jsx(L.Fragment,{children:u.map((p,m)=>L.jsxs("mesh",{name:r?"control":i,position:r?[0,0,0]:[0,0,.5],children:[L.jsx("bufferGeometry",{attach:"geometry",...p,onUpdate:v=>{if(!r)return;const y=2,x=v.attributes.position.array,g=v.attributes.normal.array;for(let _=0;_<x.length;_+=3){const E=g[_],A=g[_+1],M=E*y,T=A*y;x[_]+=M,x[_+1]+=T}v.attributes.position.needsUpdate=!0}}),r?L.jsx("meshBasicMaterial",{toneMapped:!0,color:"green",colorWrite:!1}):L.jsx(L.Fragment,{children:d.length>1?L.jsx("meshStandardMaterial",{attach:"material",...d[m],toneMapped:!1}):L.jsx("meshStandardMaterial",{color:o,emissive:a,emissiveIntensity:l*(c/100)+1,toneMapped:!1})})]},p.uuid))})},Ax=S.createContext(null),yee=t=>t&&t.current,L0=(t,e)=>yee(t)?t.current:t||(e?L0(e):void 0),xee=(t,e,n)=>{const r=Math.abs(t.x)>=Math.abs(t.y)&&Math.abs(t.x)>=Math.abs(t.z)?0:Math.abs(t.y)>=Math.abs(t.x)&&Math.abs(t.y)>=Math.abs(t.z)?1:2,i=[0,1,2].sort((v,y)=>Math.abs(e.getComponent(y))-Math.abs(e.getComponent(v))),s=r===i[0]?i[1]:i[0],o=t.getComponent(r),a=t.getComponent(s),l=e.getComponent(r),c=e.getComponent(s),u=n.getComponent(r),p=(n.getComponent(s)-u*(a/o))/(c-l*(a/o));return[(u-p*l)/o,p]},jv=new bl,Xv=new O,JI=new je,_ee=({dir1:t,dir2:e,axis:n,boxSize:r,center:i})=>{const{translation:s,translationLimits:o,annotationsClass:a,depthTest:l,axisColors:c,hoveredColor:u,displayValues:d,onDragStart:p,onDrag:m,onDragEnd:v,userData:y}=S.useContext(Ax),x=cn(H=>H.controls),g=S.useRef(null),_=S.useRef(null),E=S.useRef(null),A=S.useRef(null),M=S.useRef(0),T=S.useRef(0),[P,I]=S.useState(!1),R=S.useCallback(H=>{d&&(_.current.innerText=`${s.current[(n+1)%3].toFixed(2)}, ${s.current[(n+2)%3].toFixed(2)}`,_.current.style.display="block"),H.stopPropagation();const Q=H.point.clone(),Z=new O().setFromMatrixPosition(E.current.matrixWorld),U=new O().setFromMatrixColumn(E.current.matrixWorld,0).normalize(),N=new O().setFromMatrixColumn(E.current.matrixWorld,1).normalize(),G=new O().setFromMatrixColumn(E.current.matrixWorld,2).normalize(),ne=new so().setFromNormalAndCoplanarPoint(G,Z);A.current={clickPoint:Q,e1:U,e2:N,plane:ne},M.current=s.current[(n+1)%3],T.current=s.current[(n+2)%3],p({component:"Slider",axis:n,origin:Z,directions:[U,N,G]}),x&&(x.enabled=!1),H.target.setPointerCapture(H.pointerId)},[x,p,n]),D=S.useCallback(H=>{if(H.stopPropagation(),P||I(!0),A.current){const{clickPoint:Q,e1:Z,e2:U,plane:N}=A.current,[G,ne]=[void 0,void 0],[J,ee]=[void 0,void 0];jv.copy(H.ray),jv.intersectPlane(N,Xv),jv.direction.negate(),jv.intersectPlane(N,Xv),Xv.sub(Q);let[te,ye]=xee(Z,U,Xv);G!==void 0&&(te=Math.max(te,G-M.current)),ne!==void 0&&(te=Math.min(te,ne-M.current)),J!==void 0&&(ye=Math.max(ye,J-T.current)),ee!==void 0&&(ye=Math.min(ye,ee-T.current)),s.current[(n+1)%3]=M.current+te,s.current[(n+2)%3]=T.current+ye,d&&(_.current.innerText=`${s.current[(n+1)%3].toFixed(2)}, ${s.current[(n+2)%3].toFixed(2)}`),JI.makeTranslation(te*Z.x+ye*U.x,te*Z.y+ye*U.y,te*Z.z+ye*U.z),m(JI)}},[m,P,s,o,n]),F=S.useCallback(H=>{d&&(_.current.style.display="none"),H.stopPropagation(),A.current=null,v(),x&&(x.enabled=!0),H.target.releasePointerCapture(H.pointerId)},[x,v]),X=S.useCallback(H=>{H.stopPropagation(),I(!1)},[]),z=S.useMemo(()=>{const H=t.clone().normalize(),Q=e.clone().normalize();return new je().makeBasis(H,Q,H.clone().cross(Q))},[t,e]),V=P?u:c[n];return S.useLayoutEffect(()=>{g.current.geometry=new Wc(r[0],r[1])},[r]),L.jsxs("group",{ref:E,matrix:z,matrixAutoUpdate:!1,name:"control",children:[L.jsx(Rp,{position:[0,0,0],name:"control",children:L.jsx("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:_})}),L.jsx("group",{children:L.jsxs("mesh",{name:"control",ref:g,visible:!0,onPointerDown:R,onPointerMove:D,onPointerUp:F,onPointerOut:X,userData:y,position:[0,0,0],children:[L.jsx("planeGeometry",{}),L.jsx("meshBasicMaterial",{transparent:!0,depthTest:l,opacity:0,color:V,polygonOffset:!0,polygonOffsetFactor:-10,side:wr})]})})]})},DS=new O,LS=new O,OS=t=>t*180/Math.PI,See=t=>t*Math.PI/180,wee=(t,e,n,r,i)=>{DS.copy(t).sub(n),LS.copy(e).sub(n);const s=r.dot(r),o=i.dot(i),a=DS.dot(r)/s,l=DS.dot(i)/o,c=LS.dot(r)/s,u=LS.dot(i)/o,d=Math.atan2(l,a);return Math.atan2(u,c)-d},Eee=(t,e)=>{let n=Math.floor(t/e);return n=n<0?n+1:n,t-n*e},KI=t=>{let e=Eee(t,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},Jv=new je,YI=new O,Kv=new bl,NS=new O,Aee=({dir1:t,dir2:e,axis:n,boundb:r,inverseScale:i,center:s})=>{const{rotationLimits:o,annotationsClass:a,scale:l,fixed:c,displayValues:u,onDragStart:d,onDrag:p,onDragEnd:m,userData:v}=S.useContext(Ax),y=cn(V=>V.controls),x=S.useRef(null),g=S.useRef(null),_=S.useRef(0),E=S.useRef(0),A=S.useRef(null),[M,T]=S.useState(!1),[P,I]=S.useState(0),R=S.useCallback(V=>{u&&(x.current.innerText=`${OS(E.current).toFixed(0)}`,x.current.style.display="block"),V.stopPropagation();const H=V.point.clone(),Q=new O().setFromMatrixPosition(g.current.matrixWorld),Z=new O().setFromMatrixColumn(g.current.matrixWorld,0).normalize(),U=new O().setFromMatrixColumn(g.current.matrixWorld,1).normalize(),N=new O().setFromMatrixColumn(g.current.matrixWorld,2).normalize(),G=new so().setFromNormalAndCoplanarPoint(N,Q);A.current={clickPoint:H,origin:Q,e1:Z,e2:U,normal:N,plane:G},d({component:"Rotator",axis:n,origin:Q,directions:[Z,U,N]}),y&&(y.enabled=!1),V.target.setPointerCapture(V.pointerId)},[y,d,n]),D=S.useCallback(V=>{if(V.stopPropagation(),M||T(!0),A.current){const{clickPoint:H,origin:Q,e1:Z,e2:U,normal:N,plane:G}=A.current,[ne,J]=(o==null?void 0:o[n])||[void 0,void 0];Kv.copy(V.ray),Kv.intersectPlane(G,NS),Kv.direction.negate(),Kv.intersectPlane(G,NS);let ee=wee(H,NS,Q,Z,U),te=OS(ee);V.shiftKey&&(te=Math.round(te/10)*10,ee=See(te)),ne!==void 0&&J!==void 0&&J-ne<2*Math.PI?(ee=KI(ee),ee=ee>Math.PI?ee-2*Math.PI:ee,ee=fU(ee,ne-_.current,J-_.current),E.current=_.current+ee):(E.current=KI(_.current+ee),E.current=E.current>Math.PI?E.current-2*Math.PI:E.current),u&&(te=OS(E.current),x.current.innerText=`${te.toFixed(0)}`),Jv.makeRotationAxis(N,ee),YI.copy(Q).applyMatrix4(Jv).sub(Q).negate(),Jv.setPosition(YI),p(Jv)}},[p,M,o,n]),F=S.useCallback(V=>{u&&(x.current.style.display="none"),V.stopPropagation(),_.current=E.current,A.current=null,m(),y&&(y.enabled=!0),V.target.releasePointerCapture(V.pointerId)},[y,m]),X=S.useCallback(V=>{V.stopPropagation(),T(!1)},[]),z=S.useMemo(()=>{const V=t.clone().normalize(),H=e.clone().normalize();return new je().makeBasis(V,H,V.clone().cross(H))},[t,e]);return S.useLayoutEffect(()=>{I(r.y)},[r]),_x(M,"grab"),L.jsxs("group",{name:"control",ref:g,onPointerDown:R,onPointerMove:D,onPointerUp:F,onPointerOut:X,matrix:z,matrixAutoUpdate:!1,children:[L.jsx(Rp,{position:[0,0,0],name:"control",children:L.jsx("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:x})}),L.jsxs("mesh",{name:"control",position:[0,P+6*(1/i[0]),0],renderOrder:500,userData:v,children:[L.jsx("circleGeometry",{args:[2*(1/i[0]),12,12],name:"control"}),L.jsx("meshBasicMaterial",{depthTest:!1,transparent:!0,color:[0,1,5],opacity:1,polygonOffset:!0,polygonOffsetFactor:-10})]}),L.jsx(ic,{name:"control",points:[[0,P+6*(1/i[0]),0],[0,P,0]],position:[0,0,0],color:new Fe("white"),children:L.jsx("meshBasicMaterial",{depthTest:!1})})]})},Yv=new O,QI=new O,bee=(t,e,n,r)=>{const i=e.dot(e),s=e.dot(t)-e.dot(n),o=e.dot(r);return o===0?-s/i:(Yv.copy(r).multiplyScalar(i/o).sub(e),QI.copy(r).multiplyScalar(s/o).add(n).sub(t),-Yv.dot(QI)/Yv.dot(Yv))},Mee=new O(0,1,0),Xl=new O,qI=new je,Cee=({direction:t,axis:e,boundb:n,position:r,inverseScale:i})=>{const{depthTest:s,scale:o,lineWidth:a,fixed:l,opacity:c,onDragStart:u,onDrag:d,onDragEnd:p,userData:m}=S.useContext(Ax),v=cn(H=>H.controls),y=S.useRef(null),x=S.useRef(null),g=S.useRef(null),_=S.useRef(i[0]),E=S.useRef(1),A=S.useRef(null),[M,T]=S.useState(!1),P=l?1.2:1.2*o,I=S.useCallback(H=>H/g.current.getWorldScale(Xl).y,[]),R=S.useCallback(H=>{H.stopPropagation();const Q=new je().extractRotation(x.current.matrixWorld),Z=H.point.clone(),U=new O().setFromMatrixPosition(x.current.matrixWorld),N=n[r].clone().applyMatrix4(Q).normalize(),G=x.current.matrixWorld.clone(),ne=G.clone().invert();A.current={clickPoint:Z,dir:N,mPLG:G,mPLGInv:ne},u({component:"Sphere",axis:e,origin:U,directions:[N]}),v&&(v.enabled=!1),H.target.setPointerCapture(H.pointerId)},[v,t,u,e,n,r]),D=S.useCallback(H=>{if(H.stopPropagation(),M||T(!0),A.current){const{clickPoint:Q,dir:Z,mPLG:U,mPLGInv:N}=A.current,[G,ne]=[1,void 0],J=bee(Q,Z,H.ray.origin,H.ray.direction),ee=I(J);let te=Math.pow(2,ee*.05);H.shiftKey&&(te=Math.round(te*10)/10),te=Math.max(te,G/_.current),ne!==void 0&&(te=Math.min(te,ne/_.current)),E.current=_.current*te,Xl.set(1,1,1),Xl.setComponent(0,te),Xl.setComponent(1,te),qI.makeScale(Xl.x,Xl.y,Xl.z).premultiply(U).multiply(N),d(qI)}},[P,I,d,M,e]),F=S.useCallback(H=>{H.stopPropagation(),_.current=E.current,A.current=null,p(),v&&(v.enabled=!0),H.target.releasePointerCapture(H.pointerId)},[v,p,P]),X=S.useCallback(H=>{H.stopPropagation(),T(!1)},[]),{matrixL:z,radius:V}=S.useMemo(()=>{const H=l?a/o*1.8:o/22.5,Q=l?1.2:1.2*o,Z=new Wn().setFromUnitVectors(Mee,t.clone().normalize()),U=new je().makeRotationFromQuaternion(Z);return{radius:H,position:Q,matrixL:U}},[t,o,a,l]);return _x(M,"grab"),L.jsx("group",{ref:x,children:L.jsxs("group",{matrix:z,matrixAutoUpdate:!1,onPointerDown:R,onPointerMove:D,onPointerUp:F,onPointerOut:X,children:[L.jsx(Rp,{name:"control",position:[0,0,0],children:L.jsx("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},ref:y})}),L.jsxs("mesh",{name:"control",ref:g,position:n[r],renderOrder:500,userData:m,children:[L.jsx("circleGeometry",{args:[2*(1/i[0]),12,12]}),L.jsx("meshBasicMaterial",{transparent:!0,depthTest:s,color:[0,1,5],opacity:1,polygonOffset:!0,polygonOffsetFactor:-10})]})]})})},Tee=new O,Ree=new O,Pee=new O,Iee=(t,e,n)=>{const r=n.width/2,i=n.height/2;e.updateMatrixWorld(!1);const s=t.project(e);return s.x=s.x*r+r,s.y=-(s.y*i)+i,s},Bee=(t,e,n,r=1)=>{const i=Tee.set(t.x/n.width*2-1,-(t.y/n.height)*2+1,r);return i.unproject(e),i},Dee=(t,e,n,r)=>{const i=Iee(Pee.copy(t),n,r);let s=0;for(let o=0;o<2;++o){const a=Ree.copy(i).setComponent(o,i.getComponent(o)+e),l=Bee(a,n,r,a.z);s=Math.max(s,t.distanceTo(l))}return s},ZI=new je,eB=new je,tB=new je,Qv=new je,Ra=new je,Jl=new je,nB=new je,rB=new je,iB=new je,$u=new wn,FS=new wn,sB=new O,oB=new O,aB=new O,Lee=new O,qv=new O,lB=new O(1,0,0),US=new O(0,1,0);new O(0,0,1);const wU=S.forwardRef(({worldMatrix:t,boundb:e,box:n,object:r,matrix:i,onDragStart:s,onDrag:o,onDragEnd:a,autoTransform:l=!0,anchor:c,disableSliders:u=!1,disableRotations:d=!1,activeAxes:p=[!0,!0,!0],offset:m=[0,0,0],scale:v=100,lineWidth:y=4,fixed:x=!1,translationLimits:g,rotationLimits:_,depthTest:E=!0,axisColors:A=["#ff2060","#20df80","#2080ff"],hoveredColor:M="#ffff40",displayValues:T=!0,annotationsClass:P,opacity:I=1,visible:R=!0,userData:D,children:F,boxSize:X,disableScale:z,center:V},H)=>{const Q=cn(re=>re.invalidate),Z=S.useRef(null),U=S.useRef(null),N=S.useRef(null),G=S.useRef(null),ne=S.useRef([0,0,0]),[J]=Kc(re=>[re.editText]),[ee,te]=S.useState(()=>{if(t){const[re,fe,Le]=[new O,new Wn,new O];return new je().copy(t).decompose(re,fe,Le),Le.toArray()}return[1,1,1]}),ye=ho(re=>re.scaleCurrent),Ae=S.useRef(!0);S.useLayoutEffect(()=>{Z.current&&Ae.current&&(Z.current.scale.set(1/ye,1/ye,1),Ae.current=!1,console.log(Z.current.scale))},[ye]),S.useEffect(()=>{if(r){const re=L0(r);if(re){const fe=U.current,Le=re.matrixAutoUpdate;return re.updateWorldMatrix(!0,!0),re.matrixAutoUpdate=!1,fe.matrix=re.matrix.clone(),fe.children[0].visible=!0,()=>{Le&&(re.matrixAutoUpdate=!0,re.matrix.decompose(re.position,re.quaternion,re.scale))}}}},[r,e,X,ye]),S.useLayoutEffect(()=>{if(c){const re=L0(r,G.current);re&&(re.updateWorldMatrix(!0,!0),Qv.copy(re.matrixWorld).invert(),$u.makeEmpty(),re.traverse(fe=>{!fe.geometry||fe.name==="control"||fe.geometry.name==="control"||(fe.geometry.boundingBox||fe.geometry.computeBoundingBox(),Jl.copy(fe.matrixWorld).premultiply(Qv),FS.copy(fe.geometry.boundingBox),FS.applyMatrix4(Jl),$u.union(FS))}),sB.copy($u.max).add($u.min).multiplyScalar(.5),oB.copy($u.max).sub($u.min).multiplyScalar(.5),aB.copy(oB).multiply(new O(...c)).add(sB),Lee.set(...m).add(aB),Q())}}),S.useEffect(()=>{Z.current&&t&&(Z.current.matrixAutoUpdate=!1,Z.current.matrix.copy(t))},[]);const K=S.useMemo(()=>({onDragStart:re=>{ZI.copy(U.current.matrix),eB.copy(U.current.matrixWorld),s&&s(re),Q()},onDrag:re=>{tB.copy(Z.current.matrixWorld),Qv.copy(tB).invert(),Ra.copy(eB).premultiply(re),Jl.copy(Ra).premultiply(Qv),nB.copy(ZI).invert(),rB.copy(Jl).multiply(nB),l&&(iB.makeRotationFromEuler(N.current.rotation).setPosition(N.current.position).premultiply(Ra),U.current.matrix.copy(Jl));const fe=L0(r);fe&&fe.matrix.copy(Jl);const[Le,Be,Ue]=[new O,new Wn,new O];Ra.decompose(Le,Be,Ue),te(Ue.toArray()),o&&o(Jl,rB,Ra,re),Q()},onDragEnd:()=>{a&&a(),Q(),J(Zo.getState().selected,{worldMatrix:new je().copy(Ra)})},translation:ne,translationLimits:g,rotationLimits:_,axisColors:A,hoveredColor:M,opacity:I,scale:v,lineWidth:y,fixed:x,displayValues:T,depthTest:E,userData:D,annotationsClass:P,object:r}),[r,s,o,a,ne,g,_,E,v,y,x,...A,M,I,T,D,l,P,e,X,t]),Ge=ho(re=>re.scale),We=new O,Se=S.useRef(null),[Me,me]=S.useState(new dy);return S.useLayoutEffect(()=>{const re=X?new fo(X[0],X[1],0):new fo(0,0);re.computeBoundingBox(),re.center();const fe=new dy(re);fe.name="control",me(fe)},[Q,e,X,i,Ge]),S.useEffect(()=>{i&&(Z.current.updateWorldMatrix(!0,!0),Ra.copy(Z.current.matrixWorld).multiply(i),iB.makeRotationFromEuler(N.current.rotation).setPosition(N.current.position).premultiply(Ra))},[i]),gf(re=>{x&&(Dee(N.current.getWorldPosition(We),v,re.camera,re.size),N.current&&(N.current.scale.x!==qv.x||N.current.scale.y!==qv.y||N.current.scale.z!==qv.z)&&(N.current.scale.copy(qv),re.invalidate()))}),S.useImperativeHandle(H,()=>U.current,[]),S.useLayoutEffect(()=>{i&&i instanceof je&&(i&&i instanceof je&&(U.current.matrix=i),U.current.matrix=i)},[i]),L.jsx(Ax.Provider,{value:K,children:L.jsx("group",{name:"transformation",ref:Z,children:L.jsxs("group",{ref:U,matrix:i,matrixAutoUpdate:!1,name:"control",children:[L.jsxs("group",{visible:R,ref:N,position:[V.x,V.y,m[2]],name:"control",children:[!u&&Me&&L.jsxs("mesh",{name:"control",position:[0,0,0],ref:Se,renderOrder:-1,children:[L.jsx("lineSegments",{args:[Me],name:"control"}),L.jsx("lineBasicMaterial",{color:[5,0,1],depthTest:!1})]}),!u&&p[0]&&p[1]&&L.jsx(_ee,{axis:2,dir1:lB,dir2:US,boxSize:X,center:V}),!u&&p[0]&&p[1]&&L.jsx(Aee,{axis:2,dir1:lB,dir2:US,boundb:e,inverseScale:ee,center:V}),L.jsx("group",{position:[0,0,0],children:!z&&n&&[0,1,2,3].map(re=>L.jsx(Cee,{inverseScale:ee,boundb:n,direction:US,axis:0,position:re},re))})]}),L.jsx("group",{ref:G,children:F})]})})})}),Ft={c:null,u:[new O,new O,new O],e:[]},Jt={c:null,u:[new O,new O,new O],e:[]},An=[[],[],[]],gt=[[],[],[]],pn=[],Kl=new O,Yl=new O,Ql=new O,tr=new O,cB=new O,uB=new O,bs=new Rt,dB=new wn,Zv=new je,fB=new je,hB=new bl;class kM{constructor(e=new O,n=new O,r=new Rt){this.center=e,this.halfSize=n,this.rotation=r}set(e,n,r){return this.center=e,this.halfSize=n,this.rotation=r,this}copy(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}clone(){return new this.constructor().copy(this)}getSize(e){return e.copy(this.halfSize).multiplyScalar(2)}clampPoint(e,n){const r=this.halfSize;tr.subVectors(e,this.center),this.rotation.extractBasis(Kl,Yl,Ql),n.copy(this.center);const i=bc.clamp(tr.dot(Kl),-r.x,r.x);n.add(Kl.multiplyScalar(i));const s=bc.clamp(tr.dot(Yl),-r.y,r.y);n.add(Yl.multiplyScalar(s));const o=bc.clamp(tr.dot(Ql),-r.z,r.z);return n.add(Ql.multiplyScalar(o)),n}containsPoint(e){return tr.subVectors(e,this.center),this.rotation.extractBasis(Kl,Yl,Ql),Math.abs(tr.dot(Kl))<=this.halfSize.x&&Math.abs(tr.dot(Yl))<=this.halfSize.y&&Math.abs(tr.dot(Ql))<=this.halfSize.z}intersectsBox3(e){return this.intersectsOBB(Oee.fromBox3(e))}intersectsSphere(e){return this.clampPoint(e.center,uB),uB.distanceToSquared(e.center)<=e.radius*e.radius}intersectsOBB(e,n=Number.EPSILON){Ft.c=this.center,Ft.e[0]=this.halfSize.x,Ft.e[1]=this.halfSize.y,Ft.e[2]=this.halfSize.z,this.rotation.extractBasis(Ft.u[0],Ft.u[1],Ft.u[2]),Jt.c=e.center,Jt.e[0]=e.halfSize.x,Jt.e[1]=e.halfSize.y,Jt.e[2]=e.halfSize.z,e.rotation.extractBasis(Jt.u[0],Jt.u[1],Jt.u[2]);for(let s=0;s<3;s++)for(let o=0;o<3;o++)An[s][o]=Ft.u[s].dot(Jt.u[o]);tr.subVectors(Jt.c,Ft.c),pn[0]=tr.dot(Ft.u[0]),pn[1]=tr.dot(Ft.u[1]),pn[2]=tr.dot(Ft.u[2]);for(let s=0;s<3;s++)for(let o=0;o<3;o++)gt[s][o]=Math.abs(An[s][o])+n;let r,i;for(let s=0;s<3;s++)if(r=Ft.e[s],i=Jt.e[0]*gt[s][0]+Jt.e[1]*gt[s][1]+Jt.e[2]*gt[s][2],Math.abs(pn[s])>r+i)return!1;for(let s=0;s<3;s++)if(r=Ft.e[0]*gt[0][s]+Ft.e[1]*gt[1][s]+Ft.e[2]*gt[2][s],i=Jt.e[s],Math.abs(pn[0]*An[0][s]+pn[1]*An[1][s]+pn[2]*An[2][s])>r+i)return!1;return r=Ft.e[1]*gt[2][0]+Ft.e[2]*gt[1][0],i=Jt.e[1]*gt[0][2]+Jt.e[2]*gt[0][1],!(Math.abs(pn[2]*An[1][0]-pn[1]*An[2][0])>r+i||(r=Ft.e[1]*gt[2][1]+Ft.e[2]*gt[1][1],i=Jt.e[0]*gt[0][2]+Jt.e[2]*gt[0][0],Math.abs(pn[2]*An[1][1]-pn[1]*An[2][1])>r+i)||(r=Ft.e[1]*gt[2][2]+Ft.e[2]*gt[1][2],i=Jt.e[0]*gt[0][1]+Jt.e[1]*gt[0][0],Math.abs(pn[2]*An[1][2]-pn[1]*An[2][2])>r+i)||(r=Ft.e[0]*gt[2][0]+Ft.e[2]*gt[0][0],i=Jt.e[1]*gt[1][2]+Jt.e[2]*gt[1][1],Math.abs(pn[0]*An[2][0]-pn[2]*An[0][0])>r+i)||(r=Ft.e[0]*gt[2][1]+Ft.e[2]*gt[0][1],i=Jt.e[0]*gt[1][2]+Jt.e[2]*gt[1][0],Math.abs(pn[0]*An[2][1]-pn[2]*An[0][1])>r+i)||(r=Ft.e[0]*gt[2][2]+Ft.e[2]*gt[0][2],i=Jt.e[0]*gt[1][1]+Jt.e[1]*gt[1][0],Math.abs(pn[0]*An[2][2]-pn[2]*An[0][2])>r+i)||(r=Ft.e[0]*gt[1][0]+Ft.e[1]*gt[0][0],i=Jt.e[1]*gt[2][2]+Jt.e[2]*gt[2][1],Math.abs(pn[1]*An[0][0]-pn[0]*An[1][0])>r+i)||(r=Ft.e[0]*gt[1][1]+Ft.e[1]*gt[0][1],i=Jt.e[0]*gt[2][2]+Jt.e[2]*gt[2][0],Math.abs(pn[1]*An[0][1]-pn[0]*An[1][1])>r+i)||(r=Ft.e[0]*gt[1][2]+Ft.e[1]*gt[0][2],i=Jt.e[0]*gt[2][1]+Jt.e[1]*gt[2][0],Math.abs(pn[1]*An[0][2]-pn[0]*An[1][2])>r+i))}intersectsPlane(e){this.rotation.extractBasis(Kl,Yl,Ql);const n=this.halfSize.x*Math.abs(e.normal.dot(Kl))+this.halfSize.y*Math.abs(e.normal.dot(Yl))+this.halfSize.z*Math.abs(e.normal.dot(Ql)),r=e.normal.dot(this.center)-e.constant;return Math.abs(r)<=n}intersectRay(e,n){return this.getSize(cB),dB.setFromCenterAndSize(tr.set(0,0,0),cB),Zv.setFromMatrix3(this.rotation),Zv.setPosition(this.center),fB.copy(Zv).invert(),hB.copy(e).applyMatrix4(fB),hB.intersectBox(dB,n)?n.applyMatrix4(Zv):null}intersectsRay(e){return this.intersectRay(e,tr)!==null}fromBox3(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}applyMatrix4(e){const n=e.elements;let r=tr.set(n[0],n[1],n[2]).length();const i=tr.set(n[4],n[5],n[6]).length(),s=tr.set(n[8],n[9],n[10]).length();e.determinant()<0&&(r=-r),bs.setFromMatrix4(e);const a=1/r,l=1/i,c=1/s;return bs.elements[0]*=a,bs.elements[1]*=a,bs.elements[2]*=a,bs.elements[3]*=l,bs.elements[4]*=l,bs.elements[5]*=l,bs.elements[6]*=c,bs.elements[7]*=c,bs.elements[8]*=c,this.rotation.multiply(bs),this.halfSize.x*=r,this.halfSize.y*=i,this.halfSize.z*=s,tr.setFromMatrixPosition(e),this.center.add(tr),this}}const Oee=new kM,Nee=({path:t,color:e,base:n,renderOrder:r,id:i,height:s,worldMatrix:o})=>{const a=S.useRef(null),[l,c]=Zo(P=>[P.selected,P.setSelected]),[u,d]=S.useState(!1);_x(u,"pointer","auto");const[p,m]=S.useState([0,0,0]),[v,y]=S.useState(new O),[x,g]=S.useState([new O,new O,new O,new O]),[_,E]=S.useState(new O),A=Yc(P=>P.is3dModeOn),[M,T]=mf(P=>[P.setIsShown,P.setSelectedSidebar]);return S.useEffect(()=>(c(i),()=>{c("")}),[i,c,T,M]),S.useLayoutEffect(()=>{if(a.current){const P=new wn,I=new wn;a.current.traverse(Q=>{!Q.geometry||Q.name==="control"||Q.geometry.name==="control"||(Q.geometry.boundingBox||Q.geometry.computeBoundingBox(),I.copy(Q.geometry.boundingBox),P.union(I))});const R=new kM().fromBox3(P),{min:D,max:F}=P,X=P.getCenter(new O),z=[new O(X.x-P.min.x,X.y-P.max.y,P.max.z),new O(X.x-P.max.x,X.y-P.max.y,P.max.z),new O(X.x-P.max.x,X.y-P.min.y,P.max.z),new O(X.x-P.min.x,X.y-P.min.y,P.max.z)];E(X),y(R.halfSize),g(z);const V=F.x-D.x,H=F.y-D.y;m([V,H,s])}},[t,n,s]),L.jsx(L.Fragment,{children:L.jsx(wU,{center:_,boundb:v,boxSize:p,activeAxes:l||!A?[!0,!0,!1]:[!1,!1,!1],depthTest:!1,scale:2,visible:l===i,disableSliders:l!==i||A,disableAxes:l!==i||A,disableScale:l!==i||A,box:x,worldMatrix:o,offset:[0,0,s],children:L.jsxs("group",{onClick:P=>{P.stopPropagation(),A||c(i)},onPointerMissed:P=>{P.type==="click"&&l===i&&c("")},renderOrder:r,position:[0,0,s],onPointerOver:()=>d(!0),onPointerOut:()=>d(!1),ref:a,children:[L.jsxs("mesh",{name:"control",children:[L.jsx("boxGeometry",{args:[p[0],p[1],.1]}),L.jsx("meshStandardMaterial",{color:"red",opacity:0,transparent:!0})]}),L.jsx(XI,{path:t,color:e,height:s,extrude:!0,id:i},69),L.jsx(XI,{id:i,path:t,color:e,height:s,extrude:!1})]})})})};PM({TextGeometry:PQ});const Fee=window.pluginVars.pluginUrl,Uee=({text:t,color:e,base:n,height:r,selectedFont:i})=>{const s=wm(`${Fee}templates/dist/fonts/${i}.json`),{color:o,emissive:a,emissiveIntensity:l}=e,c=Yc(p=>p.brightness),u=gm(p=>p.tubeMatching),d=S.useRef(null);return S.useEffect(()=>{console.log(d.current),d.current.center()},[i,t]),L.jsxs(L.Fragment,{children:[L.jsx("textGeometry",{ref:d,args:[i==="vector"?t.toUpperCase():t,{font:s,size:10,height:1,curveSegments:12,bevelEnabled:!0,bevelThickness:0,bevelSize:0,bevelOffset:0}]}),L.jsx("meshStandardMaterial",{attach:"material-0",color:o,emissive:c>0||u?a:"#eeeeee",emissiveIntensity:l*(c/100)+1,toneMapped:!1}),L.jsx("meshBasicMaterial",{attach:"material-1",color:"#eeeeee"})]})},kee=({text:t,_font:e})=>{const n=wm(`./fonts/${e}.json`);return L.jsxs("mesh",{position:[0,0,0],name:"control",children:[L.jsx("textGeometry",{name:"control",args:[t,{font:n,size:11,height:0,curveSegments:12,bevelEnabled:!0,bevelThickness:1,bevelSize:2,bevelOffset:0}]}),L.jsx("meshBasicMaterial",{color:"BLUE",toneMapped:!1,colorWrite:!1})]})},zee=({text:t,base:e,height:n,color:r,renderOrder:i,id:s,font:o,worldMatrix:a})=>{const[l,c]=Zo(I=>[I.selected,I.setSelected]),[u,d]=S.useState(!1);_x(u,"pointer","auto");const[p,m]=S.useState([0,0,0]),[v,y]=S.useState(new O),[x,g]=S.useState([new O,new O,new O,new O]);ho(I=>I.scaleCurrent);const[_,E]=S.useState(new O),A=Yc(I=>I.is3dModeOn),M=S.useRef(null),T=S.useRef(null);S.useEffect(()=>(c(s),()=>{c("")}),[s,c]),S.useLayoutEffect(()=>{if(M.current){const I=new wn,R=new wn;M.current.traverse(Z=>{!Z.geometry||Z.name==="control"||Z.geometry.name==="control"||(Z.geometry.computeBoundingBox(),R.copy(Z.geometry.boundingBox),I.union(R))});const D=new kM().fromBox3(I),{min:F,max:X}=I,z=I.getCenter(new O),V=[new O(z.x-I.min.x,z.y-I.max.y,I.max.z),new O(z.x-I.max.x,z.y-I.max.y,I.max.z),new O(z.x-I.max.x,z.y-I.min.y,I.max.z),new O(z.x-I.min.x,z.y-I.min.y,I.max.z)];E(z),y(D.halfSize),g(V);const H=X.x-F.x,Q=X.y-F.y;m([H,Q,n])}},[t,o,e,A,n]);const P=S.useCallback(I=>{I.stopPropagation(),d(!0)},[]);return L.jsx(L.Fragment,{children:L.jsx(wU,{offset:[0,0,n],boundb:v,boxSize:p,activeAxes:l||!A?[!0,!0,!1]:[!1,!1,!1],depthTest:!1,visible:l===s,disableSliders:l!==s||A,disableAxes:l!==s||A,box:x,worldMatrix:a,disableScale:l!==s||A,center:_,children:L.jsxs("group",{onClick:I=>{I.stopPropagation(),A||c(s)},onPointerMissed:I=>{I.type==="click"&&l===s&&c("")},renderOrder:i,position:[0,0,e?n:0],onPointerOver:P,onPointerOut:I=>{I.stopPropagation(),d(!1)},ref:M,children:[e&&L.jsx(QQ,{name:"control",args:[p[0],p[1],p[2]],position:[_.x,_.y,0],material:new ui({transparent:!0,opacity:0})},t),e&&L.jsx(kee,{_font:o,text:t}),t&&L.jsx("mesh",{position:[0,0,.1],renderOrder:i,ref:T,name:s,children:L.jsx(Uee,{text:t,color:r,base:e,height:n,selectedFont:o})})]})})})},Hee=t=>[t.is3dModeOn,t.isRullerOn],Gee=t=>[t.textsAndModels,t.removeText],$ee=()=>{const[t,e]=Kc(Gee);cn(y=>y.invalidate);const[n,r,i,s,o,a,l]=ho(y=>[y.isCustom,y.setBoardSize,y.setSmallestBoardCitizen,y.scaleCoefficient,y.scale,y.setScale,y.setScaleCurrent]),c=S.useRef(null),[u,d]=Yc(Hee),[p]=Zo(y=>[y.selected]),[m,v]=ho(y=>[y.boardCenter,y.boardSize]);return S.useEffect(()=>{const y=x=>{(x.key==="Backspace"||x.key==="Delete")&&x.srcElement.tagName!=="INPUT"&&e(Zo.getState().selected)};return document.addEventListener("keyup",y),()=>{document.removeEventListener("keyup",y)}},[e]),S.useLayoutEffect(()=>{if(c.current){if(o===0)return;const{x:y,y:x,z:g}=c.current.scale;c.current.scale.set(y*o,x*o,1),c.current.updateWorldMatrix(!0,!0),l(new O().setFromMatrixScale(c.current.matrix).x)}},[o,l]),S.useLayoutEffect(()=>{t.length===0&&l(1)},[t]),S.useLayoutEffect(()=>{if(a(0,300),c.current){const y=new wn,x=[];c.current.traverse(E=>{if(!E.geometry||E.name==="control"||E.geometry.name==="control")return;const A=new wn().setFromObject(E);if(E.name!==""){const M=A.getSize(new O),T=Math.min(Math.round(M.x),Math.round(M.y));x.push(T>=10?T:10)}y.union(A)}),i(x);const g=y.getSize(new O),_=y.getCenter(new O);r(_,g.toArray())}},[t,p,r,n,i,a,o]),L.jsxs(L.Fragment,{children:[L.jsx("color",{attach:"background",args:["#000000"]}),L.jsx(pee,{children:L.jsx(fee,{luminanceThreshold:1,opacity:.3,intensity:3,levels:4,radius:.6,kernelSize:Zc.MEDIUM,mipmapBlur:!0,luminanceSmoothing:.1})}),u&&L.jsx(JQ,{makeDefault:!0,minAzimuthAngle:-1,maxAzimuthAngle:1,maxDistance:170,minDistance:50,target:m}),!u&&L.jsx(KQ,{children:L.jsx(gee,{})}),L.jsx(vee,{}),d&&L.jsxs("group",{children:[L.jsx(ic,{color:"white",points:[[m.x-v[0]/2-4,m.y+v[1]/2,0],[m.x-v[0]/2-3,m.y+v[1]/2,0]]}),L.jsx(ic,{color:"white",points:[[m.x-v[0]/2-4,m.y-v[1]/2,0],[m.x-v[0]/2-3,m.y-v[1]/2,0]]}),L.jsx(ic,{color:"white",points:[[m.x+v[0]/2,m.y-v[1]/2-4,0],[m.x+v[0]/2,m.y-v[1]/2-3,0]]}),L.jsx(ic,{color:"white",points:[[m.x-v[0]/2,m.y-v[1]/2-4,0],[m.x-v[0]/2,m.y-v[1]/2-3,0]]}),L.jsx(ic,{color:"white",points:[[m.x-v[0]/2-4,m.y+v[1]/2,0],[m.x-v[0]/2-4,m.y-v[1]/2,0]]}),L.jsx(ic,{color:"white",points:[[m.x+v[0]/2,m.y-v[1]/2-4,0],[m.x-v[0]/2,m.y-v[1]/2-4,0]]}),L.jsx(Rp,{transform:!0,center:!0,position:[m.x-v[0]/2-12,m.y,0],scale:10,className:"text-white",children:L.jsx("div",{children:Math.floor(v[1])+" cm"})}),L.jsx(Rp,{transform:!0,center:!0,position:[m.x,m.y-v[1]/2-8,0],scale:10,className:"text-white",children:L.jsx("div",{children:Math.floor(v[0])+" cm"})})]}),L.jsx(S.Suspense,{fallback:null,children:t.length>0&&L.jsx("group",{position:[0,0,0],ref:c,children:L.jsx(L.Fragment,{children:t.map(y=>"text"in y?L.jsx(zee,{text:y.text,id:y.id,base:!0,height:y.height,color:y.color,renderOrder:y.renderOrder,font:y.font,worldMatrix:y.worldMatrix},y.id):L.jsx(Nee,{path:y.path,color:y.color,base:!0,renderOrder:y.renderOrder,id:y.id,height:y.height,worldMatrix:y.worldMatrix},y.id))})})})]})};function Gt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Tl(t,e=[]){let n=[];function r(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:p,children:m,...v}=d,y=(p==null?void 0:p[t][l])||a,x=S.useMemo(()=>v,Object.values(v));return S.createElement(y.Provider,{value:x},m)}function u(d,p){const m=(p==null?void 0:p[t][l])||a,v=S.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Vee(i,...e)]}function Vee(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Wee(t){const e=t+"CollectionProvider",[n,r]=Tl(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,x=vt.useRef(null),g=vt.useRef(new Map).current;return vt.createElement(i,{scope:v,itemMap:g,collectionRef:x},y)},a=t+"CollectionSlot",l=vt.forwardRef((m,v)=>{const{scope:y,children:x}=m,g=s(a,y),_=Fn(v,g.collectionRef);return vt.createElement(Fc,{ref:_},x)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=vt.forwardRef((m,v)=>{const{scope:y,children:x,...g}=m,_=vt.useRef(null),E=Fn(v,_),A=s(c,y);return vt.useEffect(()=>(A.itemMap.set(_,{ref:_,...g}),()=>void A.itemMap.delete(_))),vt.createElement(Fc,{[u]:"",ref:E},x)});function p(m){const v=s(t+"CollectionConsumer",m);return vt.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const g=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((A,M)=>g.indexOf(A.ref.current)-g.indexOf(M.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},p,r]}const $o=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},jee=rH["useId".toString()]||(()=>{});let Xee=0;function Rd(t){const[e,n]=S.useState(jee());return $o(()=>{t||n(r=>r??String(Xee++))},[t]),t||(e?`radix-${e}`:"")}const Jee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],In=Jee.reduce((t,e)=>{const n=S.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Fc:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(a,Re({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Kee(t,e){t&&vo.flushSync(()=>t.dispatchEvent(e))}function $n(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function bx({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Yee({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=$n(n),l=S.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[s,t,i,a]);return[o,l]}function Yee({defaultProp:t,onChange:e}){const n=S.useState(t),[r]=n,i=S.useRef(r),s=$n(e);return S.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const Qee=S.createContext(void 0);function zM(t){const e=S.useContext(Qee);return t||e||"ltr"}const kS="rovingFocusGroup.onEntryFocus",qee={bubbles:!1,cancelable:!0},HM="RovingFocusGroup",[ZE,EU,Zee]=Wee(HM),[ete,AU]=Tl(HM,[Zee]),[tte,nte]=ete(HM),rte=S.forwardRef((t,e)=>S.createElement(ZE.Provider,{scope:t.__scopeRovingFocusGroup},S.createElement(ZE.Slot,{scope:t.__scopeRovingFocusGroup},S.createElement(ite,Re({},t,{ref:e}))))),ite=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=t,d=S.useRef(null),p=Fn(e,d),m=zM(s),[v=null,y]=bx({prop:o,defaultProp:a,onChange:l}),[x,g]=S.useState(!1),_=$n(c),E=EU(n),A=S.useRef(!1),[M,T]=S.useState(0);return S.useEffect(()=>{const P=d.current;if(P)return P.addEventListener(kS,_),()=>P.removeEventListener(kS,_)},[_]),S.createElement(tte,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:v,onItemFocus:S.useCallback(P=>y(P),[y]),onItemShiftTab:S.useCallback(()=>g(!0),[]),onFocusableItemAdd:S.useCallback(()=>T(P=>P+1),[]),onFocusableItemRemove:S.useCallback(()=>T(P=>P-1),[])},S.createElement(In.div,Re({tabIndex:x||M===0?-1:0,"data-orientation":r},u,{ref:p,style:{outline:"none",...t.style},onMouseDown:Gt(t.onMouseDown,()=>{A.current=!0}),onFocus:Gt(t.onFocus,P=>{const I=!A.current;if(P.target===P.currentTarget&&I&&!x){const R=new CustomEvent(kS,qee);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const D=E().filter(H=>H.focusable),F=D.find(H=>H.active),X=D.find(H=>H.id===v),V=[F,X,...D].filter(Boolean).map(H=>H.ref.current);bU(V)}}A.current=!1}),onBlur:Gt(t.onBlur,()=>g(!1))})))}),ste="RovingFocusGroupItem",ote=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Rd(),l=s||a,c=nte(ste,n),u=c.currentTabStopId===l,d=EU(n),{onFocusableItemAdd:p,onFocusableItemRemove:m}=c;return S.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),S.createElement(ZE.ItemSlot,{scope:n,id:l,focusable:r,active:i},S.createElement(In.span,Re({tabIndex:u?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:Gt(t.onMouseDown,v=>{r?c.onItemFocus(l):v.preventDefault()}),onFocus:Gt(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Gt(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=cte(v,c.orientation,c.dir);if(y!==void 0){v.preventDefault();let g=d().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")g.reverse();else if(y==="prev"||y==="next"){y==="prev"&&g.reverse();const _=g.indexOf(v.currentTarget);g=c.loop?ute(g,_+1):g.slice(_+1)}setTimeout(()=>bU(g))}})})))}),ate={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lte(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function cte(t,e,n){const r=lte(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ate[r]}function bU(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function ute(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const dte=rte,fte=ote;function hte(t,e){return S.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const yi=t=>{const{present:e,children:n}=t,r=pte(e),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),s=Fn(r.ref,i.ref);return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};yi.displayName="Presence";function pte(t){const[e,n]=S.useState(),r=S.useRef({}),i=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=hte(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=e0(r.current);s.current=a==="mounted"?c:"none"},[a]),$o(()=>{const c=r.current,u=i.current;if(u!==t){const p=s.current,m=e0(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),$o(()=>{if(e){const c=d=>{const m=e0(r.current).includes(d.animationName);d.target===e&&m&&vo.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=e0(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function e0(t){return(t==null?void 0:t.animationName)||"none"}const MU="Tabs",[mte,sde]=Tl(MU,[AU]),CU=AU(),[gte,GM]=mte(MU),vte=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=zM(a),[d,p]=bx({prop:r,onChange:i,defaultProp:s});return S.createElement(gte,{scope:n,baseId:Rd(),value:d,onValueChange:p,orientation:o,dir:u,activationMode:l},S.createElement(In.div,Re({dir:u,"data-orientation":o},c,{ref:e})))}),yte="TabsList",xte=S.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=GM(yte,n),o=CU(n);return S.createElement(dte,Re({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),S.createElement(In.div,Re({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),_te="TabsTrigger",Ste=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=GM(_te,n),a=CU(n),l=TU(o.baseId,r),c=RU(o.baseId,r),u=r===o.value;return S.createElement(fte,Re({asChild:!0},a,{focusable:!i,active:u}),S.createElement(In.button,Re({type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:Gt(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Gt(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Gt(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})))}),wte="TabsContent",Ete=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=GM(wte,n),l=TU(a.baseId,r),c=RU(a.baseId,r),u=r===a.value,d=S.useRef(u);return S.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),S.createElement(yi,{present:i||u},({present:p})=>S.createElement(In.div,Re({"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0}}),p&&s))});function TU(t,e){return`${t}-trigger-${e}`}function RU(t,e){return`${t}-content-${e}`}const Ate=vte,PU=xte,IU=Ste,BU=Ete,bte=Ate,DU=S.forwardRef(({className:t,...e},n)=>L.jsx(PU,{ref:n,className:Pt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));DU.displayName=PU.displayName;const LU=S.forwardRef(({className:t,...e},n)=>L.jsx(IU,{ref:n,className:Pt('relative inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 py-1.5 text-sm font-bold transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50  data-[state=active]:text-primarypink data-[state=active]:after:bg-primarypink after:absolute after:content-[""] after:left-0 after:right-0 after:h-0.5 after:bg-transparent hover:after:bg-primarypink after:rounded-t-sm after:-bottom-1',t),...e}));LU.displayName=IU.displayName;const OU=S.forwardRef(({className:t,...e},n)=>L.jsx(BU,{ref:n,className:Pt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));OU.displayName=BU.displayName;const eA="horizontal",Mte=["horizontal","vertical"],NU=S.forwardRef((t,e)=>{const{decorative:n,orientation:r=eA,...i}=t,s=FU(r)?r:eA,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return S.createElement(In.div,Re({"data-orientation":s},a,i,{ref:e}))});NU.propTypes={orientation(t,e,n){const r=t[e],i=String(r);return r&&!FU(r)?new Error(Cte(i,n)):null}};function Cte(t,e){return`Invalid prop \`orientation\` of value \`${t}\` supplied to \`${e}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${eA}\`.`}function FU(t){return Mte.includes(t)}const UU=NU,tA=S.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>L.jsx(UU,{ref:i,decorative:n,orientation:e,className:Pt("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));tA.displayName=UU.displayName;const Tte=vt.createContext({}),kU=!0;function Rte({baseColor:t,highlightColor:e,width:n,height:r,borderRadius:i,circle:s,direction:o,duration:a,enableAnimation:l=kU}){const c={};return o==="rtl"&&(c["--animation-direction"]="reverse"),typeof a=="number"&&(c["--animation-duration"]=`${a}s`),l||(c["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(c.width=n),(typeof r=="string"||typeof r=="number")&&(c.height=r),(typeof i=="string"||typeof i=="number")&&(c.borderRadius=i),s&&(c.borderRadius="50%"),typeof t<"u"&&(c["--base-color"]=t),typeof e<"u"&&(c["--highlight-color"]=e),c}function Pte({count:t=1,wrapper:e,className:n,containerClassName:r,containerTestId:i,circle:s=!1,style:o,...a}){var l,c,u;const d=vt.useContext(Tte),p={...a};for(const[E,A]of Object.entries(a))typeof A>"u"&&delete p[E];const m={...d,...p,circle:s},v={...o,...Rte(m)};let y="react-loading-skeleton";n&&(y+=` ${n}`);const x=(l=m.inline)!==null&&l!==void 0?l:!1,g=[],_=Math.ceil(t);for(let E=0;E<_;E++){let A=v;if(_>t&&E===_-1){const T=(c=A.width)!==null&&c!==void 0?c:"100%",P=t%1,I=typeof T=="number"?T*P:`calc(${T} * ${P})`;A={...A,width:I}}const M=vt.createElement("span",{className:y,style:A,key:E},"");x?g.push(M):g.push(vt.createElement(vt.Fragment,{key:E},M,vt.createElement("br",null)))}return vt.createElement("span",{className:r,"data-testid":i,"aria-live":"polite","aria-busy":(u=m.enableAnimation)!==null&&u!==void 0?u:kU},e?g.map((E,A)=>vt.createElement(e,{key:A},E)):g)}const Ite=t=>t.setUrl,Bte=({photo:t})=>{const e=vm(Ite),[n,r]=S.useState(!1),[i,s]=S.useState(!1),o=S.useCallback(()=>{s(!0),fetch(t+".jpg").then(a=>{r(a.ok)}).catch(()=>{r(!1)}).finally(()=>s(!1))},[t]);return S.useEffect(()=>{o()},[]),L.jsx("button",{className:"overflow-hidden",onClick:()=>{e(n?t+".jpg":t+".png")},children:i?L.jsx("div",{children:L.jsx(Pte,{containerClassName:"flex-1",height:180,width:180})}):L.jsx("img",{className:"w-[180px] h-[180px] object-center object-cover  hover:scale-110 duration-300",src:n?t+".jpg":t+".png"})})};function Dte(t,[e,n]){return Math.min(n,Math.max(e,t))}function Lte(t,e){return S.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const zU="ScrollArea",[HU,ode]=Tl(zU),[Ote,ds]=HU(zU),Nte=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,l]=S.useState(null),[c,u]=S.useState(null),[d,p]=S.useState(null),[m,v]=S.useState(null),[y,x]=S.useState(null),[g,_]=S.useState(0),[E,A]=S.useState(0),[M,T]=S.useState(!1),[P,I]=S.useState(!1),R=Fn(e,F=>l(F)),D=zM(i);return S.createElement(Ote,{scope:n,type:r,dir:D,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:p,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:M,onScrollbarXEnabledChange:T,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:P,onScrollbarYEnabledChange:I,onCornerWidthChange:_,onCornerHeightChange:A},S.createElement(In.div,Re({dir:D},o,{ref:R,style:{position:"relative",["--radix-scroll-area-corner-width"]:g+"px",["--radix-scroll-area-corner-height"]:E+"px",...t.style}})))}),Fte="ScrollAreaViewport",Ute=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,...i}=t,s=ds(Fte,n),o=S.useRef(null),a=Fn(e,o,s.onViewportChange);return S.createElement(S.Fragment,null,S.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),S.createElement(In.div,Re({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t.style}}),S.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),aa="ScrollAreaScrollbar",GU=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ds(aa,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return S.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?S.createElement(kte,Re({},r,{ref:e,forceMount:n})):i.type==="scroll"?S.createElement(zte,Re({},r,{ref:e,forceMount:n})):i.type==="auto"?S.createElement($U,Re({},r,{ref:e,forceMount:n})):i.type==="always"?S.createElement($M,Re({},r,{ref:e})):null}),kte=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ds(aa,t.__scopeScrollArea),[s,o]=S.useState(!1);return S.useEffect(()=>{const a=i.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),S.createElement(yi,{present:n||s},S.createElement($U,Re({"data-state":s?"visible":"hidden"},r,{ref:e})))}),zte=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ds(aa,t.__scopeScrollArea),s=t.orientation==="horizontal",o=Cx(()=>l("SCROLL_END"),100),[a,l]=Lte("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),S.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const p=()=>{const m=c[u];d!==m&&(l("SCROLL"),o()),d=m};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[i.viewport,s,l,o]),S.createElement(yi,{present:n||a!=="hidden"},S.createElement($M,Re({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:e,onPointerEnter:Gt(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Gt(t.onPointerLeave,()=>l("POINTER_LEAVE"))})))}),$U=S.forwardRef((t,e)=>{const n=ds(aa,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=S.useState(!1),a=t.orientation==="horizontal",l=Cx(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return qd(n.viewport,l),qd(n.content,l),S.createElement(yi,{present:r||s},S.createElement($M,Re({"data-state":s?"visible":"hidden"},i,{ref:e})))}),$M=S.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ds(aa,t.__scopeScrollArea),s=S.useRef(null),o=S.useRef(0),[a,l]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=XU(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function d(p,m){return Jte(p,o.current,a,m)}return n==="horizontal"?S.createElement(Hte,Re({},u,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollLeft,m=pB(p,a,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=d(p,i.dir))}})):n==="vertical"?S.createElement(Gte,Re({},u,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollTop,m=pB(p,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=d(p))}})):null}),Hte=S.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=ds(aa,t.__scopeScrollArea),[o,a]=S.useState(),l=S.useRef(null),c=Fn(e,l,s.onScrollbarXChange);return S.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),S.createElement(WU,Re({"data-orientation":"horizontal"},i,{ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,["--radix-scroll-area-thumb-width"]:Mx(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const p=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(p),KU(p,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:my(o.paddingLeft),paddingEnd:my(o.paddingRight)}})}}))}),Gte=S.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=ds(aa,t.__scopeScrollArea),[o,a]=S.useState(),l=S.useRef(null),c=Fn(e,l,s.onScrollbarYChange);return S.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),S.createElement(WU,Re({"data-orientation":"vertical"},i,{ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)",["--radix-scroll-area-thumb-height"]:Mx(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const p=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(p),KU(p,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:my(o.paddingTop),paddingEnd:my(o.paddingBottom)}})}}))}),[$te,VU]=HU(aa),WU=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...p}=t,m=ds(aa,n),[v,y]=S.useState(null),x=Fn(e,R=>y(R)),g=S.useRef(null),_=S.useRef(""),E=m.viewport,A=r.content-r.viewport,M=$n(u),T=$n(l),P=Cx(d,10);function I(R){if(g.current){const D=R.clientX-g.current.left,F=R.clientY-g.current.top;c({x:D,y:F})}}return S.useEffect(()=>{const R=D=>{const F=D.target;(v==null?void 0:v.contains(F))&&M(D,A)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[E,v,A,M]),S.useEffect(T,[r,T]),qd(v,P),qd(m.content,P),S.createElement($te,{scope:n,scrollbar:v,hasThumb:i,onThumbChange:$n(s),onThumbPointerUp:$n(o),onThumbPositionChange:T,onThumbPointerDown:$n(a)},S.createElement(In.div,Re({},p,{ref:x,style:{position:"absolute",...p.style},onPointerDown:Gt(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),g.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I(R))}),onPointerMove:Gt(t.onPointerMove,I),onPointerUp:Gt(t.onPointerUp,R=>{const D=R.target;D.hasPointerCapture(R.pointerId)&&D.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=_.current,g.current=null})})))}),nA="ScrollAreaThumb",Vte=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=VU(nA,t.__scopeScrollArea);return S.createElement(yi,{present:n||i.hasThumb},S.createElement(Wte,Re({ref:e},r)))}),Wte=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=ds(nA,n),o=VU(nA,n),{onThumbPositionChange:a}=o,l=Fn(e,d=>o.onThumbChange(d)),c=S.useRef(),u=Cx(()=>{c.current&&(c.current(),c.current=void 0)},100);return S.useEffect(()=>{const d=s.viewport;if(d){const p=()=>{if(u(),!c.current){const m=Kte(d,a);c.current=m,a()}};return a(),d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[s.viewport,u,a]),S.createElement(In.div,Re({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Gt(t.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),v=d.clientX-m.left,y=d.clientY-m.top;o.onThumbPointerDown({x:v,y})}),onPointerUp:Gt(t.onPointerUp,o.onThumbPointerUp)}))}),jU="ScrollAreaCorner",jte=S.forwardRef((t,e)=>{const n=ds(jU,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?S.createElement(Xte,Re({},t,{ref:e})):null}),Xte=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ds(jU,n),[s,o]=S.useState(0),[a,l]=S.useState(0),c=!!(s&&a);return qd(i.scrollbarX,()=>{var u;const d=((u=i.scrollbarX)===null||u===void 0?void 0:u.offsetHeight)||0;i.onCornerHeightChange(d),l(d)}),qd(i.scrollbarY,()=>{var u;const d=((u=i.scrollbarY)===null||u===void 0?void 0:u.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),c?S.createElement(In.div,Re({},r,{ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}})):null});function my(t){return t?parseInt(t,10):0}function XU(t,e){const n=t/e;return isNaN(n)?0:n}function Mx(t){const e=XU(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Jte(t,e,n,r="ltr"){const i=Mx(n),s=i/2,o=e||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return JU([l,c],d)(t)}function pB(t,e,n="ltr"){const r=Mx(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],c=Dte(t,l);return JU([0,o],[0,a])(c)}function JU(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function KU(t,e){return t>0&&t<e}const Kte=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Cx(t,e){const n=$n(t),r=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),S.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function qd(t,e){const n=$n(e);$o(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}const YU=Nte,Yte=Ute,Qte=jte,eu=S.forwardRef(({className:t,children:e,...n},r)=>L.jsxs(YU,{ref:r,className:Pt("relative overflow-hidden",t),...n,children:[L.jsx(Yte,{className:"h-full w-full rounded-[inherit]",children:e}),L.jsx(QU,{}),L.jsx(Qte,{})]}));eu.displayName=YU.displayName;const QU=S.forwardRef(({className:t,orientation:e="vertical",...n},r)=>L.jsx(GU,{ref:r,orientation:e,className:Pt("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 border-t border-t-transparent p-[1px]",t),...n,children:L.jsx(Vte,{className:"relative flex-1 rounded-full bg-border"})}));QU.displayName=GU.displayName;const qU=window.pluginVars.backgrounds,VM=qU.filter(t=>t.type==="bussiness"),WM=qU.filter(t=>t.type==="personal"),qte=[...VM,...WM];console.log(VM,WM);const Zte={all:qte,bussiness:VM,personal:WM},ene=()=>{const[t,e]=S.useState("all"),n=vm(r=>r.url);return L.jsxs("div",{className:"w-full",children:[L.jsxs("div",{className:"flex justify-between",children:[L.jsx("h1",{children:"Filter:"}),L.jsxs("div",{className:"flex gap-2 text-sm ",children:[L.jsx("button",{onClick:()=>e("all"),className:Pt("hover:underline hover:text-primarypink underline-offset-2",t==="all"&&"underline text-primarypink"),children:"All"}),L.jsx(tA,{orientation:"vertical"}),L.jsx("button",{onClick:()=>e("bussiness"),className:Pt("hover:underline hover:text-primarypink underline-offset-2",t==="bussiness"&&"underline text-primarypink"),children:"For Business Use"}),L.jsx(tA,{orientation:"vertical"}),L.jsx("button",{onClick:()=>e("personal"),className:Pt("hover:underline hover:text-primarypink underline-offset-2",t==="personal"&&"underline text-primarypink"),children:"For Personal Use"})]})]}),L.jsx(eu,{className:Pt("w-full h-[60vh] 2xl:h-[70vh] p-3",n!=="./bg.jpg"&&"h-[50vh] 2xl:h-[60vh]"),children:L.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:Zte[t].map(r=>L.jsx(Bte,{photo:r},r))})})]})};function vf(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function yf(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function mB(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function gB(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var tne=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Em(t,e){var n=nne(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function nne(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),i=tne.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var rne=[".DS_Store","Thumbs.db"];function ine(t){return vf(this,void 0,void 0,function(){return yf(this,function(e){return gy(t)&&sne(t.dataTransfer)?[2,cne(t.dataTransfer,t.type)]:one(t)?[2,ane(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,lne(t)]:[2,[]]})})}function sne(t){return gy(t)}function one(t){return gy(t)&&gy(t.target)}function gy(t){return typeof t=="object"&&t!==null}function ane(t){return rA(t.target.files).map(function(e){return Em(e)})}function lne(t){return vf(this,void 0,void 0,function(){var e;return yf(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return Em(r)})]}})})}function cne(t,e){return vf(this,void 0,void 0,function(){var n,r;return yf(this,function(i){switch(i.label){case 0:return t.items?(n=rA(t.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(une))]):[3,2];case 1:return r=i.sent(),[2,vB(ZU(r))];case 2:return[2,vB(rA(t.files).map(function(s){return Em(s)}))]}})})}function vB(t){return t.filter(function(e){return rne.indexOf(e.name)===-1})}function rA(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function une(t){if(typeof t.webkitGetAsEntry!="function")return yB(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?ek(e):yB(t)}function ZU(t){return t.reduce(function(e,n){return gB(gB([],mB(e),!1),mB(Array.isArray(n)?ZU(n):[n]),!1)},[])}function yB(t){var e=t.getAsFile();if(!e)return Promise.reject("".concat(t," is not a File"));var n=Em(e);return Promise.resolve(n)}function dne(t){return vf(this,void 0,void 0,function(){return yf(this,function(e){return[2,t.isDirectory?ek(t):fne(t)]})})}function ek(t){var e=t.createReader();return new Promise(function(n,r){var i=[];function s(){var o=this;e.readEntries(function(a){return vf(o,void 0,void 0,function(){var l,c,u;return yf(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=d.sent(),n(l),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(dne)),i.push(u),s(),d.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function fne(t){return vf(this,void 0,void 0,function(){return yf(this,function(e){return[2,new Promise(function(n,r){t.file(function(i){var s=Em(i,t.fullPath);n(s)},function(i){r(i)})})]})})}var hne=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function xB(t){return gne(t)||mne(t)||nk(t)||pne()}function pne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mne(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gne(t){if(Array.isArray(t))return iA(t)}function _B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_B(Object(n),!0).forEach(function(r){tk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_B(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tk(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ip(t,e){return xne(t)||yne(t,e)||nk(t,e)||vne()}function vne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nk(t,e){if(t){if(typeof t=="string")return iA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iA(t,e)}}function iA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yne(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function xne(t){if(Array.isArray(t))return t}var _ne="file-invalid-type",Sne="file-too-large",wne="file-too-small",Ene="too-many-files",Ane=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:_ne,message:"File type must be ".concat(n)}},wB=function(e){return{code:Sne,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},EB=function(e){return{code:wne,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},bne={code:Ene,message:"Too many files"};function rk(t,e){var n=t.type==="application/x-moz-file"||hne(t,e);return[n,n?null:Ane(e)]}function ik(t,e,n){if(uc(t.size))if(uc(e)&&uc(n)){if(t.size>n)return[!1,wB(n)];if(t.size<e)return[!1,EB(e)]}else{if(uc(e)&&t.size<e)return[!1,EB(e)];if(uc(n)&&t.size>n)return[!1,wB(n)]}return[!0,null]}function uc(t){return t!=null}function Mne(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,a=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(l){var c=rk(l,n),u=Ip(c,1),d=u[0],p=ik(l,r,i),m=Ip(p,1),v=m[0],y=a?a(l):null;return d&&v&&!y})}function vy(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function t0(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function AB(t){t.preventDefault()}function Cne(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function Tne(t){return t.indexOf("Edge/")!==-1}function Rne(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Cne(t)||Tne(t)}function no(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!vy(r)&&a&&a.apply(void 0,[r].concat(s)),vy(r)})}}function Pne(){return"showOpenFilePicker"in window}function Ine(t){if(uc(t)){var e=Object.entries(t).filter(function(n){var r=Ip(n,2),i=r[0],s=r[1],o=!0;return sk(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(ok))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=Ip(r,2),s=i[0],o=i[1];return SB(SB({},n),{},tk({},s,o))},{});return[{description:"Files",accept:e}]}return t}function Bne(t){if(uc(t))return Object.entries(t).reduce(function(e,n){var r=Ip(n,2),i=r[0],s=r[1];return[].concat(xB(e),[i],xB(s))},[]).filter(function(e){return sk(e)||ok(e)}).join(",")}function Dne(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function Lne(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function sk(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||/\w+\/[-+.\w]+/g.test(t)}function ok(t){return/^.*\.[\w]+$/.test(t)}var One=["children"],Nne=["open"],Fne=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Une=["refKey","onChange","onClick"];function kne(t){return Gne(t)||Hne(t)||ak(t)||zne()}function zne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hne(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gne(t){if(Array.isArray(t))return sA(t)}function zS(t,e){return Wne(t)||Vne(t,e)||ak(t,e)||$ne()}function $ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ak(t,e){if(t){if(typeof t=="string")return sA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sA(t,e)}}function sA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vne(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function Wne(t){if(Array.isArray(t))return t}function bB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bB(Object(n),!0).forEach(function(r){oA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yy(t,e){if(t==null)return{};var n=jne(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Tx=S.forwardRef(function(t,e){var n=t.children,r=yy(t,One),i=Jne(r),s=i.open,o=yy(i,Nne);return S.useImperativeHandle(e,function(){return{open:s}},[s]),vt.createElement(S.Fragment,null,n(bn(bn({},o),{},{open:s})))});Tx.displayName="Dropzone";var lk={disabled:!1,getFilesFromEvent:ine,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Tx.defaultProps=lk;Tx.propTypes={children:ln.func,accept:ln.objectOf(ln.arrayOf(ln.string)),multiple:ln.bool,preventDropOnDocument:ln.bool,noClick:ln.bool,noKeyboard:ln.bool,noDrag:ln.bool,noDragEventsBubbling:ln.bool,minSize:ln.number,maxSize:ln.number,maxFiles:ln.number,disabled:ln.bool,getFilesFromEvent:ln.func,onFileDialogCancel:ln.func,onFileDialogOpen:ln.func,useFsAccessApi:ln.bool,autoFocus:ln.bool,onDragEnter:ln.func,onDragLeave:ln.func,onDragOver:ln.func,onDrop:ln.func,onDropAccepted:ln.func,onDropRejected:ln.func,onError:ln.func,validator:ln.func};const Xne=Tx;var aA={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Jne(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=bn(bn({},lk),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,d=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,y=e.onFileDialogCancel,x=e.onFileDialogOpen,g=e.useFsAccessApi,_=e.autoFocus,E=e.preventDropOnDocument,A=e.noClick,M=e.noKeyboard,T=e.noDrag,P=e.noDragEventsBubbling,I=e.onError,R=e.validator,D=S.useMemo(function(){return Bne(n)},[n]),F=S.useMemo(function(){return Ine(n)},[n]),X=S.useMemo(function(){return typeof x=="function"?x:MB},[x]),z=S.useMemo(function(){return typeof y=="function"?y:MB},[y]),V=S.useRef(null),H=S.useRef(null),Q=S.useReducer(Kne,aA),Z=zS(Q,2),U=Z[0],N=Z[1],G=U.isFocused,ne=U.isFileDialogActive,J=S.useRef(typeof window<"u"&&window.isSecureContext&&g&&Pne()),ee=function(){!J.current&&ne&&setTimeout(function(){if(H.current){var ce=H.current.files;ce.length||(N({type:"closeDialog"}),z())}},300)};S.useEffect(function(){return window.addEventListener("focus",ee,!1),function(){window.removeEventListener("focus",ee,!1)}},[H,ne,z,J]);var te=S.useRef([]),ye=function(ce){V.current&&V.current.contains(ce.target)||(ce.preventDefault(),te.current=[])};S.useEffect(function(){return E&&(document.addEventListener("dragover",AB,!1),document.addEventListener("drop",ye,!1)),function(){E&&(document.removeEventListener("dragover",AB),document.removeEventListener("drop",ye))}},[V,E]),S.useEffect(function(){return!r&&_&&V.current&&V.current.focus(),function(){}},[V,_,r]);var Ae=S.useCallback(function(Y){I?I(Y):console.error(Y)},[I]),K=S.useCallback(function(Y){Y.preventDefault(),Y.persist(),Ye(Y),te.current=[].concat(kne(te.current),[Y.target]),t0(Y)&&Promise.resolve(i(Y)).then(function(ce){if(!(vy(Y)&&!P)){var we=ce.length,Te=we>0&&Mne({files:ce,accept:D,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:R}),Qe=we>0&&!Te;N({isDragAccept:Te,isDragReject:Qe,isDragActive:!0,type:"setDraggedFiles"}),c&&c(Y)}}).catch(function(ce){return Ae(ce)})},[i,c,Ae,P,D,o,s,a,l,R]),Ge=S.useCallback(function(Y){Y.preventDefault(),Y.persist(),Ye(Y);var ce=t0(Y);if(ce&&Y.dataTransfer)try{Y.dataTransfer.dropEffect="copy"}catch{}return ce&&d&&d(Y),!1},[d,P]),We=S.useCallback(function(Y){Y.preventDefault(),Y.persist(),Ye(Y);var ce=te.current.filter(function(Te){return V.current&&V.current.contains(Te)}),we=ce.indexOf(Y.target);we!==-1&&ce.splice(we,1),te.current=ce,!(ce.length>0)&&(N({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),t0(Y)&&u&&u(Y))},[V,u,P]),Se=S.useCallback(function(Y,ce){var we=[],Te=[];Y.forEach(function(Qe){var ze=rk(Qe,D),ve=zS(ze,2),Je=ve[0],q=ve[1],ge=ik(Qe,o,s),be=zS(ge,2),Pe=be[0],nt=be[1],ut=R?R(Qe):null;if(Je&&Pe&&!ut)we.push(Qe);else{var $t=[q,nt];ut&&($t=$t.concat(ut)),Te.push({file:Qe,errors:$t.filter(function(ie){return ie})})}}),(!a&&we.length>1||a&&l>=1&&we.length>l)&&(we.forEach(function(Qe){Te.push({file:Qe,errors:[bne]})}),we.splice(0)),N({acceptedFiles:we,fileRejections:Te,type:"setFiles"}),p&&p(we,Te,ce),Te.length>0&&v&&v(Te,ce),we.length>0&&m&&m(we,ce)},[N,a,D,o,s,l,p,m,v,R]),Me=S.useCallback(function(Y){Y.preventDefault(),Y.persist(),Ye(Y),te.current=[],t0(Y)&&Promise.resolve(i(Y)).then(function(ce){vy(Y)&&!P||Se(ce,Y)}).catch(function(ce){return Ae(ce)}),N({type:"reset"})},[i,Se,Ae,P]),me=S.useCallback(function(){if(J.current){N({type:"openDialog"}),X();var Y={multiple:a,types:F};window.showOpenFilePicker(Y).then(function(ce){return i(ce)}).then(function(ce){Se(ce,null),N({type:"closeDialog"})}).catch(function(ce){Dne(ce)?(z(ce),N({type:"closeDialog"})):Lne(ce)?(J.current=!1,H.current?(H.current.value=null,H.current.click()):Ae(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ae(ce)});return}H.current&&(N({type:"openDialog"}),X(),H.current.value=null,H.current.click())},[N,X,z,g,Se,Ae,F,a]),re=S.useCallback(function(Y){!V.current||!V.current.isEqualNode(Y.target)||(Y.key===" "||Y.key==="Enter"||Y.keyCode===32||Y.keyCode===13)&&(Y.preventDefault(),me())},[V,me]),fe=S.useCallback(function(){N({type:"focus"})},[]),Le=S.useCallback(function(){N({type:"blur"})},[]),Be=S.useCallback(function(){A||(Rne()?setTimeout(me,0):me())},[A,me]),Ue=function(ce){return r?null:ce},Ke=function(ce){return M?null:Ue(ce)},ke=function(ce){return T?null:Ue(ce)},Ye=function(ce){P&&ce.stopPropagation()},ht=S.useMemo(function(){return function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=Y.refKey,we=ce===void 0?"ref":ce,Te=Y.role,Qe=Y.onKeyDown,ze=Y.onFocus,ve=Y.onBlur,Je=Y.onClick,q=Y.onDragEnter,ge=Y.onDragOver,be=Y.onDragLeave,Pe=Y.onDrop,nt=yy(Y,Fne);return bn(bn(oA({onKeyDown:Ke(no(Qe,re)),onFocus:Ke(no(ze,fe)),onBlur:Ke(no(ve,Le)),onClick:Ue(no(Je,Be)),onDragEnter:ke(no(q,K)),onDragOver:ke(no(ge,Ge)),onDragLeave:ke(no(be,We)),onDrop:ke(no(Pe,Me)),role:typeof Te=="string"&&Te!==""?Te:"presentation"},we,V),!r&&!M?{tabIndex:0}:{}),nt)}},[V,re,fe,Le,Be,K,Ge,We,Me,M,T,r]),W=S.useCallback(function(Y){Y.stopPropagation()},[]),k=S.useMemo(function(){return function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=Y.refKey,we=ce===void 0?"ref":ce,Te=Y.onChange,Qe=Y.onClick,ze=yy(Y,Une),ve=oA({accept:D,multiple:a,type:"file",style:{display:"none"},onChange:Ue(no(Te,Me)),onClick:Ue(no(Qe,W)),tabIndex:-1},we,H);return bn(bn({},ve),ze)}},[H,n,a,Me,r]);return bn(bn({},U),{},{isFocused:G&&!r,getRootProps:ht,getInputProps:k,rootRef:V,inputRef:H,open:Ue(me)})}function Kne(t,e){switch(e.type){case"focus":return bn(bn({},t),{},{isFocused:!0});case"blur":return bn(bn({},t),{},{isFocused:!1});case"openDialog":return bn(bn({},aA),{},{isFileDialogActive:!0});case"closeDialog":return bn(bn({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return bn(bn({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return bn(bn({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return bn({},aA);default:return t}}function MB(){}const Yne=()=>{S.useState(null);const[t,e,n]=vm(i=>[i.setUrl,i.personUploadedImage,i.setPersonUploadedImage]),r=S.useRef(null);return L.jsxs(L.Fragment,{children:[e.length===0&&L.jsx(Xne,{ref:r,maxFiles:1,accept:{"image/*":[".jpeg",".png"]},onDrop:i=>{i.length>0&&(n(URL.createObjectURL(i[0])),t(URL.createObjectURL(i[0])))},children:({getRootProps:i,getInputProps:s})=>L.jsx("section",{children:L.jsxs("div",{className:"flex w-full p-3 h-[200px] flex-col justify-center items-center border border-dashed border-primary bg-slate-500 rounded-md",...i(),children:[L.jsx("input",{...s()}),L.jsx("p",{className:"text-sm text-center text-primary select-none",children:"Drag and drop an image from your computer or click here to browse"})]})})}),e&&L.jsxs("div",{className:" flex flex-col justify-center items-center gap-3",children:[L.jsx("div",{children:L.jsx("img",{className:"w-[248px] h-[248px] object-cover",src:e,alt:"uploaded"})}),L.jsx(hr,{onClick:()=>{n(""),t("./bg.jpg")},children:L.jsx("span",{children:"Upload another image"})})]})]})};function ck(t,[e,n]){return Math.min(n,Math.max(e,t))}function yd(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Qne(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function uk(...t){return e=>t.forEach(n=>Qne(n,e))}function hl(...t){return S.useCallback(uk(...t),t)}function dk(t,e=[]){let n=[];function r(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:p,children:m,...v}=d,y=(p==null?void 0:p[t][l])||a,x=S.useMemo(()=>v,Object.values(v));return S.createElement(y.Provider,{value:x},m)}function u(d,p){const m=(p==null?void 0:p[t][l])||a,v=S.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,qne(i,...e)]}function qne(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function fk(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Zne({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=ere({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=fk(n),l=S.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[s,t,i,a]);return[o,l]}function ere({defaultProp:t,onChange:e}){const n=S.useState(t),[r]=n,i=S.useRef(r),s=fk(e);return S.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const tre=S.createContext(void 0);function nre(t){const e=S.useContext(tre);return t||e||"ltr"}function rre(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const ire=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{};function sre(t){const[e,n]=S.useState(void 0);return ire(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const xy=S.forwardRef((t,e)=>{const{children:n,...r}=t,i=S.Children.toArray(n),s=i.find(are);if(s){const o=s.props.children,a=i.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return S.createElement(lA,Re({},r,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,a):null)}return S.createElement(lA,Re({},r,{ref:e}),n)});xy.displayName="Slot";const lA=S.forwardRef((t,e)=>{const{children:n,...r}=t;return S.isValidElement(n)?S.cloneElement(n,{...lre(r,n.props),ref:e?uk(e,n.ref):n.ref}):S.Children.count(n)>1?S.Children.only(null):null});lA.displayName="SlotClone";const ore=({children:t})=>S.createElement(S.Fragment,null,t);function are(t){return S.isValidElement(t)&&t.type===ore}function lre(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const cre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Rx=cre.reduce((t,e)=>{const n=S.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?xy:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(a,Re({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function ure(t){const e=t+"CollectionProvider",[n,r]=dk(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,x=vt.useRef(null),g=vt.useRef(new Map).current;return vt.createElement(i,{scope:v,itemMap:g,collectionRef:x},y)},a=t+"CollectionSlot",l=vt.forwardRef((m,v)=>{const{scope:y,children:x}=m,g=s(a,y),_=hl(v,g.collectionRef);return vt.createElement(xy,{ref:_},x)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=vt.forwardRef((m,v)=>{const{scope:y,children:x,...g}=m,_=vt.useRef(null),E=hl(v,_),A=s(c,y);return vt.useEffect(()=>(A.itemMap.set(_,{ref:_,...g}),()=>void A.itemMap.delete(_))),vt.createElement(xy,{[u]:"",ref:E},x)});function p(m){const v=s(t+"CollectionConsumer",m);return vt.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const g=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((A,M)=>g.indexOf(A.ref.current)-g.indexOf(M.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},p,r]}const hk=["PageUp","PageDown"],pk=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mk={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Am="Slider",[cA,dre,fre]=ure(Am),[gk,ade]=dk(Am,[fre]),[hre,Px]=gk(Am),pre=S.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:m=!1,...v}=t,[y,x]=S.useState(null),g=hl(e,V=>x(V)),_=S.useRef(new Set),E=S.useRef(0),A=o==="horizontal",M=y?!!y.closest("form"):!0,T=A?mre:gre,[P=[],I]=Zne({prop:u,defaultProp:c,onChange:V=>{var H;(H=[..._.current][E.current])===null||H===void 0||H.focus(),d(V)}}),R=S.useRef(P);function D(V){const H=bre(P,V);z(V,H)}function F(V){z(V,E.current)}function X(){const V=R.current[E.current];P[E.current]!==V&&p(P)}function z(V,H,{commit:Q}={commit:!1}){const Z=Rre(s),U=Pre(Math.round((V-r)/s)*s+r,Z),N=ck(U,[r,i]);I((G=[])=>{const ne=Ere(G,N,H);if(Tre(ne,l*s)){E.current=ne.indexOf(N);const J=String(ne)!==String(G);return J&&Q&&p(ne),J?ne:G}else return G})}return S.createElement(hre,{scope:t.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:E,thumbs:_.current,values:P,orientation:o},S.createElement(cA.Provider,{scope:t.__scopeSlider},S.createElement(cA.Slot,{scope:t.__scopeSlider},S.createElement(T,Re({"aria-disabled":a,"data-disabled":a?"":void 0},v,{ref:g,onPointerDown:yd(v.onPointerDown,()=>{a||(R.current=P)}),min:r,max:i,inverted:m,onSlideStart:a?void 0:D,onSlideMove:a?void 0:F,onSlideEnd:a?void 0:X,onHomeKeyDown:()=>!a&&z(r,0,{commit:!0}),onEndKeyDown:()=>!a&&z(i,P.length-1,{commit:!0}),onStepKeyDown:({event:V,direction:H})=>{if(!a){const U=hk.includes(V.key)||V.shiftKey&&pk.includes(V.key)?10:1,N=E.current,G=P[N],ne=s*U*H;z(G+ne,N,{commit:!0})}}})))),M&&P.map((V,H)=>S.createElement(wre,{key:H,name:n?n+(P.length>1?"[]":""):void 0,value:V})))}),[vk,yk]=gk(Am,{startEdge:"left",endEdge:"right",size:"width",direction:1}),mre=S.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,p]=S.useState(null),m=hl(e,E=>p(E)),v=S.useRef(),y=nre(i),x=y==="ltr",g=x&&!s||!x&&s;function _(E){const A=v.current||d.getBoundingClientRect(),M=[0,A.width],P=jM(M,g?[n,r]:[r,n]);return v.current=A,P(E-A.left)}return S.createElement(vk,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width"},S.createElement(xk,Re({dir:y,"data-orientation":"horizontal"},u,{ref:m,style:{...u.style,["--radix-slider-thumb-transform"]:"translateX(-50%)"},onSlideStart:E=>{const A=_(E.clientX);o==null||o(A)},onSlideMove:E=>{const A=_(E.clientX);a==null||a(A)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const M=mk[g?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:M?-1:1})}})))}),gre=S.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=S.useRef(null),d=hl(e,u),p=S.useRef(),m=!i;function v(y){const x=p.current||u.current.getBoundingClientRect(),g=[0,x.height],E=jM(g,m?[r,n]:[n,r]);return p.current=x,E(y-x.top)}return S.createElement(vk,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1},S.createElement(xk,Re({"data-orientation":"vertical"},c,{ref:d,style:{...c.style,["--radix-slider-thumb-transform"]:"translateY(50%)"},onSlideStart:y=>{const x=v(y.clientY);s==null||s(x)},onSlideMove:y=>{const x=v(y.clientY);o==null||o(x)},onSlideEnd:()=>{p.current=void 0,a==null||a()},onStepKeyDown:y=>{const g=mk[m?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:g?-1:1})}})))}),xk=S.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Px(Am,n);return S.createElement(Rx.span,Re({},c,{ref:e,onKeyDown:yd(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):hk.concat(pk).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:yd(t.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(p)?p.focus():r(d)}),onPointerMove:yd(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:yd(t.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),s(d))})}))}),vre="SliderTrack",yre=S.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Px(vre,n);return S.createElement(Rx.span,Re({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),CB="SliderRange",xre=S.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Px(CB,n),s=yk(CB,n),o=S.useRef(null),a=hl(e,o),l=i.values.length,c=i.values.map(p=>_k(p,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return S.createElement(Rx.span,Re({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}}))}),TB="SliderThumb",_re=S.forwardRef((t,e)=>{const n=dre(t.__scopeSlider),[r,i]=S.useState(null),s=hl(e,a=>i(a)),o=S.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return S.createElement(Sre,Re({},t,{ref:s,index:o}))}),Sre=S.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=Px(TB,n),o=yk(TB,n),[a,l]=S.useState(null),c=hl(e,x=>l(x)),u=sre(a),d=s.values[r],p=d===void 0?0:_k(d,s.min,s.max),m=Are(r,s.values.length),v=u==null?void 0:u[o.size],y=v?Mre(v,p,o.direction):0;return S.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),S.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${p}% + ${y}px)`}},S.createElement(cA.ItemSlot,{scope:t.__scopeSlider},S.createElement(Rx.span,Re({role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:c,style:d===void 0?{display:"none"}:t.style,onFocus:yd(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),wre=t=>{const{value:e,...n}=t,r=S.useRef(null),i=rre(e);return S.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[i,e]),S.createElement("input",Re({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function Ere(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function _k(t,e,n){const s=100/(n-e)*(t-e);return ck(s,[0,100])}function Are(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function bre(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Mre(t,e,n){const r=t/2,s=jM([0,50],[0,r]);return(r-s(e)*n)*n}function Cre(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Tre(t,e){if(e>0){const n=Cre(t);return Math.min(...n)>=e}return!0}function jM(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Rre(t){return(String(t).split(".")[1]||"").length}function Pre(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const Sk=pre,Ire=yre,Bre=xre,Dre=_re,XM=S.forwardRef(({className:t,...e},n)=>L.jsxs(Sk,{ref:n,className:Pt("relative flex w-full touch-none select-none items-center",t),...e,children:[L.jsx(Ire,{className:"relative h-2 w-full grow overflow-hidden border border-gray-300 rounded-full bg-secondary",children:L.jsx(Bre,{className:"absolute h-full bg-primarypink"})}),L.jsx(Dre,{className:"text-center text-xs text-white block h-8 w-8 rounded-full border-2 border-primarypink bg-primarypink ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:L.jsx("p",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 font-bold touch-none select-none",children:e.value})})]}));XM.displayName=Sk.displayName;function uA(t,e){return uA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uA(t,e)}function Lre(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,uA(t,e)}var Ore=!!(typeof window<"u"&&window.document&&window.document.createElement);function Nre(){if(!Ore||!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){function r(){t=!0}return r}()}),n=function(){};window.addEventListener("testPassiveEventSupport",n,e),window.removeEventListener("testPassiveEventSupport",n,e)}catch{}return t}var HS=void 0;function Fre(){return HS===void 0&&(HS=Nre()),HS}function Ure(t){if(t)return Fre()?t:!!t.capture}function kre(t){if(!t)return 0;if(t===!0)return 100;var e=t.capture<<0,n=t.passive<<1,r=t.once<<2;return e+n+r}function RB(t){t.handlers===t.nextHandlers&&(t.nextHandlers=t.handlers.slice())}function Ix(t){this.target=t,this.events={}}Ix.prototype.getEventHandlers=function(){function t(e,n){var r=String(e)+" "+String(kre(n));return this.events[r]||(this.events[r]={handlers:[],handleEvent:void 0},this.events[r].nextHandlers=this.events[r].handlers),this.events[r]}return t}();Ix.prototype.handleEvent=function(){function t(e,n,r){var i=this.getEventHandlers(e,n);i.handlers=i.nextHandlers,i.handlers.forEach(function(s){s&&s(r)})}return t}();Ix.prototype.add=function(){function t(e,n,r){var i=this,s=this.getEventHandlers(e,r);RB(s),s.nextHandlers.length===0&&(s.handleEvent=this.handleEvent.bind(this,e,r),this.target.addEventListener(e,s.handleEvent,r)),s.nextHandlers.push(n);var o=!0,a=function(){function l(){if(o){o=!1,RB(s);var c=s.nextHandlers.indexOf(n);s.nextHandlers.splice(c,1),s.nextHandlers.length===0&&(i.target&&i.target.removeEventListener(e,s.handleEvent,r),s.handleEvent=void 0)}}return l}();return a}return t}();var GS="__consolidated_events_handlers__";function PB(t,e,n,r){t[GS]||(t[GS]=new Ix(t));var i=Ure(r);return t[GS].add(e,n,i)}var wk={exports:{}},tn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JM=Symbol.for("react.element"),KM=Symbol.for("react.portal"),Bx=Symbol.for("react.fragment"),Dx=Symbol.for("react.strict_mode"),Lx=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Nx=Symbol.for("react.context"),zre=Symbol.for("react.server_context"),Fx=Symbol.for("react.forward_ref"),Ux=Symbol.for("react.suspense"),kx=Symbol.for("react.suspense_list"),zx=Symbol.for("react.memo"),Hx=Symbol.for("react.lazy"),Hre=Symbol.for("react.offscreen"),Ek;Ek=Symbol.for("react.module.reference");function fs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case JM:switch(t=t.type,t){case Bx:case Lx:case Dx:case Ux:case kx:return t;default:switch(t=t&&t.$$typeof,t){case zre:case Nx:case Fx:case Hx:case zx:case Ox:return t;default:return e}}case KM:return e}}}tn.ContextConsumer=Nx;tn.ContextProvider=Ox;tn.Element=JM;tn.ForwardRef=Fx;tn.Fragment=Bx;tn.Lazy=Hx;tn.Memo=zx;tn.Portal=KM;tn.Profiler=Lx;tn.StrictMode=Dx;tn.Suspense=Ux;tn.SuspenseList=kx;tn.isAsyncMode=function(){return!1};tn.isConcurrentMode=function(){return!1};tn.isContextConsumer=function(t){return fs(t)===Nx};tn.isContextProvider=function(t){return fs(t)===Ox};tn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===JM};tn.isForwardRef=function(t){return fs(t)===Fx};tn.isFragment=function(t){return fs(t)===Bx};tn.isLazy=function(t){return fs(t)===Hx};tn.isMemo=function(t){return fs(t)===zx};tn.isPortal=function(t){return fs(t)===KM};tn.isProfiler=function(t){return fs(t)===Lx};tn.isStrictMode=function(t){return fs(t)===Dx};tn.isSuspense=function(t){return fs(t)===Ux};tn.isSuspenseList=function(t){return fs(t)===kx};tn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Bx||t===Lx||t===Dx||t===Ux||t===kx||t===Hre||typeof t=="object"&&t!==null&&(t.$$typeof===Hx||t.$$typeof===zx||t.$$typeof===Ox||t.$$typeof===Nx||t.$$typeof===Fx||t.$$typeof===Ek||t.getModuleId!==void 0)};tn.typeOf=fs;wk.exports=tn;var Gre=wk.exports;function $re(t){if(t.slice(-1)==="%")return parseFloat(t.slice(0,-1))/100}function Vre(t){if(!isNaN(parseFloat(t))&&isFinite(t))return parseFloat(t);if(t.slice(-2)==="px")return parseFloat(t.slice(0,-2))}function IB(t,e){var n=Vre(t);if(typeof n=="number")return n;var r=$re(t);if(typeof r=="number")return r*e}var _y="above",Ga="inside",Sy="below",dA="invisible";function Ak(t){return typeof t.type=="string"}var Wre=`<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a DOM element (e.g. <div>) nor does it use the innerRef prop.

See https://goo.gl/LrBNgw for more info.`;function jre(t,e){if(t&&!Ak(t)&&!e)throw new Error(Wre)}function Xre(t){return t.viewportBottom-t.viewportTop===0?dA:t.viewportTop<=t.waypointTop&&t.waypointTop<=t.viewportBottom||t.viewportTop<=t.waypointBottom&&t.waypointBottom<=t.viewportBottom||t.waypointTop<=t.viewportTop&&t.viewportBottom<=t.waypointBottom?Ga:t.viewportBottom<t.waypointTop?Sy:t.waypointTop<t.viewportTop?_y:dA}var Vu,_h=[];function BB(t){_h.push(t),Vu||(Vu=setTimeout(function(){Vu=null;for(var n;n=_h.shift();)n()},0));var e=!0;return function(){if(e){e=!1;var r=_h.indexOf(t);r!==-1&&(_h.splice(r,1),!_h.length&&Vu&&(clearTimeout(Vu),Vu=null))}}}function Jre(t){return t==="window"?global.window:t}var $S=typeof window<"u",Kre={debug:!1,scrollableAncestor:void 0,children:void 0,topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},tu=function(t){Lre(e,t);function e(r){var i;return i=t.call(this,r)||this,i.refElement=function(s){i._ref=s},i}var n=e.prototype;return n.componentDidMount=function(){var i=this;$S&&(this.cancelOnNextTick=BB(function(){i.cancelOnNextTick=null;var s=i.props,o=s.children;s.debug,jre(o,i._ref),i._handleScroll=i._handleScroll.bind(i),i.scrollableAncestor=i._findScrollableAncestor(),i.scrollEventListenerUnsubscribe=PB(i.scrollableAncestor,"scroll",i._handleScroll,{passive:!0}),i.resizeEventListenerUnsubscribe=PB(window,"resize",i._handleScroll,{passive:!0}),i._handleScroll(null)}))},n.componentDidUpdate=function(){var i=this;$S&&this.scrollableAncestor&&(this.cancelOnNextTick||(this.cancelOnNextTick=BB(function(){i.cancelOnNextTick=null,i._handleScroll(null)})))},n.componentWillUnmount=function(){$S&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelOnNextTick&&this.cancelOnNextTick())},n._findScrollableAncestor=function(){var i=this.props,s=i.horizontal,o=i.scrollableAncestor;if(o)return Jre(o);for(var a=this._ref;a.parentNode;){if(a=a.parentNode,a===document.body)return window;var l=window.getComputedStyle(a),c=s?l.getPropertyValue("overflow-x"):l.getPropertyValue("overflow-y"),u=c||l.getPropertyValue("overflow");if(u==="auto"||u==="scroll"||u==="overlay")return a}return window},n._handleScroll=function(i){if(this._ref){var s=this._getBounds(),o=Xre(s),a=this._previousPosition,l=this.props;l.debug;var c=l.onPositionChange,u=l.onEnter,d=l.onLeave,p=l.fireOnRapidScroll;if(this._previousPosition=o,a!==o){var m={currentPosition:o,previousPosition:a,event:i,waypointTop:s.waypointTop,waypointBottom:s.waypointBottom,viewportTop:s.viewportTop,viewportBottom:s.viewportBottom};c.call(this,m),o===Ga?u.call(this,m):a===Ga&&d.call(this,m);var v=a===Sy&&o===_y,y=a===_y&&o===Sy;p&&(v||y)&&(u.call(this,{currentPosition:Ga,previousPosition:a,event:i,waypointTop:s.waypointTop,waypointBottom:s.waypointBottom,viewportTop:s.viewportTop,viewportBottom:s.viewportBottom}),d.call(this,{currentPosition:o,previousPosition:Ga,event:i,waypointTop:s.waypointTop,waypointBottom:s.waypointBottom,viewportTop:s.viewportTop,viewportBottom:s.viewportBottom}))}}},n._getBounds=function(){var i=this.props,s=i.horizontal;i.debug;var o=this._ref.getBoundingClientRect(),a=o.left,l=o.top,c=o.right,u=o.bottom,d=s?a:l,p=s?c:u,m,v;this.scrollableAncestor===window?(m=s?window.innerWidth:window.innerHeight,v=0):(m=s?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,v=s?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var y=this.props,x=y.bottomOffset,g=y.topOffset,_=IB(g,m),E=IB(x,m),A=v+m;return{waypointTop:d,waypointBottom:p,viewportTop:v+_,viewportBottom:A-E}},n.render=function(){var i=this,s=this.props.children;if(!s)return vt.createElement("span",{ref:this.refElement,style:{fontSize:0}});if(Ak(s)||Gre.isForwardRef(s)){var o=function(l){i.refElement(l),s.ref&&(typeof s.ref=="function"?s.ref(l):s.ref.current=l)};return vt.cloneElement(s,{ref:o})}return vt.cloneElement(s,{innerRef:this.refElement})},e}(vt.PureComponent);tu.above=_y;tu.below=Sy;tu.inside=Ga;tu.invisible=dA;tu.defaultProps=Kre;tu.displayName="Waypoint";var YM=Mm(),yt=t=>bm(t,YM),QM=Mm();yt.write=t=>bm(t,QM);var Gx=Mm();yt.onStart=t=>bm(t,Gx);var qM=Mm();yt.onFrame=t=>bm(t,qM);var ZM=Mm();yt.onFinish=t=>bm(t,ZM);var Pd=[];yt.setTimeout=(t,e)=>{let n=yt.now()+e,r=()=>{let s=Pd.findIndex(o=>o.cancel==r);~s&&Pd.splice(s,1),Va-=~s?1:0},i={time:n,handler:t,cancel:r};return Pd.splice(bk(n),0,i),Va+=1,Mk(),i};var bk=t=>~(~Pd.findIndex(e=>e.time>t)||~Pd.length);yt.cancel=t=>{Gx.delete(t),qM.delete(t),ZM.delete(t),YM.delete(t),QM.delete(t)};yt.sync=t=>{fA=!0,yt.batchedUpdates(t),fA=!1};yt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,yt.onStart(n)}return r.handler=t,r.cancel=()=>{Gx.delete(n),e=null},r};var eC=typeof window<"u"?window.requestAnimationFrame:()=>{};yt.use=t=>eC=t;yt.now=typeof performance<"u"?()=>performance.now():Date.now;yt.batchedUpdates=t=>t();yt.catch=console.error;yt.frameLoop="always";yt.advance=()=>{yt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Tk()};var $a=-1,Va=0,fA=!1;function bm(t,e){fA?(e.delete(t),t(0)):(e.add(t),Mk())}function Mk(){$a<0&&($a=0,yt.frameLoop!=="demand"&&eC(Ck))}function Yre(){$a=-1}function Ck(){~$a&&(eC(Ck),yt.batchedUpdates(Tk))}function Tk(){let t=$a;$a=yt.now();let e=bk($a);if(e&&(Rk(Pd.splice(0,e),n=>n.handler()),Va-=e),!Va){Yre();return}Gx.flush(),YM.flush(t?Math.min(64,$a-t):16.667),qM.flush(),QM.flush(),ZM.flush()}function Mm(){let t=new Set,e=t;return{add(n){Va+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Va-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Va-=e.size,Rk(e,r=>r(n)&&t.add(r)),Va+=t.size,e=t)}}}function Rk(t,e){t.forEach(n=>{try{e(n)}catch(r){yt.catch(r)}})}var Qre=Object.defineProperty,qre=(t,e)=>{for(var n in e)Qre(t,n,{get:e[n],enumerable:!0})},Hs={};qre(Hs,{assign:()=>eie,colors:()=>rl,createStringInterpolator:()=>nC,skipAnimation:()=>Ik,to:()=>Pk,willAdvance:()=>rC});function hA(){}var Zre=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Oe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Oo(t,e){if(Oe.arr(t)){if(!Oe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Nt=(t,e)=>t.forEach(e);function po(t,e,n){if(Oe.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Ii=t=>Oe.und(t)?[]:Oe.arr(t)?t:[t];function Xh(t,e){if(t.size){let n=Array.from(t);t.clear(),Nt(n,e)}}var Ih=(t,...e)=>Xh(t,n=>n(...e)),tC=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),nC,Pk,rl=null,Ik=!1,rC=hA,eie=t=>{t.to&&(Pk=t.to),t.now&&(yt.now=t.now),t.colors!==void 0&&(rl=t.colors),t.skipAnimation!=null&&(Ik=t.skipAnimation),t.createStringInterpolator&&(nC=t.createStringInterpolator),t.requestAnimationFrame&&yt.use(t.requestAnimationFrame),t.batchedUpdates&&(yt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(rC=t.willAdvance),t.frameLoop&&(yt.frameLoop=t.frameLoop)},Jh=new Set,is=[],VS=[],wy=0,$x={get idle(){return!Jh.size&&!is.length},start(t){wy>t.priority?(Jh.add(t),yt.onStart(tie)):(Bk(t),yt(pA))},advance:pA,sort(t){if(wy)yt.onFrame(()=>$x.sort(t));else{let e=is.indexOf(t);~e&&(is.splice(e,1),Dk(t))}},clear(){is=[],Jh.clear()}};function tie(){Jh.forEach(Bk),Jh.clear(),yt(pA)}function Bk(t){is.includes(t)||Dk(t)}function Dk(t){is.splice(nie(is,e=>e.priority>t.priority),0,t)}function pA(t){let e=VS;for(let n=0;n<is.length;n++){let r=is[n];wy=r.priority,r.idle||(rC(r),r.advance(t),r.idle||e.push(r))}return wy=0,VS=is,VS.length=0,is=e,is.length>0}function nie(t,e){let n=t.findIndex(e);return n<0?t.length:n}var rie=(t,e,n)=>Math.min(Math.max(n,t),e),iie={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Bs="[-+]?\\d*\\.?\\d+",Ey=Bs+"%";function Vx(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var sie=new RegExp("rgb"+Vx(Bs,Bs,Bs)),oie=new RegExp("rgba"+Vx(Bs,Bs,Bs,Bs)),aie=new RegExp("hsl"+Vx(Bs,Ey,Ey)),lie=new RegExp("hsla"+Vx(Bs,Ey,Ey,Bs)),cie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,uie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,die=/^#([0-9a-fA-F]{6})$/,fie=/^#([0-9a-fA-F]{8})$/;function hie(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=die.exec(t))?parseInt(e[1]+"ff",16)>>>0:rl&&rl[t]!==void 0?rl[t]:(e=sie.exec(t))?(Wu(e[1])<<24|Wu(e[2])<<16|Wu(e[3])<<8|255)>>>0:(e=oie.exec(t))?(Wu(e[1])<<24|Wu(e[2])<<16|Wu(e[3])<<8|OB(e[4]))>>>0:(e=cie.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=fie.exec(t))?parseInt(e[1],16)>>>0:(e=uie.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=aie.exec(t))?(DB(LB(e[1]),n0(e[2]),n0(e[3]))|255)>>>0:(e=lie.exec(t))?(DB(LB(e[1]),n0(e[2]),n0(e[3]))|OB(e[4]))>>>0:null}function WS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function DB(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=WS(i,r,t+1/3),o=WS(i,r,t),a=WS(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Wu(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function LB(t){return(parseFloat(t)%360+360)%360/360}function OB(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function n0(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function NB(t){let e=hie(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Bp=(t,e,n)=>{if(Oe.fun(t))return t;if(Oe.arr(t))return Bp({range:t,output:e,extrapolate:n});if(Oe.str(t.output[0]))return nC(t);let r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{let u=mie(c,s);return pie(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function pie(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function mie(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var gie=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return rie(0,1,i/t)},Ay=1.70158,r0=Ay*1.525,FB=Ay+1,UB=2*Math.PI/3,kB=2*Math.PI/4.5,i0=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,vie={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>FB*t*t*t-Ay*t*t,easeOutBack:t=>1+FB*Math.pow(t-1,3)+Ay*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((r0+1)*2*t-r0)/2:(Math.pow(2*t-2,2)*((r0+1)*(t*2-2)+r0)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*UB),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*UB)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*kB))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*kB)/2+1,easeInBounce:t=>1-i0(1-t),easeOutBounce:i0,easeInOutBounce:t=>t<.5?(1-i0(1-2*t))/2:(1+i0(2*t-1))/2,steps:gie},Zd=Symbol.for("FluidValue.get"),kc=Symbol.for("FluidValue.observers"),rs=t=>!!(t&&t[Zd]),oi=t=>t&&t[Zd]?t[Zd]():t,zB=t=>t[kc]||null;function yie(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Dp(t,e){let n=t[kc];n&&n.forEach(r=>{yie(r,e)})}var Xue,Jue,QD,Lk=(QD=class{constructor(e){qe(this,Xue);qe(this,Jue);if(!e&&!(e=this.get))throw Error("Unknown getter");xie(this,e)}},Xue=Zd,Jue=kc,QD),xie=(t,e)=>Ok(t,Zd,e);function xf(t,e){if(t[Zd]){let n=t[kc];n||Ok(t,kc,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Lp(t,e){let n=t[kc];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[kc]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Ok=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),O0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_ie=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,HB=new RegExp(`(${O0.source})(%|[a-z]+)`,"i"),Sie=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Wx=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Nk=t=>{let[e,n]=wie(t);if(!e||tC())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&Wx.test(n)?Nk(n):n||t},wie=t=>{let e=Wx.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},jS,Eie=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Fk=t=>{jS||(jS=rl?new RegExp(`(${Object.keys(rl).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(i=>oi(i).replace(Wx,Nk).replace(_ie,NB).replace(jS,NB)),n=e.map(i=>i.match(O0).map(Number)),r=n[0].map((i,s)=>n.map(o=>{if(!(s in o))throw Error('The arity of each "output" value must be equal');return o[s]})).map(i=>Bp({...t,output:i}));return i=>{var a;let s=!HB.test(e[0])&&((a=e.find(l=>HB.test(l)))==null?void 0:a.replace(O0,"")),o=0;return e[0].replace(O0,()=>`${r[o++](i)}${s||""}`).replace(Sie,Eie)}},iC="react-spring: ",Uk=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${iC}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Aie=Uk(console.warn);function bie(){Aie(`${iC}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Mie=Uk(console.warn);function Cie(){Mie(`${iC}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function jx(t){return Oe.str(t)&&(t[0]=="#"||/\d/.test(t)||!tC()&&Wx.test(t)||t in(rl||{}))}var sC=tC()?S.useEffect:S.useLayoutEffect,Tie=()=>{let t=S.useRef(!1);return sC(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function kk(){let t=S.useState()[1],e=Tie();return()=>{e.current&&t(Math.random())}}function Rie(t,e){let[n]=S.useState(()=>({inputs:e,result:t()})),r=S.useRef(),i=r.current,s=i;return s?e&&s.inputs&&Pie(e,s.inputs)||(s={inputs:e,result:t()}):s=n,S.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Pie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var zk=t=>S.useEffect(t,Iie),Iie=[];function GB(t){let e=S.useRef();return S.useEffect(()=>{e.current=t}),e.current}var Op=Symbol.for("Animated:node"),Bie=t=>!!t&&t[Op]===t,io=t=>t&&t[Op],oC=(t,e)=>Zre(t,Op,e),Xx=t=>t&&t[Op]&&t[Op].getPayload(),Hk=class{constructor(){qe(this,"payload");oC(this,this)}getPayload(){return this.payload||[]}},Cm=class extends Hk{constructor(n){super();qe(this,"done",!0);qe(this,"elapsedTime");qe(this,"lastPosition");qe(this,"lastVelocity");qe(this,"v0");qe(this,"durationProgress",0);this._value=n,Oe.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new Cm(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,r){return Oe.num(n)&&(this.lastPosition=n,r&&(n=Math.round(n/r)*r,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){let{done:n}=this;this.done=!1,Oe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},Np=class extends Cm{constructor(n){super(0);qe(this,"_string",null);qe(this,"_toString");this._toString=Bp({output:[n,n]})}static create(n){return new Np(n)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(n){if(Oe.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=Bp({output:[this.getValue(),n]})),this._value=0,super.reset()}},by={dependencies:null},Jx=class extends Hk{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let n={};return po(this.source,(r,i)=>{Bie(r)?n[i]=r.getValue(e):rs(r)?n[i]=oi(r):e||(n[i]=r)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Nt(this.payload,e=>e.reset())}_makePayload(e){if(e){let n=new Set;return po(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){by.dependencies&&rs(e)&&by.dependencies.add(e);let n=Xx(e);n&&Nt(n,r=>this.add(r))}},Gk=class extends Jx{constructor(e){super(e)}static create(e){return new Gk(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let n=this.getPayload();return e.length==n.length?n.map((r,i)=>r.setValue(e[i])).some(Boolean):(super.setValue(e.map(Die)),!0)}};function Die(t){return(jx(t)?Np:Cm).create(t)}function mA(t){let e=io(t);return e?e.constructor:Oe.arr(t)?Gk:jx(t)?Np:Cm}var $B=(t,e)=>{let n=!Oe.fun(t)||t.prototype&&t.prototype.isReactComponent;return S.forwardRef((r,i)=>{let s=S.useRef(null),o=n&&S.useCallback(v=>{s.current=Nie(i,v)},[i]),[a,l]=Oie(r,e),c=kk(),u=()=>{let v=s.current;n&&!v||(v?e.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&c()},d=new Lie(u,l),p=S.useRef();sC(()=>(p.current=d,Nt(l,v=>xf(v,d)),()=>{p.current&&(Nt(p.current.deps,v=>Lp(v,p.current)),yt.cancel(p.current.update))})),S.useEffect(u,[]),zk(()=>()=>{let v=p.current;Nt(v.deps,y=>Lp(y,v))});let m=e.getComponentProps(a.getValue());return S.createElement(t,{...m,ref:o})})},Lie=class{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&yt.write(this.update)}};function Oie(t,e){let n=new Set;return by.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Jx(t),by.dependencies=null,[t,n]}function Nie(t,e){return t&&(Oe.fun(t)?t(e):t.current=e),e}var VB=Symbol.for("AnimatedComponent"),Fie=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new Jx(i),getComponentProps:r=i=>i}={})=>{let i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{let a=WB(o)||"Anonymous";return Oe.str(o)?o=s[o]||(s[o]=$B(o,i)):o=o[VB]||(o[VB]=$B(o,i)),o.displayName=`Animated(${a})`,o};return po(t,(o,a)=>{Oe.arr(t)&&(a=WB(o)),s[a]=s(o)}),{animated:s}},WB=t=>Oe.str(t)?t:t&&Oe.str(t.displayName)?t.displayName:Oe.fun(t)&&t.name||null;function dc(t,...e){return Oe.fun(t)?t(...e):t}var Kh=(t,e)=>t===!0||!!(e&&t&&(Oe.fun(t)?t(e):Ii(t).includes(e))),$k=(t,e)=>Oe.obj(t)?e&&t[e]:t,Vk=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Uie=t=>t,aC=(t,e=Uie)=>{let n=kie;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));let r={};for(let i of n){let s=e(t[i],i);Oe.und(s)||(r[i]=s)}return r},kie=["config","onProps","onStart","onChange","onPause","onResume","onRest"],zie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Hie(t){let e={},n=0;if(po(t,(r,i)=>{zie[i]||(e[i]=r,n++)}),n)return e}function Wk(t){let e=Hie(t);if(e){let n={to:e};return po(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Fp(t){return t=oi(t),Oe.arr(t)?t.map(Fp):jx(t)?Hs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Gie(t){for(let e in t)return!0;return!1}function gA(t){return Oe.fun(t)||Oe.arr(t)&&Oe.obj(t[0])}function $ie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Vie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Wie={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},vA={...Wie.default,mass:1,damping:1,easing:vie.linear,clamp:!1},jie=class{constructor(){qe(this,"tension");qe(this,"friction");qe(this,"frequency");qe(this,"damping");qe(this,"mass");qe(this,"velocity",0);qe(this,"restVelocity");qe(this,"precision");qe(this,"progress");qe(this,"duration");qe(this,"easing");qe(this,"clamp");qe(this,"bounce");qe(this,"decay");qe(this,"round");Object.assign(this,vA)}};function Xie(t,e,n){n&&(n={...n},jB(n,e),e={...n,...e}),jB(t,e),Object.assign(t,e);for(let o in vA)t[o]==null&&(t[o]=vA[o]);let{frequency:r,damping:i}=t,{mass:s}=t;return Oe.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function jB(t,e){if(!Oe.und(e.decay))t.duration=void 0;else{let n=!Oe.und(e.tension)||!Oe.und(e.friction);(n||!Oe.und(e.frequency)||!Oe.und(e.damping)||!Oe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var XB=[],Jie=class{constructor(){qe(this,"changed",!1);qe(this,"values",XB);qe(this,"toValues",null);qe(this,"fromValues",XB);qe(this,"to");qe(this,"from");qe(this,"config",new jie);qe(this,"immediate",!1)}};function jk(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=Kh(n.cancel??(r==null?void 0:r.cancel),e);if(u)m();else{Oe.und(n.pause)||(i.paused=Kh(n.pause,e));let v=r==null?void 0:r.pause;v!==!0&&(v=i.paused||Kh(v,e)),l=dc(n.delay||0,e),v?(i.resumeQueue.add(p),s.pause()):(s.resume(),p())}function d(){i.resumeQueue.add(p),i.timeouts.delete(c),c.cancel(),l=c.time-yt.now()}function p(){l>0&&!Hs.skipAnimation?(i.delayed=!0,c=yt.setTimeout(m,l),i.pauseQueue.add(d),i.timeouts.add(c)):m()}function m(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(v){a(v)}}})}var lC=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Id(t.get()):e.every(n=>n.noop)?Xk(t.get()):Ps(t.get(),e.every(n=>n.finished)),Xk=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ps=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Id=t=>({value:t,cancelled:!0,finished:!1});function Jk(t,e,n,r){let{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;let c=aC(e,(x,g)=>g==="onRest"?void 0:x),u,d,p=new Promise((x,g)=>(u=x,d=g)),m=x=>{let g=i<=(n.cancelId||0)&&Id(r)||i!==n.asyncId&&Ps(r,!1);if(g)throw x.result=g,d(x),x},v=(x,g)=>{let _=new JB,E=new KB;return(async()=>{if(Hs.skipAnimation)throw Up(n),E.result=Ps(r,!1),d(E),E;m(_);let A=Oe.obj(x)?{...x}:{...g,to:x};A.parentId=i,po(c,(T,P)=>{Oe.und(A[P])&&(A[P]=T)});let M=await r.start(A);return m(_),n.paused&&await new Promise(T=>{n.resumeQueue.add(T)}),M})()},y;if(Hs.skipAnimation)return Up(n),Ps(r,!1);try{let x;Oe.arr(t)?x=(async g=>{for(let _ of g)await v(_)})(t):x=Promise.resolve(t(v,r.stop.bind(r))),await Promise.all([x.then(u),p]),y=Ps(r.get(),!0,!1)}catch(x){if(x instanceof JB)y=x.result;else if(x instanceof KB)y=x.result;else throw x}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Oe.fun(o)&&yt.batchedUpdates(()=>{o(y,r,r.item)}),y})()}function Up(t,e){Xh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var JB=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");qe(this,"result")}},KB=class extends Error{constructor(){super("SkipAnimationSignal");qe(this,"result")}},yA=t=>t instanceof cC,Kie=1,cC=class extends Lk{constructor(){super(...arguments);qe(this,"id",Kie++);qe(this,"_priority",0)}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=io(this);return e&&e.getValue()}to(...e){return Hs.to(this,e)}interpolate(...e){return bie(),Hs.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){Dp(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||$x.sort(this),Dp(this,{type:"priority",parent:this,priority:e})}},zc=Symbol.for("SpringPhase"),Kk=1,xA=2,_A=4,XS=t=>(t[zc]&Kk)>0,Pa=t=>(t[zc]&xA)>0,Sh=t=>(t[zc]&_A)>0,YB=(t,e)=>e?t[zc]|=xA|Kk:t[zc]&=~xA,QB=(t,e)=>e?t[zc]|=_A:t[zc]&=~_A,Yie=class extends cC{constructor(n,r){super();qe(this,"key");qe(this,"animation",new Jie);qe(this,"queue");qe(this,"defaultProps",{});qe(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});qe(this,"_pendingCalls",new Set);qe(this,"_lastCallId",0);qe(this,"_lastToId",0);qe(this,"_memoizedDuration",0);if(!Oe.und(n)||!Oe.und(r)){let i=Oe.obj(n)?{...n}:{...r,from:n};Oe.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Pa(this)||this._state.asyncTo)||Sh(this)}get goal(){return oi(this.animation.to)}get velocity(){let n=io(this);return n instanceof Cm?n.lastVelocity||0:n.getPayload().map(r=>r.lastVelocity||0)}get hasAnimated(){return XS(this)}get isAnimating(){return Pa(this)}get isPaused(){return Sh(this)}get isDelayed(){return this._state.delayed}advance(n){let r=!0,i=!1,s=this.animation,{toValues:o}=s,{config:a}=s,l=Xx(s.to);!l&&rs(s.to)&&(o=Ii(oi(s.to))),s.values.forEach((d,p)=>{if(d.done)return;let m=d.constructor==Np?1:l?l[p].lastPosition:o[p],v=s.immediate,y=m;if(!v){if(y=d.lastPosition,a.tension<=0){d.done=!0;return}let x=d.elapsedTime+=n,g=s.fromValues[p],_=d.v0!=null?d.v0:d.v0=Oe.arr(a.velocity)?a.velocity[p]:a.velocity,E,A=a.precision||(g==m?.005:Math.min(1,Math.abs(m-g)*.001));if(Oe.und(a.duration))if(a.decay){let M=a.decay===!0?.998:a.decay,T=Math.exp(-(1-M)*x);y=g+_/(1-M)*(1-T),v=Math.abs(d.lastPosition-y)<=A,E=_*T}else{E=d.lastVelocity==null?_:d.lastVelocity;let M=a.restVelocity||A/10,T=a.clamp?0:a.bounce,P=!Oe.und(T),I=g==m?d.v0>0:g<m,R,D=!1,F=1,X=Math.ceil(n/F);for(let z=0;z<X&&(R=Math.abs(E)>M,!(!R&&(v=Math.abs(m-y)<=A,v)));++z){P&&(D=y==m||y>m==I,D&&(E=-E*T,y=m));let V=-a.tension*1e-6*(y-m),H=-a.friction*.001*E,Q=(V+H)/a.mass;E=E+Q*F,y=y+E*F}}else{let M=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,d.durationProgress>0&&(d.elapsedTime=a.duration*d.durationProgress,x=d.elapsedTime+=n)),M=(a.progress||0)+x/this._memoizedDuration,M=M>1?1:M<0?0:M,d.durationProgress=M),y=g+a.easing(M)*(m-g),E=(y-d.lastPosition)/n,v=M==1}d.lastVelocity=E,Number.isNaN(y)&&(console.warn("Got NaN while animating:",this),v=!0)}l&&!l[p].done&&(v=!1),v?d.done=!0:r=!1,d.setValue(y,a.round)&&(i=!0)});let c=io(this),u=c.getValue();if(r){let d=oi(s.to);(u!==d||i)&&!a.decay?(c.setValue(d),this._onChange(d)):i&&a.decay&&this._onChange(u),this._stop()}else i&&this._onChange(u)}set(n){return yt.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Pa(this)){let{to:n,config:r}=this.animation;yt.batchedUpdates(()=>{this._onStart(),r.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,r){let i;return Oe.und(n)?(i=this.queue||[],this.queue=[]):i=[Oe.obj(n)?n:{...r,to:n}],Promise.all(i.map(s=>this._update(s))).then(s=>lC(this,s))}stop(n){let{to:r}=this.animation;return this._focus(this.get()),Up(this._state,n&&this._lastCallId),yt.batchedUpdates(()=>this._stop(r,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){let r=this.key||"",{to:i,from:s}=n;i=Oe.obj(i)?i[r]:i,(i==null||gA(i))&&(i=void 0),s=Oe.obj(s)?s[r]:s,s==null&&(s=void 0);let o={to:i,from:s};return XS(this)||(n.reverse&&([i,s]=[s,i]),s=oi(s),Oe.und(s)?io(this)||this._set(i):this._set(s)),o}_update({...n},r){let{key:i,defaultProps:s}=this;n.default&&Object.assign(s,aC(n,(l,c)=>/^on/.test(c)?$k(l,i):l)),ZB(this,n,"onProps"),Eh(this,"onProps",n,this);let o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let a=this._state;return jk(++this._lastCallId,{key:i,props:n,defaultProps:s,state:a,actions:{pause:()=>{Sh(this)||(QB(this,!0),Ih(a.pauseQueue),Eh(this,"onPause",Ps(this,wh(this,this.animation.to)),this))},resume:()=>{Sh(this)&&(QB(this,!1),Pa(this)&&this._resume(),Ih(a.resumeQueue),Eh(this,"onResume",Ps(this,wh(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(n.loop&&l.finished&&!(r&&l.noop)){let c=Yk(n);if(c)return this._update(c,!0)}return l})}_merge(n,r,i){if(r.cancel)return this.stop(!0),i(Id(this));let s=!Oe.und(n.to),o=!Oe.und(n.from);if(s||o)if(r.callId>this._lastToId)this._lastToId=r.callId;else return i(Id(this));let{key:a,defaultProps:l,animation:c}=this,{to:u,from:d}=c,{to:p=u,from:m=d}=n;o&&!s&&(!r.default||Oe.und(p))&&(p=m),r.reverse&&([p,m]=[m,p]);let v=!Oo(m,d);v&&(c.from=m),m=oi(m);let y=!Oo(p,u);y&&this._focus(p);let x=gA(r.to),{config:g}=c,{decay:_,velocity:E}=g;(s||o)&&(g.velocity=0),r.config&&!x&&Xie(g,dc(r.config,a),r.config!==l.config?dc(l.config,a):void 0);let A=io(this);if(!A||Oe.und(p))return i(Ps(this,!0));let M=Oe.und(r.reset)?o&&!r.default:!Oe.und(m)&&Kh(r.reset,a),T=M?m:this.get(),P=Fp(p),I=Oe.num(P)||Oe.arr(P)||jx(P),R=!x&&(!I||Kh(l.immediate||r.immediate,a));if(y){let z=mA(p);if(z!==A.constructor)if(R)A=this._set(P);else throw Error(`Cannot animate between ${A.constructor.name} and ${z.name}, as the "to" prop suggests`)}let D=A.constructor,F=rs(p),X=!1;if(!F){let z=M||!XS(this)&&v;(y||z)&&(X=Oo(Fp(T),P),F=!X),(!Oo(c.immediate,R)&&!R||!Oo(g.decay,_)||!Oo(g.velocity,E))&&(F=!0)}if(X&&Pa(this)&&(c.changed&&!M?F=!0:F||this._stop(u)),!x&&((F||rs(u))&&(c.values=A.getPayload(),c.toValues=rs(p)?null:D==Np?[1]:Ii(P)),c.immediate!=R&&(c.immediate=R,!R&&!M&&this._set(u)),F)){let{onRest:z}=c;Nt(qie,H=>ZB(this,r,H));let V=Ps(this,wh(this,u));Ih(this._pendingCalls,V),this._pendingCalls.add(i),c.changed&&yt.batchedUpdates(()=>{var H;c.changed=!M,z==null||z(V,this),M?dc(l.onRest,V):(H=c.onStart)==null||H.call(c,V,this)})}M&&this._set(T),x?i(Jk(r.to,r,this._state,this)):F?this._start():Pa(this)&&!y?this._pendingCalls.add(i):i(Xk(T))}_focus(n){let r=this.animation;n!==r.to&&(zB(this)&&this._detach(),r.to=n,zB(this)&&this._attach())}_attach(){let n=0,{to:r}=this.animation;rs(r)&&(xf(r,this),yA(r)&&(n=r.priority+1)),this.priority=n}_detach(){let{to:n}=this.animation;rs(n)&&Lp(n,this)}_set(n,r=!0){let i=oi(n);if(!Oe.und(i)){let s=io(this);if(!s||!Oo(i,s.getValue())){let o=mA(i);!s||s.constructor!=o?oC(this,o.create(i)):s.setValue(i),s&&yt.batchedUpdates(()=>{this._onChange(i,r)})}}return io(this)}_onStart(){let n=this.animation;n.changed||(n.changed=!0,Eh(this,"onStart",Ps(this,wh(this,n.to)),this))}_onChange(n,r){r||(this._onStart(),dc(this.animation.onChange,n,this)),dc(this.defaultProps.onChange,n,this),super._onChange(n,r)}_start(){let n=this.animation;io(this).reset(oi(n.to)),n.immediate||(n.fromValues=n.values.map(r=>r.lastPosition)),Pa(this)||(YB(this,!0),Sh(this)||this._resume())}_resume(){Hs.skipAnimation?this.finish():$x.start(this)}_stop(n,r){if(Pa(this)){YB(this,!1);let i=this.animation;Nt(i.values,o=>{o.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),Dp(this,{type:"idle",parent:this});let s=r?Id(this.get()):Ps(this.get(),wh(this,n??i.to));Ih(this._pendingCalls,s),i.changed&&(i.changed=!1,Eh(this,"onRest",s,this))}}};function wh(t,e){let n=Fp(e),r=Fp(t.get());return Oo(r,n)}function Yk(t,e=t.loop,n=t.to){let r=dc(e);if(r){let i=r!==!0&&Wk(r),s=(i||t).reverse,o=!i||i.reset;return kp({...t,loop:e,default:!1,pause:void 0,to:!s||gA(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function kp(t){let{to:e,from:n}=t=Wk(t),r=new Set;return Oe.obj(e)&&qB(e,r),Oe.obj(n)&&qB(n,r),t.keys=r.size?Array.from(r):null,t}function Qie(t){let e=kp(t);return Oe.und(e.default)&&(e.default=aC(e)),e}function qB(t,e){po(t,(n,r)=>n!=null&&e.add(r))}var qie=["onStart","onRest","onChange","onPause","onResume"];function ZB(t,e,n){t.animation[n]=e[n]!==Vk(e,n)?$k(e[n],t.key):void 0}function Eh(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var Zie=["onStart","onChange","onRest"],ese=1,tse=class{constructor(e,n){qe(this,"id",ese++);qe(this,"springs",{});qe(this,"queue",[]);qe(this,"ref");qe(this,"_flush");qe(this,"_initialProps");qe(this,"_lastAsyncId",0);qe(this,"_active",new Set);qe(this,"_changed",new Set);qe(this,"_started",!1);qe(this,"_item");qe(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});qe(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((n,r)=>e[r]=n.get()),e}set(e){for(let n in e){let r=e[n];Oe.und(r)||this.springs[n].set(r)}}update(e){return e&&this.queue.push(kp(e)),this}start(e){let{queue:n}=this;return e?n=Ii(e).map(kp):this.queue=[],this._flush?this._flush(this,n):(t4(this,n),SA(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){let r=this.springs;Nt(Ii(n),i=>r[i].stop(!!e))}else Up(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(Oe.und(e))this.start({pause:!0});else{let n=this.springs;Nt(Ii(e),r=>n[r].pause())}return this}resume(e){if(Oe.und(e))this.start({pause:!1});else{let n=this.springs;Nt(Ii(e),r=>n[r].resume())}return this}each(e){po(this.springs,e)}_onFrame(){let{onStart:e,onChange:n,onRest:r}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,Xh(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));let o=!i&&this._started,a=s||o&&r.size?this.get():null;s&&n.size&&Xh(n,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,Xh(r,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;yt.onFrame(this._onFrame)}};function SA(t,e){return Promise.all(e.map(n=>Qk(t,n))).then(n=>lC(t,n))}async function Qk(t,e,n){let{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,c=Oe.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);let u=Oe.arr(i)||Oe.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Nt(Zie,y=>{let x=e[y];if(Oe.fun(x)){let g=t._events[y];e[y]=({finished:_,cancelled:E})=>{let A=g.get(x);A?(_||(A.finished=!1),E&&(A.cancelled=!0)):g.set(x,{value:null,finished:_||!1,cancelled:E||!1})},c&&(c[y]=e[y])}});let d=t._state;e.pause===!d.paused?(d.paused=e.pause,Ih(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);let p=(r||Object.keys(t.springs)).map(y=>t.springs[y].start(e)),m=e.cancel===!0||Vk(e,"cancel")===!0;(u||m&&d.asyncId)&&p.push(jk(++t._lastAsyncId,{props:e,state:d,actions:{pause:hA,resume:hA,start(y,x){m?(Up(d,t._lastAsyncId),x(Id(t))):(y.onRest=a,x(Jk(u,y,d,t)))}}})),d.paused&&await new Promise(y=>{d.resumeQueue.add(y)});let v=lC(t,await Promise.all(p));if(o&&v.finished&&!(n&&v.noop)){let y=Yk(e,o,i);if(y)return t4(t,[y]),Qk(t,y,!0)}return l&&yt.batchedUpdates(()=>l(v,t,t.item)),v}function eD(t,e){let n={...t.springs};return e&&Nt(Ii(e),r=>{Oe.und(r.keys)&&(r=kp(r)),Oe.obj(r.to)||(r={...r,to:void 0}),e4(n,r,i=>Zk(i))}),qk(t,n),n}function qk(t,e){po(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,xf(n,t))})}function Zk(t,e){let n=new Yie;return n.key=t,e&&xf(n,e),n}function e4(t,e,n){e.keys&&Nt(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function t4(t,e){Nt(e,n=>{e4(t.springs,n,r=>Zk(r,t))})}var Kx=({children:t,...e})=>{let n=S.useContext(My),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=Rie(()=>({pause:r,immediate:i}),[r,i]);let{Provider:s}=My;return S.createElement(s,{value:e},t)},My=nse(Kx,{});Kx.Provider=My.Provider;Kx.Consumer=My.Consumer;function nse(t,e){return Object.assign(t,S.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var rse=()=>{let t=[],e=function(r){Cie();let i=[];return Nt(t,(s,o)=>{if(Oe.und(r))i.push(s.start());else{let a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){let i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return Nt(t,r=>r.pause(...arguments)),this},e.resume=function(){return Nt(t,r=>r.resume(...arguments)),this},e.set=function(r){Nt(t,(i,s)=>{let o=Oe.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){let i=[];return Nt(t,(s,o)=>{if(Oe.und(r))i.push(s.start());else{let a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return Nt(t,r=>r.stop(...arguments)),this},e.update=function(r){return Nt(t,(i,s)=>i.update(this._getProps(r,i,s))),this};let n=function(r,i,s){return Oe.fun(r)?r(s,i):r};return e._getProps=n,e};function n4(t,e,n){let r=Oe.fun(e)&&e;r&&!n&&(n=[]);let i=S.useMemo(()=>r||arguments.length==3?rse():void 0,[]),s=S.useRef(0),o=kk(),a=S.useMemo(()=>({ctrls:[],queue:[],flush(g,_){let E=eD(g,_);return s.current>0&&!a.queue.length&&!Object.keys(E).some(A=>!g.springs[A])?SA(g,_):new Promise(A=>{qk(g,E),a.queue.push(()=>{A(SA(g,_))}),o()})}}),[]),l=S.useRef([...a.ctrls]),c=[],u=GB(t)||0;S.useMemo(()=>{Nt(l.current.slice(t,u),g=>{$ie(g,i),g.stop(!0)}),l.current.length=t,d(u,t)},[t]),S.useMemo(()=>{d(0,Math.min(u,t))},n);function d(g,_){for(let E=g;E<_;E++){let A=l.current[E]||(l.current[E]=new tse(null,a.flush)),M=r?r(E,A):e[E];M&&(c[E]=Qie(M))}}let p=l.current.map((g,_)=>eD(g,c[_])),m=S.useContext(Kx),v=GB(m),y=m!==v&&Gie(m);sC(()=>{s.current++,a.ctrls=l.current;let{queue:g}=a;g.length&&(a.queue=[],Nt(g,_=>_())),Nt(l.current,(_,E)=>{i==null||i.add(_),y&&_.start({default:m});let A=c[E];A&&(Vie(_,A.ref),_.ref?_.queue.push(A):_.start(A))})}),zk(()=>()=>{Nt(a.ctrls,g=>g.stop(!0))});let x=p.map(g=>({...g}));return i?[x,i]:x}function ef(t,e){let n=Oe.fun(t),[[r],i]=n4(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}var ise=class extends cC{constructor(n,r){super();qe(this,"key");qe(this,"idle",!0);qe(this,"calc");qe(this,"_active",new Set);this.source=n,this.calc=Bp(...r);let i=this._get(),s=mA(i);oC(this,s.create(i))}advance(n){let r=this._get(),i=this.get();Oo(r,i)||(io(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&tD(this._active)&&JS(this)}_get(){let n=Oe.arr(this.source)?this.source.map(oi):Ii(oi(this.source));return this.calc(...n)}_start(){this.idle&&!tD(this._active)&&(this.idle=!1,Nt(Xx(this),n=>{n.done=!1}),Hs.skipAnimation?(yt.batchedUpdates(()=>this.advance()),JS(this)):$x.start(this))}_attach(){let n=1;Nt(Ii(this.source),r=>{rs(r)&&xf(r,this),yA(r)&&(r.idle||this._active.add(r),n=Math.max(n,r.priority+1))}),this.priority=n,this._start()}_detach(){Nt(Ii(this.source),n=>{rs(n)&&Lp(n,this)}),this._active.clear(),JS(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Ii(this.source).reduce((r,i)=>Math.max(r,(yA(i)?i.priority:0)+1),0))}};function sse(t){return t.idle!==!1}function tD(t){return!t.size||Array.from(t).every(sse)}function JS(t){t.idle||(t.idle=!0,Nt(Xx(t),e=>{e.done=!0}),Dp(t,{type:"idle",parent:t}))}Hs.assign({createStringInterpolator:Fk,to:(t,e)=>new ise(t,e)});var r4=/^--/;function ose(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!r4.test(t)&&!(Yh.hasOwnProperty(t)&&Yh[t])?e+"px":(""+e).trim()}var nD={};function ase(t,e){if(!t.nodeType||!t.setAttribute)return!1;let n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),u=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:nD[d]||(nD[d]=d.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));i!==void 0&&(t.textContent=i);for(let d in r)if(r.hasOwnProperty(d)){let p=ose(d,r[d]);r4.test(d)?t.style.setProperty(d,p):t.style[d]=p}u.forEach((d,p)=>{t.setAttribute(d,c[p])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Yh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lse=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),cse=["Webkit","Ms","Moz","O"];Yh=Object.keys(Yh).reduce((t,e)=>(cse.forEach(n=>t[lse(n,e)]=t[e]),t),Yh);var use=/^(matrix|translate|scale|rotate|skew)/,dse=/^(translate)/,fse=/^(rotate|skew)/,KS=(t,e)=>Oe.num(t)&&t!==0?t+e:t,N0=(t,e)=>Oe.arr(t)?t.every(n=>N0(n,e)):Oe.num(t)?t===e:parseFloat(t)===e,hse=class extends Jx{constructor({x:e,y:n,z:r,...i}){let s=[],o=[];(e||n||r)&&(s.push([e||0,n||0,r||0]),o.push(a=>[`translate3d(${a.map(l=>KS(l,"px")).join(",")})`,N0(a,0)])),po(i,(a,l)=>{if(l==="transform")s.push([a||""]),o.push(c=>[c,c===""]);else if(use.test(l)){if(delete i[l],Oe.und(a))return;let c=dse.test(l)?"px":fse.test(l)?"deg":"";s.push(Ii(a)),o.push(l==="rotate3d"?([u,d,p,m])=>[`rotate3d(${u},${d},${p},${KS(m,c)})`,N0(m,0)]:u=>[`${l}(${u.map(d=>KS(d,c)).join(",")})`,N0(u,l.startsWith("scale")?1:0)])}}),s.length&&(i.transform=new pse(s,o)),super(i)}},pse=class extends Lk{constructor(n,r){super();qe(this,"_value",null);this.inputs=n,this.transforms=r}get(){return this._value||(this._value=this._get())}_get(){let n="",r=!0;return Nt(this.inputs,(i,s)=>{let o=oi(i[0]),[a,l]=this.transforms[s](Oe.arr(o)?o:i.map(oi));n+=" "+a,r=r&&l}),r?"none":n}observerAdded(n){n==1&&Nt(this.inputs,r=>Nt(r,i=>rs(i)&&xf(i,this)))}observerRemoved(n){n==0&&Nt(this.inputs,r=>Nt(r,i=>rs(i)&&Lp(i,this)))}eventObserved(n){n.type=="change"&&(this._value=null),Dp(this,n)}},mse=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Hs.assign({batchedUpdates:vo.unstable_batchedUpdates,createStringInterpolator:Fk,colors:iie});var gse=Fie(mse,{applyAnimatedValues:ase,createAnimatedStyle:t=>new hse(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Hc=gse.animated;const uC=({children:t})=>{const[e,n]=S.useState(!1),r=ef({delay:100,to:{x:e?0:24,opacity:e?1:0}});return L.jsx(tu,{onEnter:()=>n(!0),children:L.jsx(Hc.div,{style:r,children:t})})},vse=t=>[t.setUrl,t.setScale,t.scale,t.url,t.setPersonUploadedImage],rD=["pick-from-catalog","upload-your-image"],yse=()=>{const[t,e,n,r,i]=vm(vse);return L.jsx(uC,{children:L.jsxs("div",{className:"flex flex-col gap-3 p-6 justify-center items-center overflow-hidden",children:[L.jsxs("div",{className:"flex self-start justify-around w-full ",children:[L.jsx("div",{className:"flex flex-col",children:L.jsx("h1",{className:"self-start text-2xl font-bold text-primarypink",children:"Background"})}),L.jsxs("button",{className:"flex text-sm items-center self-start mt-2 gap-2 ml-auto",onClick:()=>{t("./bg.jpg"),i("")},children:["Clear background",L.jsx(TM,{height:14,width:14})]})]}),r!=="./bg.jpg"&&L.jsxs("div",{className:"flex flex-col w-full gap-3 mb-3",children:[L.jsx("h1",{className:"text-xl font-bold",children:"Scale:"}),L.jsx(XM,{min:.1,max:2,step:.1,value:[n],onValueChange:s=>e(s[0])})]}),L.jsxs(bte,{defaultValue:"pick-from-catalog",className:"w-full",children:[L.jsx(DU,{className:"mb-3",children:rD.map(s=>L.jsx(LU,{className:"capitalize",value:s,children:s.replace(/-/g," ")},s))}),rD.map(s=>L.jsxs(OU,{className:"flex flex-col w-[calc(100%-8px)]",value:s,children:[s==="pick-from-catalog"&&L.jsx(ene,{}),s==="upload-your-image"&&L.jsx(Yne,{})]},s))]})]})})};var i4={};Object.defineProperty(i4,"__esModule",{value:!0});var xse=i4.default=_se;function ju(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}function _se(t,e,n){var r=t[e],i=t.length,s=e-n;return s>0?[].concat(ju(t.slice(0,n)),[r],ju(t.slice(n,e)),ju(t.slice(e+1,i))):s<0?[].concat(ju(t.slice(0,e)),ju(t.slice(e+1,n+1)),[r],ju(t.slice(n+1,i))):t}const s4=S.forwardRef(({className:t,type:e,...n},r)=>L.jsx("input",{type:e,className:Pt("flex h-7 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));s4.displayName="Input";const Sse={red:"#FF0000","light-pink":"#FD0457",pink:"#FE03E8",yellow:"#E9DE00",orange:"#FF5500",golden:"#FF7E00",green:"#04FA28","ice-blue":"#00AFE6",blue:"#1200FE",purple:"#9200F3","warm-white":"#FBB562","cold-white":"#9BB1D9"},wse=({colorName:t,color:e,isSelected:n,onButtonClicked:r,selectColor:i})=>L.jsx("button",{onClick:()=>{r(t),i(e)},"aria-label":t.replace("-"," "),style:{backgroundColor:Sse[t]},className:`w-[24px] h-[24px] border rounded-[50%] ${n===t&&"border-white"}`}),Ese=({selectColor:t})=>{const[e,n]=S.useState(""),r=i=>{n(i)};return L.jsx("div",{className:"flex gap-1 flex-shrink-0",children:Object.keys(jh).map(i=>L.jsx(wse,{onButtonClicked:r,isSelected:e,color:jh[i],colorName:i,selectColor:t},jh[i].emissive))})},dC=S.forwardRef((t,e)=>{const{children:n,...r}=t,i=S.Children.toArray(n),s=i.find(bse);if(s){const o=s.props.children,a=i.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return S.createElement(wA,Re({},r,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,a):null)}return S.createElement(wA,Re({},r,{ref:e}),n)});dC.displayName="Slot";const wA=S.forwardRef((t,e)=>{const{children:n,...r}=t;return S.isValidElement(n)?S.cloneElement(n,{...Mse(r,n.props),ref:MM(e,n.ref)}):S.Children.count(n)>1?S.Children.only(null):null});wA.displayName="SlotClone";const Ase=({children:t})=>S.createElement(S.Fragment,null,t);function bse(t){return S.isValidElement(t)&&t.type===Ase}function Mse(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const Cse=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],Yx=Cse.reduce((t,e)=>{const n=S.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?dC:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(a,Re({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Tse(t,e){t&&vo.flushSync(()=>t.dispatchEvent(e))}function Rse(t){const e=$n(t);S.useEffect(()=>{const n=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e])}const EA="dismissableLayer.update",Pse="dismissableLayer.pointerDownOutside",Ise="dismissableLayer.focusOutside";let iD;const Bse=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dse=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(Bse),[u,d]=S.useState(null),[,p]=S.useState({}),m=Fn(e,T=>d(T)),v=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(y),g=u?v.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,E=g>=x,A=Lse(T=>{const P=T.target,I=[...c.branches].some(R=>R.contains(P));!E||I||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())}),M=Ose(T=>{const P=T.target;[...c.branches].some(R=>R.contains(P))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())});return Rse(T=>{g===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))}),S.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(iD=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),sD(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=iD)}},[u,n,c]),S.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),sD())},[u,c]),S.useEffect(()=>{const T=()=>p({});return document.addEventListener(EA,T),()=>document.removeEventListener(EA,T)},[]),S.createElement(Yx.div,Re({},l,{ref:m,style:{pointerEvents:_?E?"auto":"none":void 0,...t.style},onFocusCapture:Gt(t.onFocusCapture,M.onFocusCapture),onBlurCapture:Gt(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Gt(t.onPointerDownCapture,A.onPointerDownCapture)}))});function Lse(t){const e=$n(t),n=S.useRef(!1),r=S.useRef(()=>{});return S.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let c=function(){o4(Pse,e,l,{discrete:!0})};var a=c;const l={originalEvent:o};o.pointerType==="touch"?(document.removeEventListener("click",r.current),r.current=c,document.addEventListener("click",r.current,{once:!0})):c()}n.current=!1},s=window.setTimeout(()=>{document.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),document.removeEventListener("pointerdown",i),document.removeEventListener("click",r.current)}},[e]),{onPointerDownCapture:()=>n.current=!0}}function Ose(t){const e=$n(t),n=S.useRef(!1);return S.useEffect(()=>{const r=i=>{i.target&&!n.current&&o4(Ise,e,{originalEvent:i},{discrete:!1})};return document.addEventListener("focusin",r),()=>document.removeEventListener("focusin",r)},[e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function sD(){const t=new CustomEvent(EA);document.dispatchEvent(t)}function o4(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Tse(i,s):i.dispatchEvent(s)}const YS="focusScope.autoFocusOnMount",QS="focusScope.autoFocusOnUnmount",oD={bubbles:!1,cancelable:!0},Nse=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),c=$n(i),u=$n(s),d=S.useRef(null),p=Fn(e,y=>l(y)),m=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let g=function(E){if(m.paused||!a)return;const A=E.target;a.contains(A)?d.current=A:sc(d.current,{select:!0})},_=function(E){m.paused||!a||a.contains(E.relatedTarget)||sc(d.current,{select:!0})};var y=g,x=_;return document.addEventListener("focusin",g),document.addEventListener("focusout",_),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",_)}}},[r,a,m.paused]),S.useEffect(()=>{if(a){lD.add(m);const y=document.activeElement;if(!a.contains(y)){const g=new CustomEvent(YS,oD);a.addEventListener(YS,c),a.dispatchEvent(g),g.defaultPrevented||(Fse(Gse(a4(a)),{select:!0}),document.activeElement===y&&sc(a))}return()=>{a.removeEventListener(YS,c),setTimeout(()=>{const g=new CustomEvent(QS,oD);a.addEventListener(QS,u),a.dispatchEvent(g),g.defaultPrevented||sc(y??document.body,{select:!0}),a.removeEventListener(QS,u),lD.remove(m)},0)}}},[a,c,u,m]);const v=S.useCallback(y=>{if(!n&&!r||m.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(x&&g){const _=y.currentTarget,[E,A]=Use(_);E&&A?!y.shiftKey&&g===A?(y.preventDefault(),n&&sc(E,{select:!0})):y.shiftKey&&g===E&&(y.preventDefault(),n&&sc(A,{select:!0})):g===_&&y.preventDefault()}},[n,r,m.paused]);return S.createElement(Yx.div,Re({tabIndex:-1},o,{ref:p,onKeyDown:v}))});function Fse(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(sc(r,{select:e}),document.activeElement!==n)return}function Use(t){const e=a4(t),n=aD(e,t),r=aD(e.reverse(),t);return[n,r]}function a4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function aD(t,e){for(const n of t)if(!kse(n,{upTo:e}))return n}function kse(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function zse(t){return t instanceof HTMLInputElement&&"select"in t}function sc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&zse(t)&&e&&t.select()}}const lD=Hse();function Hse(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=cD(t,e),t.unshift(e)},remove(e){var n;t=cD(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function cD(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Gse(t){return t.filter(e=>e.tagName!=="A")}const $se=S.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?dO.createPortal(S.createElement(Yx.div,Re({},i,{ref:e})),r):null});let qS=0;function fC(){S.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:uD()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:uD()),qS++,()=>{qS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),qS--}},[])}function uD(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var Ua=function(){return Ua=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ua.apply(this,arguments)};function Vse(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Wse(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Qh="right-scroll-bar-position",qh="width-before-scroll-bar",jse="with-scroll-bars-hidden",Xse="--removed-body-scroll-bar-size";function Jse(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Kse(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}function l4(t,e){return Kse(e||null,function(n){return t.forEach(function(r){return Jse(r,n)})})}var Cy=function(){return Cy=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cy.apply(this,arguments)};function Yse(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Qse(t){return t}function qse(t,e){e===void 0&&(e=Qse);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function c4(t){t===void 0&&(t={});var e=qse(null);return e.options=Cy({async:!0,ssr:!1},t),e}var u4=function(t){var e=t.sideCar,n=Yse(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Cy({},n))};u4.isSideCarExport=!0;function d4(t,e){return t.useMedium(e),u4}var f4=c4(),ZS=function(){},Qx=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:ZS,onWheelCapture:ZS,onTouchMoveCapture:ZS}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,p=t.sideCar,m=t.noIsolation,v=t.inert,y=t.allowPinchZoom,x=t.as,g=x===void 0?"div":x,_=Vse(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),E=p,A=l4([n,e]),M=Ua(Ua({},_),i);return S.createElement(S.Fragment,null,u&&S.createElement(E,{sideCar:f4,removeScrollBar:c,shards:d,noIsolation:m,inert:v,setCallbacks:s,allowPinchZoom:!!y,lockRef:n}),o?S.cloneElement(S.Children.only(a),Ua(Ua({},M),{ref:A})):S.createElement(g,Ua({},M,{className:l,ref:A}),a))});Qx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qx.classNames={fullWidth:qh,zeroRight:Qh};var dD,Zse=function(){if(dD)return dD;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eoe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Zse();return e&&t.setAttribute("nonce",e),t}function toe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function noe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var roe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=eoe())&&(toe(e,n),noe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ioe=function(){var t=roe();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},hC=function(){var t=ioe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},soe={left:0,top:0,right:0,gap:0},ew=function(t){return parseInt(t||"",10)||0},ooe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[ew(n),ew(r),ew(i)]},aoe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return soe;var e=ooe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},loe=hC(),coe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(jse,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(qh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Qh," .").concat(Qh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(qh," .").concat(qh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(Xse,": ").concat(a,`px;
  }
`)},h4=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=S.useMemo(function(){return aoe(i)},[i]);return S.createElement(loe,{styles:coe(s,!e,i,n?"":"!important")})},AA=!1;if(typeof window<"u")try{var s0=Object.defineProperty({},"passive",{get:function(){return AA=!0,!0}});window.addEventListener("test",s0,s0),window.removeEventListener("test",s0,s0)}catch{AA=!1}var Xu=AA?{passive:!1}:!1,uoe=function(t){var e=window.getComputedStyle(t);return e.overflowY!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowY==="visible")},doe=function(t){var e=window.getComputedStyle(t);return e.overflowX!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowX==="visible")},fD=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=p4(t,n);if(r){var i=m4(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},foe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},hoe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},p4=function(t,e){return t==="v"?uoe(e):doe(e)},m4=function(t,e){return t==="v"?foe(e):hoe(e)},poe=function(t,e){return t==="h"&&e==="rtl"?-1:1},moe=function(t,e,n,r,i){var s=poe(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,p=0;do{var m=m4(t,a),v=m[0],y=m[1],x=m[2],g=y-x-s*v;(v||g)&&p4(t,a)&&(d+=g,p+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&d===0||!i&&o>d)||!u&&(i&&p===0||!i&&-o>p))&&(c=!0),c},o0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},hD=function(t){return[t.deltaX,t.deltaY]},pD=function(t){return t&&"current"in t?t.current:t},goe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},voe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},yoe=0,Ju=[];function xoe(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),i=S.useState(yoe++)[0],s=S.useState(function(){return hC()})[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Wse([t.lockRef.current],(t.shards||[]).map(pD),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(y,x){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var g=o0(y),_=n.current,E="deltaX"in y?y.deltaX:_[0]-g[0],A="deltaY"in y?y.deltaY:_[1]-g[1],M,T=y.target,P=Math.abs(E)>Math.abs(A)?"h":"v";if("touches"in y&&P==="h"&&T.type==="range")return!1;var I=fD(P,T);if(!I)return!0;if(I?M=P:(M=P==="v"?"h":"v",I=fD(P,T)),!I)return!1;if(!r.current&&"changedTouches"in y&&(E||A)&&(r.current=M),!M)return!0;var R=r.current||M;return moe(R,x,y,R==="h"?E:A,!0)},[]),l=S.useCallback(function(y){var x=y;if(!(!Ju.length||Ju[Ju.length-1]!==s)){var g="deltaY"in x?hD(x):o0(x),_=e.current.filter(function(M){return M.name===x.type&&M.target===x.target&&goe(M.delta,g)})[0];if(_&&_.should){x.preventDefault();return}if(!_){var E=(o.current.shards||[]).map(pD).filter(Boolean).filter(function(M){return M.contains(x.target)}),A=E.length>0?a(x,E[0]):!o.current.noIsolation;A&&x.preventDefault()}}},[]),c=S.useCallback(function(y,x,g,_){var E={name:y,delta:x,target:g,should:_};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(A){return A!==E})},1)},[]),u=S.useCallback(function(y){n.current=o0(y),r.current=void 0},[]),d=S.useCallback(function(y){c(y.type,hD(y),y.target,a(y,t.lockRef.current))},[]),p=S.useCallback(function(y){c(y.type,o0(y),y.target,a(y,t.lockRef.current))},[]);S.useEffect(function(){return Ju.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Xu),document.addEventListener("touchmove",l,Xu),document.addEventListener("touchstart",u,Xu),function(){Ju=Ju.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Xu),document.removeEventListener("touchmove",l,Xu),document.removeEventListener("touchstart",u,Xu)}},[]);var m=t.removeScrollBar,v=t.inert;return S.createElement(S.Fragment,null,v?S.createElement(s,{styles:voe(i)}):null,m?S.createElement(h4,{gapMode:"margin"}):null)}const _oe=d4(f4,xoe);var g4=S.forwardRef(function(t,e){return S.createElement(Qx,Ua({},t,{ref:e,sideCar:_oe}))});g4.classNames=Qx.classNames;const Soe=g4;var woe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ku=new WeakMap,a0=new WeakMap,l0={},tw=0,v4=function(t){return t&&(t.host||v4(t.parentNode))},Eoe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=v4(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Aoe=function(t,e,n,r){var i=Eoe(e,Array.isArray(t)?t:[t]);l0[n]||(l0[n]=new WeakMap);var s=l0[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(p){if(a.has(p))u(p);else{var m=p.getAttribute(r),v=m!==null&&m!=="false",y=(Ku.get(p)||0)+1,x=(s.get(p)||0)+1;Ku.set(p,y),s.set(p,x),o.push(p),y===1&&v&&a0.set(p,!0),x===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}})};return u(e),a.clear(),tw++,function(){o.forEach(function(d){var p=Ku.get(d)-1,m=s.get(d)-1;Ku.set(d,p),s.set(d,m),p||(a0.has(d)||d.removeAttribute(r),a0.delete(d)),m||d.removeAttribute(n)}),tw--,tw||(Ku=new WeakMap,Ku=new WeakMap,a0=new WeakMap,l0={})}},pC=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||woe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Aoe(r,i,n,"aria-hidden")):function(){return null}};const y4="Dialog",[x4,Sde]=Tl(y4),[boe,nu]=x4(y4),Moe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c=!1,u]=bx({prop:r,defaultProp:i,onChange:s});return S.createElement(boe,{scope:e,triggerRef:a,contentRef:l,contentId:Rd(),titleId:Rd(),descriptionId:Rd(),open:c,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(d=>!d),[u]),modal:o},n)},_4="DialogPortal",[Coe,S4]=x4(_4,{forceMount:void 0}),Toe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=nu(_4,e);return S.createElement(Coe,{scope:e,forceMount:n},S.Children.map(r,o=>S.createElement(yi,{present:n||s.open},S.createElement($se,{asChild:!0,container:i},o))))},bA="DialogOverlay",Roe=S.forwardRef((t,e)=>{const n=S4(bA,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=nu(bA,t.__scopeDialog);return s.modal?S.createElement(yi,{present:r||s.open},S.createElement(Poe,Re({},i,{ref:e}))):null}),Poe=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=nu(bA,n);return S.createElement(Soe,{as:dC,allowPinchZoom:!0,shards:[i.contentRef]},S.createElement(Yx.div,Re({"data-state":E4(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),zp="DialogContent",Ioe=S.forwardRef((t,e)=>{const n=S4(zp,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=nu(zp,t.__scopeDialog);return S.createElement(yi,{present:r||s.open},s.modal?S.createElement(Boe,Re({},i,{ref:e})):S.createElement(Doe,Re({},i,{ref:e})))}),Boe=S.forwardRef((t,e)=>{const n=nu(zp,t.__scopeDialog),r=S.useRef(null),i=Fn(e,n.contentRef,r);return S.useEffect(()=>{const s=r.current;if(s)return pC(s)},[]),S.createElement(w4,Re({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:Gt(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Gt(t.onFocusOutside,s=>s.preventDefault())}))}),Doe=S.forwardRef((t,e)=>{const n=nu(zp,t.__scopeDialog),r=S.useRef(!1);return S.createElement(w4,Re({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s;if((s=t.onCloseAutoFocus)===null||s===void 0||s.call(t,i),!i.defaultPrevented){var o;r.current||(o=n.triggerRef.current)===null||o===void 0||o.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var s,o;(s=t.onInteractOutside)===null||s===void 0||s.call(t,i),i.defaultPrevented||(r.current=!0);const a=i.target;((o=n.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&i.preventDefault()}}))}),w4=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=nu(zp,n),l=S.useRef(null),c=Fn(e,l);return fC(),S.createElement(S.Fragment,null,S.createElement(Nse,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},S.createElement(Dse,Re({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":E4(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function E4(t){return t?"open":"closed"}const Loe=Moe,Ooe=Toe,Noe=Roe,Foe=Ioe;var mD=1,Uoe=.9,koe=.3,nw=.1,zoe=0,rw=.999,Hoe=.9999,Goe=.99,gD=/[\\\/\-_+.# \t"@\[\(\{&]/,$oe=/[\\\/\-_+.# \t"@\[\(\{&]/g;function MA(t,e,n,r,i,s){if(s===e.length)return i===t.length?mD:Goe;for(var o=r.charAt(s),a=n.indexOf(o,i),l=0,c,u,d;a>=0;)c=MA(t,e,n,r,a+1,s+1),c>l&&(a===i?c*=mD:gD.test(t.charAt(a-1))?(c*=Uoe,d=t.slice(i,a-1).match($oe),d&&i>0&&(c*=Math.pow(rw,d.length))):gD.test(t.slice(i,a-1))?(c*=zoe,i>0&&(c*=Math.pow(rw,a-i))):(c*=koe,i>0&&(c*=Math.pow(rw,a-i))),t.charAt(a)!==e.charAt(s)&&(c*=Hoe)),c<nw&&n.charAt(a-1)===r.charAt(s+1)&&n.charAt(a-1)!==r.charAt(s)&&(u=MA(t,e,n,r,a+1,s+2),u*nw>c&&(c=u*nw)),c>l&&(l=c),a=n.indexOf(o,a+1);return l}function Voe(t,e){return MA(t,e,t.toLowerCase(),e.toLowerCase(),0,0)}var Woe=Voe;const joe=yl(Woe);var Xoe='[cmdk-list-sizer=""]',Ah='[cmdk-group=""]',iw='[cmdk-group-items=""]',Joe='[cmdk-group-heading=""]',A4='[cmdk-item=""]',vD=`${A4}:not([aria-disabled="true"])`,CA="cmdk-item-select",Ba="data-value",Koe=(t,e)=>joe(t,e),b4=S.createContext(void 0),Tm=()=>S.useContext(b4),M4=S.createContext(void 0),mC=()=>S.useContext(M4),C4=S.createContext(void 0),T4=S.forwardRef((t,e)=>{let n=S.useRef(null),r=ed(()=>({search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}})),i=ed(()=>new Set),s=ed(()=>new Map),o=ed(()=>new Map),a=ed(()=>new Set),l=R4(t),{label:c,children:u,value:d,onValueChange:p,filter:m,shouldFilter:v,...y}=t,x=S.useId(),g=S.useId(),_=S.useId(),E=oae();_f(()=>{if(d!==void 0){let N=d.trim().toLowerCase();r.current.value=N,E(6,D),A.emit()}},[d]);let A=S.useMemo(()=>({subscribe:N=>(a.current.add(N),()=>a.current.delete(N)),snapshot:()=>r.current,setState:(N,G,ne)=>{var J,ee,te;if(!Object.is(r.current[N],G)){if(r.current[N]=G,N==="search")R(),P(),E(1,I);else if(N==="value")if(((J=l.current)==null?void 0:J.value)!==void 0){(te=(ee=l.current).onValueChange)==null||te.call(ee,G);return}else ne||E(5,D);A.emit()}},emit:()=>{a.current.forEach(N=>N())}}),[]),M=S.useMemo(()=>({value:(N,G)=>{G!==o.current.get(N)&&(o.current.set(N,G),r.current.filtered.items.set(N,T(G)),E(2,()=>{P(),A.emit()}))},item:(N,G)=>(i.current.add(N),G&&(s.current.has(G)?s.current.get(G).add(N):s.current.set(G,new Set([N]))),E(3,()=>{R(),P(),r.current.value||I(),A.emit()}),()=>{o.current.delete(N),i.current.delete(N),r.current.filtered.items.delete(N),E(4,()=>{R(),I(),A.emit()})}),group:N=>(s.current.has(N)||s.current.set(N,new Set),()=>{o.current.delete(N),s.current.delete(N)}),filter:()=>l.current.shouldFilter,label:c||t["aria-label"],listId:x,inputId:_,labelId:g}),[]);function T(N){var G;let ne=((G=l.current)==null?void 0:G.filter)??Koe;return N?ne(N,r.current.search):0}function P(){if(!n.current||!r.current.search||l.current.shouldFilter===!1)return;let N=r.current.filtered.items,G=[];r.current.filtered.groups.forEach(J=>{let ee=s.current.get(J),te=0;ee.forEach(ye=>{let Ae=N.get(ye);te=Math.max(Ae,te)}),G.push([J,te])});let ne=n.current.querySelector(Xoe);X().sort((J,ee)=>{let te=J.getAttribute(Ba),ye=ee.getAttribute(Ba);return(N.get(ye)??0)-(N.get(te)??0)}).forEach(J=>{let ee=J.closest(iw);ee?ee.appendChild(J.parentElement===ee?J:J.closest(`${iw} > *`)):ne.appendChild(J.parentElement===ne?J:J.closest(`${iw} > *`))}),G.sort((J,ee)=>ee[1]-J[1]).forEach(J=>{let ee=n.current.querySelector(`${Ah}[${Ba}="${J[0]}"]`);ee==null||ee.parentElement.appendChild(ee)})}function I(){let N=X().find(ne=>!ne.ariaDisabled),G=N==null?void 0:N.getAttribute(Ba);A.setState("value",G||void 0)}function R(){if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=i.current.size;return}r.current.filtered.groups=new Set;let N=0;for(let G of i.current){let ne=o.current.get(G),J=T(ne);r.current.filtered.items.set(G,J),J>0&&N++}for(let[G,ne]of s.current)for(let J of ne)if(r.current.filtered.items.get(J)>0){r.current.filtered.groups.add(G);break}r.current.filtered.count=N}function D(){var N,G,ne;let J=F();J&&(((N=J.parentElement)==null?void 0:N.firstChild)===J&&((ne=(G=J.closest(Ah))==null?void 0:G.querySelector(Joe))==null||ne.scrollIntoView({block:"nearest"})),J.scrollIntoView({block:"nearest"}))}function F(){return n.current.querySelector(`${A4}[aria-selected="true"]`)}function X(){return Array.from(n.current.querySelectorAll(vD))}function z(N){let G=X()[N];G&&A.setState("value",G.getAttribute(Ba))}function V(N){var G;let ne=F(),J=X(),ee=J.findIndex(ye=>ye===ne),te=J[ee+N];(G=l.current)!=null&&G.loop&&(te=ee+N<0?J[J.length-1]:ee+N===J.length?J[0]:J[ee+N]),te&&A.setState("value",te.getAttribute(Ba))}function H(N){let G=F(),ne=G==null?void 0:G.closest(Ah),J;for(;ne&&!J;)ne=N>0?iae(ne,Ah):sae(ne,Ah),J=ne==null?void 0:ne.querySelector(vD);J?A.setState("value",J.getAttribute(Ba)):V(N)}let Q=()=>z(X().length-1),Z=N=>{N.preventDefault(),N.metaKey?Q():N.altKey?H(1):V(1)},U=N=>{N.preventDefault(),N.metaKey?z(0):N.altKey?H(-1):V(-1)};return S.createElement("div",{ref:Rm([n,e]),...y,"cmdk-root":"",onKeyDown:N=>{var G;if((G=y.onKeyDown)==null||G.call(y,N),!N.defaultPrevented)switch(N.key){case"n":case"j":{N.ctrlKey&&Z(N);break}case"ArrowDown":{Z(N);break}case"p":case"k":{N.ctrlKey&&U(N);break}case"ArrowUp":{U(N);break}case"Home":{N.preventDefault(),z(0);break}case"End":{N.preventDefault(),Q();break}case"Enter":{N.preventDefault();let ne=F();if(ne){let J=new Event(CA);ne.dispatchEvent(J)}}}}},S.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:aae},c),S.createElement(M4.Provider,{value:A},S.createElement(b4.Provider,{value:M},u)))}),Yoe=S.forwardRef((t,e)=>{let n=S.useId(),r=S.useRef(null),i=S.useContext(C4),s=Tm(),o=R4(t);_f(()=>s.item(n,i),[]);let a=P4(n,r,[t.value,t.children,r]),l=mC(),c=tf(g=>g.value&&g.value===a.current),u=tf(g=>s.filter()===!1?!0:g.search?g.filtered.items.get(n)>0:!0);S.useEffect(()=>{let g=r.current;if(!(!g||t.disabled))return g.addEventListener(CA,d),()=>g.removeEventListener(CA,d)},[u,t.onSelect,t.disabled]);function d(){var g,_;(_=(g=o.current).onSelect)==null||_.call(g,a.current)}function p(){l.setState("value",a.current,!0)}if(!u)return null;let{disabled:m,value:v,onSelect:y,...x}=t;return S.createElement("div",{ref:Rm([r,e]),...x,"cmdk-item":"",role:"option","aria-disabled":m||void 0,"aria-selected":c||void 0,"data-selected":c||void 0,onPointerMove:m?void 0:p,onClick:m?void 0:d},t.children)}),Qoe=S.forwardRef((t,e)=>{let{heading:n,children:r,...i}=t,s=S.useId(),o=S.useRef(null),a=S.useRef(null),l=S.useId(),c=Tm(),u=tf(p=>c.filter()===!1?!0:p.search?p.filtered.groups.has(s):!0);_f(()=>c.group(s),[]),P4(s,o,[t.value,t.heading,a]);let d=S.createElement(C4.Provider,{value:s},r);return S.createElement("div",{ref:Rm([o,e]),...i,"cmdk-group":"",role:"presentation",hidden:u?void 0:!0},n&&S.createElement("div",{ref:a,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),S.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},d))}),qoe=S.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=S.useRef(null),s=tf(o=>!o.search);return!n&&!s?null:S.createElement("div",{ref:Rm([i,e]),...r,"cmdk-separator":"",role:"separator"})}),Zoe=S.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=mC(),o=tf(l=>l.search),a=Tm();return S.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),S.createElement("input",{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.listId,"aria-labelledby":a.labelId,id:a.inputId,type:"text",value:i?t.value:o,onChange:l=>{i||s.setState("search",l.target.value),n==null||n(l.target.value)}})}),eae=S.forwardRef((t,e)=>{let{children:n,...r}=t,i=S.useRef(null),s=S.useRef(null),o=Tm();return S.useEffect(()=>{if(s.current&&i.current){let a=s.current,l=i.current,c,u=new ResizeObserver(()=>{c=requestAnimationFrame(()=>{let d=a.getBoundingClientRect().height;l.style.setProperty("--cmdk-list-height",d.toFixed(1)+"px")})});return u.observe(a),()=>{cancelAnimationFrame(c),u.unobserve(a)}}},[]),S.createElement("div",{ref:Rm([i,e]),...r,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:o.listId,"aria-labelledby":o.inputId},S.createElement("div",{ref:s,"cmdk-list-sizer":""},n))}),tae=S.forwardRef((t,e)=>{let{open:n,onOpenChange:r,container:i,...s}=t;return S.createElement(Loe,{open:n,onOpenChange:r},S.createElement(Ooe,{container:i},S.createElement(Noe,{"cmdk-overlay":""}),S.createElement(Foe,{"aria-label":t.label,"cmdk-dialog":""},S.createElement(T4,{ref:e,...s}))))}),nae=S.forwardRef((t,e)=>{let n=S.useRef(!0),r=tf(i=>i.filtered.count===0);return S.useEffect(()=>{n.current=!1},[]),n.current||!r?null:S.createElement("div",{ref:e,...t,"cmdk-empty":"",role:"presentation"})}),rae=S.forwardRef((t,e)=>{let{progress:n,children:r,...i}=t;return S.createElement("div",{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},S.createElement("div",{"aria-hidden":!0},r))}),xi=Object.assign(T4,{List:eae,Item:Yoe,Input:Zoe,Group:Qoe,Separator:qoe,Dialog:tae,Empty:nae,Loading:rae});function iae(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function sae(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function R4(t){let e=S.useRef(t);return _f(()=>{e.current=t}),e}var _f=typeof window>"u"?S.useEffect:S.useLayoutEffect;function ed(t){let e=S.useRef();return e.current===void 0&&(e.current=t()),e}function Rm(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function tf(t){let e=mC(),n=()=>t(e.snapshot());return S.useSyncExternalStore(e.subscribe,n,n)}function P4(t,e,n){let r=S.useRef(),i=Tm();return _f(()=>{var s;let o=(()=>{var a;for(let l of n){if(typeof l=="string")return l.trim().toLowerCase();if(typeof l=="object"&&"current"in l&&l.current)return(a=l.current.textContent)==null?void 0:a.trim().toLowerCase()}})();i.value(t,o),(s=e.current)==null||s.setAttribute(Ba,o),r.current=o}),r}var oae=()=>{let[t,e]=S.useState(),n=ed(()=>new Map);return _f(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}},aae={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function lae(t,e=globalThis==null?void 0:globalThis.document){const n=$n(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const TA="dismissableLayer.update",cae="dismissableLayer.pointerDownOutside",uae="dismissableLayer.focusOutside";let yD;const dae=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),I4=S.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=S.useContext(dae),[d,p]=S.useState(null),m=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=S.useState({}),y=Fn(e,I=>p(I)),x=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(g),E=d?x.indexOf(d):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,M=E>=_,T=fae(I=>{const R=I.target,D=[...u.branches].some(F=>F.contains(R));!M||D||(s==null||s(I),a==null||a(I),I.defaultPrevented||l==null||l())},m),P=hae(I=>{const R=I.target;[...u.branches].some(F=>F.contains(R))||(o==null||o(I),a==null||a(I),I.defaultPrevented||l==null||l())},m);return lae(I=>{E===u.layers.size-1&&(i==null||i(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},m),S.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(yD=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),xD(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=yD)}},[d,m,r,u]),S.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),xD())},[d,u]),S.useEffect(()=>{const I=()=>v({});return document.addEventListener(TA,I),()=>document.removeEventListener(TA,I)},[]),S.createElement(In.div,Re({},c,{ref:y,style:{pointerEvents:A?M?"auto":"none":void 0,...t.style},onFocusCapture:Gt(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Gt(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Gt(t.onPointerDownCapture,T.onPointerDownCapture)}))});function fae(t,e=globalThis==null?void 0:globalThis.document){const n=$n(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){B4(cae,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function hae(t,e=globalThis==null?void 0:globalThis.document){const n=$n(t),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&B4(uae,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xD(){const t=new CustomEvent(TA);document.dispatchEvent(t)}function B4(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Kee(i,s):i.dispatchEvent(s)}const sw="focusScope.autoFocusOnMount",ow="focusScope.autoFocusOnUnmount",_D={bubbles:!1,cancelable:!0},D4=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),c=$n(i),u=$n(s),d=S.useRef(null),p=Fn(e,y=>l(y)),m=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let g=function(E){if(m.paused||!a)return;const A=E.target;a.contains(A)?d.current=A:oc(d.current,{select:!0})},_=function(E){m.paused||!a||a.contains(E.relatedTarget)||oc(d.current,{select:!0})};var y=g,x=_;return document.addEventListener("focusin",g),document.addEventListener("focusout",_),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",_)}}},[r,a,m.paused]),S.useEffect(()=>{if(a){wD.add(m);const y=document.activeElement;if(!a.contains(y)){const g=new CustomEvent(sw,_D);a.addEventListener(sw,c),a.dispatchEvent(g),g.defaultPrevented||(pae(xae(L4(a)),{select:!0}),document.activeElement===y&&oc(a))}return()=>{a.removeEventListener(sw,c),setTimeout(()=>{const g=new CustomEvent(ow,_D);a.addEventListener(ow,u),a.dispatchEvent(g),g.defaultPrevented||oc(y??document.body,{select:!0}),a.removeEventListener(ow,u),wD.remove(m)},0)}}},[a,c,u,m]);const v=S.useCallback(y=>{if(!n&&!r||m.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(x&&g){const _=y.currentTarget,[E,A]=mae(_);E&&A?!y.shiftKey&&g===A?(y.preventDefault(),n&&oc(E,{select:!0})):y.shiftKey&&g===E&&(y.preventDefault(),n&&oc(A,{select:!0})):g===_&&y.preventDefault()}},[n,r,m.paused]);return S.createElement(In.div,Re({tabIndex:-1},o,{ref:p,onKeyDown:v}))});function pae(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(oc(r,{select:e}),document.activeElement!==n)return}function mae(t){const e=L4(t),n=SD(e,t),r=SD(e.reverse(),t);return[n,r]}function L4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function SD(t,e){for(const n of t)if(!gae(n,{upTo:e}))return n}function gae(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function vae(t){return t instanceof HTMLInputElement&&"select"in t}function oc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&vae(t)&&e&&t.select()}}const wD=yae();function yae(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ED(t,e),t.unshift(e)},remove(e){var n;t=ED(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function ED(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function xae(t){return t.filter(e=>e.tagName!=="A")}const O4=S.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?dO.createPortal(S.createElement(In.div,Re({},i,{ref:e})),r):null});var ka=function(){return ka=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ka.apply(this,arguments)};function _ae(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sae(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var N4=c4(),aw=function(){},qx=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:aw,onWheelCapture:aw,onTouchMoveCapture:aw}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,p=t.sideCar,m=t.noIsolation,v=t.inert,y=t.allowPinchZoom,x=t.as,g=x===void 0?"div":x,_=_ae(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),E=p,A=l4([n,e]),M=ka(ka({},_),i);return S.createElement(S.Fragment,null,u&&S.createElement(E,{sideCar:N4,removeScrollBar:c,shards:d,noIsolation:m,inert:v,setCallbacks:s,allowPinchZoom:!!y,lockRef:n}),o?S.cloneElement(S.Children.only(a),ka(ka({},M),{ref:A})):S.createElement(g,ka({},M,{className:l,ref:A}),a))});qx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qx.classNames={fullWidth:qh,zeroRight:Qh};var RA=!1;if(typeof window<"u")try{var c0=Object.defineProperty({},"passive",{get:function(){return RA=!0,!0}});window.addEventListener("test",c0,c0),window.removeEventListener("test",c0,c0)}catch{RA=!1}var Yu=RA?{passive:!1}:!1,wae=function(t){return t.tagName==="TEXTAREA"},F4=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!wae(t)&&n[e]==="visible")},Eae=function(t){return F4(t,"overflowY")},Aae=function(t){return F4(t,"overflowX")},AD=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=U4(t,n);if(r){var i=k4(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},bae=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Mae=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},U4=function(t,e){return t==="v"?Eae(e):Aae(e)},k4=function(t,e){return t==="v"?bae(e):Mae(e)},Cae=function(t,e){return t==="h"&&e==="rtl"?-1:1},Tae=function(t,e,n,r,i){var s=Cae(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,p=0;do{var m=k4(t,a),v=m[0],y=m[1],x=m[2],g=y-x-s*v;(v||g)&&U4(t,a)&&(d+=g,p+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&d===0||!i&&o>d)||!u&&(i&&p===0||!i&&-o>p))&&(c=!0),c},u0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bD=function(t){return[t.deltaX,t.deltaY]},MD=function(t){return t&&"current"in t?t.current:t},Rae=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Pae=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Iae=0,Qu=[];function Bae(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),i=S.useState(Iae++)[0],s=S.useState(function(){return hC()})[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Sae([t.lockRef.current],(t.shards||[]).map(MD),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(y,x){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var g=u0(y),_=n.current,E="deltaX"in y?y.deltaX:_[0]-g[0],A="deltaY"in y?y.deltaY:_[1]-g[1],M,T=y.target,P=Math.abs(E)>Math.abs(A)?"h":"v";if("touches"in y&&P==="h"&&T.type==="range")return!1;var I=AD(P,T);if(!I)return!0;if(I?M=P:(M=P==="v"?"h":"v",I=AD(P,T)),!I)return!1;if(!r.current&&"changedTouches"in y&&(E||A)&&(r.current=M),!M)return!0;var R=r.current||M;return Tae(R,x,y,R==="h"?E:A,!0)},[]),l=S.useCallback(function(y){var x=y;if(!(!Qu.length||Qu[Qu.length-1]!==s)){var g="deltaY"in x?bD(x):u0(x),_=e.current.filter(function(M){return M.name===x.type&&M.target===x.target&&Rae(M.delta,g)})[0];if(_&&_.should){x.cancelable&&x.preventDefault();return}if(!_){var E=(o.current.shards||[]).map(MD).filter(Boolean).filter(function(M){return M.contains(x.target)}),A=E.length>0?a(x,E[0]):!o.current.noIsolation;A&&x.cancelable&&x.preventDefault()}}},[]),c=S.useCallback(function(y,x,g,_){var E={name:y,delta:x,target:g,should:_};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(A){return A!==E})},1)},[]),u=S.useCallback(function(y){n.current=u0(y),r.current=void 0},[]),d=S.useCallback(function(y){c(y.type,bD(y),y.target,a(y,t.lockRef.current))},[]),p=S.useCallback(function(y){c(y.type,u0(y),y.target,a(y,t.lockRef.current))},[]);S.useEffect(function(){return Qu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Yu),document.addEventListener("touchmove",l,Yu),document.addEventListener("touchstart",u,Yu),function(){Qu=Qu.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Yu),document.removeEventListener("touchmove",l,Yu),document.removeEventListener("touchstart",u,Yu)}},[]);var m=t.removeScrollBar,v=t.inert;return S.createElement(S.Fragment,null,v?S.createElement(s,{styles:Pae(i)}):null,m?S.createElement(h4,{gapMode:"margin"}):null)}const Dae=d4(N4,Bae);var z4=S.forwardRef(function(t,e){return S.createElement(qx,ka({},t,{ref:e,sideCar:Dae}))});z4.classNames=qx.classNames;const H4=z4,G4="Dialog",[$4,wde]=Tl(G4),[Ede,yo]=$4(G4),V4="DialogPortal",[Lae,W4]=$4(V4,{forceMount:void 0}),Oae=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=yo(V4,e);return S.createElement(Lae,{scope:e,forceMount:n},S.Children.map(r,o=>S.createElement(yi,{present:n||s.open},S.createElement(O4,{asChild:!0,container:i},o))))},PA="DialogOverlay",Nae=S.forwardRef((t,e)=>{const n=W4(PA,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=yo(PA,t.__scopeDialog);return s.modal?S.createElement(yi,{present:r||s.open},S.createElement(Fae,Re({},i,{ref:e}))):null}),Fae=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo(PA,n);return S.createElement(H4,{as:Fc,allowPinchZoom:!0,shards:[i.contentRef]},S.createElement(In.div,Re({"data-state":X4(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),Hp="DialogContent",Uae=S.forwardRef((t,e)=>{const n=W4(Hp,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=yo(Hp,t.__scopeDialog);return S.createElement(yi,{present:r||s.open},s.modal?S.createElement(kae,Re({},i,{ref:e})):S.createElement(zae,Re({},i,{ref:e})))}),kae=S.forwardRef((t,e)=>{const n=yo(Hp,t.__scopeDialog),r=S.useRef(null),i=Fn(e,n.contentRef,r);return S.useEffect(()=>{const s=r.current;if(s)return pC(s)},[]),S.createElement(j4,Re({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:Gt(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Gt(t.onFocusOutside,s=>s.preventDefault())}))}),zae=S.forwardRef((t,e)=>{const n=yo(Hp,t.__scopeDialog),r=S.useRef(!1);return S.createElement(j4,Re({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s;if((s=t.onCloseAutoFocus)===null||s===void 0||s.call(t,i),!i.defaultPrevented){var o;r.current||(o=n.triggerRef.current)===null||o===void 0||o.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var s,o;(s=t.onInteractOutside)===null||s===void 0||s.call(t,i),i.defaultPrevented||(r.current=!0);const a=i.target;((o=n.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&i.preventDefault()}}))}),j4=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=yo(Hp,n),l=S.useRef(null),c=Fn(e,l);return fC(),S.createElement(S.Fragment,null,S.createElement(D4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},S.createElement(I4,Re({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":X4(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),Hae="DialogTitle",Gae=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo(Hae,n);return S.createElement(In.h2,Re({id:i.titleId},r,{ref:e}))}),$ae="DialogDescription",Vae=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo($ae,n);return S.createElement(In.p,Re({id:i.descriptionId},r,{ref:e}))}),Wae="DialogClose",jae=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo(Wae,n);return S.createElement(In.button,Re({type:"button"},r,{ref:e,onClick:Gt(t.onClick,()=>i.onOpenChange(!1))}))});function X4(t){return t?"open":"closed"}const J4=Oae,K4=Nae,Y4=Uae,Q4=Gae,q4=Vae,Xae=jae,Z4=({className:t,children:e,...n})=>L.jsx(J4,{className:Pt(t),...n,children:L.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center sm:items-center",children:e})});Z4.displayName=J4.displayName;const ez=S.forwardRef(({className:t,...e},n)=>L.jsx(K4,{ref:n,className:Pt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-all duration-100 data-[state=closed]:animate-out data-[state=closed]:fade-out data-[state=open]:fade-in",t),...e}));ez.displayName=K4.displayName;const Jae=S.forwardRef(({className:t,children:e,...n},r)=>L.jsxs(Z4,{children:[L.jsx(ez,{}),L.jsxs(Y4,{ref:r,className:Pt("fixed z-50 grid w-full gap-4 rounded-b-lg border bg-background p-6 shadow-lg animate-in data-[state=open]:fade-in-90 data-[state=open]:slide-in-from-bottom-10 sm:max-w-lg sm:rounded-lg sm:zoom-in-90 data-[state=open]:sm:slide-in-from-bottom-0",t),...n,children:[e,L.jsxs(Xae,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[L.jsx(xx,{className:"h-4 w-4"}),L.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Jae.displayName=Y4.displayName;const Kae=S.forwardRef(({className:t,...e},n)=>L.jsx(Q4,{ref:n,className:Pt("text-lg font-semibold leading-none tracking-tight",t),...e}));Kae.displayName=Q4.displayName;const Yae=S.forwardRef(({className:t,...e},n)=>L.jsx(q4,{ref:n,className:Pt("text-sm text-muted-foreground",t),...e}));Yae.displayName=q4.displayName;const gC=S.forwardRef(({className:t,...e},n)=>L.jsx(xi,{ref:n,className:Pt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));gC.displayName=xi.displayName;const Qae=S.forwardRef(({className:t,...e},n)=>L.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[L.jsx($J,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),L.jsx(xi.Input,{ref:n,className:Pt("placeholder:text-foreground-muted flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));Qae.displayName=xi.Input.displayName;const qae=S.forwardRef(({className:t,...e},n)=>L.jsx(xi.List,{ref:n,className:Pt("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));qae.displayName=xi.List.displayName;const Zae=S.forwardRef((t,e)=>L.jsx(xi.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));Zae.displayName=xi.Empty.displayName;const vC=S.forwardRef(({className:t,...e},n)=>L.jsx(xi.Group,{ref:n,className:Pt("overflow-hidden text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground ",t),...e}));vC.displayName=xi.Group.displayName;const ele=S.forwardRef(({className:t,...e},n)=>L.jsx(xi.Separator,{ref:n,className:Pt("-mx-1 h-px bg-border",t),...e}));ele.displayName=xi.Separator.displayName;const yC=S.forwardRef(({className:t,...e},n)=>L.jsx(xi.Item,{ref:n,className:Pt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...e}));yC.displayName=xi.Item.displayName;function ru(t){return t.split("-")[0]}function Pm(t){return t.split("-")[1]}function Sf(t){return["top","bottom"].includes(ru(t))?"x":"y"}function xC(t){return t==="y"?"height":"width"}function CD(t,e,n){let{reference:r,floating:i}=t;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=Sf(e),l=xC(a),c=r[l]/2-i[l]/2,u=a==="x";let d;switch(ru(e)){case"top":d={x:s,y:r.y-i.height};break;case"bottom":d={x:s,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:o};break;case"left":d={x:r.x-i.width,y:o};break;default:d={x:r.x,y:r.y}}switch(Pm(e)){case"start":d[a]-=c*(n&&u?-1:1);break;case"end":d[a]+=c*(n&&u?-1:1)}return d}const tle=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:u}=CD(l,r,a),d=r,p={},m=0;for(let v=0;v<s.length;v++){const{name:y,fn:x}=s[v],{x:g,y:_,data:E,reset:A}=await x({x:c,y:u,initialPlacement:r,placement:d,strategy:i,middlewareData:p,rects:l,platform:o,elements:{reference:t,floating:e}});c=g??c,u=_??u,p={...p,[y]:{...p[y],...E}},A&&m<=50&&(m++,typeof A=="object"&&(A.placement&&(d=A.placement),A.rects&&(l=A.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:c,y:u}=CD(l,d,a)),v=-1)}return{x:c,y:u,placement:d,strategy:i,middlewareData:p}};function tz(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Ty(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Gp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=e,v=tz(m),y=a[p?d==="floating"?"reference":"floating":d],x=Ty(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),g=Ty(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:d==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:l}):o[d]);return{top:x.top-g.top+v.top,bottom:g.bottom-x.bottom+v.bottom,left:x.left-g.left+v.left,right:g.right-x.right+v.right}}const nle=Math.min,ac=Math.max;function IA(t,e,n){return ac(t,nle(e,n))}const TD=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:r=0}=t??{},{x:i,y:s,placement:o,rects:a,platform:l}=e;if(n==null)return{};const c=tz(r),u={x:i,y:s},d=Sf(o),p=Pm(o),m=xC(d),v=await l.getDimensions(n),y=d==="y"?"top":"left",x=d==="y"?"bottom":"right",g=a.reference[m]+a.reference[d]-u[d]-a.floating[m],_=u[d]-a.reference[d],E=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let A=E?d==="y"?E.clientHeight||0:E.clientWidth||0:0;A===0&&(A=a.floating[m]);const M=g/2-_/2,T=c[y],P=A-v[m]-c[x],I=A/2-v[m]/2+M,R=IA(T,I,P),D=(p==="start"?c[y]:c[x])>0&&I!==R&&a.reference[m]<=a.floating[m];return{[d]:u[d]-(D?I<T?T-I:P-I:0),data:{[d]:R,centerOffset:I-R}}}}),rle={left:"right",right:"left",bottom:"top",top:"bottom"};function Ry(t){return t.replace(/left|right|bottom|top/g,e=>rle[e])}function ile(t,e,n){n===void 0&&(n=!1);const r=Pm(t),i=Sf(t),s=xC(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ry(o)),{main:o,cross:Ry(o)}}const sle={start:"end",end:"start"};function RD(t){return t.replace(/start|end/g,e=>sle[e])}const nz=["top","right","bottom","left"];nz.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const ole=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",flipAlignment:m=!0,...v}=t,y=ru(r),x=d||(y===o||!m?[Ry(o)]:function(I){const R=Ry(I);return[RD(I),R,RD(R)]}(o)),g=[o,...x],_=await Gp(e,v),E=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&E.push(_[y]),u){const{main:I,cross:R}=ile(r,s,await(a.isRTL==null?void 0:a.isRTL(l.floating)));E.push(_[I],_[R])}if(A=[...A,{placement:r,overflows:E}],!E.every(I=>I<=0)){var M,T;const I=((M=(T=i.flip)==null?void 0:T.index)!=null?M:0)+1,R=g[I];if(R)return{data:{index:I,overflows:A},reset:{placement:R}};let D="bottom";switch(p){case"bestFit":{var P;const F=(P=A.map(X=>[X,X.overflows.filter(z=>z>0).reduce((z,V)=>z+V,0)]).sort((X,z)=>X[1]-z[1])[0])==null?void 0:P[0].placement;F&&(D=F);break}case"initialPlacement":D=o}if(r!==D)return{reset:{placement:D}}}return{}}}};function PD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ID(t){return nz.some(e=>t[e]>=0)}const ale=function(t){let{strategy:e="referenceHidden",...n}=t===void 0?{}:t;return{name:"hide",async fn(r){const{rects:i}=r;switch(e){case"referenceHidden":{const s=PD(await Gp(r,{...n,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:ID(s)}}}case"escaped":{const s=PD(await Gp(r,{...n,altBoundary:!0}),i.floating);return{data:{escapedOffsets:s,escaped:ID(s)}}}default:return{}}}}},lle=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await async function(s,o){const{placement:a,platform:l,elements:c}=s,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),d=ru(a),p=Pm(a),m=Sf(a)==="x",v=["left","top"].includes(d)?-1:1,y=u&&m?-1:1,x=typeof o=="function"?o(s):o;let{mainAxis:g,crossAxis:_,alignmentAxis:E}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...x};return p&&typeof E=="number"&&(_=p==="end"?-1*E:E),m?{x:_*y,y:g*v}:{x:g*v,y:_*y}}(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function rz(t){return t==="x"?"y":"x"}const cle=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:g,y:_}=x;return{x:g,y:_}}},...l}=t,c={x:n,y:r},u=await Gp(e,l),d=Sf(ru(i)),p=rz(d);let m=c[d],v=c[p];if(s){const x=d==="y"?"bottom":"right";m=IA(m+u[d==="y"?"top":"left"],m,m-u[x])}if(o){const x=p==="y"?"bottom":"right";v=IA(v+u[p==="y"?"top":"left"],v,v-u[x])}const y=a.fn({...e,[d]:m,[p]:v});return{...y,data:{x:y.x-n,y:y.y-r}}}}},ule=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=t,u={x:n,y:r},d=Sf(i),p=rz(d);let m=u[d],v=u[p];const y=typeof a=="function"?a({...s,placement:i}):a,x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const M=d==="y"?"height":"width",T=s.reference[d]-s.floating[M]+x.mainAxis,P=s.reference[d]+s.reference[M]-x.mainAxis;m<T?m=T:m>P&&(m=P)}if(c){var g,_,E,A;const M=d==="y"?"width":"height",T=["top","left"].includes(ru(i)),P=s.reference[p]-s.floating[M]+(T&&(g=(_=o.offset)==null?void 0:_[p])!=null?g:0)+(T?0:x.crossAxis),I=s.reference[p]+s.reference[M]+(T?0:(E=(A=o.offset)==null?void 0:A[p])!=null?E:0)-(T?x.crossAxis:0);v<P?v=P:v>I&&(v=I)}return{[d]:m,[p]:v}}}},dle=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o,...a}=t,l=await Gp(e,a),c=ru(n),u=Pm(n);let d,p;c==="top"||c==="bottom"?(d=c,p=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(p=c,d=u==="end"?"top":"bottom");const m=ac(l.left,0),v=ac(l.right,0),y=ac(l.top,0),x=ac(l.bottom,0),g={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(y!==0||x!==0?y+x:ac(l.top,l.bottom)):l[d]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(m!==0||v!==0?m+v:ac(l.left,l.right)):l[p])},_=await i.getDimensions(s.floating);o==null||o({...e,...g});const E=await i.getDimensions(s.floating);return _.width!==E.width||_.height!==E.height?{reset:{rects:!0}}:{}}}};function iz(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function la(t){if(t==null)return window;if(!iz(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function Im(t){return la(t).getComputedStyle(t)}function jo(t){return iz(t)?"":t?(t.nodeName||"").toLowerCase():""}function sz(){const t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function mo(t){return t instanceof la(t).HTMLElement}function pl(t){return t instanceof la(t).Element}function _C(t){return typeof ShadowRoot>"u"?!1:t instanceof la(t).ShadowRoot||t instanceof ShadowRoot}function Zx(t){const{overflow:e,overflowX:n,overflowY:r}=Im(t);return/auto|scroll|overlay|hidden/.test(e+r+n)}function fle(t){return["table","td","th"].includes(jo(t))}function BD(t){const e=/firefox/i.test(sz()),n=Im(t);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"}function oz(){return!/^((?!chrome|android).)*safari/i.test(sz())}const DD=Math.min,Zh=Math.max,Py=Math.round;function Xo(t,e,n){var r,i,s,o;e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect();let l=1,c=1;e&&mo(t)&&(l=t.offsetWidth>0&&Py(a.width)/t.offsetWidth||1,c=t.offsetHeight>0&&Py(a.height)/t.offsetHeight||1);const u=pl(t)?la(t):window,d=!oz()&&n,p=(a.left+(d&&(r=(i=u.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/l,m=(a.top+(d&&(s=(o=u.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/c,v=a.width/l,y=a.height/c;return{width:v,height:y,top:m,right:p+v,bottom:m+y,left:p,x:p,y:m}}function il(t){return(e=t,(e instanceof la(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function e1(t){return pl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function az(t){return Xo(il(t)).left+e1(t).scrollLeft}function hle(t,e,n){const r=mo(e),i=il(e),s=Xo(t,r&&function(l){const c=Xo(l);return Py(c.width)!==l.offsetWidth||Py(c.height)!==l.offsetHeight}(e),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((jo(e)!=="body"||Zx(i))&&(o=e1(e)),mo(e)){const l=Xo(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else i&&(a.x=az(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function lz(t){return jo(t)==="html"?t:t.assignedSlot||t.parentNode||(_C(t)?t.host:null)||il(t)}function LD(t){return mo(t)&&getComputedStyle(t).position!=="fixed"?t.offsetParent:null}function BA(t){const e=la(t);let n=LD(t);for(;n&&fle(n)&&getComputedStyle(n).position==="static";)n=LD(n);return n&&(jo(n)==="html"||jo(n)==="body"&&getComputedStyle(n).position==="static"&&!BD(n))?e:n||function(r){let i=lz(r);for(_C(i)&&(i=i.host);mo(i)&&!["html","body"].includes(jo(i));){if(BD(i))return i;i=i.parentNode}return null}(t)||e}function OD(t){if(mo(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=Xo(t);return{width:e.width,height:e.height}}function cz(t){const e=lz(t);return["html","body","#document"].includes(jo(e))?t.ownerDocument.body:mo(e)&&Zx(e)?e:cz(e)}function Iy(t,e){var n;e===void 0&&(e=[]);const r=cz(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=la(r),o=i?[s].concat(s.visualViewport||[],Zx(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Iy(o))}function ND(t,e,n){return e==="viewport"?Ty(function(r,i){const s=la(r),o=il(r),a=s.visualViewport;let l=o.clientWidth,c=o.clientHeight,u=0,d=0;if(a){l=a.width,c=a.height;const p=oz();(p||!p&&i==="fixed")&&(u=a.offsetLeft,d=a.offsetTop)}return{width:l,height:c,x:u,y:d}}(t,n)):pl(e)?function(r,i){const s=Xo(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(e,n):Ty(function(r){var i;const s=il(r),o=e1(r),a=(i=r.ownerDocument)==null?void 0:i.body,l=Zh(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=Zh(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let u=-o.scrollLeft+az(r);const d=-o.scrollTop;return Im(a||s).direction==="rtl"&&(u+=Zh(s.clientWidth,a?a.clientWidth:0)-l),{width:l,height:c,x:u,y:d}}(il(t)))}function ple(t){const e=Iy(t),n=["absolute","fixed"].includes(Im(t).position)&&mo(t)?BA(t):t;return pl(n)?e.filter(r=>pl(r)&&function(i,s){const o=s.getRootNode==null?void 0:s.getRootNode();if(i.contains(s))return!0;if(o&&_C(o)){let a=s;do{if(a&&i===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(r,n)&&jo(r)!=="body"):[]}const mle={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?ple(e):[].concat(n),r],o=s[0],a=s.reduce((l,c)=>{const u=ND(e,c,i);return l.top=Zh(u.top,l.top),l.right=DD(u.right,l.right),l.bottom=DD(u.bottom,l.bottom),l.left=Zh(u.left,l.left),l},ND(e,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=mo(n),s=il(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((jo(n)!=="body"||Zx(s))&&(o=e1(n)),mo(n))){const l=Xo(n,!0);a.x=l.x+n.clientLeft,a.y=l.y+n.clientTop}return{...e,x:e.x-o.scrollLeft+a.x,y:e.y-o.scrollTop+a.y}},isElement:pl,getDimensions:OD,getOffsetParent:BA,getDocumentElement:il,getElementRects:t=>{let{reference:e,floating:n,strategy:r}=t;return{reference:hle(e,BA(n),r),floating:{...OD(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Im(t).direction==="rtl"};function gle(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,l=i&&!a,c=s&&!a,u=l||c?[...pl(t)?Iy(t):[],...Iy(e)]:[];u.forEach(v=>{l&&v.addEventListener("scroll",n,{passive:!0}),c&&v.addEventListener("resize",n)});let d,p=null;if(o){let v=!0;p=new ResizeObserver(()=>{v||n(),v=!1}),pl(t)&&!a&&p.observe(t),p.observe(e)}let m=a?Xo(t):null;return a&&function v(){const y=Xo(t);!m||y.x===m.x&&y.y===m.y&&y.width===m.width&&y.height===m.height||n(),m=y,d=requestAnimationFrame(v)}(),n(),()=>{var v;u.forEach(y=>{l&&y.removeEventListener("scroll",n),c&&y.removeEventListener("resize",n)}),(v=p)==null||v.disconnect(),p=null,a&&cancelAnimationFrame(d)}}const vle=(t,e,n)=>tle(t,e,{platform:mle,...n});var DA=typeof document<"u"?S.useLayoutEffect:S.useEffect;function LA(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!LA(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!LA(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function yle(t){const e=S.useRef(t);return DA(()=>{e.current=t}),e}function xle(t){let{middleware:e,placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=t===void 0?{}:t;const s=S.useRef(null),o=S.useRef(null),a=yle(i),l=S.useRef(null),[c,u]=S.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[d,p]=S.useState(e);LA(d==null?void 0:d.map(E=>{let{options:A}=E;return A}),e==null?void 0:e.map(E=>{let{options:A}=E;return A}))||p(e);const m=S.useCallback(()=>{!s.current||!o.current||vle(s.current,o.current,{middleware:d,placement:n,strategy:r}).then(E=>{v.current&&vo.flushSync(()=>{u(E)})})},[d,n,r]);DA(()=>{v.current&&m()},[m]);const v=S.useRef(!1);DA(()=>(v.current=!0,()=>{v.current=!1}),[]);const y=S.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),s.current&&o.current)if(a.current){const E=a.current(s.current,o.current,m);l.current=E}else m()},[m,a]),x=S.useCallback(E=>{s.current=E,y()},[y]),g=S.useCallback(E=>{o.current=E,y()},[y]),_=S.useMemo(()=>({reference:s,floating:o}),[]);return S.useMemo(()=>({...c,update:m,refs:_,reference:x,floating:g}),[c,m,_,x,g])}const _le=t=>{const{element:e,padding:n}=t;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:t,fn(i){return r(e)?e.current!=null?TD({element:e.current,padding:n}).fn(i):{}:e?TD({element:e,padding:n}).fn(i):{}}}};function Sle(t){const[e,n]=S.useState(void 0);return $o(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const uz="Popper",[SC,dz]=Tl(uz),[wle,fz]=SC(uz),Ele=t=>{const{__scopePopper:e,children:n}=t,[r,i]=S.useState(null);return S.createElement(wle,{scope:e,anchor:r,onAnchorChange:i},n)},Ale="PopperAnchor",ble=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=fz(Ale,n),o=S.useRef(null),a=Fn(e,o);return S.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:S.createElement(In.div,Re({},i,{ref:a}))}),By="PopperContent",[Mle,Ade]=SC(By),[Cle,Tle]=SC(By,{hasParent:!1,positionUpdateFns:new Set}),Rle=S.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:p=0,align:m="center",alignOffset:v=0,arrowPadding:y=0,collisionBoundary:x=[],collisionPadding:g=0,sticky:_="partial",hideWhenDetached:E=!1,avoidCollisions:A=!0,onPlaced:M,...T}=t,P=fz(By,u),[I,R]=S.useState(null),D=Fn(e,W=>R(W)),[F,X]=S.useState(null),z=Sle(F),V=(n=z==null?void 0:z.width)!==null&&n!==void 0?n:0,H=(r=z==null?void 0:z.height)!==null&&r!==void 0?r:0,Q=d+(m!=="center"?"-"+m:""),Z=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},U=Array.isArray(x)?x:[x],N=U.length>0,G={padding:Z,boundary:U.filter(Ile),altBoundary:N},{reference:ne,floating:J,strategy:ee,x:te,y:ye,placement:Ae,middlewareData:K,update:Ge}=xle({strategy:"fixed",placement:Q,whileElementsMounted:gle,middleware:[Ble(),lle({mainAxis:p+H,alignmentAxis:v}),A?cle({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?ule():void 0,...G}):void 0,F?_le({element:F,padding:y}):void 0,A?ole({...G}):void 0,dle({...G,apply:({elements:W,availableWidth:k,availableHeight:Y})=>{W.floating.style.setProperty("--radix-popper-available-width",`${k}px`),W.floating.style.setProperty("--radix-popper-available-height",`${Y}px`)}}),Dle({arrowWidth:V,arrowHeight:H}),E?ale({strategy:"referenceHidden"}):void 0].filter(Ple)});$o(()=>{ne(P.anchor)},[ne,P.anchor]);const We=te!==null&&ye!==null,[Se,Me]=hz(Ae),me=$n(M);$o(()=>{We&&(me==null||me())},[We,me]);const re=(i=K.arrow)===null||i===void 0?void 0:i.x,fe=(s=K.arrow)===null||s===void 0?void 0:s.y,Le=((o=K.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Be,Ue]=S.useState();$o(()=>{I&&Ue(window.getComputedStyle(I).zIndex)},[I]);const{hasParent:Ke,positionUpdateFns:ke}=Tle(By,u),Ye=!Ke;S.useLayoutEffect(()=>{if(!Ye)return ke.add(Ge),()=>{ke.delete(Ge)}},[Ye,ke,Ge]),$o(()=>{Ye&&We&&Array.from(ke).reverse().forEach(W=>requestAnimationFrame(W))},[Ye,We,ke]);const ht={"data-side":Se,"data-align":Me,...T,ref:D,style:{...T.style,animation:We?void 0:"none",opacity:(a=K.hide)!==null&&a!==void 0&&a.referenceHidden?0:void 0}};return S.createElement("div",{ref:J,"data-radix-popper-content-wrapper":"",style:{position:ee,left:0,top:0,transform:We?`translate3d(${Math.round(te)}px, ${Math.round(ye)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Be,["--radix-popper-transform-origin"]:[(l=K.transformOrigin)===null||l===void 0?void 0:l.x,(c=K.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:t.dir},S.createElement(Mle,{scope:u,placedSide:Se,onArrowChange:X,arrowX:re,arrowY:fe,shouldHideArrow:Le},Ye?S.createElement(Cle,{scope:u,hasParent:!0,positionUpdateFns:ke},S.createElement(In.div,ht)):S.createElement(In.div,ht)))});function Ple(t){return t!==void 0}function Ile(t){return t!==null}const Ble=()=>({name:"anchorCssProperties",fn(t){const{rects:e,elements:n}=t,{width:r,height:i}=e.reference;return n.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),n.floating.style.setProperty("--radix-popper-anchor-height",`${i}px`),{}}}),Dle=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,p=d?0:t.arrowWidth,m=d?0:t.arrowHeight,[v,y]=hz(a),x={start:"0%",center:"50%",end:"100%"}[y],g=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+p/2,_=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let E="",A="";return v==="bottom"?(E=d?x:`${g}px`,A=`${-m}px`):v==="top"?(E=d?x:`${g}px`,A=`${l.floating.height+m}px`):v==="right"?(E=`${-m}px`,A=d?x:`${_}px`):v==="left"&&(E=`${l.floating.width+m}px`,A=d?x:`${_}px`),{data:{x:E,y:A}}}});function hz(t){const[e,n="center"]=t.split("-");return[e,n]}const Lle=Ele,Ole=ble,Nle=Rle,pz="Popover",[mz,bde]=Tl(pz,[dz]),wC=dz(),[Fle,wf]=mz(pz),Ule=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=wC(e),l=S.useRef(null),[c,u]=S.useState(!1),[d=!1,p]=bx({prop:r,defaultProp:i,onChange:s});return S.createElement(Lle,a,S.createElement(Fle,{scope:e,contentId:Rd(),triggerRef:l,open:d,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:c,onCustomAnchorAdd:S.useCallback(()=>u(!0),[]),onCustomAnchorRemove:S.useCallback(()=>u(!1),[]),modal:o},n))},kle="PopoverTrigger",zle=S.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=wf(kle,n),s=wC(n),o=Fn(e,i.triggerRef),a=S.createElement(In.button,Re({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":yz(i.open)},r,{ref:o,onClick:Gt(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:S.createElement(Ole,Re({asChild:!0},s),a)}),gz="PopoverPortal",[Hle,Gle]=mz(gz,{forceMount:void 0}),$le=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=wf(gz,e);return S.createElement(Hle,{scope:e,forceMount:n},S.createElement(yi,{present:n||s.open},S.createElement(O4,{asChild:!0,container:i},r)))},$p="PopoverContent",Vle=S.forwardRef((t,e)=>{const n=Gle($p,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=wf($p,t.__scopePopover);return S.createElement(yi,{present:r||s.open},s.modal?S.createElement(Wle,Re({},i,{ref:e})):S.createElement(jle,Re({},i,{ref:e})))}),Wle=S.forwardRef((t,e)=>{const n=wf($p,t.__scopePopover),r=S.useRef(null),i=Fn(e,r),s=S.useRef(!1);return S.useEffect(()=>{const o=r.current;if(o)return pC(o)},[]),S.createElement(H4,{as:Fc,allowPinchZoom:!0},S.createElement(vz,Re({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:Gt(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Gt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),jle=S.forwardRef((t,e)=>{const n=wf($p,t.__scopePopover),r=S.useRef(!1);return S.createElement(vz,Re({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s;if((s=t.onCloseAutoFocus)===null||s===void 0||s.call(t,i),!i.defaultPrevented){var o;r.current||(o=n.triggerRef.current)===null||o===void 0||o.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var s,o;(s=t.onInteractOutside)===null||s===void 0||s.call(t,i),i.defaultPrevented||(r.current=!0);const a=i.target;((o=n.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&i.preventDefault()}}))}),vz=S.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,p=wf($p,n),m=wC(n);return fC(),S.createElement(D4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},S.createElement(I4,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1)},S.createElement(Nle,Re({"data-state":yz(p.open),role:"dialog",id:p.contentId},m,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function yz(t){return t?"open":"closed"}const Xle=Ule,Jle=zle,Kle=$le,xz=Vle,_z=Xle,Sz=Jle,EC=S.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>L.jsx(Kle,{children:L.jsx(xz,{ref:i,align:e,sideOffset:n,className:Pt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));EC.displayName=xz.displayName;window.pluginVars=window.pluginVars||{};const wz=window.pluginVars,OA=wz.fonts;OA.map(t=>wm.preload(`${wz.pluginUrl}templates/dist/fonts/${t}.json`));const Yle=({value:t,setValue:e})=>{const[n,r]=S.useState(!1);return L.jsxs(_z,{open:n,onOpenChange:r,children:[L.jsx(Sz,{asChild:!0,children:L.jsxs(hr,{role:"combobox","aria-expanded":n,className:"justify-between bg-gray-700 text-primary border rounded-md h-full w-full m-0 px-1 py-0 ",children:[L.jsx("span",{children:t?OA.find(i=>i===t):"Select font..."}),L.jsx(yF,{className:"ml-5 h-4 w-4 shrink-0 opacity-50"})]})}),L.jsx(EC,{className:"w-[24vw] py-3 px-1",align:"end",children:L.jsx(gC,{className:"w-full border-transparent ",children:L.jsx(vC,{className:Pt("h-[300px]  border-transparent"),children:L.jsx(eu,{className:"h-[300px]",children:L.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-x-1 gap-y-1 p-1",children:OA.map(i=>L.jsx(yC,{className:Pt("w-full border flex flex-col justify-center items-center shadow-md"),value:i,onSelect:s=>{e(s),r(!1)},children:L.jsx("p",{className:"text-l p-1 capitilize",style:{fontFamily:i},children:i})}))})})})})})]})},FD={heart:L.jsx(LJ,{size:24}),diamond:L.jsx(PJ,{size:24}),smile:L.jsx(WJ,{size:24}),star:L.jsx(xF,{size:24}),music:L.jsx(zJ,{size:24}),hash:L.jsx(DJ,{size:24}),circle:L.jsx(MJ,{size:24}),triangle:L.jsx(JJ,{size:24}),square:L.jsx(jJ,{size:24}),x:L.jsx(xx,{size:24}),popcorn:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-popcorn",children:[L.jsx("path",{d:"M18 8a2 2 0 0 0 0-4 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0 0 4"}),L.jsx("path",{d:"M10 22 9 8"}),L.jsx("path",{d:"m14 22 1-14"}),L.jsx("path",{d:"M20 8c.5 0 .9.4.8 1l-2.6 12c-.1.5-.7 1-1.2 1H7c-.6 0-1.1-.4-1.2-1L3.2 9c-.1-.6.3-1 .8-1Z"})]}),spade:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-spade",children:[L.jsx("path",{d:"M5 9c-1.5 1.5-3 3.2-3 5.5A5.5 5.5 0 0 0 7.5 20c1.8 0 3-.5 4.5-2 1.5 1.5 2.7 2 4.5 2a5.5 5.5 0 0 0 5.5-5.5c0-2.3-1.5-4-3-5.5l-7-7-7 7Z"}),L.jsx("path",{d:"M12 18v4"})]}),club:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-club",children:[L.jsx("path",{d:"M17.28 9.05a5.5 5.5 0 1 0-10.56 0A5.5 5.5 0 1 0 12 17.66a5.5 5.5 0 1 0 5.28-8.6Z"}),L.jsx("path",{d:"M12 17.66L12 22"})]}),coffee:L.jsx(CJ,{size:24}),croissant:L.jsx(TJ,{size:24}),sun:L.jsx(XJ,{size:24}),paw:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-paw-print",children:[L.jsx("circle",{cx:"11",cy:"4",r:"2"}),L.jsx("circle",{cx:"18",cy:"8",r:"2"}),L.jsx("circle",{cx:"20",cy:"16",r:"2"}),L.jsx("path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"})]}),cat:L.jsx(bJ,{size:24})},Ez=window.pluginVars.models,Qle=window.pluginVars.pluginUrl;Ez.forEach(t=>wx.preload(`${Qle}templates/dist/${t}.glb`));const qle=({value:t,setValue:e})=>{const[n,r]=vt.useState(!1);return L.jsxs(_z,{open:n,onOpenChange:r,children:[L.jsx(Sz,{asChild:!0,children:L.jsxs(hr,{role:"combobox","aria-expanded":n,className:"justify-between bg-gray-700 text-primary border rounded-md  h-full w-full m-0 px-1 py-0 ",children:[FD[t],L.jsx("span",{className:"capitalized ml-2 mr-auto",children:t||"Select symbol"}),L.jsx(yF,{className:"ml-5 h-4 w-4 shrink-0 opacity-50"})]})}),L.jsx(EC,{className:"w-[25vw] py-3 px-1",align:"end",children:L.jsx(gC,{className:"w-full border-transparent  z-[999]",children:L.jsx(vC,{className:Pt("h-[260px] border-transparent"),children:L.jsx(eu,{className:"h-[260px]",children:L.jsx("div",{className:"w-full h-full grid grid-cols-5 gap-x-2 gap-y-2 p-1",children:Ez.map(i=>L.jsx(yC,{className:Pt("h-[60px] w-[60px] border flex flex-col justify-center items-center shadow-md"),onSelect:s=>{console.log(s),e(s),r(!1)},value:i,children:FD[i]},i))})})})})})]})},Zle=({item:t})=>{const{id:e}=t,[n,r,i]=Kc(p=>[p.textsAndModels,p.editText,p.removeText]),[s,o]=Zo(p=>[p.selected,p.setSelected]),a=n.find(p=>p.id===e),l=ef({background:s===e?"rgb(51, 65, 85, 0.8)":"rgb(51, 65, 85, 0.5)"}),c=p=>{r(e,{color:p})},u=p=>{r(e,{font:p})},d=p=>{r(e,{path:p})};return L.jsxs(Hc.div,{onClick:()=>o(e),style:l,className:Pt("flex flex-col gap-3 p-2 justify-center items-center relative w-full hover:cursor-pointer"),children:[L.jsx("button",{className:"absolute top-0 right-0 bg-red-700 p-1 rounded-bl-lg ",onClick:()=>i(e),children:L.jsx(TM,{width:14,height:14,className:"text-white"})}),"text"in a?L.jsxs("div",{className:"flex gap-3 justify-between w-full flex-shrink-0",children:[L.jsxs("div",{className:"flex flex-col w-1/2 ",children:[L.jsx("h1",{children:"Text"}),L.jsx(s4,{className:"bg-gray-700 text-primary",value:a.text,onChange:p=>{r(e,{text:p.target.value})}})]}),L.jsxs("div",{className:"flex flex-col w-1/2",children:[L.jsx("h1",{children:"Font"}),L.jsx(Yle,{value:a?a.font:"helvetica",setValue:u})]})]}):L.jsx("div",{className:"flex gap-3 justify-between w-full flex-shrink-0",children:L.jsx(qle,{value:a?a.path:"star",setValue:d})}),L.jsx(Ese,{selectColor:c})]})},UD=(t,e=!1,n=0,r=0,i=0)=>s=>e&&s===n?{y:r*130+i,scale:1.02,zIndex:20,shadow:15,immediate:o=>o==="y"||o==="zIndex"}:{y:t.indexOf(s)*130,scale:1,zIndex:0,shadow:1,immediate:!1};function ece({items:t}){const[e]=Kc(a=>[a.editText]),n=S.useRef(t.map((a,l)=>l)),r=Zo(a=>a.selected),[i,s]=n4(t.length,UD(n.current)),o=JY(({args:[a],active:l,movement:[,c]})=>{const u=n.current.indexOf(a),d=u>-1?u:t.length-1,p=fU(Math.round((d*130+c)/100),0,t.length-1),m=xse(n.current,u,p);s.start(UD(m,l,a,u,c));let v=(m.length-1)*.8,y=99-m.length;l||[...m].forEach(x=>{e(t[x].id,{height:Number(v.toFixed(2)),renderOrder:y}),v-=.8,y+=1}),l||(n.current=m)});return L.jsx("div",{className:"relative w-[calc(100%-12px)] shadow-inner  rounded-md bg-secondary p-2",style:{height:t.length*130},children:i.map(({zIndex:a,shadow:l,y:c,scale:u},d)=>L.jsxs(Hc.div,{className:"absolute w-full h-[120px] origin-center capitalize touch-none text-sm select-non bg-secondary flex rounded-sm overflow-hidden",style:{zIndex:a,boxShadow:l.to(p=>`rgba(0, 0, 0, 0.15) 0px ${p}px ${2*p}px 0px`),y:c,scale:u.to(p=>t[d].id===r?1.02:p)},children:[L.jsx("div",{className:"w-[12px] h-full bg-gray-700 py-[5px] px-[2px]  grid grid-cols-2 items-center gap-[1px] justify-center touch-none cursor-grabbing",...o(d),children:[...Array(40)].map((p,m)=>L.jsx("div",{className:"w-[2px] h-[2px] bg-primary rounded-[50%]"},m))}),L.jsx(Zle,{item:t[d]})]},t[d].id))})}const tce=()=>{const[t,e]=Kc(n=>[n.addText,n.addModel]);return L.jsxs("div",{className:"flex w-full justify-center gap-12 mb-5",children:[L.jsx(hr,{size:"sm",onClick:()=>t("hello",!0,"helvetica",tI()),children:"Add text"}),L.jsx(hr,{size:"sm",onClick:()=>e("star",!0,tI()),children:"Add Symbol"})]})},nce=()=>{const[t,e,n]=Kc(r=>[r.textsAndModels,r.height,r.clearBoard]);return L.jsx(uC,{children:L.jsxs("div",{className:"flex flex-col gap-3 px-3 pt-6 pb-0 justify-center relative items-center",children:[L.jsxs("div",{className:"flex self-start justify-around w-full ",children:[L.jsxs("div",{className:"flex flex-col",children:[L.jsx("h1",{className:"self-start text-2xl font-bold text-primarypink",children:"Layers"}),L.jsx("p",{className:"text-sm self-start font-thin tracking-wide text-primary mb-3",children:"(Drag to move behind each other)"})]}),L.jsxs("button",{className:"flex text-sm items-center self-start mt-2 gap-2 ml-auto",onClick:()=>n(),children:["Clear board",L.jsx(TM,{height:14,width:14})]})]}),L.jsx(tce,{}),L.jsx("div",{className:"w-full flex justify-center",children:L.jsx(eu,{className:"w-full h-[60vh] 2xl:h-[70vh] ",children:t.length>0?L.jsx(ece,{items:t},e):L.jsx("div",{className:"h-[120px] w-full rounded-md border bg-slate-700 shadow-inner flex justify-center items-center",children:L.jsx("p",{className:"text-sm font-light text-center text-primary",children:"No layers yet. Add some by clicking the buttons on the top!"})})})})]})})},rce=["S","M","L","XL","Custom"],ice=()=>{const[t,e,n]=ho(l=>[l.setScale,l.scaleCoefficient,l.boardSize]),r=Zo(l=>l.setSelected),[i,s]=S.useState(0),[o,a]=S.useState(!1);return S.useEffect(()=>{i!==0&&t(2,i)},[i,t]),L.jsxs("div",{className:"flex flex-col w-full",children:[L.jsx("div",{className:"flex flex-wrap w-full gap-3 mb-5",children:rce.map(l=>{const u=(d=>{switch(d){case"S":return 1;case"M":return 1.25;case"L":return 1.5;case"XL":return 2;default:return 1}})(l);return L.jsxs("button",{onClick:()=>{l==="Custom"?(r(""),a(!0)):t(u,300)},className:Pt("text-xs border flex flex-col justify-center items-center bg-primary-foreground hover:bg-accent ransition-all duration-300 px-2 py-3 min-w-[60px]"),children:[L.jsx("span",{children:l}),l!=="Custom"&&L.jsx("span",{className:"text-[8px]",children:`${Math.floor(n[0]/300*e*u)}cm x ${Math.floor(n[1]*e*u)} cm`})]},l)})}),o&&L.jsxs("div",{className:"p-3 ",children:[L.jsx("h2",{className:"mb-3 font-semibold",children:"Custom width:"}),L.jsx(XM,{min:1,max:299,step:1,onValueChange:([l])=>{r(""),s(l)},value:[i]})]})]})},sce=[["black","#000"],["transparent","#EFEFEF"],["gray","#A6A6A6"],["gold","#D1C271"]],oce=()=>{const[t,e]=ho(n=>[n.boardColor,n.setBoardColor]);return L.jsx("div",{className:"flex gap-2",children:sce.map(n=>L.jsx("button",{onClick:()=>e(n[0]),className:Pt("w-8 h-8 border rounded-[50%] flex items-center justify-center",t===n[0]?"border-white":"border-transparent"),children:L.jsx("div",{style:{backgroundColor:n[1]},className:"w-6 h-6 rounded-[50%]"})},n[0]))})},ace=["full-board","to-shape","hollowed-out","stand"],lce=()=>{const[t,e]=ho(n=>[n.setBoardStyle,n.boardStyle]);return L.jsx(uC,{children:L.jsxs("div",{className:"p-6 flex flex-col justify-center items-center gap-3",children:[L.jsx("h1",{className:"text-2xl font-bold text-primarypink place-self-start",children:"Board"}),L.jsx(eu,{className:"w-full h-[70vh] 2xl:h-[70vh]",children:L.jsxs("div",{className:"flex flex-col w-[calc(100%-8px)]",children:[L.jsxs("article",{className:"flex flex-col gap-3 mb-5",children:[L.jsx("h1",{className:"text-md font-bold",children:"Board type:"}),L.jsx("div",{className:"grid grid-cols-2 gap-1",children:ace.map(n=>L.jsxs("button",{onClick:()=>{t(n)},className:Pt("flex flex-col  items-center hover:bg-slate-600 transition-all duration-200 p-1",e===n&&"bg-slate-600"),children:[L.jsx("div",{className:" object-cover",children:L.jsx("img",{src:`${window.pluginVars.pluginUrl}templates/dist/${n}.png`,className:"h-28 object-cover object-center overflow-hidden",alt:"neon sign"})}),L.jsx("p",{className:"capitalize text-xs",children:n.replace("-"," ")})]},n))})]}),L.jsxs("article",{className:"flex flex-col gap-3",children:[L.jsx("h1",{className:"font-bold",children:"Board width:"}),L.jsx(ice,{})]}),L.jsxs("article",{className:"flex flex-col mb-3",children:[L.jsx("h1",{className:"font-bold mb-2",children:"Board color:"}),L.jsxs("div",{className:"flex justify-between p-3",children:[L.jsx(oce,{}),L.jsx("div",{className:"w-32",children:L.jsx("img",{src:`${window.pluginVars.pluginUrl}templates/dist/example.png`,alt:"example neon sign"})})]})]})]})})]})})},cce=t=>[t.selectedSidebar,t.isShown,t.setIsShown],uce=[L.jsx(L.Fragment,{}),L.jsx(L.Fragment,{}),L.jsx(L.Fragment,{}),L.jsx(yse,{}),L.jsx(L.Fragment,{}),L.jsx(nce,{}),L.jsx(lce,{})],dce=()=>{const[t,e,n]=mf(cce),r=ef({left:e?0:-400,config:{tension:500,friction:40}}),i=ef({rotate:e?"-540deg":"0deg",config:{tension:500,friction:40}});return L.jsxs(Hc.div,{style:r,className:"absolute top-20 bottom-5 w-[400px] z-50 bg-secondary rounded-md ",children:[L.jsx("button",{onClick:()=>{if(e){n(!1);return}n(!0)},className:"absolute -right-[20px] top-12  bg-secondary rounded-r-[50%] p-1 flex justify-center items-center",children:L.jsx(Hc.div,{style:i,children:L.jsx(HJ,{fill:"white",size:16})})}),uce[t]]})},fce=t=>[t.switch,t.is3dModeOn,t.isRullerOn,t.setRuller,t.brightness,t.setBrightness],hce=()=>{const[t,e,n,r,i,s]=Yc(fce),o=Zo(c=>c.setSelected),[a,l]=mf(c=>[c.setIsShown,c.setSelectedSidebar]);return L.jsxs("div",{className:"flex gap-3 justify-center items-center",children:[L.jsx("div",{className:"flex rounded-[200px]  border border-primarypink ",children:L.jsx(hr,{variant:"ghost",className:"p-2 hover:bg-transparent rounded-[50%]",onClick:()=>{s(i!==0?0:100)},children:i!==0?L.jsx(kJ,{size:24,className:"text-primarypink"}):L.jsx(UJ,{size:24,className:"text-primarypink"})})}),L.jsx(hr,{onClick:()=>{r(!n)},className:Pt("border-primarypink px-2 py-4",n?"bg-[linear-gradient(277deg,_#f50cf5_-3%,#f50cf5_28%,#f5002e_123%)] text-white":"bg-transparent text-primarypink"),variant:"outline",children:L.jsx(GJ,{size:24})}),L.jsx(hr,{className:"border-primarypink py-2 px-4",variant:"outline",onClick:()=>{if(e){t(!1),a(!0),l(5);return}o(""),a(!1),r(!1),t(!0)},children:e?"Switch to 2D":"Switch to 3D"})]})},pce=({template:t})=>{const e=Kc(n=>n.loadTemplate);return L.jsxs("div",{className:"w-[270px] h-[341px] flex flex-col border rounded-md overflow-hidden",children:[L.jsx("div",{className:"w-[270px] h-[270px] bg-accent "}),L.jsxs("div",{className:"flex justify-between items-center p-3",children:[L.jsx("h1",{className:"py-2 px-4",children:"Name"}),L.jsx(hr,{onClick:()=>e(t),children:"Upload"})]})]})},mce=()=>{const[t,e,n]=uF(o=>[o.setIsOpen,o.templates,o.isOpen]),[r,i]=mf(o=>[o.setSelectedSidebar,o.setIsShown]),s=ef({opacity:n?1:0,left:n?"2vw":"90vw",config:{tension:600,friction:80}});return L.jsx(L.Fragment,{children:n&&L.jsxs(Hc.div,{style:s,className:"absolute left-[2vw] right-[2vw] top-[15vh] bottom-[10vh] z-40 bg-secondary rounded-md p-14 overflow-hidden",children:[L.jsx("button",{className:"absolute top-3 right-3",onClick:()=>{r(5),t(!1),i(!0)},children:L.jsx(xx,{width:24,height:24})}),L.jsxs("div",{className:"flex flex-col justify-between items-center gap-3",children:[L.jsx("h1",{className:"text-2xl font-bold text-primarypink",children:"Template gallery"}),L.jsx("p",{children:"Select a template to load it into and customize to your liking."}),L.jsx(eu,{className:"w-full h-[370px] ",children:L.jsx("div",{className:"grid grid-cols-4 gap-10  w-full",children:e.length>0&&e.map(o=>L.jsx(pce,{template:o}))})})]})]})})},kD=({colors:t,currentColor:e,setColor:n})=>L.jsx("div",{className:"flex gap-2",children:t.map(r=>L.jsx("button",{onClick:()=>n(r[0]),className:Pt("w-8 h-8 bg-secondary  border rounded-[50%] flex items-center justify-center ",e===r[0]?"border-white":"border-transparent"),children:L.jsx("div",{style:{backgroundColor:r[1]},className:"w-6 h-6 rounded-[50%]"})},r[0]))});function ss(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Az(t,e=[]){let n=[];function r(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:p,children:m,...v}=d,y=(p==null?void 0:p[t][l])||a,x=S.useMemo(()=>v,Object.values(v));return S.createElement(y.Provider,{value:x},m)}function u(d,p){const m=(p==null?void 0:p[t][l])||a,v=S.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,gce(i,...e)]}function gce(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ef(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function vce({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=yce({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Ef(n),l=S.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[s,t,i,a]);return[o,l]}function yce({defaultProp:t,onChange:e}){const n=S.useState(t),[r]=n,i=S.useRef(r),s=Ef(e);return S.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function xce(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function bz(...t){return e=>t.forEach(n=>xce(n,e))}function Bm(...t){return S.useCallback(bz(...t),t)}const _ce=["top","right","bottom","left"],ml=Math.min,Ti=Math.max,Dy=Math.round,d0=Math.floor,gl=t=>({x:t,y:t}),Sce={left:"right",right:"left",bottom:"top",top:"bottom"},wce={start:"end",end:"start"};function NA(t,e,n){return Ti(t,ml(e,n))}function ea(t,e){return typeof t=="function"?t(e):t}function ta(t){return t.split("-")[0]}function Af(t){return t.split("-")[1]}function AC(t){return t==="x"?"y":"x"}function bC(t){return t==="y"?"height":"width"}function bf(t){return["top","bottom"].includes(ta(t))?"y":"x"}function MC(t){return AC(bf(t))}function Ece(t,e,n){n===void 0&&(n=!1);const r=Af(t),i=MC(t),s=bC(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ly(o)),[o,Ly(o)]}function Ace(t){const e=Ly(t);return[FA(t),e,FA(e)]}function FA(t){return t.replace(/start|end/g,e=>wce[e])}function bce(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Mce(t,e,n,r){const i=Af(t);let s=bce(ta(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(FA)))),s}function Ly(t){return t.replace(/left|right|bottom|top/g,e=>Sce[e])}function Cce(t){return{top:0,right:0,bottom:0,left:0,...t}}function Mz(t){return typeof t!="number"?Cce(t):{top:t,right:t,bottom:t,left:t}}function Oy(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function zD(t,e,n){let{reference:r,floating:i}=t;const s=bf(e),o=MC(e),a=bC(o),l=ta(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(Af(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const Tce=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=zD(c,r,l),p=r,m={},v=0;for(let y=0;y<a.length;y++){const{name:x,fn:g}=a[y],{x:_,y:E,data:A,reset:M}=await g({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=_??u,d=E??d,m={...m,[x]:{...m[x],...A}},M&&v<=50){v++,typeof M=="object"&&(M.placement&&(p=M.placement),M.rects&&(c=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):M.rects),{x:u,y:d}=zD(c,p,l)),y=-1;continue}}return{x:u,y:d,placement:p,strategy:i,middlewareData:m}};async function Vp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=ea(e,t),v=Mz(m),x=a[p?d==="floating"?"reference":"floating":d],g=Oy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{...o.floating,x:r,y:i}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),A=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},M=Oy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:E,strategy:l}):_);return{top:(g.top-M.top+v.top)/A.y,bottom:(M.bottom-g.bottom+v.bottom)/A.y,left:(g.left-M.left+v.left)/A.x,right:(M.right-g.right+v.right)/A.x}}const HD=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a}=e,{element:l,padding:c=0}=ea(t,e)||{};if(l==null)return{};const u=Mz(c),d={x:n,y:r},p=MC(i),m=bC(p),v=await o.getDimensions(l),y=p==="y",x=y?"top":"left",g=y?"bottom":"right",_=y?"clientHeight":"clientWidth",E=s.reference[m]+s.reference[p]-d[p]-s.floating[m],A=d[p]-s.reference[p],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=M?M[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(M)))&&(T=a.floating[_]||s.floating[m]);const P=E/2-A/2,I=T/2-v[m]/2-1,R=ml(u[x],I),D=ml(u[g],I),F=R,X=T-v[m]-D,z=T/2-v[m]/2+P,V=NA(F,z,X),Q=Af(i)!=null&&z!=V&&s.reference[m]/2-(z<F?R:D)-v[m]/2<0?z<F?F-z:X-z:0;return{[p]:d[p]-Q,data:{[p]:V,centerOffset:z-V+Q}}}}),Rce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...y}=ea(t,e),x=ta(r),g=ta(o)===o,_=await(a.isRTL==null?void 0:a.isRTL(l.floating)),E=d||(g||!v?[Ly(o)]:Ace(o));!d&&m!=="none"&&E.push(...Mce(o,v,m,_));const A=[o,...E],M=await Vp(e,y),T=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&T.push(M[x]),u){const F=Ece(r,s,_);T.push(M[F[0]],M[F[1]])}if(P=[...P,{placement:r,overflows:T}],!T.every(F=>F<=0)){var I,R;const F=(((I=i.flip)==null?void 0:I.index)||0)+1,X=A[F];if(X)return{data:{index:F,overflows:P},reset:{placement:X}};let z=(R=P.filter(V=>V.overflows[0]<=0).sort((V,H)=>V.overflows[1]-H.overflows[1])[0])==null?void 0:R.placement;if(!z)switch(p){case"bestFit":{var D;const V=(D=P.map(H=>[H.placement,H.overflows.filter(Q=>Q>0).reduce((Q,Z)=>Q+Z,0)]).sort((H,Q)=>H[1]-Q[1])[0])==null?void 0:D[0];V&&(z=V);break}case"initialPlacement":z=o;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function GD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function $D(t){return _ce.some(e=>t[e]>=0)}const Pce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ea(t,e);switch(r){case"referenceHidden":{const s=await Vp(e,{...i,elementContext:"reference"}),o=GD(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:$D(o)}}}case"escaped":{const s=await Vp(e,{...i,altBoundary:!0}),o=GD(s,n.floating);return{data:{escapedOffsets:o,escaped:$D(o)}}}default:return{}}}}};async function Ice(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ta(n),a=Af(n),l=bf(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=ea(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const Bce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await Ice(e,t);return{x:n+i.x,y:r+i.y,data:i}}}},Dce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:g,y:_}=x;return{x:g,y:_}}},...l}=ea(t,e),c={x:n,y:r},u=await Vp(e,l),d=bf(ta(i)),p=AC(d);let m=c[p],v=c[d];if(s){const x=p==="y"?"top":"left",g=p==="y"?"bottom":"right",_=m+u[x],E=m-u[g];m=NA(_,m,E)}if(o){const x=d==="y"?"top":"left",g=d==="y"?"bottom":"right",_=v+u[x],E=v-u[g];v=NA(_,v,E)}const y=a.fn({...e,[p]:m,[d]:v});return{...y,data:{x:y.x-n,y:y.y-r}}}}},Lce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ea(t,e),u={x:n,y:r},d=bf(i),p=AC(d);let m=u[p],v=u[d];const y=ea(a,e),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const E=p==="y"?"height":"width",A=s.reference[p]-s.floating[E]+x.mainAxis,M=s.reference[p]+s.reference[E]-x.mainAxis;m<A?m=A:m>M&&(m=M)}if(c){var g,_;const E=p==="y"?"width":"height",A=["top","left"].includes(ta(i)),M=s.reference[d]-s.floating[E]+(A&&((g=o.offset)==null?void 0:g[d])||0)+(A?0:x.crossAxis),T=s.reference[d]+s.reference[E]+(A?0:((_=o.offset)==null?void 0:_[d])||0)-(A?x.crossAxis:0);v<M?v=M:v>T&&(v=T)}return{[p]:m,[d]:v}}}},Oce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=ea(t,e),l=await Vp(e,a),c=ta(n),u=Af(n),d=bf(n)==="y",{width:p,height:m}=r.floating;let v,y;c==="top"||c==="bottom"?(v=c,y=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(y=c,v=u==="end"?"top":"bottom");const x=m-l[v],g=p-l[y],_=!e.middlewareData.shift;let E=x,A=g;if(d){const T=p-l.left-l.right;A=u||_?ml(g,T):T}else{const T=m-l.top-l.bottom;E=u||_?ml(x,T):T}if(_&&!u){const T=Ti(l.left,0),P=Ti(l.right,0),I=Ti(l.top,0),R=Ti(l.bottom,0);d?A=p-2*(T!==0||P!==0?T+P:Ti(l.left,l.right)):E=m-2*(I!==0||R!==0?I+R:Ti(l.top,l.bottom))}await o({...e,availableWidth:A,availableHeight:E});const M=await i.getDimensions(s.floating);return p!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function vl(t){return Cz(t)?(t.nodeName||"").toLowerCase():"#document"}function Li(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ca(t){var e;return(e=(Cz(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Cz(t){return t instanceof Node||t instanceof Li(t).Node}function na(t){return t instanceof Element||t instanceof Li(t).Element}function go(t){return t instanceof HTMLElement||t instanceof Li(t).HTMLElement}function VD(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Li(t).ShadowRoot}function Dm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=us(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Nce(t){return["table","td","th"].includes(vl(t))}function CC(t){const e=TC(),n=us(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Fce(t){let e=nf(t);for(;go(e)&&!t1(e);){if(CC(e))return e;e=nf(e)}return null}function TC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function t1(t){return["html","body","#document"].includes(vl(t))}function us(t){return Li(t).getComputedStyle(t)}function n1(t){return na(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function nf(t){if(vl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||VD(t)&&t.host||ca(t);return VD(e)?e.host:e}function Tz(t){const e=nf(t);return t1(e)?t.ownerDocument?t.ownerDocument.body:t.body:go(e)&&Dm(e)?e:Tz(e)}function Ny(t,e){var n;e===void 0&&(e=[]);const r=Tz(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Li(r);return i?e.concat(s,s.visualViewport||[],Dm(r)?r:[]):e.concat(r,Ny(r))}function Rz(t){const e=us(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=go(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Dy(n)!==s||Dy(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function RC(t){return na(t)?t:t.contextElement}function Bd(t){const e=RC(t);if(!go(e))return gl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Rz(e);let o=(s?Dy(n.width):n.width)/r,a=(s?Dy(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Uce=gl(0);function Pz(t){const e=Li(t);return!TC()||!e.visualViewport?Uce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kce(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Li(t)?!1:e}function Gc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=RC(t);let o=gl(1);e&&(r?na(r)&&(o=Bd(r)):o=Bd(t));const a=kce(s,n,r)?Pz(s):gl(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const p=Li(s),m=r&&na(r)?Li(r):r;let v=p.frameElement;for(;v&&r&&m!==p;){const y=Bd(v),x=v.getBoundingClientRect(),g=us(v),_=x.left+(v.clientLeft+parseFloat(g.paddingLeft))*y.x,E=x.top+(v.clientTop+parseFloat(g.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=_,c+=E,v=Li(v).frameElement}}return Oy({width:u,height:d,x:l,y:c})}function zce(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=go(n),s=ca(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=gl(1);const l=gl(0);if((i||!i&&r!=="fixed")&&((vl(n)!=="body"||Dm(s))&&(o=n1(n)),go(n))){const c=Gc(n);a=Bd(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function Hce(t){return Array.from(t.getClientRects())}function Iz(t){return Gc(ca(t)).left+n1(t).scrollLeft}function Gce(t){const e=ca(t),n=n1(t),r=t.ownerDocument.body,i=Ti(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ti(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Iz(t);const a=-n.scrollTop;return us(r).direction==="rtl"&&(o+=Ti(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function $ce(t,e){const n=Li(t),r=ca(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=TC();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Vce(t,e){const n=Gc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=go(t)?Bd(t):gl(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function WD(t,e,n){let r;if(e==="viewport")r=$ce(t,n);else if(e==="document")r=Gce(ca(t));else if(na(e))r=Vce(e,n);else{const i=Pz(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Oy(r)}function Bz(t,e){const n=nf(t);return n===e||!na(n)||t1(n)?!1:us(n).position==="fixed"||Bz(n,e)}function Wce(t,e){const n=e.get(t);if(n)return n;let r=Ny(t).filter(a=>na(a)&&vl(a)!=="body"),i=null;const s=us(t).position==="fixed";let o=s?nf(t):t;for(;na(o)&&!t1(o);){const a=us(o),l=CC(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Dm(o)&&!l&&Bz(t,o))?r=r.filter(u=>u!==o):i=a,o=nf(o)}return e.set(t,r),r}function jce(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Wce(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=WD(e,u,i);return c.top=Ti(d.top,c.top),c.right=ml(d.right,c.right),c.bottom=ml(d.bottom,c.bottom),c.left=Ti(d.left,c.left),c},WD(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Xce(t){return Rz(t)}function Jce(t,e,n){const r=go(e),i=ca(e),s=n==="fixed",o=Gc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=gl(0);if(r||!r&&!s)if((vl(e)!=="body"||Dm(i))&&(a=n1(e)),r){const c=Gc(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=Iz(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function jD(t,e){return!go(t)||us(t).position==="fixed"?null:e?e(t):t.offsetParent}function Dz(t,e){const n=Li(t);if(!go(t))return n;let r=jD(t,e);for(;r&&Nce(r)&&us(r).position==="static";)r=jD(r,e);return r&&(vl(r)==="html"||vl(r)==="body"&&us(r).position==="static"&&!CC(r))?n:r||Fce(t)||n}const Kce=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||Dz,s=this.getDimensions;return{reference:Jce(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function Yce(t){return us(t).direction==="rtl"}const Qce={convertOffsetParentRelativeRectToViewportRelativeRect:zce,getDocumentElement:ca,getClippingRect:jce,getOffsetParent:Dz,getElementRects:Kce,getClientRects:Hce,getDimensions:Xce,getScale:Bd,isElement:na,isRTL:Yce};function qce(t,e){let n=null,r;const i=ca(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:p}=t.getBoundingClientRect();if(a||e(),!d||!p)return;const m=d0(u),v=d0(i.clientWidth-(c+d)),y=d0(i.clientHeight-(u+p)),x=d0(c),_={rootMargin:-m+"px "+-v+"px "+-y+"px "+-x+"px",threshold:Ti(0,ml(1,l))||1};let E=!0;function A(M){const T=M[0].intersectionRatio;if(T!==l){if(!E)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}E=!1}try{n=new IntersectionObserver(A,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(A,_)}n.observe(t)}return o(!0),s}function Zce(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=RC(t),u=i||s?[...c?Ny(c):[],...Ny(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const d=c&&a?qce(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[_]=g;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let v,y=l?Gc(t):null;l&&x();function x(){const g=Gc(t);y&&(g.x!==y.x||g.y!==y.y||g.width!==y.width||g.height!==y.height)&&n(),y=g,v=requestAnimationFrame(x)}return n(),()=>{u.forEach(g=>{i&&g.removeEventListener("scroll",n),s&&g.removeEventListener("resize",n)}),d&&d(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const eue=(t,e,n)=>{const r=new Map,i={platform:Qce,...n},s={...i.platform,_c:r};return Tce(t,e,{...i,platform:s})},tue=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?HD({element:r.current,padding:i}).fn(n):{}:r?HD({element:r,padding:i}).fn(n):{}}}};var F0=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Fy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Fy(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Fy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Lz(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function XD(t,e){const n=Lz(t);return Math.round(e*n)/n}function JD(t){const e=S.useRef(t);return F0(()=>{e.current=t}),e}function nue(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=S.useState(r);Fy(p,r)||m(r);const[v,y]=S.useState(null),[x,g]=S.useState(null),_=S.useCallback(Q=>{Q!=T.current&&(T.current=Q,y(Q))},[y]),E=S.useCallback(Q=>{Q!==P.current&&(P.current=Q,g(Q))},[g]),A=s||v,M=o||x,T=S.useRef(null),P=S.useRef(null),I=S.useRef(u),R=JD(l),D=JD(i),F=S.useCallback(()=>{if(!T.current||!P.current)return;const Q={placement:e,strategy:n,middleware:p};D.current&&(Q.platform=D.current),eue(T.current,P.current,Q).then(Z=>{const U={...Z,isPositioned:!0};X.current&&!Fy(I.current,U)&&(I.current=U,vo.flushSync(()=>{d(U)}))})},[p,e,n,D]);F0(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(Q=>({...Q,isPositioned:!1})))},[c]);const X=S.useRef(!1);F0(()=>(X.current=!0,()=>{X.current=!1}),[]),F0(()=>{if(A&&(T.current=A),M&&(P.current=M),A&&M){if(R.current)return R.current(A,M,F);F()}},[A,M,F,R]);const z=S.useMemo(()=>({reference:T,floating:P,setReference:_,setFloating:E}),[_,E]),V=S.useMemo(()=>({reference:A,floating:M}),[A,M]),H=S.useMemo(()=>{const Q={position:n,left:0,top:0};if(!V.floating)return Q;const Z=XD(V.floating,u.x),U=XD(V.floating,u.y);return a?{...Q,transform:"translate("+Z+"px, "+U+"px)",...Lz(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:U}},[n,a,V.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:F,refs:z,elements:V,floatingStyles:H}),[u,F,z,V,H])}const Oz=S.forwardRef((t,e)=>{const{children:n,...r}=t,i=S.Children.toArray(n),s=i.find(iue);if(s){const o=s.props.children,a=i.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return S.createElement(UA,Re({},r,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,a):null)}return S.createElement(UA,Re({},r,{ref:e}),n)});Oz.displayName="Slot";const UA=S.forwardRef((t,e)=>{const{children:n,...r}=t;return S.isValidElement(n)?S.cloneElement(n,{...sue(r,n.props),ref:e?bz(e,n.ref):n.ref}):S.Children.count(n)>1?S.Children.only(null):null});UA.displayName="SlotClone";const rue=({children:t})=>S.createElement(S.Fragment,null,t);function iue(t){return S.isValidElement(t)&&t.type===rue}function sue(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const oue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],r1=oue.reduce((t,e)=>{const n=S.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Oz:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(a,Re({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function aue(t,e){t&&vo.flushSync(()=>t.dispatchEvent(e))}const Wp=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{};function lue(t){const[e,n]=S.useState(void 0);return Wp(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const Nz="Popper",[Fz,Uz]=Az(Nz),[cue,kz]=Fz(Nz),uue=t=>{const{__scopePopper:e,children:n}=t,[r,i]=S.useState(null);return S.createElement(cue,{scope:e,anchor:r,onAnchorChange:i},n)},due="PopperAnchor",fue=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=kz(due,n),o=S.useRef(null),a=Bm(e,o);return S.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:S.createElement(r1.div,Re({},i,{ref:a}))}),zz="PopperContent",[hue,Mde]=Fz(zz),pue=S.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:p=0,align:m="center",alignOffset:v=0,arrowPadding:y=0,collisionBoundary:x=[],collisionPadding:g=0,sticky:_="partial",hideWhenDetached:E=!1,avoidCollisions:A=!0,onPlaced:M,...T}=t,P=kz(zz,u),[I,R]=S.useState(null),D=Bm(e,fe=>R(fe)),[F,X]=S.useState(null),z=lue(F),V=(n=z==null?void 0:z.width)!==null&&n!==void 0?n:0,H=(r=z==null?void 0:z.height)!==null&&r!==void 0?r:0,Q=d+(m!=="center"?"-"+m:""),Z=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},U=Array.isArray(x)?x:[x],N=U.length>0,G={padding:Z,boundary:U.filter(mue),altBoundary:N},{refs:ne,floatingStyles:J,placement:ee,isPositioned:te,middlewareData:ye}=nue({strategy:"fixed",placement:Q,whileElementsMounted:Zce,elements:{reference:P.anchor},middleware:[Bce({mainAxis:p+H,alignmentAxis:v}),A&&Dce({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?Lce():void 0,...G}),A&&Rce({...G}),Oce({...G,apply:({elements:fe,rects:Le,availableWidth:Be,availableHeight:Ue})=>{const{width:Ke,height:ke}=Le.reference,Ye=fe.floating.style;Ye.setProperty("--radix-popper-available-width",`${Be}px`),Ye.setProperty("--radix-popper-available-height",`${Ue}px`),Ye.setProperty("--radix-popper-anchor-width",`${Ke}px`),Ye.setProperty("--radix-popper-anchor-height",`${ke}px`)}}),F&&tue({element:F,padding:y}),gue({arrowWidth:V,arrowHeight:H}),E&&Pce({strategy:"referenceHidden"})]}),[Ae,K]=Hz(ee),Ge=Ef(M);Wp(()=>{te&&(Ge==null||Ge())},[te,Ge]);const We=(i=ye.arrow)===null||i===void 0?void 0:i.x,Se=(s=ye.arrow)===null||s===void 0?void 0:s.y,Me=((o=ye.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[me,re]=S.useState();return Wp(()=>{I&&re(window.getComputedStyle(I).zIndex)},[I]),S.createElement("div",{ref:ne.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:te?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,["--radix-popper-transform-origin"]:[(a=ye.transformOrigin)===null||a===void 0?void 0:a.x,(l=ye.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},S.createElement(hue,{scope:u,placedSide:Ae,onArrowChange:X,arrowX:We,arrowY:Se,shouldHideArrow:Me},S.createElement(r1.div,Re({"data-side":Ae,"data-align":K},T,{ref:D,style:{...T.style,animation:te?void 0:"none",opacity:(c=ye.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function mue(t){return t!==null}const gue=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,p=d?0:t.arrowWidth,m=d?0:t.arrowHeight,[v,y]=Hz(a),x={start:"0%",center:"50%",end:"100%"}[y],g=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+p/2,_=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let E="",A="";return v==="bottom"?(E=d?x:`${g}px`,A=`${-m}px`):v==="top"?(E=d?x:`${g}px`,A=`${l.floating.height+m}px`):v==="right"?(E=`${-m}px`,A=d?x:`${_}px`):v==="left"&&(E=`${l.floating.width+m}px`,A=d?x:`${_}px`),{data:{x:E,y:A}}}});function Hz(t){const[e,n="center"]=t.split("-");return[e,n]}const vue=uue,yue=fue,xue=pue;function _ue(t,e){return S.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const Gz=t=>{const{present:e,children:n}=t,r=Sue(e),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),s=Bm(r.ref,i.ref);return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};Gz.displayName="Presence";function Sue(t){const[e,n]=S.useState(),r=S.useRef({}),i=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=_ue(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=f0(r.current);s.current=a==="mounted"?c:"none"},[a]),Wp(()=>{const c=r.current,u=i.current;if(u!==t){const p=s.current,m=f0(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Wp(()=>{if(e){const c=d=>{const m=f0(r.current).includes(d.animationName);d.target===e&&m&&vo.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=f0(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function f0(t){return(t==null?void 0:t.animationName)||"none"}function wue(t,e=globalThis==null?void 0:globalThis.document){const n=Ef(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const kA="dismissableLayer.update",Eue="dismissableLayer.pointerDownOutside",Aue="dismissableLayer.focusOutside";let KD;const bue=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mue=S.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=S.useContext(bue),[d,p]=S.useState(null),m=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=S.useState({}),y=Bm(e,I=>p(I)),x=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(g),E=d?x.indexOf(d):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,M=E>=_,T=Cue(I=>{const R=I.target,D=[...u.branches].some(F=>F.contains(R));!M||D||(s==null||s(I),a==null||a(I),I.defaultPrevented||l==null||l())},m),P=Tue(I=>{const R=I.target;[...u.branches].some(F=>F.contains(R))||(o==null||o(I),a==null||a(I),I.defaultPrevented||l==null||l())},m);return wue(I=>{E===u.layers.size-1&&(i==null||i(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},m),S.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(KD=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),YD(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=KD)}},[d,m,r,u]),S.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),YD())},[d,u]),S.useEffect(()=>{const I=()=>v({});return document.addEventListener(kA,I),()=>document.removeEventListener(kA,I)},[]),S.createElement(r1.div,Re({},c,{ref:y,style:{pointerEvents:A?M?"auto":"none":void 0,...t.style},onFocusCapture:ss(t.onFocusCapture,P.onFocusCapture),onBlurCapture:ss(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:ss(t.onPointerDownCapture,T.onPointerDownCapture)}))});function Cue(t,e=globalThis==null?void 0:globalThis.document){const n=Ef(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){$z(Eue,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Tue(t,e=globalThis==null?void 0:globalThis.document){const n=Ef(t),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&$z(Aue,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function YD(){const t=new CustomEvent(kA);document.dispatchEvent(t)}function $z(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?aue(i,s):i.dispatchEvent(s)}let lw;const Vz="HoverCard",[Wz,Cde]=Az(Vz,[Uz]),PC=Uz(),[Rue,IC]=Wz(Vz),Pue=t=>{const{__scopeHoverCard:e,children:n,open:r,defaultOpen:i,onOpenChange:s,openDelay:o=700,closeDelay:a=300}=t,l=PC(e),c=S.useRef(0),u=S.useRef(0),d=S.useRef(!1),p=S.useRef(!1),[m=!1,v]=vce({prop:r,defaultProp:i,onChange:s}),y=S.useCallback(()=>{clearTimeout(u.current),c.current=window.setTimeout(()=>v(!0),o)},[o,v]),x=S.useCallback(()=>{clearTimeout(c.current),!d.current&&!p.current&&(u.current=window.setTimeout(()=>v(!1),a))},[a,v]),g=S.useCallback(()=>v(!1),[v]);return S.useEffect(()=>()=>{clearTimeout(c.current),clearTimeout(u.current)},[]),S.createElement(Rue,{scope:e,open:m,onOpenChange:v,onOpen:y,onClose:x,onDismiss:g,hasSelectionRef:d,isPointerDownOnContentRef:p},S.createElement(vue,l,n))},Iue="HoverCardTrigger",Bue=S.forwardRef((t,e)=>{const{__scopeHoverCard:n,...r}=t,i=IC(Iue,n),s=PC(n);return S.createElement(yue,Re({asChild:!0},s),S.createElement(r1.a,Re({"data-state":i.open?"open":"closed"},r,{ref:e,onPointerEnter:ss(t.onPointerEnter,Uy(i.onOpen)),onPointerLeave:ss(t.onPointerLeave,Uy(i.onClose)),onFocus:ss(t.onFocus,i.onOpen),onBlur:ss(t.onBlur,i.onClose),onTouchStart:ss(t.onTouchStart,o=>o.preventDefault())})))}),Due="HoverCardPortal",[Tde,Lue]=Wz(Due,{forceMount:void 0}),zA="HoverCardContent",Oue=S.forwardRef((t,e)=>{const n=Lue(zA,t.__scopeHoverCard),{forceMount:r=n.forceMount,...i}=t,s=IC(zA,t.__scopeHoverCard);return S.createElement(Gz,{present:r||s.open},S.createElement(Nue,Re({"data-state":s.open?"open":"closed"},i,{onPointerEnter:ss(t.onPointerEnter,Uy(s.onOpen)),onPointerLeave:ss(t.onPointerLeave,Uy(s.onClose)),ref:e})))}),Nue=S.forwardRef((t,e)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,...a}=t,l=IC(zA,n),c=PC(n),u=S.useRef(null),d=Bm(e,u),[p,m]=S.useState(!1);return S.useEffect(()=>{if(p){const v=document.body;return lw=v.style.userSelect||v.style.webkitUserSelect,v.style.userSelect="none",v.style.webkitUserSelect="none",()=>{v.style.userSelect=lw,v.style.webkitUserSelect=lw}}},[p]),S.useEffect(()=>{if(u.current){const v=()=>{m(!1),l.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var y;((y=document.getSelection())===null||y===void 0?void 0:y.toString())!==""&&(l.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",v),()=>{document.removeEventListener("pointerup",v),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!1}}},[l.isPointerDownOnContentRef,l.hasSelectionRef]),S.useEffect(()=>{u.current&&Fue(u.current).forEach(y=>y.setAttribute("tabindex","-1"))}),S.createElement(Mue,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:ss(s,v=>{v.preventDefault()}),onDismiss:l.onDismiss},S.createElement(xue,Re({},c,a,{onPointerDown:ss(a.onPointerDown,v=>{v.currentTarget.contains(v.target)&&m(!0),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!0}),ref:d,style:{...a.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))});function Uy(t){return e=>e.pointerType==="touch"?void 0:t()}function Fue(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}const Uue=Pue,kue=Bue,jz=Oue,zue=Uue,Hue=kue,Xz=S.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>L.jsx(jz,{ref:i,align:e,sideOffset:n,className:Pt("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));Xz.displayName=jz.displayName;const Gue=({title:t})=>{const[e,n,r,i,s,o,a,l]=gm(c=>[c.placement,c.cableColor,c.mountingKit,c.setPlacement,c.setCableColor,c.setMountingKit,c.tubeMatching,c.setTubeMatching]);return L.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 w-[300px]",children:[L.jsxs("div",{className:"flex justify-between items-center w-full",children:[L.jsx("h1",{className:"text-xl font-bold capitalize self-start",children:t}),L.jsxs(zue,{children:[L.jsx(Hue,{children:L.jsx(NJ,{width:16,height:16})}),L.jsxs(Xz,{children:[t==="mounting kit"&&"Wall mounting kit will let you place your sign on a wall but youll have to drill some holes.",t==="remote control"&&"Free remote control and dimmer are included with each package.",t==="placement"&&"P65 rating means that the enclosure can only provide protection against low pressure (6.3mm) water jets. Protected from total dust ingress. Protected from low-pressure water jets from any direction. ",t==="cable color"&&"We include 2m cable of chosen color with each sign."]})]})]}),L.jsx("div",{className:"overflow-hidden w-52 h-28 mb-5 object-center",children:L.jsx("img",{className:"object-cover object-center ",src:window.pluginVars.pluginUrl+"templates/dist/"+t.replace(" ","-")+".jpg",alt:t})}),t==="placement"&&L.jsx("div",{className:"flex flex-col gap-3",children:L.jsxs("div",{className:"flex gap-3",children:[L.jsx(hr,{className:e==="outdoor"&&"bg-primary-foreground",onClick:()=>i("indoor"),size:"sm",children:"Indoors"}),L.jsxs("div",{className:"flex flex-col justify-center items-center gap-1",children:[L.jsx(hr,{className:e!=="outdoor"&&"bg-primary-foreground",onClick:()=>i("outdoor"),size:"sm",children:"Outdoors"}),e==="outdoor"&&L.jsx("p",{className:"text-primarypink font-bold",children:"+10$"})]})]})}),t==="tube color"&&L.jsxs("div",{className:"flex gap-3 ",children:[L.jsx(hr,{className:Pt(a&&"bg-primary-foreground","text-sm"),onClick:()=>l(!1),size:"sm",children:"White"}),L.jsx(hr,{className:!a&&"bg-primary-foreground",onClick:()=>l(!0),size:"sm",children:"Matching color"})]}),t==="cable color"&&L.jsx("div",{className:"self-start",children:L.jsx(kD,{colors:[["black","#000"],["white","#fff"],["gray","#ccc"]],currentColor:n,setColor:s})}),t==="mounting kit"&&L.jsxs("div",{className:"flex flex-col gap-3",children:[L.jsxs("div",{className:"flex gap-3",children:[L.jsx(hr,{className:r.type==="wall"&&"bg-primary-foreground",onClick:()=>o({type:"hanging",color:"black"}),size:"sm",children:"Hanging"}),L.jsx(hr,{className:r.type==="hanging"&&"bg-primary-foreground",onClick:()=>o({type:"wall",color:"black"}),size:"sm",children:"Wall mount"})]}),L.jsxs("div",{className:"flex justify-between items-center",children:[r.type==="wall"&&L.jsx(kD,{colors:[["black","#000"],["gold","#D1C271"],["gray","#A6A6A6"]],currentColor:r.color,setColor:c=>o({type:"wall",color:c})}),L.jsx("p",{className:"font-bold text-primarypink",children:r.type==="wall"&&"+10$"})]})]})]})},$ue=["placement","cable color","mounting kit","remote control","tube color"],Vue=()=>{const[t,e]=gm(s=>[s.setIsOpen,s.isOpen]),[n,r]=mf(s=>[s.setSelectedSidebar,s.setIsShown]),i=ef({opacity:e?1:0,left:e?"2vw":"90vw",config:{tension:600,friction:80}});return L.jsx(L.Fragment,{children:e&&L.jsxs(Hc.div,{style:i,className:"absolute left-[2vw] right-[2vw] top-[15vh] bottom-[5vh] z-40 bg-secondary rounded-md p-14 flex flex-col gap-5 items-center overflow-hidden",children:[L.jsx("button",{className:"absolute top-3 right-3",onClick:()=>{t(!1),n(5),r(!0)},children:L.jsx(xx,{width:24,height:24})}),L.jsx("h1",{className:"text-2xl text-primarypink font-bold",children:"Sign settings"}),L.jsx("div",{className:"flex justify-center items-center w-full h-full",children:L.jsx("div",{className:"flex gap-5 w-full  justify-center",children:$ue.map(s=>L.jsx(Gue,{title:s},s))})})]})})},Wue=({children:t})=>L.jsxs("div",{className:" w-[100%] h-[calc(100vh-65px)] overflow-hidden relative",children:[L.jsx(zK,{className:"z-10 h-full w-full",onCreated:e=>console.log(e),gl:{logarithmicDepthBuffer:!0,preserveDrawingBuffer:!0},children:t}),L.jsx(tY,{})]});function jue(){return L.jsxs("main",{className:"overflow-hidden",children:[L.jsx(QJ,{}),L.jsx(Wue,{children:L.jsx($ee,{})}),L.jsx(Vue,{}),L.jsx(mce,{}),L.jsx(dce,{}),L.jsx("div",{className:"absolute bottom-10 right-10 z-30",children:L.jsx(hce,{})})]})}cw.createRoot(document.getElementById("root")).render(L.jsx(vt.StrictMode,{children:L.jsx(jue,{})}));
